{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/Legend/support/clusterUtils.js", "../../@arcgis/core/widgets/smartMapping/support/utils.js", "../../@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js", "../../@arcgis/core/widgets/Legend/LegendViewModel.js", "../../@arcgis/core/widgets/Legend/styles/card/css.js", "../../@arcgis/core/widgets/Legend/support/styleUtils.js", "../../@arcgis/core/widgets/Legend/styles/support/utils.js", "../../@arcgis/core/widgets/Legend/styles/card/ColorRamp.js", "../../@arcgis/core/widgets/Legend/styles/support/sizeRampUtils.js", "../../@arcgis/core/widgets/Legend/styles/card/SizeRamp.js", "../../@arcgis/core/widgets/Legend/styles/support/univariateUtils.js", "../../@arcgis/core/widgets/Legend/styles/card/UnivariateAboveAndBelowRamp.js", "../../@arcgis/core/widgets/Legend/styles/card/UnivariateColorSizeRamp.js", "../../@arcgis/core/widgets/Legend/styles/card/LegendElement.js", "../../@arcgis/core/widgets/Legend/styles/card/CardView.js", "../../@arcgis/core/widgets/Legend/styles/classic/css.js", "../../@arcgis/core/widgets/Legend/styles/classic/ColorRamp.js", "../../@arcgis/core/widgets/Legend/styles/classic/SizeRamp.js", "../../@arcgis/core/widgets/Legend/styles/classic/UnivariateAboveAndBelowRamp.js", "../../@arcgis/core/widgets/Legend/styles/classic/UnivariateColorSizeRamp.js", "../../@arcgis/core/widgets/Legend/styles/classic/LegendElement.js", "../../@arcgis/core/widgets/Legend/styles/classic/ClassicView.js", "../../@arcgis/core/widgets/Legend.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../renderers/visualVariables/SizeVariable.js\";function l(l,i,s){const a=l.effectiveClusterRenderer;if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return null;const n=a.visualVariables.find((e=>\"size\"===e.type));if(!(\"stops\"in n)||!n.stops)return null;const t=n.stops.find((e=>e.useMinValue)),u=n.stops.find((e=>e.useMaxValue));if(null==t||null==u)return null;const r=s.featuresTilingScheme.getClosestInfoForScale(s.scale).level,f=n.field,o=i.getDisplayStatistics(r,f);return o?new e({field:n.field,minSize:l.clusterMinSize,minDataValue:o.minValue,maxSize:l.clusterMaxSize,maxDataValue:o.maxValue}):null}export{l as getEffectiveClusterSizeVariable};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import{formatDate as n}from\"../../../intl/date.js\";import{formatNumber as i}from\"../../../intl/number.js\";import{timelineDateFormatOptions as o}from\"../../../renderers/support/utils.js\";import e from\"../../../renderers/visualVariables/SizeVariable.js\";function r(t){return n(new Date(t),o)}function s(t){const n=2,o=Math.floor(Math.log10(Math.abs(t)))+1,e=o<4||o>6?4:o,r=1e6,s=Math.abs(t)>=r?\"compact\":\"standard\";return i(t,{notation:s,minimumSignificantDigits:n,maximumSignificantDigits:e})}function a(t,n,i){if(null==n||null==t)return[];const o=[];for(let e=-1*i;e<=i;e++)0!==e&&o.push(n+e*t);return o}function u(t){const{max:n,min:i,padding:o,pathHeight:e,pathWidth:r,stops:s}=t,a=n-i;let u,h=`M0 0 L${r} 0 `;const m=3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]],f=Math.min.apply(Math,m.map((t=>t.size))),l=Math.max(Math.abs(m[0].size-m[1].size),Math.abs(m[2].size-m[1].size));return m.reverse(),m.forEach((({size:t,value:n},s)=>{const m=Math.round((t-f)/l*100)/100,c=Math.round(e-(n-i)/a*e);u=m*r,0===u&&(u=o*r),0===s&&(h+=`L${u} 0 `),h+=`L${u} ${c} `})),h+=`L${u} ${e} L0 ${e} L0 0 Z`,h}function h(t){const{bottomValue:n,bottomWidth:i,max:o,min:e,pathHeight:r,pathWidth:s,topValue:a,topWidth:u}=t,h=u*s,m=i*s,f=o-e,l=Math.round(r-(n-e)/f*r);return`M${h} 0 L${h} ${Math.round(r-(a-e)/f*r)} L${m} ${l} L${m} ${r} L0 ${r} L0 0 Z`}function m(t){let n=t.maxSize,i=t.minSize;return n instanceof e&&(n=n.stops[0].size),i instanceof e&&(i=i.stops[0].size),[n,i]}function f(t,n,i){const o=i.length-1;if(o<0)return[];const e=i[0],r=i[o]-e,s=n-t,a=[];for(let u=1;u<o;u++){const n=(i[u]-e)/r*s+t;a.push({index:u,value:n})}return a.unshift({index:0,value:t}),a.push({index:o,value:n}),a}function l(n){return n instanceof t?n.toCss(!0):t.fromString(n??\"\").toCss(!0)}export{r as formatDateLabel,s as formatNumberLabel,a as getDeviationValues,u as getDynamicPathForSizeStops,l as getFillFromColor,h as getPathForSizeStops,m as getSizesFromVariable,f as getStopChanges};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import\"../../../intl.js\";import{addTokenParameter as s}from\"../../../kernel.js\";import i from\"../../../request.js\";import l from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import n from\"../../../core/Collection.js\";import has from\"../../../core/has.js\";import{JSONMap as a}from\"../../../core/jsonMap.js\";import o from\"../../../core/Logger.js\";import{clamp as u}from\"../../../core/mathUtils.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{on as d,watch as y,initial as h,whenOnce as m}from\"../../../core/reactiveUtils.js\";import{px2pt as p}from\"../../../core/screenUtils.js\";import{parseWhereClause as f}from\"../../../core/sql.js\";import{addQueryParameters as g}from\"../../../core/urlUtils.js\";import{property as b}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as S}from\"../../../core/accessorSupport/decorators/subclass.js\";import{OriginId as _}from\"../../../core/accessorSupport/PropertyOrigin.js\";import{EffectView as w}from\"../../../layers/effects/EffectView.js\";import{effectFunctionsFromJSON as v}from\"../../../layers/effects/jsonUtils.js\";import{getEffectiveDisplayFilter as L}from\"../../../layers/support/displayFilterUtils.js\";import{ExportImageParameters as E}from\"../../../layers/support/ExportImageParameters.js\";import{collectFields as C,collectArcadeFieldNames as I}from\"../../../layers/support/fieldUtils.js\";import{isFeatureLayer as F}from\"../../../layers/support/layerUtils.js\";import{getPixelValueRange as R}from\"../../../layers/support/rasterFormats/pixelRangeUtils.js\";import{fromJSON as V}from\"../../../renderers/support/jsonUtils.js\";import{isSupportedRenderer3D as D}from\"../../../renderers/support/rendererConversion.js\";import x from\"../../../renderers/visualVariables/SizeVariable.js\";import z from\"../../../renderers/visualVariables/support/SizeVariableLegendOptions.js\";import{updateReferenceSizeSymbol as T}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import j from\"../../../symbols/SimpleFillSymbol.js\";import O from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as P}from\"../../../symbols/support/cimSymbolUtils.js\";import{SymbolSizeDefaults as M}from\"../../../symbols/support/previewUtils.js\";import{renderSymbol as k}from\"../../../symbols/support/renderUtils.js\";import{renderColorRampPreviewHTML as A,renderDotDensityPreviewHTML as U,renderPieChartPreviewHTML as B,renderPreviewHTML as N}from\"../../../symbols/support/symbolUtils.js\";import{isVolumetricSymbol as q}from\"../../../symbols/support/utils.js\";import{getEffectiveClusterSizeVariable as $}from\"./clusterUtils.js\";import{getColorFromPointCloudStops as H,getRampStopsForPointCloud as W,getStretchRampStops as G,getRampStops as J}from\"./colorRampUtils.js\";import{getHeatmapRampStops as Q}from\"./heatmapRampUtils.js\";import{getRotationAngleForFocus as Z,getRelationshipRampElement as K}from\"./relationshipRampUtils.js\";import{getRampStops as X,realWorldMaxSize as Y,realWorldMinSize as ee}from\"./sizeRampUtils.js\";import{specialCharsLessThan as te,specialCharsGreaterThan as se,getAuthoringInfoVisualVariableByTheme as ie,getSymbolForFlowRenderer as le,getMedianColor as re,rgbImgSource as ne,getDateFormatOptions as ae}from\"./utils.js\";import{formatNumberLabel as oe}from\"../../smartMapping/support/utils.js\";import{fetchMessageBundle as ue}from\"../../../intl/messages.js\";import{substitute as ce}from\"../../../intl/substitute.js\";const de=16,ye=\"https://utility.arcgis.com/sharing/tools/legend\",he=\"esri.layers.ImageryLayer\",me=\"esri.layers.ImageryTileLayer\",pe=\"esri.layers.WCSLayer\",fe=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i,ge=new a({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\"}),be=new O({size:6,outline:{color:[128,128,128,.5],width:.5}}),Se=new j({style:\"solid\"});function _e(e){return\"flow\"===e.type}function we(e){return\"vector-field\"===e.type}function ve(e){return\"raster-colormap\"===e.type}function Le(e){return\"raster-stretch\"===e.type}function Ee(e){return\"raster-shaded-relief\"===e.type}function Ce(e){return\"esri.renderers.SimpleRenderer\"===e.declaredClass}function Ie(e){return\"esri.renderers.ClassBreaksRenderer\"===e.declaredClass}function Fe(e){return\"esri.renderers.UniqueValueRenderer\"===e.declaredClass}function Re(e){return\"esri.renderers.HeatmapRenderer\"===e.declaredClass}function Ve(e){return xe(e)||ze(e)||Te(e)||De(e)}function De(e){return\"esri.renderers.PointCloudRGBRenderer\"===e.declaredClass}function xe(e){return\"esri.renderers.PointCloudClassBreaksRenderer\"===e.declaredClass}function ze(e){return\"esri.renderers.PointCloudStretchRenderer\"===e.declaredClass}function Te(e){return\"esri.renderers.PointCloudUniqueValueRenderer\"===e.declaredClass}function je(e){return\"esri.renderers.DotDensityRenderer\"===e.declaredClass}function Oe(e){return\"esri.renderers.PieChartRenderer\"===e.declaredClass}function Pe(e,t){return Ce(e)||Ie(e)||Fe(e)||Re(e)||je(e)||Oe(e)?\"2d\"===t.type||D(e):Le(e)||ve(e)||Ee(e)||xe(e)||ze(e)||Te(e)||we(e)||_e(e)}function Me(e){return\"esri.layers.BuildingSceneLayer\"===e.declaredClass}function ke(e){return\"esri.layers.SubtypeGroupLayer\"===e.declaredClass}function Ae(e){return\"esri.layers.VoxelLayer\"===e.declaredClass}function Ue(e){return\"esri.layers.WMSLayer\"===e.declaredClass}function Be(e){return\"esri.layers.WMTSLayer\"===e.declaredClass}function Ne(e){return\"esri.layers.MapImageLayer\"===e.declaredClass}function qe(e){return\"esri.layers.TileLayer\"===e.declaredClass}function $e(e){return e.declaredClass===he}function He(e){return e.declaredClass===me}function We(e){return e.declaredClass===pe}function Ge(e){return\"stretch-ramp\"===e.type}function Je(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type}function Qe(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type&&\"above-and-below\"===t?.univariateTheme}function Ze(e){return\"sublayers\"in e}function Ke(e){return e&&\"symbol\"in e}async function Xe(e,t){const s=await ue(\"esri/widgets/Legend/t9n/Legend\");return\"previewTemplateAriaLabel\"!==e||t||(e=\"previewAriaLabel\"),ce(s[e],{label:t})}function Ye(e,t){const{field:s,field2:i,field3:l,fieldDelimiter:r,valueExpression:n}=e;if(!s)return null;const a=!(!s&&!n||!i&&!l)?t?.toString().split(r||\"\"):[t],o=s?{[s]:a?.[0]}:null;return o&&(i&&(o[i]=a?.[1]),l&&(o[l]=a?.[2])),o}const et=new O({style:\"path\",path:\"M10,5 L5,0 0,5 M5,0 L5,15\",size:15,outline:{width:1,color:[85,85,85,1]}});let tt={},st=class extends l{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new n,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange(\"ready\");this.addHandles([d((()=>this.children),\"change\",(t=>{const{added:s,removed:i}=t;s.forEach((t=>{const s=`activeLayerInfo-ready-watcher-${t.layer.uid}`;this.addHandles(y((()=>t.ready),e,h),s)})),i.forEach((e=>this.removeHandles(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(tt={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(tt=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return\"effect\"in e&&e.effect&&(t=new w,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){const e=this.layer.opacity,t=this.parent?.opacity,s=this.layer.parent,i=s&&\"uid\"in s?this._getParentLayerOpacity(s):null;return null!=t?t*e:null!=i?i*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if(\"effect\"in e&&e.effect&&Array.isArray(e.effect))return!0;if(\"featureReduction\"in e&&e.featureReduction){if(\"cluster\"===e.featureReduction.type)return!0;if(\"binning\"===e.featureReduction.type&&\"renderer\"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return\"renderer\"in e&&e.renderer?!!(\"displayFilterInfo\"in e&&e.displayFilterInfo&&Fe(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get(\"version\")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange(\"ready\");const t=Array.from(e,(e=>{if(F(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet?.features.length){const t=e.layerDefinition,s=t?.drawingInfo,i=s&&V(s.renderer),l=ge.read(t.geometryType);return i?this._getRendererLegendElements(i,{title:e.name,geometryType:l}):(o.getLogger(this).warn(\"drawingInfo not available!\"),null)}return null}));try{const e=[],s=await Promise.allSettled(t);for(const t of s)if(\"fulfilled\"===t.status)for(const s of t.value??[])e.push(s);this.legendElements=e,this.notifyChange(\"ready\")}catch(s){o.getLogger(this).warn(\"error while building legend for layer!\",s)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForTools(){const e=this.layer;if(Ae(e))this._constructLegendElementsForVoxelLayer();else if(Be(e))this._constructLegendElementsForWMTSlayer();else if(Ue(e))await this._constructLegendElementsForWMSSublayers();else if(Me(e))await this._constructLegendElementsForBuildingSceneLayer();else if(Ne(e)||qe(e)||ke(e))await this._constructLegendElementsForSublayers();else{this.removeHandles(\"imageryLayers-watcher\");let t=\"default\";if($e(e)){const s=e;t=(s?.rasterFunction?.functionName||\"default\")+\"_\"+(e.bandIds?.length?e.bandIds.join(\"\"):\"###\")}if(He(e)||\"link-chart\"===e.type)return;await this._getLegendLayers(`${e.uid}-${t}`).then((async t=>{this.legendElements=[],this.notifyChange(\"ready\");const s=t.map((async t=>{if($e(e)){const t=y((()=>[e.rasterFunction,e.bandIds]),(()=>c((async()=>{tt.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(t,\"imageryLayers-watcher\")}const s=this._generateSymbolTableElementForLegendLayer(t);s?.infos.length&&($e(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange(\"ready\")}));await Promise.allSettled(s)})).catch((e=>{o.getLogger(this).warn(\"Request to server for legend has failed!\",e)}))}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,s=t&&\"createQuery\"in t&&\"queryFeatureCount\"in t;if(!s&&!(t&&\"createQuery\"in e&&\"queryFeatureCount\"in e))return!0;await m((()=>!t.updating));const i=s?\"createQuery\"in t&&t.createQuery():\"createQuery\"in e&&e.createQuery();if(!i)return!0;i.geometry=this.view.extent;return 0!==(s?\"queryFeatureCount\"in t&&await t.queryFeatureCount(i):\"queryFeatureCount\"in e&&await e.queryFeatureCount(i))}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&\"uid\"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){return this.children.some((e=>e.ready))}_isRendererScaleDriven(e){if(\"dot-density\"===e.type)return!0;const t=\"valueExpression\"in e?e.valueExpression:null;if(fe.test(t))return!0;const s=\"visualVariables\"in e?e.visualVariables:null;return!!s?.some((e=>this._isScaleDrivenSizeVariable(e)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case\"simple\":return this._isScaleDrivenSymbol(e.symbol);case\"class-breaks\":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some((e=>this._isScaleDrivenSymbol(e.symbol)));case\"unique-value\":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some((e=>this._isScaleDrivenSymbol(e.symbol)))}return!1}_isScaleDrivenSymbol(e){if(\"cim\"===e?.type){const{primitiveOverrides:t,minScale:s,maxScale:i}=e.data,l=t?.some((e=>/\\$view\\.scale/.test(e.valueExpressionInfo?.expression||\"\")))??!1;return null!=s||null!=i||l}return!1}_isScaleDrivenSizeVariable(e){if(e&&\"size\"!==e.type)return!1;const t=e,s=t.minSize,i=t.maxSize;return!(\"object\"!=typeof s||!s||!this._isScaleDrivenSizeVariable(s))||(!(\"object\"!=typeof i||!i||!this._isScaleDrivenSizeVariable(i))||fe.test(t.valueExpression))}_isLayerScaleDriven(e){if(\"minScale\"in e&&e.minScale>0||\"maxScale\"in e&&e.maxScale>0)return!0;if(\"sublayers\"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&Ne(t)&&\"source\"in e&&e.source&&\"map-layer\"===e.source.type)for(const s of t.sourceJSON.layers??[])if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxelLayer(){this.legendElements=[],this.removeHandles(\"voxel-style-watcher\"),this.removeHandles(\"voxel-current-variable\");const e=this.layer;this.addHandles(y((()=>e.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-current-variable\"),this.addHandles(y((()=>e.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-style-watcher\");const t=e.getVariableStyle(null),s=[];if(t)if(t.uniqueValues?.length){const e=[];t.uniqueValues.forEach((t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new j({color:t.color,outline:null})})})),e.length&&s.push({type:\"symbol-table\",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:i}=t.transferFunction,l=e.toArray().reverse(),r=i.map(((e,t)=>`${0===t?te:se} ${oe(e)}`)).reverse(),n=l.map((e=>({color:e.color,value:null,label:null})));n[0].label=r[0],n[n.length-1].label=r[1],s.push({type:\"color-ramp\",title:t.label,infos:n,preview:A(l.map((e=>e.color)),{ariaLabel:await Xe(\"previewColorRampAriaLabel\")})})}await this._generatePreviewsForLegendElements(s,{opacity:e.opacity}),this.legendElements=s,this.notifyChange(\"ready\")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles(\"wmts-activeLayer-watcher\");const e=this.layer.activeLayer;this.addHandles(y((()=>{const{layer:e}=this;return e&&\"activeLayer\"in e&&e.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),\"wmts-activeLayer-watcher\");const t=e.styleId?e.styles?.find((({id:t})=>t===e.styleId))?.legendUrl:void 0;t&&(this.legendElements=[{type:\"symbol-table\",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange(\"ready\")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles(\"wms-sublayers-watcher\");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(y((()=>{const{layer:e}=this;return e&&\"sublayers\"in e&&e.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange(\"ready\")}async _generateLegendElementsForWMSSublayers(e,t){const s=this.layer,i=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\");const l=this.sublayerIds?.map((e=>s.findSublayerById(e)))?.filter(r)??[],n=l.length?l:e.toArray();for(const r of n){const e=y((()=>[r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(e,\"wms-sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e?.infos.length&&i.unshift(e)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:\"symbol-table\",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){let s=e.legendUrl;if(!s)return;const l={type:\"symbol-table\",title:e.title||e.name||String(e.id??\"\"),infos:[]};t&&(s=g(s,t));let r=null;const n=e.layer?.opacity;try{r=(await i(s,{responseType:\"image\"})).data,r&&(r.style.opacity=n)}catch{}return l.infos.push({src:s,preview:r,opacity:n}),l}_getLegendLayers(e,t){const s=tt&&tt[e];return s?Promise.resolve(s):this._legendRequest(t).then((t=>{const s=t.layers;return tt[e]=s,s}))}_legendRequest(e){const t=this.layer;let s={f:\"json\",dynamicLayers:e};if($e(t)){const e=t.exportImageServiceParameters.rasterFunction;if(e&&(s.renderingRule=JSON.stringify(e.functionDefinition?.toJSON()||e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:i,customParameters:l}=t;s={raster:e,viewId:i,...s,...l}}}let l=t.url.replace(/(\\/)+$/,\"\");if(\"version\"in t&&+t.version>=10.01){const e=l.indexOf(\"?\");e>-1?l=l.slice(0,e)+\"/legend\"+l.slice(e):l+=\"/legend\"}else{const e=l.toLowerCase().indexOf(\"/rest/\"),t=-1===e?l:l.slice(0,e)+l.slice(e+5);l=ye+\"?soapUrl=\"+encodeURI(t)+\"&returnbytes=true\"}return i(l,{query:s}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;this.addHandles(y((()=>e.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");const i=e.toArray();for(const l of i){const e=y((()=>[\"renderer\"in l&&l.renderer,l.opacity,l.title,l.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||l.visible){const e=null!=l?.opacity?l.opacity:null,i=null!=e?e*t:t;if(\"building-group\"===l.type){const e={type:\"symbol-table\",title:l.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(l.sublayers,i);e.infos.push(...t),s=[e,...s]}else if(l.renderer){s=[...await this._getRendererLegendElements(l.renderer,{title:l.title,opacity:i,sublayer:l}),...s]}}}return s.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;if(Ne(e)||qe(e)||ke(e)){this.addHandles(y((()=>e.sublayers),(()=>this._constructLegendElementsForSublayers)),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}}async _generateLegendElementsForSublayers(e,t,s){const i=this.layer;let l=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForSublayers())),\"sublayers-watcher\");let n=e.toArray();!s&&this.sublayerIds&&this.sublayerIds.length&&(n=ke(i)?this.sublayerIds.map((e=>i.findSublayerForSubtypeCode(e))).filter(r):this.sublayerIds.map((e=>i.findSublayerById(e))).filter(r));for(const r of n){const e=y((()=>[r.renderer,r.opacity,r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r)){const e=null!=r?.opacity?r.opacity:null,i=null!=e?e*t:t,n=!Ze(r)||r.originIdOf(\"renderer\")>_.SERVICE&&!r.sublayers;if(r.renderer&&n){await r.load();l=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:i,sublayer:r}),...l]}else if(Ze(r)){const e=await this._generateSymbolTableElementForSublayer(r,i,s);e&&l.unshift(e)}}}return l.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const t=this.layer,i=e.source;let l=null;if(!(!i||\"map-layer\"===i.type&&i.mapLayerId===e.id&&(!i.gdbVersion||i.gdbVersion===(\"gdbVersion\"in t&&t.gdbVersion)))||e.originIdOf(\"renderer\")>_.SERVICE||e.originIdOf(\"labelingInfo\")>_.SERVICE||e.originIdOf(\"labelsVisible\")>_.SERVICE){const e=new E({layer:this.layer});l=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const r=l||`${t.uid}-default`;(await this._getLegendLayers(r,l)).forEach((e=>s.set(e.layerId,e)))}const i=s.get(e.id);if((!i||i?.subLayerIds&&i.defaultVisibility)&&e.sublayers){const i=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return{type:\"symbol-table\",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendLayer(i,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const i=t?.renderer;let l=t?.title||e.layerName;if(i&&(!t||t?.originIdOf(\"renderer\")>_.SERVICE)){const e=t?.title||this._getRendererTitle(i,t);e&&(l&&\"string\"!=typeof e&&\"title\"in e&&(e.title=l),l=e)}const r={type:\"symbol-table\",title:l,legendType:e.legendType||null,infos:[]},n=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach((t=>{const i={type:\"symbol-table\",title:t.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(n.filter((e=>e.groupId===t.id)),e.layerId,s)};i.infos?.length>0&&r.infos.push(i)})):r.infos=this._generateSymbolTableElementInfosForLegendLayer(n,e.layerId,s),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map((e=>{let l=e.url;if(e.imageData&&e.imageData.length>0)l=`data:image/png;base64,${e.imageData}`;else{if(0===l.indexOf(\"http\"))return null;l=s(`${this.layer.url}/${t}/images/${l}`)}return{label:e.label,src:l,opacity:i??this.opacity,width:e.width,height:e.height}})).filter(r)}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return!(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let i=null,l=null,r=!0;return!s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(i=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(l=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(i=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,l=Math.max(s.maxScale,e.maxScale)),(i>0&&i<this.scale||l>this.scale)&&(r=!1),r}_sanitizeLegendForSublayer(e,t){if(\"version\"in this.layer&&+this.layer.version<10.1||0===e.length)return e;const s=t.renderer,i=e.some((e=>e.values));let l=0,r=null;return i&&e.some(((e,t)=>(e.values||(l=t,r=e,r.label||(r.label=\"others\")),null!=r))),s?\"unique-value\"===s.type?r&&(e.splice(l,1),e.push(r)):\"class-breaks\"===s.type&&(r&&e.splice(l,1),s.legendOptions?.order||e.reverse(),r&&e.push(r)):r&&(e.splice(l,1),e.push(r)),e}async _getRendererLegendElements(e,t={}){if(!Pe(e,this.view))return o.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(Ve(e))return this._constructPointCloudRendererLegendElements(e,t);if(je(e))return this._constructDotDensityRendererLegendElements(e);const s=await this._loadRenderer(e);return Oe(s)?this._constructPieChartRendererLegendElements(s):this._constructRendererLegendElements(s,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return\"binning\"===e.type?t=e.renderer:\"cluster\"===e.type&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??\"\"}async _constructPointCloudRendererLegendElements(e,t={}){const s=t.title,i=[];let l=null,r=null;if(xe(e))l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{l.infos.unshift({label:e.label||e.minValue+\" - \"+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(be,e.color)})}));else if(ze(e)){const t=e.stops;let i=null;if(t?.length&&(1===t.length&&(i=t[0].color),!i)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){i=H(e+(s-e)/2,t)}}l={type:\"symbol-table\",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(be,i||be.color)}]};const n=W(e.stops??[])??[];r={type:\"color-ramp\",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:A(n.map((e=>e.color)),{ariaLabel:await Xe(\"previewColorRampAriaLabel\")})}}else Te(e)&&(l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach((e=>{l.infos.push({label:e.label||e.values.join(\", \"),value:e.values.join(\", \"),symbol:this._getAppliedCloneSymbol(be,e.color)})})));return l?.infos.length&&i.push(l),r?.infos.length&&i.push(r),await this._generatePreviewsForLegendElements(i,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!e.colorModulation}}),i}async _getElementInfoForDotDensity(e,t){const{color:s,label:i,valueExpressionTitle:l}=t,{backgroundColor:r,outline:n,dotSize:a}=e,o=this.effectList,u=o?.effects.map((e=>e.toJSON())),c=v(u),d=await Xe(\"previewTemplateAriaLabel\",i||l),y=a+\"-\"+s+\"-\"+r+\"-\"+(n&&JSON.stringify(n.toJSON()))+\"-\"+c,h=this._dotDensityUrlCache,m=h.has(y)?h.get(y):U(e,s,{ariaLabel:d});h.set(y,m);const p={shape:{type:\"image\",x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]},f=k([[p]],[m.width,m.height],{effectView:this.effectList,ariaLabel:d});return{opacity:1,src:m.src,preview:f,width:m.width,height:m.height}}async _constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions?.unit,i={type:\"symbol-table\",title:{value:t&&Math.round(t),unit:s||\"\"},infos:[]};for(const l of e.attributes){const t=await this._getElementInfoForDotDensity(e,l);t.label=l.label||l.valueExpressionTitle||l.field,i.infos.push(t)}return[i]}async _constructPieChartRendererLegendElements(e){const t=[];let s=null;const i=e.outline;e.attributes.forEach((e=>{const s=new O({color:e.color,outline:i}),l=e.label||e.valueExpressionTitle||e.field;t.push({label:l,symbol:s})}));const l=t.length?[...t]:[];if(e.othersCategory?.color&&0!==e.othersCategory?.threshold){const l=new O({color:e.othersCategory.color,outline:i});s=e.othersCategory.label||\"Other\",t.push({label:s,symbol:l})}if(e.defaultColor?.a){const s=new O({color:e.defaultColor,outline:i});t.push({label:e.defaultLabel,symbol:s})}const r=await this._getVisualVariableLegendElements(e,this.layer)||[];if(t.length){r.unshift({type:\"symbol-table\",title:null,infos:t});const n=l.filter((e=>e.label!==s)).map((e=>e.symbol.color)).filter(Boolean),a=B(n,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,effectList:this.effectList,outline:i,ariaLabel:await Xe(\"previewPieChartAriaLabel\")});r.unshift({type:\"pie-chart-ramp\",title:this._getRendererTitle(e,this.layer),infos:t,preview:a})}return await this._generatePreviewsForLegendElements(r,{opacity:this.layer.opacity,effectView:this.effectList}),r}async _getWhereClause(e,t,s){const i=await f(e,s),l=new Set,{field:r,field2:n,field3:a}=t;C(l,s,[r,n,a]),I(l,s,t.valueExpression);const o=new Set(Array.from(l,(e=>e.toLowerCase()))),u=i?.fieldNames.map((e=>e.toLowerCase()));return u?.some((e=>!o.has(e)))?null:i}async _processDefinitionExpression(e,t){if(!(\"definitionExpression\"in e))return;const s=e.definitionExpression;s&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==s&&(this._layerDefinitionExpressionClause=await this._getWhereClause(s,t,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=s}async _processDisplayFilter(e,t){if(!(\"displayFilterInfo\"in e))return;const s=e.displayFilterInfo?L(e.displayFilterInfo,this.view):null;return s?.where?this._layerDisplayFilterId!==s?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(s.where,t,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=s?.id,s}async _constructRendererLegendElements(e,t={}){const{title:s,sublayer:i}=t,l=i||this.layer,r=ie(e,\"reference-size\"),n=ie(e,\"spike\");let a=null;Fe(e)&&(await this._processDefinitionExpression(l,e),a=await this._processDisplayFilter(l,e)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const o=await this._getVisualVariableLegendElements(e,l)||[],u={type:\"symbol-table\",title:s||this._getRendererTitle(e,l),infos:[]};let c=null,d=!1;const y=new Set;if(_e(e)&&!this._hasSizeRamp){const t=await le(e);u.infos.push({label:null,symbol:t})}else if(Je(e)){let t=s;const i=Qe(e)?\"univariate-above-and-below-ramp\":\"univariate-color-size-ramp\",l=o.findIndex((e=>\"color-ramp\"===e.type)),r=-1!==l?o.splice(l,1)[0]:null,n=o.findIndex((e=>\"size-ramp\"===e.type)),a=-1!==n?o.splice(n,1)[0]:null,u=[];r&&(t=r.title,u.push(r)),a&&(t=a.title,u.push(a)),u.length>0&&o.push({type:i,title:t,infos:u})}else if(Re(e)){const t=Q(e);o.push({type:\"heatmap-ramp\",title:s||this._getRendererTitle(e,l),infos:t,preview:A(t.map((e=>e.color)),{effectList:this.effectList,ariaLabel:await Xe(\"previewColorRampAriaLabel\")})})}else if(Fe(e)){const t=e.authoringInfo;if(t&&\"relationship\"===t.type){const{numClasses:s,field1:i,field2:r}=t,n=t.focus;if(s&&i&&r){const t=[i,r];let a=Z(n)||0;for(const e of t){const{field:t,normalizationField:s,label:i}=e,r=i||{field:this._getFieldAlias(t,l),normField:s&&this._getFieldAlias(s,l)},n=et.clone();n.angle=a,u.infos.push({label:r,symbol:n}),y.add(n),a+=90}const c=K({focus:n,numClasses:s,infos:e.uniqueValueInfos??[]});o.unshift(c)}}else if($e(this.layer)||He(this.layer))e.uniqueValueInfos?.forEach((t=>{t.symbol&&this._checkClausesForUVR(e,t.value)&&u.infos.push({label:t.label||t.value,value:t.value,symbol:t.symbol})}));else{const{field:t,field2:i,field3:n,fieldDelimiter:o,valueExpression:c,defaultSymbol:y}=e,h=!(!t&&!c||!i&&!n),m=this._layerDisplayFilterClause?a?.title:null,p=[];if(e.uniqueValueGroups?.forEach((s=>{const a={type:\"symbol-table\",title:m||s.heading,infos:[]};s.classes?.forEach((s=>{const{symbol:u,values:d}=s;if(u){const y=[],m=[];for(const e of d??[]){const{value:s,value2:r,value3:a}=e,u=[],d=[];(t||c)&&(u.push(s),d.push(this._getDomainName(t,s,l))),i&&(u.push(r),d.push(this._getDomainName(i,r,l))),n&&(u.push(a),d.push(this._getDomainName(n,a,l))),y.push(h?u.join(o||\"\"):u[0]),m.push(d.join(\" - \"))}const p=y.join(\", \");let f=s.label;if(!f){const e=m.filter(Boolean);f=e.length?e.join(\", \"):p}const g=u.clone();\"cim\"===g.type&&r&&T(g,{innerDotSize:.5*de,outerRingSize:de}),y.some((t=>this._checkClausesForUVR(e,t)))&&a.infos.push({label:f,value:p,symbol:g})}})),a.infos.length&&p.push(a)})),p.length){const t=p[0];if(1===p.length&&\"title\"in t&&!t.title){const e=t.infos?.filter(Ke)??[];u.infos.push(...e)}else y&&(p.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:y}]}),d=!0),u.infos.push(...p);s||e.legendOptions?.title||e.valueExpressionTitle||(u.title=null)}}e.defaultSymbol&&!d&&(u.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),d=!0)}else if(Ie(e)){if(!r&&!n){c=this._isUnclassedRenderer(e);if(!c||!this._hasSizeRamp){const t=e.classBreakInfos.filter((({symbol:e})=>e)),s=\"ascending-values\"===e.legendOptions?.order;for(const{label:e,minValue:i,maxValue:l,symbol:r}of t){const t={label:e||(c?null:`${i} - ${l}`),value:[i,l],symbol:r};s?u.infos.push(t):u.infos.unshift(t)}c&&(u.title=null),this._updateInfosForClassedSizeRenderer(e,u.infos)}e.defaultSymbol&&!c&&(u.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),d=!0)}}else if(Le(e))if(He(this.layer)||We(this.layer)){const t=await this._constructTileImageryStretchRendererElements(e);Ge(t)?o.push(t):u.infos=t}else{const t=this.layer;let s,i;e.customStatistics?.length&&({min:s,max:i}=e.customStatistics[0]);let l=[],r=t.serviceRasterInfo;if(t.rasterFunction)try{r=await t.generateRasterInfo(t.rasterFunction)}catch{}const n=R(r.pixelType);if(1===r.bandCount){const l=t.bandIds?.[0]||0;s=null!=s?s:r.statistics?r.statistics[l].min:n[0],i=null!=i?i:r.statistics?r.statistics[l].max:n[1],s||i?o.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend()}else if(t.bandIds&&1===t.bandIds.length)s=null!=s?s:r.statistics?r.statistics[t.bandIds[0]].min:n[0],i=null!=i?i:r.statistics?r.statistics[t.bandIds[0]].max:n[1],s||i?o.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend();else if(r.bandCount>=3){const{bandInfos:e}=r,{bandIds:s}=t;e.length>=r.bandCount?3===s?.length?(l=s.map((t=>e[t].name)),u.infos=this._createSymbolTableElementMultiBand(l)):\"lerc\"===t.format?(l=[0,1,2].map((t=>e[t].name)),u.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():\"lerc\"===t.format?(l=[\"band1\",\"band2\",\"band3\"],u.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(ve(e))e.colormapInfos.forEach((e=>{u.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(Se,e.color)})}));else if(Ce(e)){let s=e.symbol;switch(t.geometryType){case\"point\":s=\"pointSymbol\"in l?l.pointSymbol:null;break;case\"polyline\":s=\"lineSymbol\"in l?l.lineSymbol:null;break;case\"polygon\":s=\"polygonSymbol\"in l?l.polygonSymbol:null}const i=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&i&&u.infos.push({label:e.label,symbol:s})}else if(we(e)){e.outputUnit&&(this.title=\"(\"+e.toJSON().outputUnit+\")\"),u.title=e.attributeField;const t=e.getClassBreakInfos();t?.length?t.forEach((e=>{u.infos.push({label:e.minValue+\" - \"+e.maxValue,symbol:e.symbol})})):u.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else Ee(e)&&o.push(await this._getStretchLegendElements(e,{min:0,max:255}));const h=e.defaultSymbol;!h||d||Ce(e)||c&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:h}]}),u.infos.length&&o.unshift(u);const m=null==t.opacity?this.opacity:t.opacity,p=this._isTallSymbol(\"visualVariables\"in e?e.visualVariables:null),f=$e(this.layer)||He(this.layer);return await this._generatePreviewsForLegendElements(o,{opacity:m,symbolConfig:{isTall:p,isSquareFill:f},effectView:this.effectList},{defaultSymbol:h,arrowMarkerSymbols:y}),e=null,o}_checkClausesForUVR(e,t){const s=Ye(e,t);return!s||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(s))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(s))}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=e?.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}async _constructTileImageryStretchRendererElements(e){const t=this.layer,s=t.symbolizer.rasterInfo??t.raster.rasterInfo;let i,l;const r=e?.customStatistics?.length?e.customStatistics:s?.statistics;if(r)({min:i,max:l}=r[0]);else{const e=R(s.pixelType);i=e[0],l=e[1]}if(t.hasStandardTime()&&(i=t.getStandardTimeValue(i),l=t.getStandardTimeValue(l)),1===s.bandCount||1===t.bandIds?.length)return this._getStretchLegendElements(e,{min:i,max:l});const n=(t?.bandIds?.length?t.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map((e=>s.bandInfos[e].name));return n.length<3?n.push(n[1]):n.length>3&&n.splice(3),this._createSymbolTableElementMultiBand(n)}async _getStretchLegendElements(e,t){const s=e.colorRamp,i=G(s,t);return{type:\"stretch-ramp\",title:\"\",infos:i,preview:A(i.map((e=>e.color)),{ariaLabel:await Xe(\"previewColorRampAriaLabel\")})}}_getClusterSymbol(){const e=this.layer,t=\"featureReduction\"in e&&e.featureReduction,s=t&&\"symbol\"in t&&t.renderer;return s&&!0!==s?.authoringInfo?.isAutoGenerated?null:t&&\"symbol\"in t?t.symbol:null}async _getSizeLegendElement(e,t,s,i){return{type:\"size-ramp\",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await X(s,t,await re(s),this.scale,this.view,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],s=[\"red\",\"green\",\"blue\"];return e.forEach(((e,i)=>{t.push({label:{colorName:s[i],bandName:e},src:ne[i],opacity:this.opacity??1})})),t}_updateInfosForClassedSizeRenderer(e,t){const s=e.authoringInfo&&\"class-breaks-size\"===e.authoringInfo.type,i=e.classBreakInfos.some((e=>q(e.symbol)));if(s&&i){const s=Y,i=ee,l=e.classBreakInfos.length,r=(s-i)/(l>1?l-1:l);t.forEach(((e,t)=>{e.size=s-r*t}))}}_isTallSymbol(e){let t=!1,s=!1;if(e)for(let i=0;i<e.length&&(!t||!s);i++){const l=e[i];\"size\"===l.type&&(\"height\"===l.axis&&(t=!0),\"width-and-depth\"===l.axis&&(s=!0))}return t&&s}async _generatePreviewsForLegendElements(e,t,s){const i=[];for(const l of e)for(const e of l.infos??[])if(\"infos\"in e&&e.infos&&i.push(this._generatePreviewsForLegendElements([e],t,s)),Ke(e)&&e.symbol&&!e.preview){let r=!0;if(\"cim\"===e.symbol.type){const{minScale:t,maxScale:s}=e.symbol.data;(t&&t<this.scale||s&&s>this.scale)&&(r=!1)}r&&i.push(this._generateSymbolPreviewForInfo(e,{...t,clipBloomEffect:\"theme\"in l&&\"spike\"===l.theme,effectView:s?.arrowMarkerSymbols?.has(e.symbol)?null:t.effectView},s?{isDefault:e.symbol===s.defaultSymbol,applyScaleDrivenSize:!s.arrowMarkerSymbols?.has(e.symbol)}:void 0))}await Promise.all(i)}async _generateSymbolPreviewForInfo(e,t,s){try{let i=!s?.isDefault&&null==e.size&&this._hasSizeRamp?p(M.size):e.size;if(this._scaleDrivenSizeVariable&&s?.applyScaleDrivenSize){const{getSize:t}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");i=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:\"simple-marker\"===e.symbol.type?e.symbol.style:null})}const l=\"cim\"===e.symbol.type?{style:\"legend\",cimOptions:{allowScalingUp:!s?.isDefault&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!s?.applyScaleDrivenSize),viewParams:this.isScaleDriven?{viewingMode:\"2d\"===this.view?.type?\"map\":this.view?.viewingMode,scale:this.view?.scale}:null}}:{},r=e.label&&\"string\"!=typeof e.label?null:await Xe(\"previewTemplateAriaLabel\",e.label);e.preview=await N(e.symbol,{size:i,scale:!1,ariaLabel:r,...t,...l})}catch{e.preview=null,o.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${e.symbol?.type}`)}}_getClusterRenderer(e){this._hasClusterSizeVariable=!1;const t=\"renderer\"in this.layer?this.layer.renderer:null,s=e.renderer?.clone()||t?.clone(),i=$(e,this.layerView,this.view);if(i&&null!=s&&\"visualVariables\"in s){const t=s.visualVariables?.some((e=>\"size\"===e.type&&\"outline\"!==e.target&&!fe.test(e.valueExpression)));if(!t){if(\"clusterMinSize\"in e&&\"clusterMaxSize\"in e){const{clusterMinSize:t,clusterMaxSize:s}=e;i.legendOptions=new z({showLegend:t!==s})}const t=s.visualVariables||[];s.visualVariables=t.concat([i]),this._hasClusterSizeVariable=!0}}return s}async _loadRenderer(e){const t=[],s=e.clone(),i=await re(s);if(Ie(s)||Fe(s)){const e=(s.classBreakInfos||s.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,i).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(t,e)}return t.push(this._fetchSymbol(s.symbol||s.defaultSymbol,s.defaultSymbol?null:i).then((e=>{this._applySymbolToRenderer(s,e,Ce(s))})).catch((()=>{this._applySymbolToRenderer(s,null,Ce(s))}))),await Promise.allSettled(t),s}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(\"web-style\"===e.type){const s=this._webStyleSymbolCache;try{const i=await e.fetchSymbol({cache:s});return this._getAppliedCloneSymbol(i,t)}catch{throw o.getLogger(this).warn(\"Fetching web-style failed!\"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,s){if(!e||!s)return e;const i=e.clone(),l=s&&s.toRgba();return i.type.includes(\"3d\")?this._applyColorTo3dSymbol(i,l):\"cim\"===i.type?P(i,s):i.color&&(i.color=new t(l||i.color)),i}_applyColorTo3dSymbol(e,s){s&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new t(s))}))}async _getVisualVariableLegendElements(e,t){if(!(\"visualVariables\"in e)||\"vector-field\"===e.type)return null;const s=e.visualVariables??[],i=[],l=[],n=[],a=ie(e,\"reference-size\")??ie(e,\"spike\");let o;if(2===a?.sizeStops?.length&&(Ie(e)||Fe(e))){const[e,t]=a.sizeStops;o=new x({field:a.field??void 0,normalizationField:a.normalizationField,minSize:u(e.size,10,100),maxSize:u(t.size,50,150),minDataValue:e.value,maxDataValue:t.value}),l.push(o)}for(const r of s)\"color\"===r.type?i.push(r):\"size\"===r.type?l.push(r):\"opacity\"===r.type&&n.push(r);const c=[...i,...l,...n];let d,y;if(0===i.length&&Ie(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];d=t&&t.symbol}if(0===i.length&&Ce(e)&&(d=e.symbol),d)if(d.type.includes(\"3d\")){const e=d.symbolLayers.at(0);\"water\"===e.type?null!=e.color&&(y=e.color):null!=e.material?.color&&(y=e.material.color)}else d.url||(y=d.color);const h=this.effectList;return(await Promise.all(c.map((async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const i=_e(e)?s.field:this._getRampTitle(s,t);let l=null;const r=ae(t,s,this.view.timeZone);if(\"color\"===s.type){const e=await J(s,null,r)??[];l={type:\"color-ramp\",title:i,infos:e,preview:A(e.map((e=>e.color)),{effectList:h,ariaLabel:await Xe(\"previewColorRampAriaLabel\")})},this._hasColorRamp||(this._hasColorRamp=e.length>0)}else if(\"size\"===s.type&&\"outline\"!==s.target)fe.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(l=await this._getSizeLegendElement(i,s,e,r),o===s&&\"spike\"===a?.theme&&(l.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(null==l.infos||!l.infos.length)));else if(\"opacity\"===s.type){const e=await J(s,y,r)??[];l={type:\"opacity-ramp\",title:i,infos:e,preview:A(e.map((e=>e.color)),{effectList:h,ariaLabel:await Xe(\"previewColorRampAriaLabel\")})},this._hasOpacityRamp||(this._hasOpacityRamp=e.length>0)}return l?.infos?l:null}})))).filter(r)}_getDomainName(e,t,s){if(e&&\"function\"!=typeof e){const i=\"getField\"in s&&s.getField?.(e),l=i&&\"getFieldDomain\"in s&&s.getFieldDomain?s.getFieldDomain(i.name,{excludeImpliedDomains:has(\"esri-widget-legacy-field-domain-calculation\")}):null;return\"coded-value\"===l?.type?l.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if(\"featureReduction\"in t&&t.featureReduction&&\"cluster\"===t.featureReduction.type){const e=t.featureReduction,i=\"popupTemplate\"in e&&e.popupTemplate,l=i&&i.fieldInfos;if(l)for(const t of l)if(t.fieldName===s)return\"cluster_count\"===s?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let s=e.field,i=e.normalizationField,l=!1,r=!1,n=!1,a=null;s=\"function\"==typeof s?null:s,i=\"function\"==typeof i?null:i;const o=e.legendOptions?.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if(\"renderer\"in t&&t.renderer&&\"authoringInfo\"in t.renderer&&t.renderer.authoringInfo?.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if(\"color\"===s.type){if(\"ratio\"===s.style){l=!0;break}if(\"percent\"===s.style){r=!0;break}if(\"percent-of-total\"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:i&&this._getFieldAlias(i,t),ratio:l,ratioPercent:r,ratioPercentTotal:n}}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions?.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let i=s.field,l=null,r=null;if(Ie(s)&&(l=s.normalizationField,r=\"percent-of-total\"===s.normalizationType),i=\"function\"==typeof i?null:i,l=\"function\"==typeof l?null:l,Fe(s)){const{field2:e,field3:l,fieldDelimiter:r}=s;let n=i&&this._getFieldAlias(i,t);return e&&(n=`<${n}>${r}<${this._getFieldAlias(e,t)}>`,l&&(n=`${n}${r}<${this._getFieldAlias(l,t)}>`)),n}let n=null;return(i||l)&&(n={field:i&&this._getFieldAlias(i,t),normField:l&&this._getFieldAlias(l,t),normByPct:r}),n}_getFieldAlias(e,t){const s=\"popupTemplate\"in t?t.popupTemplate:null,i=s?.fieldInfos;let l=i?.find((t=>e===t.fieldName)),r=null;\"getField\"in t&&t.getField?r=t.getField(e):\"fieldsIndex\"in t&&t.fieldsIndex&&(r=t.fieldsIndex.get(e));let n=null;const a=\"featureReduction\"in t&&t.featureReduction;a&&(l??=\"popupTemplate\"in a?a.popupTemplate?.fieldInfos?.find((t=>e?.toLowerCase()===t.fieldName?.toLowerCase())):void 0,\"fields\"in a&&a.fields&&(n=a.fields.find((t=>t.name?.toLowerCase()===e?.toLowerCase()))));const o=l||r||n;let u=null;return o&&(u=l?.label||r?.alias||n?.alias||\"name\"in o&&o.name||\"fieldName\"in o&&o.fieldName||null),u}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return Ie(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),s}};e([b()],st.prototype,\"children\",void 0),e([b({readOnly:!0})],st.prototype,\"effectList\",null),e([b()],st.prototype,\"layerView\",void 0),e([b()],st.prototype,\"layer\",void 0),e([b()],st.prototype,\"legendElements\",void 0),e([b({readOnly:!0})],st.prototype,\"opacity\",null),e([b()],st.prototype,\"parent\",void 0),e([b({readOnly:!0,dependsOn:[]})],st.prototype,\"ready\",null),e([b()],st.prototype,\"hideLayersNotInCurrentView\",void 0),e([b()],st.prototype,\"keepCacheOnDestroy\",void 0),e([b()],st.prototype,\"respectLayerDefinitionExpression\",void 0),e([b()],st.prototype,\"respectLayerVisibility\",void 0),e([b({readOnly:!0})],st.prototype,\"scale\",null),e([b()],st.prototype,\"sublayerIds\",void 0),e([b({readOnly:!0})],st.prototype,\"isScaleDriven\",null),e([b()],st.prototype,\"title\",void 0),e([b({readOnly:!0,dependsOn:[\"ready\"],value:0})],st.prototype,\"version\",null),e([b()],st.prototype,\"view\",void 0),st=e([S(\"esri.widgets.Legend.support.ActiveLayerInfo\")],st);export{st as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../intl.js\";import i from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{watch as t,initial as s,when as a}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{get as l}from\"../../core/accessorSupport/get.js\";import{getEffectiveFeatureReduction as y}from\"../../views/2d/layers/features/layerAdapters/featureReductionUtils.js\";import d from\"./support/ActiveLayerInfo.js\";import{onLocaleChange as h}from\"../../intl/locale.js\";const c={state:\"state\",view:\"view\",allLayerViews:\"all-layer-views\",legendProperties:\"legend-properties\"},L=r.ofType(d),p=new Set([\"esri.layers.BuildingSceneLayer\",\"esri.layers.CatalogLayer\",\"esri.layers.CSVLayer\",\"esri.layers.FeatureLayer\",\"esri.layers.GeoJSONLayer\",\"esri.layers.GeoRSSLayer\",\"esri.layers.GroupLayer\",\"esri.layers.HeatmapLayer\",\"esri.layers.ImageryLayer\",\"esri.layers.ImageryTileLayer\",\"esri.layers.MapImageLayer\",\"esri.layers.OGCFeatureLayer\",\"esri.layers.OrientedImageryLayer\",\"esri.layers.ParquetLayer\",\"esri.layers.PointCloudLayer\",\"esri.layers.StreamLayer\",\"esri.layers.SceneLayer\",\"esri.layers.SubtypeGroupLayer\",\"esri.layers.TileLayer\",\"esri.layers.VoxelLayer\",\"esri.layers.WFSLayer\",\"esri.layers.WMSLayer\",\"esri.layers.WMTSLayer\",\"esri.layers.WCSLayer\",\"esri.layers.LinkChartLayer\",\"esri.layers.catalog.CatalogFootprintLayer\",\"esri.layers.catalog.CatalogDynamicGroupLayer\",\"esri.layers.knowledgeGraph.KnowledgeGraphSublayer\",\"esri.layers.KnowledgeGraphLayer\"]),u=\"view.basemapView.baseLayerViews\",f=\"view.groundView.layerViews\",v=\"view.basemapView.referenceLayerViews\",_=[u,f,\"view.layerViews\",v];let w=class extends i{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new r,this.activeLayerInfos=new L,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(t((()=>this.view),(()=>this._viewHandles()),s),c.view),this.addHandles(h((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){return this.view?.ready?\"ready\":\"disabled\"}_viewHandles(){this.removeHandles(c.state),this.view&&this.addHandles(t((()=>this.state),(()=>this._stateHandles()),s),c.state)}_stateHandles(){this._resetAll(),\"ready\"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([c.allLayerViews,c.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i?.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on(\"change\",(e=>this._allLayerViewsChangeHandle(e))),c.allLayerViews),this.addHandles(t((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),c.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((i=>{if(!i.parent){const t=i.layer.parent,s=t&&\"uid\"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&e.includes(a)&&(r.push(i),i.parent=a,a.children.add(i),this._sortActiveLayerInfos(a.children))}})),e.removeMany(r);const t={};i.allLayerViews.forEach(((e,i)=>t[e.layer.uid]=i)),e.sort(((e,i)=>{const r=t[e.layer.uid]||0;return(t[i.layer.uid]||0)-r}))}_generateLayerViews(){const e=[];return _.filter(this._filterLayerViews,this).map((e=>l(this,e))).filter((e=>null!=e)).forEach(this._collectLayerViews(\"layerViews\",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===u||e===v),r=!this.groundLegendVisible&&e===f;return!i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return!!p.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(t((()=>[e.legendEnabled,e.layer?.legendEnabled]),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}_buildActiveLayerInfo(e){const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let o=this._activeLayerInfosByLayerViewId[r];if(!o){const t=void 0!==n?.title&&n.layer.uid===i.uid;o=new d({layer:i,layerView:e,title:t?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n?.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=o}const l=i.parent&&\"uid\"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;if(o.parent=this._activeLayerInfosByLayerViewId[l?.uid],!this.hasHandles(r)){const n=[t((()=>i.title),(e=>this._titleHandle(e,o))),t((()=>[i.opacity,\"renderer\"in i&&i.renderer,\"pointSymbol\"in i&&i.pointSymbol,\"lineSymbol\"in i&&i.lineSymbol,\"polygonSymbol\"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(o))),a((()=>!0===this.view?.stationary),(()=>this._scaleHandle(o)),s),t((()=>e.layer?y(e.layer,e.view):null),(()=>this._constructLegendElements(o))),t((()=>e.updating),(()=>{if(null==e.layer)return;null!=y(e.layer,e.view)&&this._constructLegendElements(o)})),t((()=>\"effect\"in i&&i.effect),(()=>this._constructLegendElements(o))),a((()=>this.view?.timeZone),(()=>this._constructLegendElements(o)),s)];if(this.respectLayerVisibility){const r=t((()=>e.legendEnabled),(e=>this._legendEnabledHandle(e,o))),s=t((()=>i.legendEnabled),(e=>this._legendEnabledHandle(e,o)));n.push(r,s)}if(this.respectLayerDefinitionExpression&&\"definitionExpression\"in i){const e=t((()=>[i.definitionExpression,this.respectLayerDefinitionExpression]),(()=>{o.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(o)}));n.push(e)}this.addHandles(n,r)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const i=e.parent;if(i)i.children.includes(e)||i.children.push(e),this._sortActiveLayerInfos(i.children);else{const i=this.layerInfos?.some((e=>e.layer.uid===r.uid)),t=r.parent;(t&&\"uid\"in t?this._layerViewByLayerId[t.uid]:null)&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&\"uid\"in r?this._layerViewByLayerId[r?.uid]:null,s=this._activeLayerInfosByLayerViewId[t?.uid];s&&(e.push(i),i.parent=s)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;\"featureCollections\"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):\"featureReduction\"in i&&i.featureReduction&&\"renderer\"in i.featureReduction&&(\"binning\"===i.featureReduction.type||\"cluster\"===i.featureReduction.type)&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):\"renderer\"in i&&i.renderer&&!(\"sublayers\"in i)?e.buildLegendElementsForRenderer(i.renderer):\"url\"in i&&i.url&&\"catalog\"!==i.type&&\"knowledge-graph\"!==i.type?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};e([n({type:L})],w.prototype,\"activeLayerInfos\",void 0),e([n()],w.prototype,\"basemapLegendVisible\",void 0),e([n()],w.prototype,\"groundLegendVisible\",void 0),e([n()],w.prototype,\"hideLayersNotInCurrentView\",void 0),e([n()],w.prototype,\"keepCacheOnDestroy\",void 0),e([n()],w.prototype,\"respectLayerDefinitionExpression\",void 0),e([n()],w.prototype,\"respectLayerVisibility\",void 0),e([n()],w.prototype,\"layerInfos\",void 0),e([n({readOnly:!0})],w.prototype,\"state\",null),e([n()],w.prototype,\"view\",void 0),w=e([o(\"esri.widgets.Legend.LegendViewModel\")],w);export{w as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend--card\",a=\"esri-legend\",r={activated:`${e}__carousel-indicator--activated`,base:e,stacked:`${a}--stacked`,carouselTitle:`${e}__carousel-title`,indicator:`${e}__carousel-indicator`,intervalSeparator:`${e}__interval-separator`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageLabel:`${e}__image-label`,layerCaption:`${e}__layer-caption`,labelElement:`${e}__label-element`,layerRow:`${e}__layer-row`,labelCell:`${e}__label-cell`,message:`${e}__message`,rampLabel:`${e}__ramp-label`,section:`${e}__section`,relationshipSection:`${e}__relationship-section`,serviceCaptionText:`${e}__service-caption-text`,serviceContent:`${e}__service-content`,service:`${e}__service`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,symbol:`${e}__symbol`,sizeRampRow:`${e}__size-ramp-row`,symbolRow:`${e}__symbol-row`,symbolCell:`${e}__symbol-cell`,carousel:`${e}__carousel`,carouselItem:`${e}__carousel-item`,indicatorContainer:`${e}__carousel-indicator-container`,intervalSeparatorsContainer:`${e}__interval-separators-container`,relationshipLabelContainer:`${e}__relationship-label-container`,labelContainer:`${e}__label-container`,serviceCaptionContainer:`${e}__service-caption-container`,symbolContainer:`${e}__symbol-container`,colorRampContainer:`${e}__color-ramp-container`,sizeRampContainer:`${e}__size-ramp-container`,sizeRampPreview:`${e}__size-ramp-preview`,pieChartRampPreview:`${e}__pie-chart-ramp-preview`,rampContainer:`${a}__ramps`,sizeRampHorizontal:`${a}__size-ramp--horizontal`,rampLabelsContainer:`${a}__ramp-labels`,layerInfo:`${a}__layer-cell ${a}__layer-cell--info`,univariateAboveAndBelowColorRamp:\"esri-univariate-above-and-below-ramp__color--card\"};export{r as css};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../../intl.js\";import{stripHTML as e}from\"../../../core/string.js\";import{substitute as t}from\"../../../intl/substitute.js\";import{formatNumber as n}from\"../../../intl/number.js\";function r(e,t){return t}function i(e){const t=this;e.appendChild(t)}function o(n,i,o){if(!i)return;if(\"number\"==typeof i)return i;if(\"string\"==typeof i)return e(i);if(\"value\"in i||\"unit\"in i)return t(n.dotValue,i);if(\"colorName\"in i&&\"bandName\"in i)return n[i.colorName]+\": \"+(n[i.bandName]||i.bandName);if(\"showCount\"in i)return i.showCount?n.clusterCountTitle:void 0;let u=null;return r(i,o)?u=i.ratioPercentTotal?\"showRatioPercentTotal\":i.ratioPercent?\"showRatioPercent\":i.ratio?\"showRatio\":i.normField?\"showNormField\":i.field?\"showField\":null:l(i,o)&&(u=i.normField?\"showNormField\":i.normByPct?\"showNormPct\":i.field?\"showField\":null),u?t(\"showField\"===u?\"{field}\":n[u],{field:i.field,normField:i.normField}):void 0}function l(e,t){return!t}function u(e,t){return!!(t&&\"Stretched\"===t&&\"version\"in e&&\"number\"==typeof e.version&&e.version>=10.3&&\"esri.layers.ImageryLayer\"===e.declaredClass)}function a(e,t){return e.label?t[e.label]+\": \"+(\"string\"==typeof e.value?e.value:n(e.value??0,{style:\"decimal\",notation:e.value?.toString().toLowerCase().includes(\"e\")?\"scientific\":\"standard\"})):\"\"}export{i as attachToNode,a as getStretchStopLabel,o as getTitle,u as isImageryStretchedLegend,l as isRendererTitle};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{getTitle as t,isRendererTitle as e,getStretchStopLabel as r}from\"../../support/styleUtils.js\";function l(t,e,l){switch(e){case\"heatmap-ramp\":return l[t.label]||t.label;case\"stretch-ramp\":return r(t,l);default:return t.label}}function i(r,l){if(!r.title||\"string\"==typeof r.title)return r.title;const i=\"color-ramp\"===r.type||\"opacity-ramp\"===r.type,n=r.title,o=t(l,n,i);return e(n,i)&&n.title?`${n.title} (${o})`:o}function n(t){return!(!t||\"object\"!=typeof t)}export{i as getLegendElementTitle,l as getRampStopLabel,n as isWidthAndHeight};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{renderSVG as s}from\"../../../../symbols/support/svgUtils.js\";import{getCSSFilterFromEffectList as o}from\"../../../../symbols/support/utils.js\";import i from\"../../../Widget.js\";import{css as l}from\"./css.js\";import{getRampStopLabel as p}from\"../support/utils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";const n=25,m=25,c=100;let d=class extends i{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return a(\"div\",{class:this.classes(l.layerRow,l.colorRampContainer)},this._renderRampLabel(e[0]),a(\"div\",{class:l.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:t}=this,r=\"heatmap-ramp\"===this.legendElement.type,i=e.length-1,l=m,p=i>2&&!r?n*i:c,d=p+20,h=10,y=[[{shape:{type:\"path\",path:`M0 ${l/2} L${h} 0 L${h} ${l} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:\"rect\",x:h,y:0,width:p,height:l},fill:{type:\"linear\",x1:h,y1:0,x2:p+h,y2:0,colors:e.map(((e,t)=>({color:e.color,offset:r&&\"ratio\"in e?e.ratio:t/i})))},stroke:{width:0}},{shape:{type:\"path\",path:`M${p+h} 0 L${d} ${l/2} L${p+h} ${l} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],f=s(y,d,l),u={filter:o(this.effectList)??void 0,opacity:null==t?void 0:`${t}`};return a(\"div\",{styles:u},f)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?a(\"div\",{class:l.intervalSeparatorsContainer},a(\"div\",{class:l.intervalSeparator},\"|\"),this._renderRampLabel(t)):null}_renderRampLabel(e){return a(\"div\",{class:l.rampLabel},p(e,this.legendElement.type,this.messages))}};e([t()],d.prototype,\"effectList\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([r(\"esri.widgets.Legend.styles.card.ColorRamp\")],d);export{d as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import{isWidthAndHeight as i}from\"./utils.js\";import{attachToNode as t}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as s}from\"../../../support/jsxFactory.js\";const n=\"#ddd\",o=window.devicePixelRatio,a=\"esri-spike-ramp\",p={spikeRampContainer:`${a}__container`,spikeRampPreviewContainer:`${a}__preview-container`,spikeRampPreview:`${a}__preview`,spikeRampSymbolPreview:`${a}__symbol-preview`,spikeRampLines:`${a}__lines`,spikeRampLabelsContainer:`${a}__labels-container`,spikeRampLabel:`${a}__label`};function r(e){return 5!==e.infos.length?null:s(\"div\",{class:p.spikeRampContainer},s(\"div\",{class:p.spikeRampPreviewContainer},l(e),m(e)),d(e))}function l(e){const[i,n,o]=h(e).map((({preview:e})=>{if(!e)return null;const i=e.cloneNode(!0);return i.classList.add(p.spikeRampSymbolPreview),i}));return i&&n&&o?s(\"div\",{class:p.spikeRampPreview},s(\"div\",{afterCreate:t,bind:o}),s(\"div\",{afterCreate:t,bind:n}),s(\"div\",{afterCreate:t,bind:i})):null}function m(a){const[{width:r,height:l},{width:m},{width:d,height:c}]=h(a).map((({size:t})=>i(t)?{width:e(t.width),height:e(t.height)}:{width:0,height:0})),v=10,b=8,u=r+m+d+3*v,w=l,k=document.createElement(\"canvas\");k.width=(u+v)*o,k.height=w*o,k.style.width=k.width/o+\"px\",k.style.height=k.height/o+\"px\";const f=k.getContext(\"2d\");f.beginPath();const R=u-(r/2+v),g=0,_=u+b,y=0;f.moveTo(R*o,g*o),f.lineTo(_*o,y*o);const C=(u-b)/2,L=(l-c)/2,x=u+b,P=(l-c)/2;f.moveTo(C*o,L*o),f.lineTo(x*o,P*o);const $=d/2,j=w-c,T=u+b,S=w-c;return f.moveTo($*o,j*o),f.lineTo(T*o,S*o),f.strokeStyle=n,f.lineWidth=.5*o,f.stroke(),s(\"div\",{afterCreate:t,bind:k,class:p.spikeRampLines})}function d(t){const[{label:n,height:o},{label:a},{label:r,height:l}]=h(t).map((({label:t,size:s})=>({label:t,height:i(s)?e(s.height):0}))),m=o-l,d={position:\"absolute\",top:\"0\"},c={position:\"absolute\",top:m/2+\"px\"},v={position:\"absolute\",top:`${m}px`};return s(\"div\",{class:p.spikeRampLabelsContainer},s(\"div\",{class:p.spikeRampLabel,styles:d},n),s(\"div\",{class:p.spikeRampLabel,styles:c},a),s(\"div\",{class:p.spikeRampLabel,styles:v},r))}function h(e){return e.infos.filter(((e,i)=>i%2==0))}export{r as renderSpikeRamp};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{pt2px as t}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{renderSpikeRamp as n}from\"../support/sizeRampUtils.js\";import{attachToNode as l}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";const c=\"#ddd\",p=window.devicePixelRatio;function d(e){if(!e)return;if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t.resource?.primitive;return\"circle\"===s||\"cross\"===s||\"kite\"===s||\"sphere\"===s||\"cube\"===s||\"diamond\"===s}const t=e.style;return\"circle\"===t||\"diamond\"===t||\"cross\"===t}function m(e){if(e){if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t?.resource?.primitive;return\"triangle\"===s||\"cone\"===s||\"tetrahedron\"===s}return\"triangle\"===e.style}}let y=class extends r{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(\"spike\"===this.legendElement.theme)return a(\"div\",{styles:{display:\"flex\",flex:\"1\",justifyContent:\"center\"}},n(this.legendElement));const{legendElement:e,hasIndicators:t,opacity:s}=this,i=e.infos,r=i.at(0),c=i.at(-1);if(!r||!c)return null;const{label:p,...d}=r,{label:m,...y}=c;let u=d.preview,f=y.preview;const h={\"flex-direction\":t?\"column\":\"row-reverse\"};if(!u||!f)return null;u=u.cloneNode(!0),u.style.display=\"flex\",f=f.cloneNode(!0),f.style.display=\"flex\";const g={opacity:`${s??\"\"}`};return a(\"div\",{class:this.classes(o.layerRow,{[o.sizeRampRow]:t})},a(\"div\",{class:o.rampLabel},t?p:m),a(\"div\",{class:o.sizeRampContainer,styles:h},a(\"div\",{afterCreate:l,bind:u,class:o.sizeRampPreview,styles:g}),this._renderSizeRampLines(e),a(\"div\",{afterCreate:l,bind:f,class:o.sizeRampPreview,styles:g})),a(\"div\",{class:o.rampLabel},t?m:p))}_renderSizeRampLines(e){const s=e.infos,i=s.at(0),r=s.at(-1);if(!i||!r)return null;const o=i.symbol,n=this.hasIndicators,y=i.size&&\"number\"==typeof i.size?i.size:0,u=r.size&&\"number\"==typeof r.size?r.size:0,f=i.outlineSize||0,h=r.outlineSize||0,g=t(y+f)*p,v=t(u+h)*p,b=n?g:g+50*p,x=n?g/2+50*p:g,z=m(o),j=d(o),w=document.createElement(\"canvas\");w.width=b,w.height=x,w.style.width=w.width/p+\"px\",w.style.height=w.height/p+\"px\";const R=w.getContext(\"2d\");if(n){R.beginPath();const e=0,t=0,s=b/2-v/2,i=x;R.moveTo(e,t),R.lineTo(s,i);const r=b,o=0,n=b/2+v/2,l=x;R.moveTo(r,o),R.lineTo(n,l)}else{R.beginPath();const e=0,t=x/2-v/2,s=b,i=0;R.moveTo(e,t),R.lineTo(s,i);const r=0,o=x/2+v/2,n=b,l=x;R.moveTo(r,o),R.lineTo(n,l)}return R.strokeStyle=c,R.stroke(),a(\"div\",{afterCreate:l,bind:w,styles:n?{display:\"flex\",marginTop:`-${z?0:j?g/2:0}px`,marginBottom:`-${z?v:j?v/2:0}px`}:{display:\"flex\",marginRight:`-${z?0:j?g/2:0}px`,marginLeft:`-${z?0:j?v/2:0}px`}})}};e([s()],y.prototype,\"hasIndicators\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([i(\"esri.widgets.Legend.styles.card.SizeRamp\")],y);export{y as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import\"../../../../libs/maquette/projection.js\";import{createProjector as t}from\"../../../../libs/maquette/projector.js\";import{isNumber as i}from\"../../../../support/guards.js\";import{renderColorRampPreviewHTML as o}from\"../../../../symbols/support/symbolUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";const n=t(),r=10,s=20,a=10,c=20,f={univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",colorRamp:\"esri-legend__color-ramp\"};function p(e=\"vertical\"){const t=\"stroke:rgb(200, 200, 200);stroke-width:1\";return\"vertical\"===e?l(\"svg\",{height:\"4\",width:\"10\"},l(\"line\",{style:t,x1:\"0\",x2:\"10\",y1:\"2\",y2:\"2\"})):l(\"svg\",{height:\"10\",width:\"10\"},l(\"line\",{style:t,x1:\"5\",x2:\"5\",y1:\"0\",y2:\"10\"}))}function m(e,t=\"vertical\"){const i=document.createElement(\"div\");return i.style.height=`${s}px`,i.className=f.univariateAboveAndBelowSymbol,null!=e&&(i.style.opacity=e.toString()),n.append(i,p.bind(null,t)),i}function u(t,o,l=\"vertical\",n){t.infos.forEach(((t,r)=>{if(n&&2===r)t.preview=m(o,l);else{const o=(i(t.size)?e(t.size):0)+(\"horizontal\"===l?c:a),n=t.preview,r=\"div\"===n?.tagName.toLowerCase(),s=r?n:document.createElement(\"div\");s.className=f.univariateAboveAndBelowSymbol,\"horizontal\"===l?s.style.width=`${o}px`:s.style.height=`${o}px`,!r&&n&&s.appendChild(n),t.preview=s}}))}function v(t,o=\"classic\"){const l=t.infos,n=l.at(0),r=l.at(-1),s=i(n.size)?e(n.size):0,c=i(r.size)?e(r.size):0;return\"classic\"===o?(s+a)/2:(s-c)/2}function h(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=o(\"full\"===t.type?i:\"above\"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return l.className=f.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function d(t,o,l,n=\"vertical\"){let f=0;const p=t.infos,m=Math.floor(p.length/2),u=\"full\"===o||\"above\"===o?0:m,v=\"full\"===o||\"below\"===o?p.length-1:m;for(let h=u;h<=v;h++)if(l&&h===m)f+=\"horizontal\"===n?r:s;else{const t=p[h].size;f+=(i(t)?e(t):0)+(\"horizontal\"===n?c:a)}return Math.round(f)}function y(t,o,l,n=\"vertical\"){const f=d(t,o,l,n),p=t.infos,m=Math.floor(p.length/2),u=\"full\"===o||\"above\"===o?0:m,v=\"full\"===o||\"below\"===o?p.length-1:m,h=i(p[u].size)?p[u].size:0,y=i(p[v].size)?p[v].size:0,b=\"full\"===o?h+y:\"above\"===o?h:y,g=l?\"vertical\"===n?s:r:0,z=\"vertical\"===n?a*(\"full\"===o?2:1):c*(\"full\"===o?2:1);return Math.round(f-(e(b)/2+g/2+z/2))}function b(e,t,i=\"vertical\"){const o=e.infos;let l=o.find((({type:e})=>\"size-ramp\"===e)),n=o.find((({type:e})=>\"color-ramp\"===e));return l&&(l={...l},l.infos=[...l.infos],u(l,t,i,!0)),n&&(n={...n},n.infos=[...n.infos]),\"horizontal\"===i&&(l?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:l,colorRampElement:n}}function g(e,t=\"vertical\"){const i=e.infos;let o=i.find((({type:e})=>\"size-ramp\"===e)),l=i.find((({type:e})=>\"color-ramp\"===e));return o&&(o={...o},o.infos=[...o.infos],u(o,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),\"horizontal\"===t&&(o?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:o,colorRampElement:l}}const z={marginLeft:\"3px\"},w={display:\"table-cell\",verticalAlign:\"middle\"},x={display:\"flex\",alignItems:\"flex-start\"};export{b as getUnivariateAboveAndBelowRampElements,v as getUnivariateColorRampMargin,h as getUnivariateColorRampPreview,y as getUnivariateColorRampSize,g as getUnivariateColorSizeRampElements,d as getUnivariateSizeRampSize,z as univariateColorRampContainerStyles,w as univariateColorRampStyles,x as univariateRampContainerStyles};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as r,getUnivariateSizeRampSize as a,getUnivariateColorRampSize as l,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as m}from\"../../support/styleUtils.js\";import{isRTL as c}from\"../../../support/widgetUtils.js\";import{tsx as d}from\"../../../support/jsxFactory.js\";let f=class extends s{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:o,key:s}=this,{sizeRampElement:f,colorRampElement:y}=r(e,t,\"horizontal\");if(!f)return null;const h=a(f,\"full\",!0,\"horizontal\"),u=l(f,\"above\",!0,\"horizontal\"),v=l(f,\"below\",!0,\"horizontal\"),g=12,b=this.messages?.previewColorRampAriaLabel,w=p(y,{width:u,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"above\",effectList:o,ariaLabel:b}),j=p(y,{width:v,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"below\",effectList:o,ariaLabel:b}),x=n(f,\"card\"),L=f.infos.map((e=>e.label)),z=L.length-1,C=L.map(((e,t)=>0===t||t===z?d(\"div\",{key:t},e):null)),R={display:\"flex\",flexDirection:\"column\"},A={display:\"flex\",flexDirection:\"row\"},k={marginTop:\"3px\",display:\"flex\"};c(this.container)?k.marginRight=`${x}px`:k.marginLeft=`${x}px`;const E={width:`${h}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return d(\"div\",{class:i.layerRow,key:`${s}-container`,styles:R},d(\"div\",{class:this.classes(i.symbolContainer,i.sizeRampHorizontal),styles:A},f.infos.map(((e,t)=>d(\"div\",{afterCreate:m,bind:e.preview,class:i.symbol,key:t})))),w?d(\"div\",{class:i.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:k},d(\"div\",{afterCreate:m,bind:w}),d(\"div\",{afterCreate:m,bind:j})):null,d(\"div\",{class:i.layerInfo},d(\"div\",{class:i.rampLabelsContainer,styles:E},C)))}};e([t()],f.prototype,\"effectList\",void 0),e([t()],f.prototype,\"legendElement\",void 0),e([t()],f.prototype,\"messages\",void 0),e([t()],f.prototype,\"opacity\",void 0),f=e([o(\"esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp\")],f);export{f as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as r}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateSizeRampSize as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as c}from\"../../support/styleUtils.js\";import{isRTL as m}from\"../../../support/widgetUtils.js\";import{tsx as f}from\"../../../support/jsxFactory.js\";let d=class extends s{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:o,key:s}=this,{sizeRampElement:d,colorRampElement:y}=i(e,\"horizontal\");if(!d)return null;const u=l(d,\"full\",!1,\"horizontal\"),h=a(d,\"full\",!1,\"horizontal\"),v=p(y,{width:h,height:12,rampAlignment:\"horizontal\",opacity:t,type:\"full\",effectList:o,ariaLabel:this.messages?.previewColorRampAriaLabel}),g=n(d,\"card\"),j=d.infos.length-1,x=d.infos.map(((e,t)=>0===t||t===j?f(\"div\",{key:t},e.label):null)),b={display:\"flex\",flexDirection:\"column\"},w={display:\"flex\",flexDirection:\"row\"},L={marginTop:\"3px\",display:\"flex\"};m(this.container)?L.marginRight=`${g}px`:L.marginLeft=`${g}px`;const C={width:`${u}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return f(\"div\",{class:r.layerRow,key:`${s}-container`,styles:b},f(\"div\",{class:this.classes(r.symbolContainer,r.sizeRampHorizontal),styles:w},d.infos.map(((e,t)=>f(\"div\",{afterCreate:c,bind:e.preview,class:r.symbol,key:t})))),f(\"div\",{class:r.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:L},f(\"div\",{afterCreate:c,bind:v})),f(\"div\",{class:r.layerInfo},f(\"div\",{class:r.rampLabelsContainer,styles:C},x)))}};e([t()],d.prototype,\"effectList\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([o(\"esri.widgets.Legend.styles.card.UnivariateColorSizeRamp\")],d);export{d as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../Color.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getCSSFilterFromEffectList as r}from\"../../../../symbols/support/utils.js\";import a from\"../../../Widget.js\";import l from\"./ColorRamp.js\";import{css as o}from\"./css.js\";import n from\"./SizeRamp.js\";import c from\"./UnivariateAboveAndBelowRamp.js\";import p from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as h}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as m}from\"../support/utils.js\";import{attachToNode as d,isImageryStretchedLegend as y,getTitle as g}from\"../../support/styleUtils.js\";import{Heading as f,incrementHeadingLevel as u}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";var b;let L=b=class extends a{constructor(e,s){super(e,s),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=m(this.legendElement,this.messages),t=this.hasIndicators&&!this.isChild?v(\"div\",null,v(f,{class:o.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),v(f,{class:o.layerCaption,level:u(this.headingLevel)},s)):s?v(f,{class:o.layerCaption,level:this.headingLevel},s):null;return v(\"section\",{\"aria-labelledby\":this.key,class:o.section,id:`${this.key}-panel`,key:this.key,role:\"tabpanel\",tabIndex:0},t,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return v(n,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return v(l,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return h(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":return v(\"div\",{afterCreate:d,bind:this.legendElement.preview,class:o.pieChartRampPreview,key:`${this.key}-preview`});case\"univariate-above-and-below-ramp\":return v(c,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return v(p,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map((s=>this._renderElementInfo(s,e.legendType))).filter(Boolean);if(!s.length)return null;const t=this.activeLayerInfo.legendElements.some((({type:e})=>\"relationship-ramp\"===e)),i=s[0]?.properties?.classes?.[o.symbolRow],r={[o.labelContainer]:!i&&!t,[o.relationshipLabelContainer]:t};return v(\"div\",{class:this.classes(r)},s)}_renderElementInfo(e,s){const{layer:t}=this,i=\"label\"in e?e.label:null,r=`${this.key}-${i}`;if(\"type\"in e&&e.type)return v(b,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:r,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const a=y(t,s),l=g(this.messages,i,!1)||\"\";if(\"src\"in e&&e.src)return v(\"div\",{class:o.layerRow,key:`${r}-row`},this._renderImage(e,t,a),v(\"div\",{class:o.imageLabel},l));if(\"symbol\"in e&&e.preview){if(!e.symbol?.type.includes(\"simple-fill\")){if(!e.label)return v(\"div\",{afterCreate:d,bind:e.preview,key:`${r}-row`});const s={[o.symbolCell]:this.hasIndicators};return v(\"div\",{class:this.classes(o.layerRow,{[o.symbolRow]:this.hasIndicators}),key:`${r}-row`},v(\"div\",{afterCreate:d,bind:e.preview,class:this.classes(s)}),v(\"div\",{class:this.classes(o.imageLabel,{[o.labelCell]:this.hasIndicators})},l))}return v(\"div\",{class:o.layerRow,key:`${r}-row`},v(\"div\",{class:o.labelElement,styles:this._getBackgroundStyles(e)},l))}return null}_getBackgroundStyles(e){const t=e.symbol,i=t.color,a=!!i?.a,l=\"outline\"in t?t.outline:null,o=!!l?.color?.a,n=new s(a&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),c=o&&l.color?new s([l.color.r,l.color.g,l.color.b,l.color.a*this.layer.opacity]):new s([255,255,255,0]),p=e.symbol.color?.isBright??!0,h=p?\"black\":\"white\",m=p?\"rgba(255, 255, 255, .6)\":\"rgba(0, 0, 0, .6)\";return{background:a?n.toCss(!0):\"none\",color:h,textShadow:`-1px -1px 0 ${m},\\n                  1px -1px 0 ${m},\\n                  -1px 1px 0 ${m},\\n                  1px 1px 0 ${m}`,border:o?`1px solid ${c.toCss(!0)}`:\"none\",filter:r(this.effectList)??void 0}}_renderImage(e,s,t){const{label:i,src:r,opacity:a}=e,l={[o.imageryLayerStretchedImage]:t,[o.symbol]:!t},n={opacity:`${a??s.opacity}`},c=g(this.messages,i,!1);return v(\"img\",{alt:c,\"aria-label\":c,border:0,class:this.classes(l),height:e.height,src:r,styles:n,width:e.width})}};e([t()],L.prototype,\"activeLayerInfo\",void 0),e([t()],L.prototype,\"effectList\",void 0),e([t()],L.prototype,\"hasIndicators\",void 0),e([t()],L.prototype,\"headingLevel\",void 0),e([t()],L.prototype,\"isChild\",void 0),e([t()],L.prototype,\"layer\",void 0),e([t()],L.prototype,\"legendElement\",void 0),e([t()],L.prototype,\"messages\",void 0),L=b=e([i(\"esri.widgets.Legend.styles.card.LegendElement\")],L);export{L as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../intl.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as i}from\"./css.js\";import o from\"./LegendElement.js\";import{loadCalciteComponents as n}from\"../../../support/componentsUtils.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as a}from\"../../../support/decorators/messageBundle.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";import{substitute as c}from\"../../../../intl/substitute.js\";const d=768;let p=class extends r{constructor(e,s){super(e,s),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout=\"stack\",this.messages=null,this.messagesCommon=null,this.type=\"card\",this.view=null}loadDependencies(){return n({carousel:()=>import(\"@esri/calcite-components/dist/components/calcite-carousel\"),\"carousel-item\":()=>import(\"@esri/calcite-components/dist/components/calcite-carousel-item\")})}render(){this._hasIndicators=\"auto\"===this.layout&&this.view&&this.view.container.clientWidth<=d||\"stack\"===this.layout;const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),s={[i.stacked]:this._hasIndicators};return l(\"div\",{class:this.classes(i.base,s)},e||l(\"div\",{class:i.message},this.messages.noLegend))}_renderCarousel(){const e=[],s=this.activeLayerInfos;if(s)for(const t of s)this._renderSections(t,e);return e?.length?l(\"calcite-carousel\",{class:i.carousel,label:this.messages.carousel},e.map(((s,t)=>l(\"calcite-carousel-item\",{class:i.carouselItem,key:t,label:c(this.messagesCommon.pagination.pageText,{index:t+1,total:e.length})},s)))):null}_renderLayers(){const e=this.activeLayerInfos,s=e?.toArray()?.map((e=>this._renderLegendForLayer(e))).filter(Boolean);return s?.length?s:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const s=e.children.toArray().map(this._renderLegendForLayer,this);return l(\"section\",{class:this.classes(i.service,i.groupLayer),key:e.layer.uid},l(\"div\",{class:i.serviceCaptionContainer},e.title),s)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const s=e.legendElements?.filter(Boolean);if(!s?.length)return null;const t=s.map((s=>l(o,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages}))),r={[i.groupLayerChild]:!!e.parent};return l(\"section\",{class:this.classes(i.service,r),key:e.layer.uid},l(\"div\",{class:i.serviceCaptionContainer},l(\"div\",{class:i.serviceCaptionText},e.title)),l(\"div\",{class:i.serviceContent},t))}_renderSections(e,s){if(!e.ready)return;if(e.children.length)for(const r of e.children)this._renderSections(r,s);const t=e.legendElements;if(t?.length)for(const r of t){const t=l(o,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${r.type}`,layer:e.layer,legendElement:r,messages:this.messages});t&&s.push(t)}}};e([s()],p.prototype,\"activeLayerInfos\",void 0),e([s()],p.prototype,\"headingLevel\",void 0),e([s()],p.prototype,\"layout\",void 0),e([s(),a(\"esri/widgets/Legend/t9n/Legend\")],p.prototype,\"messages\",void 0),e([s(),a(\"esri/t9n/common\")],p.prototype,\"messagesCommon\",void 0),e([s({readOnly:!0})],p.prototype,\"type\",void 0),e([s()],p.prototype,\"view\",void 0),p=e([t(\"esri.widgets.Legend.styles.card.CardView\")],p);export{p as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend\",a={service:`${e}__service`,label:`${e}__service-label`,layer:`${e}__layer`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,layerTable:`${e}__layer-table`,layerTableSizeRamp:`${e}__layer-table--size-ramp`,layerChildTable:`${e}__layer-child-table`,layerCaption:`${e}__layer-caption`,layerBody:`${e}__layer-body`,layerRow:`${e}__layer-row`,layerCell:`${e}__layer-cell`,layerInfo:`${e}__layer-cell ${e}__layer-cell--info`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${e}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${e}__imagery-layer-info--stretched`,symbolContainer:`${e}__layer-cell ${e}__layer-cell--symbols`,symbol:`${e}__symbol`,rampContainer:`${e}__ramps`,sizeRamp:`${e}__size-ramp`,colorRamp:`${e}__color-ramp`,opacityRamp:`${e}__opacity-ramp`,borderlessRamp:`${e}__borderless-ramp`,rampTick:`${e}__ramp-tick`,rampFirstTick:`${e}__ramp-tick-first`,rampLastTick:`${e}__ramp-tick-last`,rampLabelsContainer:`${e}__ramp-labels`,rampLabel:`${e}__ramp-label`,message:`${e}__message`,univariateAboveAndBelowLabel:\"esri-univariate-above-and-below-ramp__label\"};export{a as css,e as legend};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getRampStopLabel as i}from\"../support/utils.js\";import{attachToNode as p}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";const a=24;let n=class extends r{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=\"opacity-ramp\"===this.legendElement.type?o.opacityRamp:\"\";return e.className=`${o.colorRamp} ${t}`,null!=this.opacity&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const s={width:`${a}px`},r={height:t.style.height};return l(\"div\",{class:o.layerRow,key:`${this.key}-row`},l(\"div\",{class:o.symbolContainer,styles:s},l(\"div\",{afterCreate:p,bind:t,class:o.rampContainer})),l(\"div\",{class:o.layerInfo},l(\"div\",{class:o.rampLabelsContainer,styles:r},e.infos.map(((t,s)=>this._renderRampLabel(t,s,e.type))))))}_renderRampLabel(e,t,s){return l(\"div\",{class:e.label?o.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},i(e,s,this.messages))}};e([t()],n.prototype,\"_preview\",null),e([t()],n.prototype,\"legendElement\",void 0),e([t()],n.prototype,\"messages\",void 0),e([t()],n.prototype,\"opacity\",void 0),n=e([s(\"esri.widgets.Legend.styles.classic.ColorRamp\")],n);export{n as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../Widget.js\";import{css as t}from\"./css.js\";import{renderSpikeRamp as i}from\"../support/sizeRampUtils.js\";import{getTitle as l,attachToNode as p}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as m}from\"../../../support/jsxFactory.js\";let a=class extends o{constructor(e,s){super(e,s),this.legendElement=null}render(){const e=this.legendElement.infos.map((e=>this._renderRow(e))).filter(Boolean);return e.length?\"spike\"===this.legendElement.theme?i(this.legendElement):m(\"div\",{class:t.layerBody},e):null}_renderRow(e){return e.preview?m(\"div\",{class:t.layerRow,key:`${this.key}-${e.label}-row`},m(\"div\",{class:this.classes(t.symbolContainer,t.sizeRamp)},m(\"div\",{afterCreate:p,bind:e.preview,class:t.symbol})),m(\"div\",{class:t.layerInfo},l(this.messages,e.label,!1)||\"\")):null}};e([s()],a.prototype,\"legendElement\",void 0),e([s()],a.prototype,\"messages\",void 0),a=e([r(\"esri.widgets.Legend.styles.classic.SizeRamp\")],a);export{a as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as r,getUnivariateColorRampSize as l,getUnivariateColorRampPreview as a,getUnivariateColorRampMargin as p,univariateColorRampContainerStyles as n,univariateColorRampStyles as c,univariateRampContainerStyles as m}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";let y=class extends i{constructor(e,s){super(e,s),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,effectList:t,key:i}=this,{sizeRampElement:y,colorRampElement:b}=r(e,s);if(!y)return null;const f=this.messages.previewColorRampAriaLabel,u=l(y,\"above\",!0),g=l(y,\"below\",!0),h=12,L=a(b,{width:h,height:u,rampAlignment:\"vertical\",opacity:s,type:\"above\",effectList:t,ariaLabel:f}),w=a(b,{width:h,height:g,rampAlignment:\"vertical\",opacity:s,type:\"below\",effectList:t,ariaLabel:f}),j=p(y),A=y.infos.map((e=>e.label)),$=A.map(((e,s)=>{const t=2===s;return 0===s?v(\"div\",{class:e?L?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${i}-color-ramp-above-label-${e??s}`},e):t?v(\"div\",null):null})),C=A.length-1,R=Math.floor(A.length/2),k=A.map(((e,s)=>s===R||s===C?v(\"div\",{class:e?L?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${i}-color-ramp-below-label-${e??s}`},e):null)),x={display:\"table-cell\",verticalAlign:\"middle\"},E={marginTop:`${j}px`},B={height:`${u}px`},U={height:`${g}px`};return v(\"div\",{key:`${i}-container`,styles:m},v(\"div\",{class:o.layerBody},y.infos.map(((e,s)=>v(\"div\",{class:this.classes(o.layerRow,o.sizeRamp),key:`${i}-row-${s}`},v(\"div\",{afterCreate:d,bind:e.preview,class:o.symbol,styles:x}),L||s%2!=0?null:v(\"div\",{class:o.layerInfo},A[s]))))),L?v(\"div\",{styles:E},v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:L,class:o.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:o.rampLabelsContainer,styles:B},$))),v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:w,class:o.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:o.rampLabelsContainer,styles:U},k)))):null)}};e([s()],y.prototype,\"effectList\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([t(\"esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp\")],y);export{y as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateColorRampMargin as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,univariateColorRampContainerStyles as m,univariateColorRampStyles as c,univariateRampContainerStyles as n}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";let f=class extends r{constructor(e,s){super(e,s),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,effectList:t,key:r}=this,{sizeRampElement:f,colorRampElement:v}=i(e);if(!f)return null;const u=l(f),g=12,b=a(f,\"full\",!1),h=p(v,{width:g,height:b,rampAlignment:\"vertical\",opacity:s,type:\"full\",effectList:t,ariaLabel:this.messages?.previewColorRampAriaLabel}),j=f.infos.length-1,L=f.infos.map(((e,s)=>0===s||s===j?y(\"div\",{class:e.label?v?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${r}-color-ramp-label-${e.label??s}`},e.label):null)),w={display:\"table-cell\",verticalAlign:\"middle\"},C={marginTop:`${u}px`},R={height:`${b}px`};return y(\"div\",{key:`${r}-container`,styles:n},y(\"div\",{class:o.layerBody},f.infos.map(((e,s)=>y(\"div\",{class:this.classes(o.layerRow,o.sizeRamp),key:`${r}-row-${s}`},y(\"div\",{afterCreate:d,bind:e.preview,class:o.symbol,styles:w}))))),y(\"div\",{styles:C},y(\"div\",{styles:m},y(\"div\",{styles:c},y(\"div\",{afterCreate:d,bind:h,class:o.rampContainer})),y(\"div\",{styles:c},y(\"div\",{class:o.rampLabelsContainer,styles:R},L)))))}};e([s()],f.prototype,\"effectList\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),e([s()],f.prototype,\"opacity\",void 0),f=e([t(\"esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp\")],f);export{f as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import i from\"./ColorRamp.js\";import{css as a}from\"./css.js\";import l from\"./SizeRamp.js\";import o from\"./UnivariateAboveAndBelowRamp.js\";import n from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as m}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as p}from\"../support/utils.js\";import{attachToNode as c,isImageryStretchedLegend as h,getTitle as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";var g;let f=g=class extends r{constructor(e,s){super(e,s),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=p(this.legendElement,this.messages),t=this.isChild?a.layerChildTable:a.layerTable,r=s?y(\"div\",{class:a.layerCaption},s):null,i={[a.layerTableSizeRamp]:\"size-ramp\"===this.legendElement.type||!this.isChild};return y(\"section\",{class:this.classes(t,i),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return y(l,{key:this.key,legendElement:this.legendElement,messages:this.messages});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return y(i,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return m(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":return y(\"div\",{afterCreate:c,bind:this.legendElement.preview,key:`${this.key}-preview`});case\"univariate-above-and-below-ramp\":return y(o,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return y(n,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map((s=>this._renderElementInfo(s,e.legendType))).filter(Boolean);return s.length?y(\"div\",{class:a.layerBody},s):null}_renderElementInfo(e,s){const{layer:t}=this,r=\"label\"in e?e.label:null,i=`${this.key}-${r}`;if(\"type\"in e&&e.type)return y(g,{effectList:this.effectList,isChild:!0,key:i,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const l=h(t,s),o={[a.imageryLayerInfoStretched]:l},n={[a.imageryLayerInfoStretched]:l};return y(\"div\",{class:a.layerRow,key:`${i}-row`},y(\"div\",{class:this.classes(a.symbolContainer,n)},this._renderPreview(e,l)),y(\"div\",{class:this.classes(a.layerInfo,o)},d(this.messages,r,!1)||\"\"))}_renderPreview(e,s){const{layer:t}=this;return\"preview\"in e&&e.preview?y(\"div\",{afterCreate:c,bind:e.preview,class:a.symbol}):\"src\"in e&&e.src?this._renderImage(e,t,s):null}_renderImage(e,s,t){const{label:r,src:i,opacity:l}=e,o={[a.imageryLayerStretchedImage]:t,[a.symbol]:!t},n={opacity:`${l??s.opacity}`},m=d(this.messages,r,!1);return y(\"img\",{alt:m,\"aria-label\":m,border:0,class:this.classes(o),height:e.height,src:i,styles:n,width:e.width})}};e([s()],f.prototype,\"effectList\",void 0),e([s()],f.prototype,\"isChild\",void 0),e([s()],f.prototype,\"layer\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),f=g=e([t(\"esri.widgets.Legend.styles.classic.LegendElement\")],f);export{f as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../Widget.js\";import{css as o,legend as i}from\"./css.js\";import n from\"./LegendElement.js\";import{globalCss as l}from\"../../../support/globalCss.js\";import{Heading as a}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as c}from\"../../../support/decorators/messageBundle.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";const d=`${i}__`;let m=class extends t{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type=\"classic\"}render(){const e=this.activeLayerInfos,s=e?.toArray().map((e=>this._renderLegendForLayer(e))).filter(Boolean);return s?.length?p(\"section\",null,s):p(\"div\",{class:o.message,key:\"no-legend\"},this.messages.noLegend)}_renderLegendForLayer(e,s){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,t=`${d}${s?`${s}-`:\"\"}${r}`,i=e.title?a({level:this.headingLevel,class:this.classes(l.heading,o.label)},e.title):null;if(e.children.length){const s=e.children.toArray().map((e=>this._renderLegendForLayer(e,r)));return p(\"section\",{class:this.classes(o.service,o.groupLayer),key:t},i,s)}return this._renderLegendElementsForLayer(e,i,t)}_renderLegendElementsForLayer(e,s,r){const t=e.legendElements?.filter(Boolean);if(!t?.length)return null;const i=t.map((s=>p(n,{effectList:e.effectList,isChild:!1,key:`${r}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages}))),l={[o.groupLayerChild]:!!e.parent};return p(\"section\",{class:this.classes(o.service,l),key:r},s,p(\"div\",{class:o.layer},i))}};e([s()],m.prototype,\"activeLayerInfos\",void 0),e([s()],m.prototype,\"headingLevel\",void 0),e([s(),c(\"esri/widgets/Legend/t9n/Legend\")],m.prototype,\"messages\",void 0),e([s({readOnly:!0})],m.prototype,\"type\",void 0),m=e([r(\"esri.widgets.Legend.styles.classic.ClassicView\")],m);export{m as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{on as t,watch as s,initial as i}from\"../core/reactiveUtils.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{cast as o}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"./Widget.js\";import a from\"./Legend/LegendViewModel.js\";import d from\"./Legend/styles/card/CardView.js\";import p from\"./Legend/styles/classic/ClassicView.js\";import{globalCss as y}from\"./support/globalCss.js\";import\"./support/widgetUtils.js\";import{messageBundle as c}from\"./support/decorators/messageBundle.js\";import{tsx as h}from\"./support/jsxFactory.js\";const g={base:\"esri-legend\"};let v=class extends l{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.viewModel=new a,this.style=new p}initialize(){this.addHandles([t((()=>this.view),\"resize\",(()=>this.scheduleRender())),t((()=>this.activeLayerInfos),\"change\",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),s((()=>this.headingLevel),(e=>{const{style:t}=this;t&&(t.headingLevel=e)})),s((()=>this.style),((e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,\"card\"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)}),i)])}destroy(){this.style?.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return\"legend\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const t=this._get(\"style\");e!==t&&t?.destroy(),this._set(\"style\",e)}castStyle(e){if(e instanceof d||e instanceof p)return e;if(\"string\"==typeof e)return\"card\"===e?new d:new p;if(e&&\"string\"==typeof e.type){const t={...e};return delete t.type,\"card\"===e.type?new d(t):new p(t)}return new p}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return h(\"div\",{class:this.classes(g.base,y.widget,this.style instanceof p?y.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const r=s((()=>e.version),(()=>this.scheduleRender()));this.addHandles(r,`version_${e.layer.uid}`);const o=t((()=>e.children),\"change\",(()=>e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))),i);this.addHandles(o,`version_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};e([r()],v.prototype,\"activeLayerInfos\",null),e([r()],v.prototype,\"basemapLegendVisible\",null),e([r()],v.prototype,\"groundLegendVisible\",null),e([r()],v.prototype,\"headingLevel\",void 0),e([r()],v.prototype,\"hideLayersNotInCurrentView\",null),e([r()],v.prototype,\"keepCacheOnDestroy\",null),e([r()],v.prototype,\"respectLayerDefinitionExpression\",null),e([r()],v.prototype,\"respectLayerVisibility\",null),e([r()],v.prototype,\"icon\",null),e([r()],v.prototype,\"label\",null),e([r()],v.prototype,\"layerInfos\",null),e([r(),c(\"esri/widgets/Legend/t9n/Legend\")],v.prototype,\"messages\",void 0),e([r()],v.prototype,\"style\",null),e([o(\"style\")],v.prototype,\"castStyle\",null),e([r()],v.prototype,\"view\",null),e([r()],v.prototype,\"viewModel\",void 0),v=e([n(\"esri.widgets.Legend\")],v);const u=v;export{u as default};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIkE,SAASA,GAAEA,IAAEC,IAAEC,IAAE;AAAC,QAAMC,MAAEH,GAAE;AAAyB,MAAG,CAACG,OAAG,EAAE,qBAAoBA,QAAI,CAACA,IAAE,gBAAgB,QAAO;AAAK,QAAMC,KAAED,IAAE,gBAAgB,KAAM,CAAAE,QAAG,WAASA,IAAE,IAAK;AAAE,MAAG,EAAE,WAAUD,OAAI,CAACA,GAAE,MAAM,QAAO;AAAK,QAAME,KAAEF,GAAE,MAAM,KAAM,CAAAC,QAAGA,IAAE,WAAY,GAAEE,MAAEH,GAAE,MAAM,KAAM,CAAAC,QAAGA,IAAE,WAAY;AAAE,MAAG,QAAMC,MAAG,QAAMC,IAAE,QAAO;AAAK,QAAMC,KAAEN,GAAE,qBAAqB,uBAAuBA,GAAE,KAAK,EAAE,OAAMO,KAAEL,GAAE,OAAMM,KAAET,GAAE,qBAAqBO,IAAEC,EAAC;AAAE,SAAOC,KAAE,IAAID,GAAE,EAAC,OAAML,GAAE,OAAM,SAAQJ,GAAE,gBAAe,cAAaU,GAAE,UAAS,SAAQV,GAAE,gBAAe,cAAaU,GAAE,SAAQ,CAAC,IAAE;AAAI;;;ACAhT,SAASC,GAAEC,IAAE;AAAC,QAAMC,KAAE,GAAEC,KAAE,KAAK,MAAM,KAAK,MAAM,KAAK,IAAIF,EAAC,CAAC,CAAC,IAAE,GAAEG,MAAED,KAAE,KAAGA,KAAE,IAAE,IAAEA,IAAEE,KAAE,KAAIL,KAAE,KAAK,IAAIC,EAAC,KAAGI,KAAE,YAAU;AAAW,SAAOF,GAAEF,IAAE,EAAC,UAASD,IAAE,0BAAyBE,IAAE,0BAAyBE,IAAC,CAAC;AAAC;;;ACAi8F,IAAM,KAAG;AAAT,IAAY,KAAG;AAAf,IAAiE,KAAG;AAApE,IAA+F,KAAG;AAAlG,IAAiI,KAAG;AAApI,IAA2J,KAAG;AAA9J,IAA0M,KAAG,IAAIE,GAAE,EAAC,mBAAkB,SAAQ,wBAAuB,cAAa,sBAAqB,YAAW,qBAAoB,WAAU,wBAAuB,aAAY,CAAC;AAApX,IAAsX,KAAG,IAAIC,GAAE,EAAC,MAAK,GAAE,SAAQ,EAAC,OAAM,CAAC,KAAI,KAAI,KAAI,GAAE,GAAE,OAAM,IAAE,EAAC,CAAC;AAAjb,IAAmb,KAAG,IAAIC,GAAE,EAAC,OAAM,QAAO,CAAC;AAAE,SAAS,GAAGC,KAAE;AAAC,SAAM,WAASA,IAAE;AAAI;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,mBAAiBA,IAAE;AAAI;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,sBAAoBA,IAAE;AAAI;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,qBAAmBA,IAAE;AAAI;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,2BAAyBA,IAAE;AAAI;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,oCAAkCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,yCAAuCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,yCAAuCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,qCAAmCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAO,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC;AAAC;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,2CAAyCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,mDAAiDA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,+CAA6CA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,mDAAiDA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,wCAAsCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,sCAAoCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAEC,IAAE;AAAC,SAAO,GAAGD,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,IAAE,SAAOC,GAAE,QAAMC,GAAEF,GAAC,IAAE,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC;AAAC;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,qCAAmCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,oCAAkCA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,6BAA2BA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,2BAAyBA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,4BAA0BA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,gCAA8BA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,4BAA0BA,IAAE;AAAa;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAOA,IAAE,kBAAgB;AAAE;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAOA,IAAE,kBAAgB;AAAE;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAOA,IAAE,kBAAgB;AAAE;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAM,mBAAiBA,IAAE;AAAI;AAAC,SAAS,GAAGA,KAAE;AAAC,QAAMC,KAAE,mBAAkBD,MAAEA,KAAG,gBAAc;AAAK,SAAM,4BAA0BC,IAAG;AAAI;AAAC,SAAS,GAAGD,KAAE;AAAC,QAAMC,KAAE,mBAAkBD,MAAEA,KAAG,gBAAc;AAAK,SAAM,4BAA0BC,IAAG,QAAM,sBAAoBA,IAAG;AAAe;AAAC,SAAS,GAAGD,KAAE;AAAC,SAAM,eAAcA;AAAC;AAAC,SAAS,GAAGA,KAAE;AAAC,SAAOA,OAAG,YAAWA;AAAC;AAAC,eAAe,GAAGA,KAAEC,IAAE;AAAC,QAAMC,KAAE,MAAM,EAAG,gCAAgC;AAAE,SAAM,+BAA6BF,OAAGC,OAAID,MAAE,qBAAoBE,GAAGA,GAAEF,GAAC,GAAE,EAAC,OAAMC,GAAC,CAAC;AAAC;AAAC,SAAS,GAAGD,KAAEC,IAAE;AAAC,QAAK,EAAC,OAAMC,IAAE,QAAOC,IAAE,QAAOC,IAAE,gBAAeC,IAAE,iBAAgBC,GAAC,IAAEN;AAAE,MAAG,CAACE,GAAE,QAAO;AAAK,QAAMK,MAAE,EAAE,CAACL,MAAG,CAACI,MAAG,CAACH,MAAG,CAACC,MAAGH,IAAG,SAAS,EAAE,MAAMI,MAAG,EAAE,IAAE,CAACJ,EAAC,GAAEJ,KAAEK,KAAE,EAAC,CAACA,EAAC,GAAEK,MAAI,CAAC,EAAC,IAAE;AAAK,SAAOV,OAAIM,OAAIN,GAAEM,EAAC,IAAEI,MAAI,CAAC,IAAGH,OAAIP,GAAEO,EAAC,IAAEG,MAAI,CAAC,KAAIV;AAAC;AAAC,IAAM,KAAG,IAAIC,GAAE,EAAC,OAAM,QAAO,MAAK,6BAA4B,MAAK,IAAG,SAAQ,EAAC,OAAM,GAAE,OAAM,CAAC,IAAG,IAAG,IAAG,CAAC,EAAC,EAAC,CAAC;AAAE,IAAI,KAAG,CAAC;AAAR,IAAU,KAAG,cAAc,EAAC;AAAA,EAAC,YAAYE,KAAE;AAAC,UAAMA,GAAC,GAAE,KAAK,gBAAc,OAAG,KAAK,kBAAgB,OAAG,KAAK,eAAa,OAAG,KAAK,uBAAqB,oBAAI,OAAI,KAAK,sBAAoB,oBAAI,OAAI,KAAK,2BAAyB,MAAK,KAAK,0BAAwB,OAAG,KAAK,6BAA2B,MAAK,KAAK,mCAAiC,MAAK,KAAK,wBAAsB,MAAK,KAAK,4BAA0B,MAAK,KAAK,WAAS,IAAI,KAAE,KAAK,YAAU,MAAK,KAAK,QAAM,MAAK,KAAK,iBAAe,CAAC,GAAE,KAAK,SAAO,MAAK,KAAK,6BAA2B,OAAG,KAAK,qBAAmB,OAAG,KAAK,mCAAiC,OAAG,KAAK,yBAAuB,MAAG,KAAK,cAAY,CAAC,GAAE,KAAK,QAAM,MAAK,KAAK,OAAK;AAAA,EAAI;AAAA,EAAC,aAAY;AAAC,UAAMA,MAAE,MAAI,KAAK,aAAa,OAAO;AAAE,SAAK,WAAW,CAACO,GAAG,MAAI,KAAK,UAAU,UAAU,CAAAN,OAAG;AAAC,YAAK,EAAC,OAAMC,IAAE,SAAQC,GAAC,IAAEF;AAAE,MAAAC,GAAE,QAAS,CAAAD,OAAG;AAAC,cAAMC,KAAE,iCAAiCD,GAAE,MAAM,GAAG;AAAG,aAAK,WAAW,EAAG,MAAIA,GAAE,OAAOD,KAAE,CAAC,GAAEE,EAAC;AAAA,MAAC,CAAE,GAAEC,GAAE,QAAS,CAAAH,QAAG,KAAK,cAAcA,IAAE,MAAM,GAAG,CAAE,GAAEA,IAAE;AAAA,IAAC,CAAE,CAAC,CAAC,GAAE,KAAK,uBAAqB,KAAG,CAAC;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,uBAAqB,MAAK,KAAK,sBAAoB,MAAK,KAAK,2BAAyB,MAAK,KAAK,uBAAqB,KAAG,OAAM,KAAK,mCAAiC;AAAA,EAAI;AAAA,EAAC,IAAI,aAAY;AAAC,UAAMA,MAAE,KAAK;AAAM,QAAIC,KAAE;AAAK,WAAM,YAAWD,OAAGA,IAAE,WAASC,KAAE,IAAIM,MAAEN,GAAE,SAAOD,IAAE,QAAOC,GAAE,cAAc,GAAEA,GAAE,QAAM,KAAK,QAAOA;AAAA,EAAC;AAAA,EAAC,IAAI,UAAS;AAAC,UAAMD,MAAE,KAAK,MAAM,SAAQC,KAAE,KAAK,QAAQ,SAAQC,KAAE,KAAK,MAAM,QAAOC,KAAED,MAAG,SAAQA,KAAE,KAAK,uBAAuBA,EAAC,IAAE;AAAK,WAAO,QAAMD,KAAEA,KAAED,MAAE,QAAMG,KAAEA,KAAEH,MAAEA;AAAA,EAAC;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,SAAO,KAAK,UAAQ,KAAK,SAAS,SAAO,IAAE,KAAK,eAAe,IAAE,KAAK,eAAe,SAAO;AAAA,EAAE;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK,MAAM,SAAO;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAe;AAAC,UAAMA,MAAE,KAAK;AAAM,QAAG,SAAOA,IAAE,QAAM;AAAG,QAAG,YAAWA,OAAGA,IAAE,UAAQ,MAAM,QAAQA,IAAE,MAAM,EAAE,QAAM;AAAG,QAAG,sBAAqBA,OAAGA,IAAE,kBAAiB;AAAC,UAAG,cAAYA,IAAE,iBAAiB,KAAK,QAAM;AAAG,UAAG,cAAYA,IAAE,iBAAiB,QAAM,cAAaA,IAAE,oBAAkBA,IAAE,iBAAiB,SAAS,QAAO,KAAK,uBAAuBA,IAAE,iBAAiB,QAAQ;AAAA,IAAC;AAAC,WAAM,cAAaA,OAAGA,IAAE,WAAS,CAAC,EAAE,uBAAsBA,OAAGA,IAAE,qBAAmB,GAAGA,IAAE,QAAQ,MAAI,KAAK,uBAAuBA,IAAE,QAAQ,IAAE,KAAK,oBAAoB,KAAK,KAAK;AAAA,EAAC;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK,KAAK,SAAS,IAAE;AAAA,EAAC;AAAA,EAAC,MAAM,yCAAyCA,KAAE;AAAC,QAAG,EAAE,CAAC,KAAK,8BAA4B,MAAM,KAAK,sBAAsB,GAAG,QAAO,KAAK,iBAAe,CAAC,GAAE,KAAK,KAAK,aAAa,OAAO;AAAE,UAAMC,KAAE,MAAM,KAAKD,KAAG,CAAAA,QAAG;AAAC,UAAGF,GAAEE,GAAC,EAAE,QAAO,KAAK,2BAA2BA,IAAE,UAAS,EAAC,OAAMA,IAAE,MAAK,CAAC;AAAE,UAAGA,IAAE,YAAY,SAAS,QAAO;AAAC,cAAMC,KAAED,IAAE,iBAAgBE,KAAED,IAAG,aAAYE,KAAED,MAAGD,GAAEC,GAAE,QAAQ,GAAEE,KAAE,GAAG,KAAKH,GAAE,YAAY;AAAE,eAAOE,KAAE,KAAK,2BAA2BA,IAAE,EAAC,OAAMH,IAAE,MAAK,cAAaI,GAAC,CAAC,KAAG,EAAE,UAAU,IAAI,EAAE,KAAK,4BAA4B,GAAE;AAAA,MAAK;AAAC,aAAO;AAAA,IAAI,CAAE;AAAE,QAAG;AAAC,YAAMJ,MAAE,CAAC,GAAEE,KAAE,MAAM,QAAQ,WAAWD,EAAC;AAAE,iBAAUA,MAAKC,GAAE,KAAG,gBAAcD,GAAE,OAAO,YAAUC,MAAKD,GAAE,SAAO,CAAC,EAAE,CAAAD,IAAE,KAAKE,EAAC;AAAE,WAAK,iBAAeF,KAAE,KAAK,aAAa,OAAO;AAAA,IAAC,SAAOE,IAAE;AAAC,QAAE,UAAU,IAAI,EAAE,KAAK,0CAAyCA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,+BAA+BF,KAAE;AAAC,QAAG;AAAC,YAAMC,KAAE,CAAC,KAAK,8BAA4B,MAAM,KAAK,sBAAsB;AAAE,WAAK,iBAAeA,KAAE,MAAM,KAAK,2BAA2BD,GAAC,IAAE,CAAC,GAAE,KAAK,aAAa,OAAO;AAAA,IAAC,SAAOC,IAAE;AAAC,QAAE,UAAU,IAAI,EAAE,KAAK,0CAAyCA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,uCAAuCD,KAAE;AAAC,QAAG;AAAC,YAAMC,KAAE,CAAC,KAAK,8BAA4B,MAAM,KAAK,sBAAsB;AAAE,WAAK,iBAAeA,KAAE,MAAM,KAAK,sCAAsCD,GAAC,IAAE,CAAC,GAAE,KAAK,aAAa,OAAO;AAAA,IAAC,SAAOC,IAAE;AAAC,QAAE,UAAU,IAAI,EAAE,KAAK,0CAAyCA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,8BAA6B;AAAC,UAAMD,MAAE,KAAK;AAAM,QAAG,GAAGA,GAAC,EAAE,MAAK,sCAAsC;AAAA,aAAU,GAAGA,GAAC,EAAE,MAAK,qCAAqC;AAAA,aAAU,GAAGA,GAAC,EAAE,OAAM,KAAK,wCAAwC;AAAA,aAAU,GAAGA,GAAC,EAAE,OAAM,KAAK,8CAA8C;AAAA,aAAU,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,EAAE,OAAM,KAAK,qCAAqC;AAAA,SAAM;AAAC,WAAK,cAAc,uBAAuB;AAAE,UAAIC,KAAE;AAAU,UAAG,GAAGD,GAAC,GAAE;AAAC,cAAME,KAAEF;AAAE,QAAAC,MAAGC,IAAG,gBAAgB,gBAAc,aAAW,OAAKF,IAAE,SAAS,SAAOA,IAAE,QAAQ,KAAK,EAAE,IAAE;AAAA,MAAM;AAAC,UAAG,GAAGA,GAAC,KAAG,iBAAeA,IAAE,KAAK;AAAO,YAAM,KAAK,iBAAiB,GAAGA,IAAE,GAAG,IAAIC,EAAC,EAAE,EAAE,KAAM,OAAMA,OAAG;AAAC,aAAK,iBAAe,CAAC,GAAE,KAAK,aAAa,OAAO;AAAE,cAAMC,KAAED,GAAE,IAAK,OAAMA,OAAG;AAAC,cAAG,GAAGD,GAAC,GAAE;AAAC,kBAAMC,KAAE,EAAG,MAAI,CAACD,IAAE,gBAAeA,IAAE,OAAO,GAAI,MAAI,EAAG,YAAS;AAAC,iBAAG,UAAQ,MAAKA,IAAE,WAAS,MAAM,KAAK,+BAA+BA,IAAE,QAAQ,IAAE,MAAM,KAAK,4BAA4B;AAAA,YAAC,CAAE,EAAE,CAAE;AAAE,iBAAK,WAAWC,IAAE,uBAAuB;AAAA,UAAC;AAAC,gBAAMC,KAAE,KAAK,0CAA0CD,EAAC;AAAE,UAAAC,IAAG,MAAM,WAAS,GAAGF,GAAC,MAAIE,GAAE,QAAMF,IAAE,QAAO,KAAK,eAAe,KAAKE,EAAC,IAAG,KAAK,aAAa,OAAO;AAAA,QAAC,CAAE;AAAE,cAAM,QAAQ,WAAWA,EAAC;AAAA,MAAC,CAAE,EAAE,MAAO,CAAAF,QAAG;AAAC,UAAE,UAAU,IAAI,EAAE,KAAK,4CAA2CA,GAAC;AAAA,MAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,wBAAuB;AAAC,UAAMA,MAAE,KAAK,OAAMC,KAAE,KAAK,WAAUC,KAAED,MAAG,iBAAgBA,MAAG,uBAAsBA;AAAE,QAAG,CAACC,MAAG,EAAED,MAAG,iBAAgBD,OAAG,uBAAsBA,KAAG,QAAM;AAAG,UAAM,EAAG,MAAI,CAACC,GAAE,QAAS;AAAE,UAAME,KAAED,KAAE,iBAAgBD,MAAGA,GAAE,YAAY,IAAE,iBAAgBD,OAAGA,IAAE,YAAY;AAAE,QAAG,CAACG,GAAE,QAAM;AAAG,IAAAA,GAAE,WAAS,KAAK,KAAK;AAAO,WAAO,OAAKD,KAAE,uBAAsBD,MAAG,MAAMA,GAAE,kBAAkBE,EAAC,IAAE,uBAAsBH,OAAG,MAAMA,IAAE,kBAAkBG,EAAC;AAAA,EAAE;AAAA,EAAC,uBAAuBH,KAAE;AAAC,QAAIC,KAAE;AAAE,UAAMC,KAAEF,IAAE;AAAO,WAAOE,MAAG,SAAQA,OAAID,KAAE,KAAK,uBAAuBC,EAAC,IAAGF,IAAE,UAAQC;AAAA,EAAC;AAAA,EAAC,iBAAgB;AAAC,WAAO,KAAK,SAAS,KAAM,CAAAD,QAAGA,IAAE,KAAM;AAAA,EAAC;AAAA,EAAC,uBAAuBA,KAAE;AAAC,QAAG,kBAAgBA,IAAE,KAAK,QAAM;AAAG,UAAMC,KAAE,qBAAoBD,MAAEA,IAAE,kBAAgB;AAAK,QAAG,GAAG,KAAKC,EAAC,EAAE,QAAM;AAAG,UAAMC,KAAE,qBAAoBF,MAAEA,IAAE,kBAAgB;AAAK,WAAM,CAAC,CAACE,IAAG,KAAM,CAAAF,QAAG,KAAK,2BAA2BA,GAAC,CAAE,KAAG,KAAK,uBAAuBA,GAAC;AAAA,EAAC;AAAA,EAAC,uBAAuBA,KAAE;AAAC,YAAOA,IAAE,MAAK;AAAA,MAAC,KAAI;AAAS,eAAO,KAAK,qBAAqBA,IAAE,MAAM;AAAA,MAAE,KAAI;AAAe,eAAO,KAAK,qBAAqBA,IAAE,aAAa,KAAGA,IAAE,gBAAgB,KAAM,CAAAA,QAAG,KAAK,qBAAqBA,IAAE,MAAM,CAAE;AAAA,MAAE,KAAI;AAAe,eAAO,KAAK,qBAAqBA,IAAE,aAAa,KAAG,CAAC,CAACA,IAAE,kBAAkB,KAAM,CAAAA,QAAG,KAAK,qBAAqBA,IAAE,MAAM,CAAE;AAAA,IAAC;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,qBAAqBA,KAAE;AAAC,QAAG,UAAQA,KAAG,MAAK;AAAC,YAAK,EAAC,oBAAmBC,IAAE,UAASC,IAAE,UAASC,GAAC,IAAEH,IAAE,MAAKI,KAAEH,IAAG,KAAM,CAAAD,QAAG,gBAAgB,KAAKA,IAAE,qBAAqB,cAAY,EAAE,CAAE,KAAG;AAAG,aAAO,QAAME,MAAG,QAAMC,MAAGC;AAAA,IAAC;AAAC,WAAM;AAAA,EAAE;AAAA,EAAC,2BAA2BJ,KAAE;AAAC,QAAGA,OAAG,WAASA,IAAE,KAAK,QAAM;AAAG,UAAMC,KAAED,KAAEE,KAAED,GAAE,SAAQE,KAAEF,GAAE;AAAQ,WAAM,EAAE,YAAU,OAAOC,MAAG,CAACA,MAAG,CAAC,KAAK,2BAA2BA,EAAC,OAAK,EAAE,YAAU,OAAOC,MAAG,CAACA,MAAG,CAAC,KAAK,2BAA2BA,EAAC,MAAI,GAAG,KAAKF,GAAE,eAAe;AAAA,EAAE;AAAA,EAAC,oBAAoBD,KAAE;AAAC,QAAG,cAAaA,OAAGA,IAAE,WAAS,KAAG,cAAaA,OAAGA,IAAE,WAAS,EAAE,QAAM;AAAG,QAAG,eAAcA,OAAGA,IAAE,UAAU,QAAOA,IAAE,UAAU,KAAM,CAAAA,QAAG,KAAK,oBAAoBA,GAAC,CAAE;AAAE,UAAMC,KAAED,IAAE;AAAO,QAAG,UAAKA,IAAE,UAAQC,MAAG,GAAGA,EAAC,KAAG,YAAWD,OAAGA,IAAE,UAAQ,gBAAcA,IAAE,OAAO;AAAK,iBAAUE,MAAKD,GAAE,WAAW,UAAQ,CAAC,EAAE,KAAGC,GAAE,OAAKF,IAAE,OAAO,eAAaE,GAAE,WAAS,KAAGA,GAAE,WAAS,GAAG,QAAM;AAAA;AAAG,WAAM;AAAA,EAAE;AAAA,EAAC,MAAM,wCAAuC;AAAC,SAAK,iBAAe,CAAC,GAAE,KAAK,cAAc,qBAAqB,GAAE,KAAK,cAAc,wBAAwB;AAAE,UAAMF,MAAE,KAAK;AAAM,SAAK,WAAW,EAAG,MAAIA,IAAE,mBAAoB,MAAI,KAAK,sCAAsC,CAAE,GAAE,wBAAwB,GAAE,KAAK,WAAW,EAAG,MAAIA,IAAE,kBAAkB,GAAI,MAAI,KAAK,sCAAsC,CAAE,GAAE,qBAAqB;AAAE,UAAMC,KAAED,IAAE,iBAAiB,IAAI,GAAEE,KAAE,CAAC;AAAE,QAAGD;AAAE,UAAGA,GAAE,cAAc,QAAO;AAAC,cAAMD,MAAE,CAAC;AAAE,QAAAC,GAAE,aAAa,QAAS,CAAAA,OAAG;AAAC,UAAAA,GAAE,WAASD,IAAE,KAAK,EAAC,OAAMC,GAAE,SAAO,GAAGA,GAAE,KAAK,IAAG,OAAMA,GAAE,OAAM,QAAO,IAAIF,GAAE,EAAC,OAAME,GAAE,OAAM,SAAQ,KAAI,CAAC,EAAC,CAAC;AAAA,QAAC,CAAE,GAAED,IAAE,UAAQE,GAAE,KAAK,EAAC,MAAK,gBAAe,OAAMD,GAAE,OAAM,OAAMD,IAAC,CAAC;AAAA,MAAC,WAASC,GAAE,kBAAiB;AAAC,cAAK,EAAC,YAAWD,KAAE,cAAaG,GAAC,IAAEF,GAAE,kBAAiBG,KAAEJ,IAAE,QAAQ,EAAE,QAAQ,GAAEK,KAAEF,GAAE,IAAK,CAACH,KAAEC,OAAI,GAAG,MAAIA,KAAEJ,KAAGO,EAAE,IAAIF,GAAGF,GAAC,CAAC,EAAG,EAAE,QAAQ,GAAEM,KAAEF,GAAE,IAAK,CAAAJ,SAAI,EAAC,OAAMA,IAAE,OAAM,OAAM,MAAK,OAAM,KAAI,EAAG;AAAE,QAAAM,GAAE,CAAC,EAAE,QAAMD,GAAE,CAAC,GAAEC,GAAEA,GAAE,SAAO,CAAC,EAAE,QAAMD,GAAE,CAAC,GAAEH,GAAE,KAAK,EAAC,MAAK,cAAa,OAAMD,GAAE,OAAM,OAAMK,IAAE,SAAQE,GAAEJ,GAAE,IAAK,CAAAJ,QAAGA,IAAE,KAAM,GAAE,EAAC,WAAU,MAAM,GAAG,2BAA2B,EAAC,CAAC,EAAC,CAAC;AAAA,MAAC;AAAA;AAAC,UAAM,KAAK,mCAAmCE,IAAE,EAAC,SAAQF,IAAE,QAAO,CAAC,GAAE,KAAK,iBAAeE,IAAE,KAAK,aAAa,OAAO;AAAA,EAAC;AAAA,EAAC,uCAAsC;AAAC,SAAK,iBAAe,CAAC,GAAE,KAAK,cAAc,0BAA0B;AAAE,UAAMF,MAAE,KAAK,MAAM;AAAY,SAAK,WAAW,EAAG,MAAI;AAAC,YAAK,EAAC,OAAMA,IAAC,IAAE;AAAK,aAAOA,OAAG,iBAAgBA,OAAGA,IAAE;AAAA,IAAW,GAAI,MAAI,KAAK,qCAAqC,CAAE,GAAE,0BAA0B;AAAE,UAAMC,KAAED,IAAE,UAAQA,IAAE,QAAQ,KAAM,CAAC,EAAC,IAAGC,GAAC,MAAIA,OAAID,IAAE,OAAQ,GAAG,YAAU;AAAO,IAAAC,OAAI,KAAK,iBAAe,CAAC,EAAC,MAAK,gBAAe,OAAMD,IAAE,OAAM,OAAM,CAAC,EAAC,KAAIC,IAAE,SAAQ,KAAK,QAAO,CAAC,EAAC,CAAC,IAAG,KAAK,aAAa,OAAO;AAAA,EAAC;AAAA,EAAC,MAAM,0CAAyC;AAAC,SAAK,iBAAe,CAAC,GAAE,KAAK,cAAc,uBAAuB;AAAE,UAAMD,MAAE,KAAK;AAAM,QAAIC,KAAE;AAAK,KAACD,IAAE,oBAAkBA,IAAE,2BAAyBC,KAAE,EAAC,GAAGD,IAAE,kBAAiB,GAAGA,IAAE,sBAAqB,IAAG,KAAK,WAAW,EAAG,MAAI;AAAC,YAAK,EAAC,OAAMA,IAAC,IAAE;AAAK,aAAOA,OAAG,eAAcA,OAAGA,IAAE;AAAA,IAAS,GAAI,MAAI,KAAK,wCAAwC,CAAE,GAAE,uBAAuB,GAAE,KAAK,iBAAe,MAAM,KAAK,uCAAuCA,IAAE,WAAUC,EAAC,GAAE,KAAK,aAAa,OAAO;AAAA,EAAC;AAAA,EAAC,MAAM,uCAAuCD,KAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK,OAAMC,KAAE,CAAC;AAAE,SAAK,WAAWH,IAAE,GAAG,UAAU,MAAI,KAAK,wCAAwC,CAAE,GAAE,uBAAuB;AAAE,UAAMI,KAAE,KAAK,aAAa,IAAK,CAAAJ,QAAGE,GAAE,iBAAiBF,GAAC,CAAE,GAAG,OAAO,CAAC,KAAG,CAAC,GAAEM,KAAEF,GAAE,SAAOA,KAAEJ,IAAE,QAAQ;AAAE,eAAUK,MAAKC,IAAE;AAAC,YAAMN,MAAE,EAAG,MAAI,CAACK,GAAE,OAAMA,GAAE,SAAQA,GAAE,aAAa,GAAI,MAAI,KAAK,wCAAwC,CAAE;AAAE,UAAG,KAAK,WAAWL,KAAE,uBAAuB,GAAE,CAAC,KAAK,0BAAwBK,GAAE,WAASA,GAAE,eAAc;AAAC,cAAML,MAAE,MAAM,KAAK,0CAA0CK,IAAEJ,EAAC;AAAE,QAAAD,KAAG,MAAM,UAAQG,GAAE,QAAQH,GAAC;AAAA,MAAC;AAAA,IAAC;AAAC,WAAOG;AAAA,EAAC;AAAA,EAAC,MAAM,0CAA0CH,KAAEC,IAAE;AAAC,QAAG,CAACD,IAAE,aAAWA,IAAE,WAAU;AAAC,YAAME,MAAG,MAAM,KAAK,uCAAuCF,IAAE,WAAUC,EAAC,GAAG,OAAQ,CAAAD,QAAGA,GAAE;AAAE,aAAM,EAAC,MAAK,gBAAe,OAAMA,IAAE,OAAM,OAAME,GAAC;AAAA,IAAC;AAAC,WAAO,KAAK,wCAAwCF,KAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,wCAAwCD,KAAEC,IAAE;AAAC,QAAIC,KAAEF,IAAE;AAAU,QAAG,CAACE,GAAE;AAAO,UAAME,KAAE,EAAC,MAAK,gBAAe,OAAMJ,IAAE,SAAOA,IAAE,QAAM,OAAOA,IAAE,MAAI,EAAE,GAAE,OAAM,CAAC,EAAC;AAAE,IAAAC,OAAIC,KAAE,GAAEA,IAAED,EAAC;AAAG,QAAII,KAAE;AAAK,UAAMC,KAAEN,IAAE,OAAO;AAAQ,QAAG;AAAC,MAAAK,MAAG,MAAM,EAAEH,IAAE,EAAC,cAAa,QAAO,CAAC,GAAG,MAAKG,OAAIA,GAAE,MAAM,UAAQC;AAAA,IAAE,QAAM;AAAA,IAAC;AAAC,WAAOF,GAAE,MAAM,KAAK,EAAC,KAAIF,IAAE,SAAQG,IAAE,SAAQC,GAAC,CAAC,GAAEF;AAAA,EAAC;AAAA,EAAC,iBAAiBJ,KAAEC,IAAE;AAAC,UAAMC,KAAE,MAAI,GAAGF,GAAC;AAAE,WAAOE,KAAE,QAAQ,QAAQA,EAAC,IAAE,KAAK,eAAeD,EAAC,EAAE,KAAM,CAAAA,OAAG;AAAC,YAAMC,KAAED,GAAE;AAAO,aAAO,GAAGD,GAAC,IAAEE,IAAEA;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,eAAeF,KAAE;AAAC,UAAMC,KAAE,KAAK;AAAM,QAAIC,KAAE,EAAC,GAAE,QAAO,eAAcF,IAAC;AAAE,QAAG,GAAGC,EAAC,GAAE;AAAC,YAAMD,MAAEC,GAAE,6BAA6B;AAAe,UAAGD,QAAIE,GAAE,gBAAc,KAAK,UAAUF,IAAE,oBAAoB,OAAO,KAAGA,IAAE,OAAO,CAAC,IAAGC,GAAE,YAAUC,GAAE,UAAQD,GAAE,QAAQ,KAAK,IAAGA,GAAE,UAAQA,GAAE,UAAQA,GAAE,kBAAiB;AAAC,cAAK,EAAC,QAAOD,KAAE,QAAOG,IAAE,kBAAiBC,IAAC,IAAEH;AAAE,QAAAC,KAAE,EAAC,QAAOF,KAAE,QAAOG,IAAE,GAAGD,IAAE,GAAGE,IAAC;AAAA,MAAC;AAAA,IAAC;AAAC,QAAIA,KAAEH,GAAE,IAAI,QAAQ,UAAS,EAAE;AAAE,QAAG,aAAYA,MAAG,CAACA,GAAE,WAAS,OAAM;AAAC,YAAMD,MAAEI,GAAE,QAAQ,GAAG;AAAE,MAAAJ,MAAE,KAAGI,KAAEA,GAAE,MAAM,GAAEJ,GAAC,IAAE,YAAUI,GAAE,MAAMJ,GAAC,IAAEI,MAAG;AAAA,IAAS,OAAK;AAAC,YAAMJ,MAAEI,GAAE,YAAY,EAAE,QAAQ,QAAQ,GAAEH,KAAE,OAAKD,MAAEI,KAAEA,GAAE,MAAM,GAAEJ,GAAC,IAAEI,GAAE,MAAMJ,MAAE,CAAC;AAAE,MAAAI,KAAE,KAAG,cAAY,UAAUH,EAAC,IAAE;AAAA,IAAmB;AAAC,WAAO,EAAEG,IAAE,EAAC,OAAMF,GAAC,CAAC,EAAE,KAAM,CAAAF,QAAGA,IAAE,IAAK;AAAA,EAAC;AAAA,EAAC,MAAM,gDAA+C;AAAC,SAAK,iBAAe,CAAC,GAAE,KAAK,cAAc,mBAAmB;AAAE,UAAMA,MAAE,KAAK;AAAM,SAAK,WAAW,EAAG,MAAIA,IAAE,WAAY,MAAI,KAAK,8CAA8C,CAAE,GAAE,mBAAmB;AAAE,QAAG;AAAC,WAAK,iBAAe,MAAM,KAAK,4CAA4CA,IAAE,WAAU,KAAK,OAAO,GAAE,KAAK,aAAa,OAAO;AAAA,IAAC,SAAOC,IAAE;AAAC,QAAE,UAAU,IAAI,EAAE,KAAK,4CAA2CA,EAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,4CAA4CD,KAAEC,IAAE;AAAC,QAAIC,KAAE,CAAC;AAAE,SAAK,WAAWF,IAAE,GAAG,UAAU,MAAI,KAAK,8CAA8C,CAAE,GAAE,mBAAmB;AAAE,UAAMG,KAAEH,IAAE,QAAQ;AAAE,eAAUI,MAAKD,IAAE;AAAC,YAAMH,MAAE,EAAG,MAAI,CAAC,cAAaI,MAAGA,GAAE,UAASA,GAAE,SAAQA,GAAE,OAAMA,GAAE,OAAO,GAAI,MAAI,KAAK,8CAA8C,CAAE;AAAE,UAAG,KAAK,WAAWJ,KAAE,mBAAmB,GAAE,CAAC,KAAK,0BAAwBI,GAAE,SAAQ;AAAC,cAAMJ,MAAE,QAAMI,IAAG,UAAQA,GAAE,UAAQ,MAAKD,KAAE,QAAMH,MAAEA,MAAEC,KAAEA;AAAE,YAAG,qBAAmBG,GAAE,MAAK;AAAC,gBAAMJ,MAAE,EAAC,MAAK,gBAAe,OAAMI,GAAE,OAAM,OAAM,CAAC,EAAC,GAAEH,KAAE,MAAM,KAAK,4CAA4CG,GAAE,WAAUD,EAAC;AAAE,UAAAH,IAAE,MAAM,KAAK,GAAGC,EAAC,GAAEC,KAAE,CAACF,KAAE,GAAGE,EAAC;AAAA,QAAC,WAASE,GAAE,UAAS;AAAC,UAAAF,KAAE,CAAC,GAAG,MAAM,KAAK,2BAA2BE,GAAE,UAAS,EAAC,OAAMA,GAAE,OAAM,SAAQD,IAAE,UAASC,GAAC,CAAC,GAAE,GAAGF,EAAC;AAAA,QAAC;AAAA,MAAC;AAAA,IAAC;AAAC,WAAOA,GAAE,OAAQ,CAAAF,QAAG,CAAC,CAACA,QAAI,EAAE,WAAUA,QAAI,CAACA,IAAE,SAAOA,IAAE,MAAM,SAAO,EAAG;AAAA,EAAC;AAAA,EAAC,MAAM,uCAAsC;AAAC,SAAK,iBAAe,CAAC,GAAE,KAAK,cAAc,mBAAmB;AAAE,UAAMA,MAAE,KAAK;AAAM,QAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,KAAG,GAAGA,GAAC,GAAE;AAAC,WAAK,WAAW,EAAG,MAAIA,IAAE,WAAY,MAAI,KAAK,oCAAqC,GAAE,mBAAmB;AAAE,UAAG;AAAC,aAAK,iBAAe,MAAM,KAAK,oCAAoCA,IAAE,WAAU,KAAK,OAAO,GAAE,KAAK,aAAa,OAAO;AAAA,MAAC,SAAOC,IAAE;AAAC,UAAE,UAAU,IAAI,EAAE,KAAK,4CAA2CA,EAAC;AAAA,MAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,MAAM,oCAAoCD,KAAEC,IAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK;AAAM,QAAIC,KAAE,CAAC;AAAE,SAAK,WAAWJ,IAAE,GAAG,UAAU,MAAI,KAAK,qCAAqC,CAAE,GAAE,mBAAmB;AAAE,QAAIM,KAAEN,IAAE,QAAQ;AAAE,KAACE,MAAG,KAAK,eAAa,KAAK,YAAY,WAASI,KAAE,GAAGH,EAAC,IAAE,KAAK,YAAY,IAAK,CAAAH,QAAGG,GAAE,2BAA2BH,GAAC,CAAE,EAAE,OAAO,CAAC,IAAE,KAAK,YAAY,IAAK,CAAAA,QAAGG,GAAE,iBAAiBH,GAAC,CAAE,EAAE,OAAO,CAAC;AAAG,eAAUK,MAAKC,IAAE;AAAC,YAAMN,MAAE,EAAG,MAAI,CAACK,GAAE,UAASA,GAAE,SAAQA,GAAE,OAAMA,GAAE,SAAQA,GAAE,aAAa,GAAI,MAAI,KAAK,qCAAqC,CAAE;AAAE,UAAG,KAAK,WAAWL,KAAE,mBAAmB,GAAE,CAAC,KAAK,0BAAwBK,GAAE,WAASA,GAAE,iBAAe,KAAK,mBAAmBA,EAAC,GAAE;AAAC,cAAML,MAAE,QAAMK,IAAG,UAAQA,GAAE,UAAQ,MAAKF,KAAE,QAAMH,MAAEA,MAAEC,KAAEA,IAAEK,MAAE,CAAC,GAAGD,EAAC,KAAGA,GAAE,WAAW,UAAU,IAAE,EAAE,WAAS,CAACA,GAAE;AAAU,YAAGA,GAAE,YAAUC,KAAE;AAAC,gBAAMD,GAAE,KAAK;AAAE,UAAAD,KAAE,CAAC,GAAG,MAAM,KAAK,2BAA2BC,GAAE,UAAS,EAAC,OAAMA,GAAE,OAAM,SAAQF,IAAE,UAASE,GAAC,CAAC,GAAE,GAAGD,EAAC;AAAA,QAAC,WAAS,GAAGC,EAAC,GAAE;AAAC,gBAAML,MAAE,MAAM,KAAK,uCAAuCK,IAAEF,IAAED,EAAC;AAAE,UAAAF,OAAGI,GAAE,QAAQJ,GAAC;AAAA,QAAC;AAAA,MAAC;AAAA,IAAC;AAAC,WAAOI,GAAE,OAAQ,CAAAJ,QAAG,CAAC,CAACA,QAAI,EAAE,WAAUA,QAAI,CAACA,IAAE,SAAOA,IAAE,MAAM,SAAO,EAAG;AAAA,EAAC;AAAA,EAAC,MAAM,uCAAuCA,KAAEC,IAAEC,IAAE;AAAC,QAAG,CAACA,IAAE;AAAC,MAAAA,KAAE,oBAAI;AAAI,YAAMD,KAAE,KAAK,OAAME,KAAEH,IAAE;AAAO,UAAII,KAAE;AAAK,UAAG,EAAE,CAACD,MAAG,gBAAcA,GAAE,QAAMA,GAAE,eAAaH,IAAE,OAAK,CAACG,GAAE,cAAYA,GAAE,gBAAc,gBAAeF,MAAGA,GAAE,iBAAeD,IAAE,WAAW,UAAU,IAAE,EAAE,WAASA,IAAE,WAAW,cAAc,IAAE,EAAE,WAASA,IAAE,WAAW,eAAe,IAAE,EAAE,SAAQ;AAAC,cAAMA,MAAE,IAAI,EAAE,EAAC,OAAM,KAAK,MAAK,CAAC;AAAE,QAAAI,KAAEJ,IAAE,mBAAiBA,IAAE,gBAAc,MAAKA,IAAE,QAAQ;AAAA,MAAC;AAAC,YAAMK,KAAED,MAAG,GAAGH,GAAE,GAAG;AAAW,OAAC,MAAM,KAAK,iBAAiBI,IAAED,EAAC,GAAG,QAAS,CAAAJ,QAAGE,GAAE,IAAIF,IAAE,SAAQA,GAAC,CAAE;AAAA,IAAC;AAAC,UAAMG,KAAED,GAAE,IAAIF,IAAE,EAAE;AAAE,SAAI,CAACG,MAAGA,IAAG,eAAaA,GAAE,sBAAoBH,IAAE,WAAU;AAAC,YAAMG,KAAE,MAAM,KAAK,oCAAoCH,IAAE,WAAUC,IAAEC,EAAC;AAAE,aAAM,EAAC,MAAK,gBAAe,OAAMF,IAAE,OAAM,OAAMG,GAAC;AAAA,IAAC;AAAC,WAAO,KAAK,0CAA0CA,IAAEH,KAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,0CAA0CD,KAAEC,IAAEC,IAAE;AAAC,QAAG,CAACF,KAAG,UAAQ,KAAK,0BAAwB,CAAC,KAAK,sBAAsBA,KAAEC,EAAC,EAAE,QAAO;AAAK,UAAME,KAAEF,IAAG;AAAS,QAAIG,KAAEH,IAAG,SAAOD,IAAE;AAAU,QAAGG,OAAI,CAACF,MAAGA,IAAG,WAAW,UAAU,IAAE,EAAE,UAAS;AAAC,YAAMD,MAAEC,IAAG,SAAO,KAAK,kBAAkBE,IAAEF,EAAC;AAAE,MAAAD,QAAII,MAAG,YAAU,OAAOJ,OAAG,WAAUA,QAAIA,IAAE,QAAMI,KAAGA,KAAEJ;AAAA,IAAE;AAAC,UAAMK,KAAE,EAAC,MAAK,gBAAe,OAAMD,IAAE,YAAWJ,IAAE,cAAY,MAAK,OAAM,CAAC,EAAC,GAAEM,KAAEL,KAAE,KAAK,2BAA2BD,IAAE,OAAO,MAAM,GAAEC,EAAC,IAAED,IAAE;AAAO,WAAOA,IAAE,gBAAcA,IAAE,aAAa,SAAO,IAAEA,IAAE,aAAa,QAAS,CAAAC,OAAG;AAAC,YAAME,KAAE,EAAC,MAAK,gBAAe,OAAMF,GAAE,SAAQ,YAAWD,IAAE,cAAY,MAAK,OAAM,KAAK,+CAA+CM,GAAE,OAAQ,CAAAN,QAAGA,IAAE,YAAUC,GAAE,EAAG,GAAED,IAAE,SAAQE,EAAC,EAAC;AAAE,MAAAC,GAAE,OAAO,SAAO,KAAGE,GAAE,MAAM,KAAKF,EAAC;AAAA,IAAC,CAAE,IAAEE,GAAE,QAAM,KAAK,+CAA+CC,IAAEN,IAAE,SAAQE,EAAC,GAAEG,GAAE,MAAM,SAAO,IAAEA,KAAE;AAAA,EAAI;AAAA,EAAC,+CAA+CL,KAAEC,IAAEE,IAAE;AAAC,WAAOH,IAAE,IAAK,CAAAA,QAAG;AAAC,UAAII,KAAEJ,IAAE;AAAI,UAAGA,IAAE,aAAWA,IAAE,UAAU,SAAO,EAAE,CAAAI,KAAE,yBAAyBJ,IAAE,SAAS;AAAA,WAAO;AAAC,YAAG,MAAII,GAAE,QAAQ,MAAM,EAAE,QAAO;AAAK,QAAAA,KAAE,EAAE,GAAG,KAAK,MAAM,GAAG,IAAIH,EAAC,WAAWG,EAAC,EAAE;AAAA,MAAC;AAAC,aAAM,EAAC,OAAMJ,IAAE,OAAM,KAAII,IAAE,SAAQD,MAAG,KAAK,SAAQ,OAAMH,IAAE,OAAM,QAAOA,IAAE,OAAM;AAAA,IAAC,CAAE,EAAE,OAAO,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmBA,KAAE;AAAC,UAAMC,KAAED,IAAE,YAAU,GAAEE,KAAEF,IAAE,YAAU;AAAE,WAAM,EAAEC,KAAE,KAAGA,KAAE,KAAK,SAAOC,KAAE,KAAK;AAAA,EAAM;AAAA,EAAC,sBAAsBF,KAAEC,IAAE;AAAC,UAAMC,KAAED,MAAG,KAAK;AAAM,QAAIE,KAAE,MAAKC,KAAE,MAAKC,KAAE;AAAG,WAAM,CAACH,GAAE,YAAU,MAAIA,GAAE,YAAU,CAACA,GAAE,YAAU,MAAIA,GAAE,YAAU,MAAIF,IAAE,YAAUE,GAAE,aAAWC,KAAED,GAAE,SAAS,KAAK,CAAC,EAAE,QAAO,MAAIF,IAAE,YAAUE,GAAE,aAAWE,KAAEF,GAAE,SAAS,KAAKA,GAAE,SAAS,KAAK,SAAO,CAAC,EAAE,WAASC,KAAE,KAAK,IAAID,GAAE,UAASF,IAAE,QAAQ,KAAGE,GAAE,YAAUF,IAAE,UAASI,KAAE,KAAK,IAAIF,GAAE,UAASF,IAAE,QAAQ,KAAIG,KAAE,KAAGA,KAAE,KAAK,SAAOC,KAAE,KAAK,WAASC,KAAE,QAAIA;AAAA,EAAC;AAAA,EAAC,2BAA2BL,KAAEC,IAAE;AAAC,QAAG,aAAY,KAAK,SAAO,CAAC,KAAK,MAAM,UAAQ,QAAM,MAAID,IAAE,OAAO,QAAOA;AAAE,UAAME,KAAED,GAAE,UAASE,KAAEH,IAAE,KAAM,CAAAA,QAAGA,IAAE,MAAO;AAAE,QAAII,KAAE,GAAEC,KAAE;AAAK,WAAOF,MAAGH,IAAE,KAAM,CAACA,KAAEC,QAAKD,IAAE,WAASI,KAAEH,IAAEI,KAAEL,KAAEK,GAAE,UAAQA,GAAE,QAAM,YAAW,QAAMA,GAAG,GAAEH,KAAE,mBAAiBA,GAAE,OAAKG,OAAIL,IAAE,OAAOI,IAAE,CAAC,GAAEJ,IAAE,KAAKK,EAAC,KAAG,mBAAiBH,GAAE,SAAOG,MAAGL,IAAE,OAAOI,IAAE,CAAC,GAAEF,GAAE,eAAe,SAAOF,IAAE,QAAQ,GAAEK,MAAGL,IAAE,KAAKK,EAAC,KAAGA,OAAIL,IAAE,OAAOI,IAAE,CAAC,GAAEJ,IAAE,KAAKK,EAAC,IAAGL;AAAA,EAAC;AAAA,EAAC,MAAM,2BAA2BA,KAAEC,KAAE,CAAC,GAAE;AAAC,QAAG,CAAC,GAAGD,KAAE,KAAK,IAAI,EAAE,QAAO,EAAE,UAAU,IAAI,EAAE,KAAK,qBAAqBA,IAAE,IAAI,kBAAkB,GAAE,CAAC;AAAE,QAAG,GAAGA,GAAC,EAAE,QAAO,KAAK,2CAA2CA,KAAEC,EAAC;AAAE,QAAG,GAAGD,GAAC,EAAE,QAAO,KAAK,2CAA2CA,GAAC;AAAE,UAAME,KAAE,MAAM,KAAK,cAAcF,GAAC;AAAE,WAAO,GAAGE,EAAC,IAAE,KAAK,yCAAyCA,EAAC,IAAE,KAAK,iCAAiCA,IAAED,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,sCAAsCD,KAAE;AAAC,QAAIC,KAAE;AAAK,WAAM,cAAYD,IAAE,OAAKC,KAAED,IAAE,WAAS,cAAYA,IAAE,SAAOC,KAAE,KAAK,oBAAoBD,GAAC,IAAGC,KAAE,KAAK,2BAA2BA,EAAC,IAAE,CAAC;AAAA,EAAC;AAAA,EAAC,4BAA4BD,KAAE;AAAC,YAAOA,IAAE,eAAe,SAAOA,IAAE,UAAQ;AAAA,EAAE;AAAA,EAAC,MAAM,2CAA2CA,KAAEC,KAAE,CAAC,GAAE;AAAC,UAAMC,KAAED,GAAE,OAAME,KAAE,CAAC;AAAE,QAAIC,KAAE,MAAKC,KAAE;AAAK,QAAG,GAAGL,GAAC,EAAE,CAAAI,KAAE,EAAC,MAAK,gBAAe,OAAMF,MAAG,KAAK,4BAA4BF,GAAC,GAAE,OAAM,CAAC,EAAC,GAAEA,IAAE,qBAAqB,QAAS,CAAAA,QAAG;AAAC,MAAAI,GAAE,MAAM,QAAQ,EAAC,OAAMJ,IAAE,SAAOA,IAAE,WAAS,QAAMA,IAAE,UAAS,OAAM,CAACA,IAAE,UAASA,IAAE,QAAQ,GAAE,QAAO,KAAK,uBAAuB,IAAGA,IAAE,KAAK,EAAC,CAAC;AAAA,IAAC,CAAE;AAAA,aAAU,GAAGA,GAAC,GAAE;AAAC,YAAMC,KAAED,IAAE;AAAM,UAAIG,KAAE;AAAK,UAAGF,IAAG,WAAS,MAAIA,GAAE,WAASE,KAAEF,GAAE,CAAC,EAAE,QAAO,CAACE,KAAG;AAAC,cAAMH,MAAEC,GAAE,CAAC,EAAE,OAAMC,KAAED,GAAEA,GAAE,SAAO,CAAC,EAAE;AAAM,YAAG,QAAMD,OAAG,QAAME,IAAE;AAAC,UAAAC,KAAED,GAAEF,OAAGE,KAAEF,OAAG,GAAEC,EAAC;AAAA,QAAC;AAAA,MAAC;AAAC,MAAAG,KAAE,EAAC,MAAK,gBAAe,OAAM,MAAK,OAAM,CAAC,EAAC,OAAM,MAAK,OAAM,MAAK,QAAO,KAAK,uBAAuB,IAAGD,MAAG,GAAG,KAAK,EAAC,CAAC,EAAC;AAAE,YAAMG,KAAER,GAAEE,IAAE,SAAO,CAAC,CAAC,KAAG,CAAC;AAAE,MAAAK,KAAE,EAAC,MAAK,cAAa,OAAMH,MAAG,KAAK,4BAA4BF,GAAC,GAAE,OAAMM,IAAE,SAAQE,GAAEF,GAAE,IAAK,CAAAN,QAAGA,IAAE,KAAM,GAAE,EAAC,WAAU,MAAM,GAAG,2BAA2B,EAAC,CAAC,EAAC;AAAA,IAAC,MAAM,IAAGA,GAAC,MAAII,KAAE,EAAC,MAAK,gBAAe,OAAMF,MAAG,KAAK,4BAA4BF,GAAC,GAAE,OAAM,CAAC,EAAC,GAAEA,IAAE,uBAAuB,QAAS,CAAAA,QAAG;AAAC,MAAAI,GAAE,MAAM,KAAK,EAAC,OAAMJ,IAAE,SAAOA,IAAE,OAAO,KAAK,IAAI,GAAE,OAAMA,IAAE,OAAO,KAAK,IAAI,GAAE,QAAO,KAAK,uBAAuB,IAAGA,IAAE,KAAK,EAAC,CAAC;AAAA,IAAC,CAAE;AAAG,WAAOI,IAAG,MAAM,UAAQD,GAAE,KAAKC,EAAC,GAAEC,IAAG,MAAM,UAAQF,GAAE,KAAKE,EAAC,GAAE,MAAM,KAAK,mCAAmCF,IAAE,EAAC,SAAQ,KAAK,SAAQ,cAAa,EAAC,sBAAqB,CAAC,CAACH,IAAE,gBAAe,EAAC,CAAC,GAAEG;AAAA,EAAC;AAAA,EAAC,MAAM,6BAA6BH,KAAEC,IAAE;AAAC,UAAK,EAAC,OAAMC,IAAE,OAAMC,IAAE,sBAAqBC,GAAC,IAAEH,IAAE,EAAC,iBAAgBI,IAAE,SAAQC,IAAE,SAAQC,IAAC,IAAEP,KAAEH,KAAE,KAAK,YAAWC,MAAED,IAAG,QAAQ,IAAK,CAAAG,QAAGA,IAAE,OAAO,CAAE,GAAES,KAAEN,GAAEL,GAAC,GAAEY,MAAE,MAAM,GAAG,4BAA2BP,MAAGC,EAAC,GAAEO,KAAEJ,MAAE,MAAIL,KAAE,MAAIG,KAAE,OAAKC,MAAG,KAAK,UAAUA,GAAE,OAAO,CAAC,KAAG,MAAIG,IAAEG,KAAE,KAAK,qBAAoBb,KAAEa,GAAE,IAAID,EAAC,IAAEC,GAAE,IAAID,EAAC,IAAE,EAAEX,KAAEE,IAAE,EAAC,WAAUQ,IAAC,CAAC;AAAE,IAAAE,GAAE,IAAID,IAAEZ,EAAC;AAAE,UAAMc,KAAE,EAAC,OAAM,EAAC,MAAK,SAAQ,GAAE,GAAE,GAAE,GAAE,OAAMd,GAAE,OAAM,QAAOA,GAAE,QAAO,KAAIA,GAAE,IAAG,GAAE,MAAK,MAAK,QAAO,MAAK,QAAO,CAAC,GAAE,CAAC,EAAC,GAAEe,KAAEV,GAAE,CAAC,CAACS,EAAC,CAAC,GAAE,CAACd,GAAE,OAAMA,GAAE,MAAM,GAAE,EAAC,YAAW,KAAK,YAAW,WAAUW,IAAC,CAAC;AAAE,WAAM,EAAC,SAAQ,GAAE,KAAIX,GAAE,KAAI,SAAQe,IAAE,OAAMf,GAAE,OAAM,QAAOA,GAAE,OAAM;AAAA,EAAC;AAAA,EAAC,MAAM,2CAA2CC,KAAE;AAAC,UAAMC,KAAED,IAAE,kBAAkB,KAAK,KAAK,KAAK,GAAEE,KAAEF,IAAE,eAAe,MAAKG,KAAE,EAAC,MAAK,gBAAe,OAAM,EAAC,OAAMF,MAAG,KAAK,MAAMA,EAAC,GAAE,MAAKC,MAAG,GAAE,GAAE,OAAM,CAAC,EAAC;AAAE,eAAUE,MAAKJ,IAAE,YAAW;AAAC,YAAMC,KAAE,MAAM,KAAK,6BAA6BD,KAAEI,EAAC;AAAE,MAAAH,GAAE,QAAMG,GAAE,SAAOA,GAAE,wBAAsBA,GAAE,OAAMD,GAAE,MAAM,KAAKF,EAAC;AAAA,IAAC;AAAC,WAAM,CAACE,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,yCAAyCH,KAAE;AAAC,UAAMC,KAAE,CAAC;AAAE,QAAIC,KAAE;AAAK,UAAMC,KAAEH,IAAE;AAAQ,IAAAA,IAAE,WAAW,QAAS,CAAAA,QAAG;AAAC,YAAME,KAAE,IAAIJ,GAAE,EAAC,OAAME,IAAE,OAAM,SAAQG,GAAC,CAAC,GAAEC,MAAEJ,IAAE,SAAOA,IAAE,wBAAsBA,IAAE;AAAM,MAAAC,GAAE,KAAK,EAAC,OAAMG,KAAE,QAAOF,GAAC,CAAC;AAAA,IAAC,CAAE;AAAE,UAAME,KAAEH,GAAE,SAAO,CAAC,GAAGA,EAAC,IAAE,CAAC;AAAE,QAAGD,IAAE,gBAAgB,SAAO,MAAIA,IAAE,gBAAgB,WAAU;AAAC,YAAMI,MAAE,IAAIN,GAAE,EAAC,OAAME,IAAE,eAAe,OAAM,SAAQG,GAAC,CAAC;AAAE,MAAAD,KAAEF,IAAE,eAAe,SAAO,SAAQC,GAAE,KAAK,EAAC,OAAMC,IAAE,QAAOE,IAAC,CAAC;AAAA,IAAC;AAAC,QAAGJ,IAAE,cAAc,GAAE;AAAC,YAAME,KAAE,IAAIJ,GAAE,EAAC,OAAME,IAAE,cAAa,SAAQG,GAAC,CAAC;AAAE,MAAAF,GAAE,KAAK,EAAC,OAAMD,IAAE,cAAa,QAAOE,GAAC,CAAC;AAAA,IAAC;AAAC,UAAMG,KAAE,MAAM,KAAK,iCAAiCL,KAAE,KAAK,KAAK,KAAG,CAAC;AAAE,QAAGC,GAAE,QAAO;AAAC,MAAAI,GAAE,QAAQ,EAAC,MAAK,gBAAe,OAAM,MAAK,OAAMJ,GAAC,CAAC;AAAE,YAAMK,KAAEF,GAAE,OAAQ,CAAAJ,QAAGA,IAAE,UAAQE,EAAE,EAAE,IAAK,CAAAF,QAAGA,IAAE,OAAO,KAAM,EAAE,OAAO,OAAO,GAAEO,MAAEQ,GAAET,IAAE,EAAC,gBAAeN,IAAE,gBAAe,iBAAgBA,IAAE,sBAAsB,OAAM,YAAW,KAAK,YAAW,SAAQG,IAAE,WAAU,MAAM,GAAG,0BAA0B,EAAC,CAAC;AAAE,MAAAE,GAAE,QAAQ,EAAC,MAAK,kBAAiB,OAAM,KAAK,kBAAkBL,KAAE,KAAK,KAAK,GAAE,OAAMC,IAAE,SAAQM,IAAC,CAAC;AAAA,IAAC;AAAC,WAAO,MAAM,KAAK,mCAAmCF,IAAE,EAAC,SAAQ,KAAK,MAAM,SAAQ,YAAW,KAAK,WAAU,CAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,MAAM,gBAAgBL,KAAEC,IAAEC,IAAE;AAAC,UAAMC,KAAE,MAAMH,GAAEA,KAAEE,EAAC,GAAEE,KAAE,oBAAI,OAAI,EAAC,OAAMC,IAAE,QAAOC,IAAE,QAAOC,IAAC,IAAEN;AAAE,MAAEG,IAAEF,IAAE,CAACG,IAAEC,IAAEC,GAAC,CAAC,GAAE,EAAEH,IAAEF,IAAED,GAAE,eAAe;AAAE,UAAMJ,KAAE,IAAI,IAAI,MAAM,KAAKO,IAAG,CAAAJ,QAAGA,IAAE,YAAY,CAAE,CAAC,GAAEF,MAAEK,IAAG,WAAW,IAAK,CAAAH,QAAGA,IAAE,YAAY,CAAE;AAAE,WAAOF,KAAG,KAAM,CAAAE,QAAG,CAACH,GAAE,IAAIG,GAAC,CAAE,IAAE,OAAKG;AAAA,EAAC;AAAA,EAAC,MAAM,6BAA6BH,KAAEC,IAAE;AAAC,QAAG,EAAE,0BAAyBD,KAAG;AAAO,UAAME,KAAEF,IAAE;AAAqB,IAAAE,MAAG,KAAK,mCAAiC,KAAK,+BAA6BA,OAAI,KAAK,mCAAiC,MAAM,KAAK,gBAAgBA,IAAED,IAAED,IAAE,WAAW,KAAG,KAAK,mCAAiC,MAAK,KAAK,6BAA2BE;AAAA,EAAC;AAAA,EAAC,MAAM,sBAAsBF,KAAEC,IAAE;AAAC,QAAG,EAAE,uBAAsBD,KAAG;AAAO,UAAME,KAAEF,IAAE,oBAAkBF,GAAEE,IAAE,mBAAkB,KAAK,IAAI,IAAE;AAAK,WAAOE,IAAG,QAAM,KAAK,0BAAwBA,IAAG,OAAK,KAAK,4BAA0B,MAAM,KAAK,gBAAgBA,GAAE,OAAMD,IAAED,IAAE,WAAW,KAAG,KAAK,4BAA0B,MAAK,KAAK,wBAAsBE,IAAG,IAAGA;AAAA,EAAC;AAAA,EAAC,MAAM,iCAAiCF,KAAEC,KAAE,CAAC,GAAE;AAAC,UAAK,EAAC,OAAMC,IAAE,UAASC,GAAC,IAAEF,IAAEG,KAAED,MAAG,KAAK,OAAME,KAAEI,GAAGT,KAAE,gBAAgB,GAAEM,KAAEG,GAAGT,KAAE,OAAO;AAAE,QAAIO,MAAE;AAAK,OAAGP,GAAC,MAAI,MAAM,KAAK,6BAA6BI,IAAEJ,GAAC,GAAEO,MAAE,MAAM,KAAK,sBAAsBH,IAAEJ,GAAC,IAAG,KAAK,gBAAc,OAAG,KAAK,kBAAgB,OAAG,KAAK,eAAa,OAAG,KAAK,2BAAyB;AAAK,UAAMH,KAAE,MAAM,KAAK,iCAAiCG,KAAEI,EAAC,KAAG,CAAC,GAAEN,MAAE,EAAC,MAAK,gBAAe,OAAMI,MAAG,KAAK,kBAAkBF,KAAEI,EAAC,GAAE,OAAM,CAAC,EAAC;AAAE,QAAIK,KAAE,MAAKC,MAAE;AAAG,UAAMC,KAAE,oBAAI;AAAI,QAAG,GAAGX,GAAC,KAAG,CAAC,KAAK,cAAa;AAAC,YAAMC,KAAE,MAAMY,GAAGb,GAAC;AAAE,MAAAF,IAAE,MAAM,KAAK,EAAC,OAAM,MAAK,QAAOG,GAAC,CAAC;AAAA,IAAC,WAAS,GAAGD,GAAC,GAAE;AAAC,UAAIC,KAAEC;AAAE,YAAMC,KAAE,GAAGH,GAAC,IAAE,oCAAkC,8BAA6BI,MAAEP,GAAE,UAAW,CAAAG,QAAG,iBAAeA,IAAE,IAAK,GAAEK,KAAE,OAAKD,MAAEP,GAAE,OAAOO,KAAE,CAAC,EAAE,CAAC,IAAE,MAAKE,MAAET,GAAE,UAAW,CAAAG,QAAG,gBAAcA,IAAE,IAAK,GAAEO,MAAE,OAAKD,MAAET,GAAE,OAAOS,KAAE,CAAC,EAAE,CAAC,IAAE,MAAKR,MAAE,CAAC;AAAE,MAAAO,OAAIJ,KAAEI,GAAE,OAAMP,IAAE,KAAKO,EAAC,IAAGE,QAAIN,KAAEM,IAAE,OAAMT,IAAE,KAAKS,GAAC,IAAGT,IAAE,SAAO,KAAGD,GAAE,KAAK,EAAC,MAAKM,IAAE,OAAMF,IAAE,OAAMH,IAAC,CAAC;AAAA,IAAC,WAAS,GAAGE,GAAC,GAAE;AAAC,YAAMC,KAAEI,GAAEL,GAAC;AAAE,MAAAH,GAAE,KAAK,EAAC,MAAK,gBAAe,OAAMK,MAAG,KAAK,kBAAkBF,KAAEI,EAAC,GAAE,OAAMH,IAAE,SAAQO,GAAEP,GAAE,IAAK,CAAAD,QAAGA,IAAE,KAAM,GAAE,EAAC,YAAW,KAAK,YAAW,WAAU,MAAM,GAAG,2BAA2B,EAAC,CAAC,EAAC,CAAC;AAAA,IAAC,WAAS,GAAGA,GAAC,GAAE;AAAC,YAAMC,KAAED,IAAE;AAAc,UAAGC,MAAG,mBAAiBA,GAAE,MAAK;AAAC,cAAK,EAAC,YAAWC,IAAE,QAAOC,IAAE,QAAOE,GAAC,IAAEJ,IAAEK,MAAEL,GAAE;AAAM,YAAGC,MAAGC,MAAGE,IAAE;AAAC,gBAAMJ,KAAE,CAACE,IAAEE,EAAC;AAAE,cAAIE,MAAET,GAAEQ,GAAC,KAAG;AAAE,qBAAUN,OAAKC,IAAE;AAAC,kBAAK,EAAC,OAAMA,IAAE,oBAAmBC,KAAE,OAAMC,GAAC,IAAEH,KAAEK,MAAEF,MAAG,EAAC,OAAM,KAAK,eAAeF,IAAEG,EAAC,GAAE,WAAUF,OAAG,KAAK,eAAeA,KAAEE,EAAC,EAAC,GAAEE,MAAE,GAAG,MAAM;AAAE,YAAAA,IAAE,QAAMC,KAAET,IAAE,MAAM,KAAK,EAAC,OAAMO,KAAE,QAAOC,IAAC,CAAC,GAAEK,GAAE,IAAIL,GAAC,GAAEC,OAAG;AAAA,UAAE;AAAC,gBAAME,MAAEN,GAAE,EAAC,OAAMG,KAAE,YAAWJ,IAAE,OAAMF,IAAE,oBAAkB,CAAC,EAAC,CAAC;AAAE,UAAAH,GAAE,QAAQY,GAAC;AAAA,QAAC;AAAA,MAAC,WAAS,GAAG,KAAK,KAAK,KAAG,GAAG,KAAK,KAAK,EAAE,CAAAT,IAAE,kBAAkB,QAAS,CAAAC,OAAG;AAAC,QAAAA,GAAE,UAAQ,KAAK,oBAAoBD,KAAEC,GAAE,KAAK,KAAGH,IAAE,MAAM,KAAK,EAAC,OAAMG,GAAE,SAAOA,GAAE,OAAM,OAAMA,GAAE,OAAM,QAAOA,GAAE,OAAM,CAAC;AAAA,MAAC,CAAE;AAAA,WAAM;AAAC,cAAK,EAAC,OAAMA,IAAE,QAAOE,IAAE,QAAOG,KAAE,gBAAeT,IAAE,iBAAgBY,KAAE,eAAcE,GAAC,IAAEX,KAAEY,KAAE,EAAE,CAACX,MAAG,CAACQ,OAAG,CAACN,MAAG,CAACG,MAAGP,KAAE,KAAK,4BAA0BQ,KAAG,QAAM,MAAKM,KAAE,CAAC;AAAE,YAAGb,IAAE,mBAAmB,QAAS,CAAAE,OAAG;AAAC,gBAAMK,MAAE,EAAC,MAAK,gBAAe,OAAMR,MAAGG,GAAE,SAAQ,OAAM,CAAC,EAAC;AAAE,UAAAA,GAAE,SAAS,QAAS,CAAAA,QAAG;AAAC,kBAAK,EAAC,QAAOJ,KAAE,QAAOY,IAAC,IAAER;AAAE,gBAAGJ,KAAE;AAAC,oBAAMa,KAAE,CAAC,GAAEZ,MAAE,CAAC;AAAE,yBAAUC,OAAKU,OAAG,CAAC,GAAE;AAAC,sBAAK,EAAC,OAAMR,KAAE,QAAOG,IAAE,QAAOE,IAAC,IAAEP,KAAEF,MAAE,CAAC,GAAEY,MAAE,CAAC;AAAE,iBAACT,MAAGQ,SAAKX,IAAE,KAAKI,GAAC,GAAEQ,IAAE,KAAK,KAAK,eAAeT,IAAEC,KAAEE,EAAC,CAAC,IAAGD,OAAIL,IAAE,KAAKO,EAAC,GAAEK,IAAE,KAAK,KAAK,eAAeP,IAAEE,IAAED,EAAC,CAAC,IAAGE,QAAIR,IAAE,KAAKS,GAAC,GAAEG,IAAE,KAAK,KAAK,eAAeJ,KAAEC,KAAEH,EAAC,CAAC,IAAGO,GAAE,KAAKC,KAAEd,IAAE,KAAKD,MAAG,EAAE,IAAEC,IAAE,CAAC,CAAC,GAAEC,IAAE,KAAKW,IAAE,KAAK,KAAK,CAAC;AAAA,cAAC;AAAC,oBAAMG,MAAEF,GAAE,KAAK,IAAI;AAAE,kBAAIG,MAAEZ,IAAE;AAAM,kBAAG,CAACY,KAAE;AAAC,sBAAMd,MAAED,IAAE,OAAO,OAAO;AAAE,gBAAAe,MAAEd,IAAE,SAAOA,IAAE,KAAK,IAAI,IAAEa;AAAA,cAAC;AAAC,oBAAMG,KAAElB,IAAE,MAAM;AAAE,wBAAQkB,GAAE,QAAMX,MAAG,EAAEW,IAAE,EAAC,cAAa,MAAG,IAAG,eAAc,GAAE,CAAC,GAAEL,GAAE,KAAM,CAAAV,OAAG,KAAK,oBAAoBD,KAAEC,EAAC,CAAE,KAAGM,IAAE,MAAM,KAAK,EAAC,OAAMO,KAAE,OAAMD,KAAE,QAAOG,GAAC,CAAC;AAAA,YAAC;AAAA,UAAC,CAAE,GAAET,IAAE,MAAM,UAAQM,GAAE,KAAKN,GAAC;AAAA,QAAC,CAAE,GAAEM,GAAE,QAAO;AAAC,gBAAMZ,KAAEY,GAAE,CAAC;AAAE,cAAG,MAAIA,GAAE,UAAQ,WAAUZ,MAAG,CAACA,GAAE,OAAM;AAAC,kBAAMD,MAAEC,GAAE,OAAO,OAAO,EAAE,KAAG,CAAC;AAAE,YAAAH,IAAE,MAAM,KAAK,GAAGE,GAAC;AAAA,UAAC,MAAM,CAAAW,OAAIE,GAAE,KAAK,EAAC,MAAK,gBAAe,OAAM,CAAC,EAAC,OAAMb,IAAE,gBAAc,UAAS,QAAOW,GAAC,CAAC,EAAC,CAAC,GAAED,MAAE,OAAIZ,IAAE,MAAM,KAAK,GAAGe,EAAC;AAAE,UAAAX,MAAGF,IAAE,eAAe,SAAOA,IAAE,yBAAuBF,IAAE,QAAM;AAAA,QAAK;AAAA,MAAC;AAAC,MAAAE,IAAE,iBAAe,CAACU,QAAIZ,IAAE,MAAM,KAAK,EAAC,OAAME,IAAE,gBAAc,UAAS,QAAOA,IAAE,cAAa,CAAC,GAAEU,MAAE;AAAA,IAAG,WAAS,GAAGV,GAAC,GAAE;AAAC,UAAG,CAACK,MAAG,CAACC,IAAE;AAAC,QAAAG,KAAE,KAAK,qBAAqBT,GAAC;AAAE,YAAG,CAACS,MAAG,CAAC,KAAK,cAAa;AAAC,gBAAMR,KAAED,IAAE,gBAAgB,OAAQ,CAAC,EAAC,QAAOA,IAAC,MAAIA,GAAE,GAAEE,KAAE,uBAAqBF,IAAE,eAAe;AAAM,qBAAS,EAAC,OAAMA,KAAE,UAASG,IAAE,UAASC,KAAE,QAAOC,GAAC,KAAIJ,IAAE;AAAC,kBAAMA,KAAE,EAAC,OAAMD,QAAIS,KAAE,OAAK,GAAGN,EAAC,MAAMC,GAAC,KAAI,OAAM,CAACD,IAAEC,GAAC,GAAE,QAAOC,GAAC;AAAE,YAAAH,KAAEJ,IAAE,MAAM,KAAKG,EAAC,IAAEH,IAAE,MAAM,QAAQG,EAAC;AAAA,UAAC;AAAC,UAAAQ,OAAIX,IAAE,QAAM,OAAM,KAAK,mCAAmCE,KAAEF,IAAE,KAAK;AAAA,QAAC;AAAC,QAAAE,IAAE,iBAAe,CAACS,OAAIX,IAAE,MAAM,KAAK,EAAC,OAAME,IAAE,gBAAc,UAAS,QAAOA,IAAE,cAAa,CAAC,GAAEU,MAAE;AAAA,MAAG;AAAA,IAAC,WAAS,GAAGV,GAAC,EAAE,KAAG,GAAG,KAAK,KAAK,KAAG,GAAG,KAAK,KAAK,GAAE;AAAC,YAAMC,KAAE,MAAM,KAAK,6CAA6CD,GAAC;AAAE,SAAGC,EAAC,IAAEJ,GAAE,KAAKI,EAAC,IAAEH,IAAE,QAAMG;AAAA,IAAC,OAAK;AAAC,YAAMA,KAAE,KAAK;AAAM,UAAIC,IAAEC;AAAE,MAAAH,IAAE,kBAAkB,WAAS,EAAC,KAAIE,IAAE,KAAIC,GAAC,IAAEH,IAAE,iBAAiB,CAAC;AAAG,UAAII,MAAE,CAAC,GAAEC,KAAEJ,GAAE;AAAkB,UAAGA,GAAE,eAAe,KAAG;AAAC,QAAAI,KAAE,MAAMJ,GAAE,mBAAmBA,GAAE,cAAc;AAAA,MAAC,QAAM;AAAA,MAAC;AAAC,YAAMK,MAAER,GAAEO,GAAE,SAAS;AAAE,UAAG,MAAIA,GAAE,WAAU;AAAC,cAAMD,MAAEH,GAAE,UAAU,CAAC,KAAG;AAAE,QAAAC,KAAE,QAAMA,KAAEA,KAAEG,GAAE,aAAWA,GAAE,WAAWD,GAAC,EAAE,MAAIE,IAAE,CAAC,GAAEH,KAAE,QAAMA,KAAEA,KAAEE,GAAE,aAAWA,GAAE,WAAWD,GAAC,EAAE,MAAIE,IAAE,CAAC,GAAEJ,MAAGC,KAAEN,GAAE,KAAK,MAAM,KAAK,0BAA0BG,KAAE,EAAC,KAAIE,IAAE,KAAIC,GAAC,CAAC,CAAC,IAAE,KAAK,qBAAqB;AAAA,MAAC,WAASF,GAAE,WAAS,MAAIA,GAAE,QAAQ,OAAO,CAAAC,KAAE,QAAMA,KAAEA,KAAEG,GAAE,aAAWA,GAAE,WAAWJ,GAAE,QAAQ,CAAC,CAAC,EAAE,MAAIK,IAAE,CAAC,GAAEH,KAAE,QAAMA,KAAEA,KAAEE,GAAE,aAAWA,GAAE,WAAWJ,GAAE,QAAQ,CAAC,CAAC,EAAE,MAAIK,IAAE,CAAC,GAAEJ,MAAGC,KAAEN,GAAE,KAAK,MAAM,KAAK,0BAA0BG,KAAE,EAAC,KAAIE,IAAE,KAAIC,GAAC,CAAC,CAAC,IAAE,KAAK,qBAAqB;AAAA,eAAUE,GAAE,aAAW,GAAE;AAAC,cAAK,EAAC,WAAUL,IAAC,IAAEK,IAAE,EAAC,SAAQH,IAAC,IAAED;AAAE,QAAAD,IAAE,UAAQK,GAAE,YAAU,MAAIH,KAAG,UAAQE,MAAEF,IAAE,IAAK,CAAAD,OAAGD,IAAEC,EAAC,EAAE,IAAK,GAAEH,IAAE,QAAM,KAAK,mCAAmCM,GAAC,KAAG,WAASH,GAAE,UAAQG,MAAE,CAAC,GAAE,GAAE,CAAC,EAAE,IAAK,CAAAH,OAAGD,IAAEC,EAAC,EAAE,IAAK,GAAEH,IAAE,QAAM,KAAK,mCAAmCM,GAAC,KAAG,KAAK,qBAAqB,IAAE,WAASH,GAAE,UAAQG,MAAE,CAAC,SAAQ,SAAQ,OAAO,GAAEN,IAAE,QAAM,KAAK,mCAAmCM,GAAC,KAAG,KAAK,qBAAqB;AAAA,MAAC,MAAM,MAAK,qBAAqB;AAAA,IAAC;AAAA,aAAS,GAAGJ,GAAC,EAAE,CAAAA,IAAE,cAAc,QAAS,CAAAA,QAAG;AAAC,MAAAF,IAAE,MAAM,KAAK,EAAC,OAAME,IAAE,OAAM,OAAMA,IAAE,OAAM,QAAO,KAAK,uBAAuB,IAAGA,IAAE,KAAK,EAAC,CAAC;AAAA,IAAC,CAAE;AAAA,aAAU,GAAGA,GAAC,GAAE;AAAC,UAAIE,KAAEF,IAAE;AAAO,cAAOC,GAAE,cAAa;AAAA,QAAC,KAAI;AAAQ,UAAAC,KAAE,iBAAgBE,KAAEA,GAAE,cAAY;AAAK;AAAA,QAAM,KAAI;AAAW,UAAAF,KAAE,gBAAeE,KAAEA,GAAE,aAAW;AAAK;AAAA,QAAM,KAAI;AAAU,UAAAF,KAAE,mBAAkBE,KAAEA,GAAE,gBAAc;AAAA,MAAI;AAAC,YAAMD,KAAE,KAAK,2BAAyB,KAAK,kBAAkB,KAAG,CAAC,KAAK;AAAa,MAAAH,IAAE,UAAQG,MAAGL,IAAE,MAAM,KAAK,EAAC,OAAME,IAAE,OAAM,QAAOE,GAAC,CAAC;AAAA,IAAC,WAAS,GAAGF,GAAC,GAAE;AAAC,MAAAA,IAAE,eAAa,KAAK,QAAM,MAAIA,IAAE,OAAO,EAAE,aAAW,MAAKF,IAAE,QAAME,IAAE;AAAe,YAAMC,KAAED,IAAE,mBAAmB;AAAE,MAAAC,IAAG,SAAOA,GAAE,QAAS,CAAAD,QAAG;AAAC,QAAAF,IAAE,MAAM,KAAK,EAAC,OAAME,IAAE,WAAS,QAAMA,IAAE,UAAS,QAAOA,IAAE,OAAM,CAAC;AAAA,MAAC,CAAE,IAAEF,IAAE,MAAM,KAAK,EAAC,OAAME,IAAE,gBAAe,QAAOA,IAAE,iBAAiB,EAAC,CAAC;AAAA,IAAC,MAAM,IAAGA,GAAC,KAAGH,GAAE,KAAK,MAAM,KAAK,0BAA0BG,KAAE,EAAC,KAAI,GAAE,KAAI,IAAG,CAAC,CAAC;AAAE,UAAMY,KAAEZ,IAAE;AAAc,KAACY,MAAGF,OAAG,GAAGV,GAAC,KAAGS,MAAG,CAAC,KAAK,iBAAe,CAAC,KAAK,gBAAc,CAAC,KAAK,mBAAiBZ,GAAE,KAAK,EAAC,MAAK,gBAAe,OAAM,CAAC,EAAC,OAAMG,IAAE,gBAAc,UAAS,QAAOY,GAAC,CAAC,EAAC,CAAC,GAAEd,IAAE,MAAM,UAAQD,GAAE,QAAQC,GAAC;AAAE,UAAMC,KAAE,QAAME,GAAE,UAAQ,KAAK,UAAQA,GAAE,SAAQY,KAAE,KAAK,cAAc,qBAAoBb,MAAEA,IAAE,kBAAgB,IAAI,GAAEc,KAAE,GAAG,KAAK,KAAK,KAAG,GAAG,KAAK,KAAK;AAAE,WAAO,MAAM,KAAK,mCAAmCjB,IAAE,EAAC,SAAQE,IAAE,cAAa,EAAC,QAAOc,IAAE,cAAaC,GAAC,GAAE,YAAW,KAAK,WAAU,GAAE,EAAC,eAAcF,IAAE,oBAAmBD,GAAC,CAAC,GAAEX,MAAE,MAAKH;AAAA,EAAC;AAAA,EAAC,oBAAoBG,KAAEC,IAAE;AAAC,UAAMC,KAAE,GAAGF,KAAEC,EAAC;AAAE,WAAM,CAACC,OAAI,CAAC,KAAK,oCAAkC,KAAK,iCAAiC,YAAYA,EAAC,OAAK,CAAC,KAAK,6BAA2B,KAAK,0BAA0B,YAAYA,EAAC;AAAA,EAAE;AAAA,EAAC,uBAAsB;AAAC,eAAY,MAAI,KAAK,4BAA4B,GAAG,CAAC;AAAA,EAAC;AAAA,EAAC,aAAaF,KAAE;AAAC,UAAMC,KAAED,KAAG;AAAM,WAAOC,KAAEA,GAAE,OAAQ,CAACD,KAAEC,OAAID,IAAE,OAAO,KAAK,aAAaC,EAAC,CAAC,GAAG,CAAC,CAAC,IAAE,CAACD,GAAC;AAAA,EAAC;AAAA,EAAC,MAAM,6CAA6CA,KAAE;AAAC,UAAMC,KAAE,KAAK,OAAMC,KAAED,GAAE,WAAW,cAAYA,GAAE,OAAO;AAAW,QAAIE,IAAEC;AAAE,UAAMC,KAAEL,KAAG,kBAAkB,SAAOA,IAAE,mBAAiBE,IAAG;AAAW,QAAGG,GAAE,EAAC,EAAC,KAAIF,IAAE,KAAIC,GAAC,IAAEC,GAAE,CAAC;AAAA,SAAO;AAAC,YAAML,MAAEF,GAAEI,GAAE,SAAS;AAAE,MAAAC,KAAEH,IAAE,CAAC,GAAEI,KAAEJ,IAAE,CAAC;AAAA,IAAC;AAAC,QAAGC,GAAE,gBAAgB,MAAIE,KAAEF,GAAE,qBAAqBE,EAAC,GAAEC,KAAEH,GAAE,qBAAqBG,EAAC,IAAG,MAAIF,GAAE,aAAW,MAAID,GAAE,SAAS,OAAO,QAAO,KAAK,0BAA0BD,KAAE,EAAC,KAAIG,IAAE,KAAIC,GAAC,CAAC;AAAE,UAAME,MAAGL,IAAG,SAAS,SAAOA,GAAE,UAAQ,MAAM,KAAK,MAAM,KAAK,IAAIC,GAAE,WAAU,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,IAAK,CAAAF,QAAGE,GAAE,UAAUF,GAAC,EAAE,IAAK;AAAE,WAAOM,GAAE,SAAO,IAAEA,GAAE,KAAKA,GAAE,CAAC,CAAC,IAAEA,GAAE,SAAO,KAAGA,GAAE,OAAO,CAAC,GAAE,KAAK,mCAAmCA,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,0BAA0BN,KAAEC,IAAE;AAAC,UAAMC,KAAEF,IAAE,WAAUG,KAAEM,GAAEP,IAAED,EAAC;AAAE,WAAM,EAAC,MAAK,gBAAe,OAAM,IAAG,OAAME,IAAE,SAAQK,GAAEL,GAAE,IAAK,CAAAH,QAAGA,IAAE,KAAM,GAAE,EAAC,WAAU,MAAM,GAAG,2BAA2B,EAAC,CAAC,EAAC;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,UAAMA,MAAE,KAAK,OAAMC,KAAE,sBAAqBD,OAAGA,IAAE,kBAAiBE,KAAED,MAAG,YAAWA,MAAGA,GAAE;AAAS,WAAOC,MAAG,SAAKA,IAAG,eAAe,kBAAgB,OAAKD,MAAG,YAAWA,KAAEA,GAAE,SAAO;AAAA,EAAI;AAAA,EAAC,MAAM,sBAAsBD,KAAEC,IAAEC,IAAEC,IAAE;AAAC,WAAM,EAAC,MAAK,aAAY,OAAM,KAAK,0BAAwB,KAAK,iBAAiBF,EAAC,IAAED,KAAE,OAAM,MAAMiB,GAAEf,IAAED,IAAE,MAAMH,GAAGI,EAAC,GAAE,KAAK,OAAM,KAAK,MAAKC,IAAE,KAAK,0BAAwB,KAAK,kBAAkB,IAAE,IAAI,EAAC;AAAA,EAAC;AAAA,EAAC,mCAAmCH,KAAE;AAAC,UAAMC,KAAE,CAAC,GAAEC,KAAE,CAAC,OAAM,SAAQ,MAAM;AAAE,WAAOF,IAAE,QAAS,CAACA,KAAEG,OAAI;AAAC,MAAAF,GAAE,KAAK,EAAC,OAAM,EAAC,WAAUC,GAAEC,EAAC,GAAE,UAASH,IAAC,GAAE,KAAIE,GAAGC,EAAC,GAAE,SAAQ,KAAK,WAAS,EAAC,CAAC;AAAA,IAAC,CAAE,GAAEF;AAAA,EAAC;AAAA,EAAC,mCAAmCD,KAAEC,IAAE;AAAC,UAAMC,KAAEF,IAAE,iBAAe,wBAAsBA,IAAE,cAAc,MAAKG,KAAEH,IAAE,gBAAgB,KAAM,CAAAA,QAAGY,GAAEZ,IAAE,MAAM,CAAE;AAAE,QAAGE,MAAGC,IAAE;AAAC,YAAMD,KAAE,GAAEC,KAAE,GAAGC,KAAEJ,IAAE,gBAAgB,QAAOK,MAAGH,KAAEC,OAAIC,KAAE,IAAEA,KAAE,IAAEA;AAAG,MAAAH,GAAE,QAAS,CAACD,KAAEC,OAAI;AAAC,QAAAD,IAAE,OAAKE,KAAEG,KAAEJ;AAAA,MAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,cAAcD,KAAE;AAAC,QAAIC,KAAE,OAAGC,KAAE;AAAG,QAAGF,IAAE,UAAQG,KAAE,GAAEA,KAAEH,IAAE,WAAS,CAACC,MAAG,CAACC,KAAGC,MAAI;AAAC,YAAMC,KAAEJ,IAAEG,EAAC;AAAE,iBAASC,GAAE,SAAO,aAAWA,GAAE,SAAOH,KAAE,OAAI,sBAAoBG,GAAE,SAAOF,KAAE;AAAA,IAAI;AAAC,WAAOD,MAAGC;AAAA,EAAC;AAAA,EAAC,MAAM,mCAAmCF,KAAEC,IAAEC,IAAE;AAAC,UAAMC,KAAE,CAAC;AAAE,eAAUC,MAAKJ,IAAE,YAAUA,OAAKI,GAAE,SAAO,CAAC,EAAE,KAAG,WAAUJ,OAAGA,IAAE,SAAOG,GAAE,KAAK,KAAK,mCAAmC,CAACH,GAAC,GAAEC,IAAEC,EAAC,CAAC,GAAE,GAAGF,GAAC,KAAGA,IAAE,UAAQ,CAACA,IAAE,SAAQ;AAAC,UAAIK,KAAE;AAAG,UAAG,UAAQL,IAAE,OAAO,MAAK;AAAC,cAAK,EAAC,UAASC,IAAE,UAASC,GAAC,IAAEF,IAAE,OAAO;AAAK,SAACC,MAAGA,KAAE,KAAK,SAAOC,MAAGA,KAAE,KAAK,WAASG,KAAE;AAAA,MAAG;AAAC,MAAAA,MAAGF,GAAE,KAAK,KAAK,8BAA8BH,KAAE,EAAC,GAAGC,IAAE,iBAAgB,WAAUG,MAAG,YAAUA,GAAE,OAAM,YAAWF,IAAG,oBAAoB,IAAIF,IAAE,MAAM,IAAE,OAAKC,GAAE,WAAU,GAAEC,KAAE,EAAC,WAAUF,IAAE,WAASE,GAAE,eAAc,sBAAqB,CAACA,GAAE,oBAAoB,IAAIF,IAAE,MAAM,EAAC,IAAE,MAAM,CAAC;AAAA,IAAC;AAAC,UAAM,QAAQ,IAAIG,EAAC;AAAA,EAAC;AAAA,EAAC,MAAM,8BAA8BH,KAAEC,IAAEC,IAAE;AAAC,QAAG;AAAC,UAAIC,KAAE,CAACD,IAAG,aAAW,QAAMF,IAAE,QAAM,KAAK,eAAaA,GAAEC,GAAE,IAAI,IAAED,IAAE;AAAK,UAAG,KAAK,4BAA0BE,IAAG,sBAAqB;AAAC,cAAK,EAAC,SAAQD,GAAC,IAAE,MAAM,OAAO,mCAAmE;AAAE,QAAAE,KAAEF,GAAE,KAAK,0BAAyB,MAAK,EAAC,MAAK,KAAK,KAAK,MAAK,OAAM,KAAK,OAAM,OAAM,oBAAkBD,IAAE,OAAO,OAAKA,IAAE,OAAO,QAAM,KAAI,CAAC;AAAA,MAAC;AAAC,YAAMI,KAAE,UAAQJ,IAAE,OAAO,OAAK,EAAC,OAAM,UAAS,YAAW,EAAC,gBAAe,CAACE,IAAG,aAAW,KAAK,gBAAc,EAAE,CAAC,KAAK,4BAA0B,CAACA,IAAG,uBAAsB,YAAW,KAAK,gBAAc,EAAC,aAAY,SAAO,KAAK,MAAM,OAAK,QAAM,KAAK,MAAM,aAAY,OAAM,KAAK,MAAM,MAAK,IAAE,KAAI,EAAC,IAAE,CAAC,GAAEG,KAAEL,IAAE,SAAO,YAAU,OAAOA,IAAE,QAAM,OAAK,MAAM,GAAG,4BAA2BA,IAAE,KAAK;AAAE,MAAAA,IAAE,UAAQ,MAAMkB,GAAElB,IAAE,QAAO,EAAC,MAAKG,IAAE,OAAM,OAAG,WAAUE,IAAE,GAAGJ,IAAE,GAAGG,GAAC,CAAC;AAAA,IAAC,QAAM;AAAC,MAAAJ,IAAE,UAAQ,MAAK,EAAE,UAAU,IAAI,EAAE,KAAK,qDAAqDA,IAAE,QAAQ,IAAI,EAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,oBAAoBA,KAAE;AAAC,SAAK,0BAAwB;AAAG,UAAMC,KAAE,cAAa,KAAK,QAAM,KAAK,MAAM,WAAS,MAAKC,KAAEF,IAAE,UAAU,MAAM,KAAGC,IAAG,MAAM,GAAEE,KAAEC,GAAEJ,KAAE,KAAK,WAAU,KAAK,IAAI;AAAE,QAAGG,MAAG,QAAMD,MAAG,qBAAoBA,IAAE;AAAC,YAAMD,KAAEC,GAAE,iBAAiB,KAAM,CAAAF,QAAG,WAASA,IAAE,QAAM,cAAYA,IAAE,UAAQ,CAAC,GAAG,KAAKA,IAAE,eAAe,CAAE;AAAE,UAAG,CAACC,IAAE;AAAC,YAAG,oBAAmBD,OAAG,oBAAmBA,KAAE;AAAC,gBAAK,EAAC,gBAAeC,IAAE,gBAAeC,GAAC,IAAEF;AAAE,UAAAG,GAAE,gBAAc,IAAI,EAAE,EAAC,YAAWF,OAAIC,GAAC,CAAC;AAAA,QAAC;AAAC,cAAMD,KAAEC,GAAE,mBAAiB,CAAC;AAAE,QAAAA,GAAE,kBAAgBD,GAAE,OAAO,CAACE,EAAC,CAAC,GAAE,KAAK,0BAAwB;AAAA,MAAE;AAAA,IAAC;AAAC,WAAOD;AAAA,EAAC;AAAA,EAAC,MAAM,cAAcF,KAAE;AAAC,UAAMC,KAAE,CAAC,GAAEC,KAAEF,IAAE,MAAM,GAAEG,KAAE,MAAML,GAAGI,EAAC;AAAE,QAAG,GAAGA,EAAC,KAAG,GAAGA,EAAC,GAAE;AAAC,YAAMF,OAAGE,GAAE,mBAAiBA,GAAE,kBAAkB,IAAK,CAAAF,QAAG,KAAK,aAAaA,IAAE,QAAOG,EAAC,EAAE,KAAM,CAAAF,OAAG;AAAC,QAAAD,IAAE,SAAOC;AAAA,MAAC,CAAE,EAAE,MAAO,MAAI;AAAC,QAAAD,IAAE,SAAO;AAAA,MAAI,CAAE,CAAE;AAAE,YAAM,UAAU,KAAK,MAAMC,IAAED,GAAC;AAAA,IAAC;AAAC,WAAOC,GAAE,KAAK,KAAK,aAAaC,GAAE,UAAQA,GAAE,eAAcA,GAAE,gBAAc,OAAKC,EAAC,EAAE,KAAM,CAAAH,QAAG;AAAC,WAAK,uBAAuBE,IAAEF,KAAE,GAAGE,EAAC,CAAC;AAAA,IAAC,CAAE,EAAE,MAAO,MAAI;AAAC,WAAK,uBAAuBA,IAAE,MAAK,GAAGA,EAAC,CAAC;AAAA,IAAC,CAAE,CAAC,GAAE,MAAM,QAAQ,WAAWD,EAAC,GAAEC;AAAA,EAAC;AAAA,EAAC,uBAAuBF,KAAEC,IAAEC,IAAE;AAAC,IAAAA,KAAEF,IAAE,SAAOC,KAAED,IAAE,gBAAcC;AAAA,EAAC;AAAA,EAAC,MAAM,aAAaD,KAAEC,IAAE;AAAC,QAAG,CAACD,IAAE,OAAM,IAAI;AAAM,QAAG,gBAAcA,IAAE,MAAK;AAAC,YAAME,KAAE,KAAK;AAAqB,UAAG;AAAC,cAAMC,KAAE,MAAMH,IAAE,YAAY,EAAC,OAAME,GAAC,CAAC;AAAE,eAAO,KAAK,uBAAuBC,IAAEF,EAAC;AAAA,MAAC,QAAM;AAAC,cAAM,EAAE,UAAU,IAAI,EAAE,KAAK,4BAA4B,GAAE,IAAI;AAAA,MAAK;AAAA,IAAC;AAAC,WAAO,KAAK,uBAAuBD,KAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,uBAAuBD,KAAEE,IAAE;AAAC,QAAG,CAACF,OAAG,CAACE,GAAE,QAAOF;AAAE,UAAMG,KAAEH,IAAE,MAAM,GAAEI,KAAEF,MAAGA,GAAE,OAAO;AAAE,WAAOC,GAAE,KAAK,SAAS,IAAI,IAAE,KAAK,sBAAsBA,IAAEC,EAAC,IAAE,UAAQD,GAAE,OAAKe,GAAEf,IAAED,EAAC,IAAEC,GAAE,UAAQA,GAAE,QAAM,IAAIC,GAAEA,MAAGD,GAAE,KAAK,IAAGA;AAAA,EAAC;AAAA,EAAC,sBAAsBH,KAAEE,IAAE;AAAC,IAAAA,MAAGF,IAAE,aAAa,QAAS,CAAAA,QAAG;AAAC,MAAAA,QAAIA,IAAE,aAAWA,IAAE,WAAS,CAAC,IAAGA,IAAE,SAAS,QAAM,IAAII,GAAEF,EAAC;AAAA,IAAE,CAAE;AAAA,EAAC;AAAA,EAAC,MAAM,iCAAiCF,KAAEC,IAAE;AAAC,QAAG,EAAE,qBAAoBD,QAAI,mBAAiBA,IAAE,KAAK,QAAO;AAAK,UAAME,KAAEF,IAAE,mBAAiB,CAAC,GAAEG,KAAE,CAAC,GAAEC,KAAE,CAAC,GAAEE,KAAE,CAAC,GAAEC,MAAEE,GAAGT,KAAE,gBAAgB,KAAGS,GAAGT,KAAE,OAAO;AAAE,QAAIH;AAAE,QAAG,MAAIU,KAAG,WAAW,WAAS,GAAGP,GAAC,KAAG,GAAGA,GAAC,IAAG;AAAC,YAAK,CAACA,KAAEC,EAAC,IAAEM,IAAE;AAAU,MAAAV,KAAE,IAAIiB,GAAE,EAAC,OAAMP,IAAE,SAAO,QAAO,oBAAmBA,IAAE,oBAAmB,SAAQF,GAAEL,IAAE,MAAK,IAAG,GAAG,GAAE,SAAQK,GAAEJ,GAAE,MAAK,IAAG,GAAG,GAAE,cAAaD,IAAE,OAAM,cAAaC,GAAE,MAAK,CAAC,GAAEG,GAAE,KAAKP,EAAC;AAAA,IAAC;AAAC,eAAUQ,MAAKH,GAAE,aAAUG,GAAE,OAAKF,GAAE,KAAKE,EAAC,IAAE,WAASA,GAAE,OAAKD,GAAE,KAAKC,EAAC,IAAE,cAAYA,GAAE,QAAMC,GAAE,KAAKD,EAAC;AAAE,UAAMI,KAAE,CAAC,GAAGN,IAAE,GAAGC,IAAE,GAAGE,EAAC;AAAE,QAAII,KAAEC;AAAE,QAAG,MAAIR,GAAE,UAAQ,GAAGH,GAAC,KAAGA,IAAE,mBAAiB,MAAIA,IAAE,gBAAgB,QAAO;AAAC,YAAMC,KAAED,IAAE,gBAAgB,CAAC;AAAE,MAAAU,MAAET,MAAGA,GAAE;AAAA,IAAM;AAAC,QAAG,MAAIE,GAAE,UAAQ,GAAGH,GAAC,MAAIU,MAAEV,IAAE,SAAQU,IAAE,KAAGA,IAAE,KAAK,SAAS,IAAI,GAAE;AAAC,YAAMV,MAAEU,IAAE,aAAa,GAAG,CAAC;AAAE,kBAAUV,IAAE,OAAK,QAAMA,IAAE,UAAQW,KAAEX,IAAE,SAAO,QAAMA,IAAE,UAAU,UAAQW,KAAEX,IAAE,SAAS;AAAA,IAAM,MAAM,CAAAU,IAAE,QAAMC,KAAED,IAAE;AAAO,UAAME,KAAE,KAAK;AAAW,YAAO,MAAM,QAAQ,IAAIH,GAAE,IAAK,OAAMP,OAAG;AAAC,UAAG,CAACA,GAAE,iBAAe,UAAKA,GAAE,cAAc,YAAW;AAAC,cAAMC,KAAE,GAAGH,GAAC,IAAEE,GAAE,QAAM,KAAK,cAAcA,IAAED,EAAC;AAAE,YAAIG,MAAE;AAAK,cAAMC,KAAEK,GAAGT,IAAEC,IAAE,KAAK,KAAK,QAAQ;AAAE,YAAG,YAAUA,GAAE,MAAK;AAAC,gBAAMF,MAAE,MAAMC,GAAEC,IAAE,MAAKG,EAAC,KAAG,CAAC;AAAE,UAAAD,MAAE,EAAC,MAAK,cAAa,OAAMD,IAAE,OAAMH,KAAE,SAAQQ,GAAER,IAAE,IAAK,CAAAA,QAAGA,IAAE,KAAM,GAAE,EAAC,YAAWY,IAAE,WAAU,MAAM,GAAG,2BAA2B,EAAC,CAAC,EAAC,GAAE,KAAK,kBAAgB,KAAK,gBAAcZ,IAAE,SAAO;AAAA,QAAE,WAAS,WAASE,GAAE,QAAM,cAAYA,GAAE,OAAO,IAAG,KAAKA,GAAE,eAAe,IAAE,KAAK,4BAA0B,KAAK,2BAAyBA,OAAIE,MAAE,MAAM,KAAK,sBAAsBD,IAAED,IAAEF,KAAEK,EAAC,GAAER,OAAIK,MAAG,YAAUK,KAAG,UAAQH,IAAE,QAAMG,IAAE,QAAO,KAAK,iBAAe,KAAK,eAAa,EAAE,QAAMH,IAAE,SAAO,CAACA,IAAE,MAAM;AAAA,iBAAkB,cAAYF,GAAE,MAAK;AAAC,gBAAMF,MAAE,MAAMC,GAAEC,IAAES,IAAEN,EAAC,KAAG,CAAC;AAAE,UAAAD,MAAE,EAAC,MAAK,gBAAe,OAAMD,IAAE,OAAMH,KAAE,SAAQQ,GAAER,IAAE,IAAK,CAAAA,QAAGA,IAAE,KAAM,GAAE,EAAC,YAAWY,IAAE,WAAU,MAAM,GAAG,2BAA2B,EAAC,CAAC,EAAC,GAAE,KAAK,oBAAkB,KAAK,kBAAgBZ,IAAE,SAAO;AAAA,QAAE;AAAC,eAAOI,KAAG,QAAMA,MAAE;AAAA,MAAI;AAAA,IAAC,CAAE,CAAC,GAAG,OAAO,CAAC;AAAA,EAAC;AAAA,EAAC,eAAeJ,KAAEC,IAAEC,IAAE;AAAC,QAAGF,OAAG,cAAY,OAAOA,KAAE;AAAC,YAAMG,KAAE,cAAaD,MAAGA,GAAE,WAAWF,GAAC,GAAEI,KAAED,MAAG,oBAAmBD,MAAGA,GAAE,iBAAeA,GAAE,eAAeC,GAAE,MAAK,EAAC,uBAAsB,IAAI,6CAA6C,EAAC,CAAC,IAAE;AAAK,aAAM,kBAAgBC,IAAG,OAAKA,GAAE,QAAQH,EAAC,IAAE;AAAA,IAAI;AAAC,WAAO;AAAA,EAAI;AAAA,EAAC,iBAAiBD,KAAE;AAAC,UAAMC,KAAE,KAAK,OAAMC,KAAEF,IAAE;AAAM,QAAG,sBAAqBC,MAAGA,GAAE,oBAAkB,cAAYA,GAAE,iBAAiB,MAAK;AAAC,YAAMD,MAAEC,GAAE,kBAAiBE,KAAE,mBAAkBH,OAAGA,IAAE,eAAcI,KAAED,MAAGA,GAAE;AAAW,UAAGC;AAAE,mBAAUH,MAAKG,GAAE,KAAGH,GAAE,cAAYC,GAAE,QAAM,oBAAkBA,KAAED,GAAE,SAAO,EAAC,WAAU,KAAE,IAAEA,GAAE;AAAA;AAAA,IAAK;AAAC,WAAM,EAAC,WAAU,KAAE;AAAA,EAAC;AAAA,EAAC,cAAcD,KAAEC,IAAE;AAAC,QAAIC,KAAEF,IAAE,OAAMG,KAAEH,IAAE,oBAAmBI,KAAE,OAAGC,KAAE,OAAGC,KAAE,OAAGC,MAAE;AAAK,IAAAL,KAAE,cAAY,OAAOA,KAAE,OAAKA,IAAEC,KAAE,cAAY,OAAOA,KAAE,OAAKA;AAAE,UAAMN,KAAEG,IAAE,eAAe;AAAM,QAAG,QAAMH,GAAE,CAAAU,MAAEV;AAAA,aAAUG,IAAE,qBAAqB,CAAAO,MAAEP,IAAE;AAAA,SAAyB;AAAC,UAAG,cAAaC,MAAGA,GAAE,YAAU,mBAAkBA,GAAE,YAAUA,GAAE,SAAS,eAAe,iBAAgB;AAAC,cAAMD,MAAEC,GAAE,SAAS,cAAc;AAAgB,iBAAQA,KAAE,GAAEA,KAAED,IAAE,QAAOC,MAAI;AAAC,gBAAMC,KAAEF,IAAEC,EAAC;AAAE,cAAG,YAAUC,GAAE,MAAK;AAAC,gBAAG,YAAUA,GAAE,OAAM;AAAC,cAAAE,KAAE;AAAG;AAAA,YAAK;AAAC,gBAAG,cAAYF,GAAE,OAAM;AAAC,cAAAG,KAAE;AAAG;AAAA,YAAK;AAAC,gBAAG,uBAAqBH,GAAE,OAAM;AAAC,cAAAI,KAAE;AAAG;AAAA,YAAK;AAAA,UAAC;AAAA,QAAC;AAAA,MAAC;AAAC,MAAAC,MAAE,EAAC,OAAML,MAAG,KAAK,eAAeA,IAAED,EAAC,GAAE,WAAUE,MAAG,KAAK,eAAeA,IAAEF,EAAC,GAAE,OAAMG,IAAE,cAAaC,IAAE,mBAAkBC,GAAC;AAAA,IAAC;AAAC,WAAOC;AAAA,EAAC;AAAA,EAAC,kBAAkBP,KAAEC,IAAE;AAAC,UAAMC,KAAEF;AAAE,QAAGE,GAAE,eAAe,MAAM,QAAOA,GAAE,cAAc;AAAM,QAAGA,GAAE,qBAAqB,QAAOA,GAAE;AAAqB,QAAIC,KAAED,GAAE,OAAME,KAAE,MAAKC,KAAE;AAAK,QAAG,GAAGH,EAAC,MAAIE,KAAEF,GAAE,oBAAmBG,KAAE,uBAAqBH,GAAE,oBAAmBC,KAAE,cAAY,OAAOA,KAAE,OAAKA,IAAEC,KAAE,cAAY,OAAOA,KAAE,OAAKA,IAAE,GAAGF,EAAC,GAAE;AAAC,YAAK,EAAC,QAAOF,KAAE,QAAOI,KAAE,gBAAeC,GAAC,IAAEH;AAAE,UAAII,MAAEH,MAAG,KAAK,eAAeA,IAAEF,EAAC;AAAE,aAAOD,QAAIM,MAAE,IAAIA,GAAC,IAAID,EAAC,IAAI,KAAK,eAAeL,KAAEC,EAAC,CAAC,KAAIG,QAAIE,MAAE,GAAGA,GAAC,GAAGD,EAAC,IAAI,KAAK,eAAeD,KAAEH,EAAC,CAAC,OAAMK;AAAA,IAAC;AAAC,QAAIA,KAAE;AAAK,YAAOH,MAAGC,QAAKE,KAAE,EAAC,OAAMH,MAAG,KAAK,eAAeA,IAAEF,EAAC,GAAE,WAAUG,MAAG,KAAK,eAAeA,IAAEH,EAAC,GAAE,WAAUI,GAAC,IAAGC;AAAA,EAAC;AAAA,EAAC,eAAeN,KAAEC,IAAE;AAAC,UAAMC,KAAE,mBAAkBD,KAAEA,GAAE,gBAAc,MAAKE,KAAED,IAAG;AAAW,QAAIE,KAAED,IAAG,KAAM,CAAAF,OAAGD,QAAIC,GAAE,SAAU,GAAEI,KAAE;AAAK,kBAAaJ,MAAGA,GAAE,WAASI,KAAEJ,GAAE,SAASD,GAAC,IAAE,iBAAgBC,MAAGA,GAAE,gBAAcI,KAAEJ,GAAE,YAAY,IAAID,GAAC;AAAG,QAAIM,KAAE;AAAK,UAAMC,MAAE,sBAAqBN,MAAGA,GAAE;AAAiB,IAAAM,QAAIH,OAAI,mBAAkBG,MAAEA,IAAE,eAAe,YAAY,KAAM,CAAAN,OAAGD,KAAG,YAAY,MAAIC,GAAE,WAAW,YAAY,CAAE,IAAE,QAAO,YAAWM,OAAGA,IAAE,WAASD,KAAEC,IAAE,OAAO,KAAM,CAAAN,OAAGA,GAAE,MAAM,YAAY,MAAID,KAAG,YAAY,CAAE;AAAI,UAAMH,KAAEO,MAAGC,MAAGC;AAAE,QAAIR,MAAE;AAAK,WAAOD,OAAIC,MAAEM,IAAG,SAAOC,IAAG,SAAOC,IAAG,SAAO,UAAST,MAAGA,GAAE,QAAM,eAAcA,MAAGA,GAAE,aAAW,OAAMC;AAAA,EAAC;AAAA,EAAC,qBAAqBE,KAAE;AAAC,UAAMC,KAAED,IAAE;AAAgB,QAAIE,KAAE;AAAG,WAAO,GAAGF,GAAC,KAAGA,IAAE,mBAAiB,MAAIA,IAAE,gBAAgB,UAAQC,OAAIC,KAAEF,IAAE,QAAMC,GAAE,KAAM,CAAAA,OAAG,EAAE,CAACA,MAAGD,IAAE,UAAQC,GAAE,UAAQD,IAAE,sBAAoBC,GAAE,uBAAqBD,IAAE,uBAAqBC,GAAE,mBAAoB,IAAE,CAAC,CAACA,GAAE,SAAQC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,GAAG,WAAU,cAAa,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,aAAY,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,kBAAiB,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,GAAG,WAAU,WAAU,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,UAAS,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,MAAG,WAAU,CAAC,EAAC,CAAC,CAAC,GAAE,GAAG,WAAU,SAAQ,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,8BAA6B,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,sBAAqB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,oCAAmC,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,0BAAyB,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,GAAG,WAAU,SAAQ,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,eAAc,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAE,GAAG,WAAU,iBAAgB,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,MAAG,WAAU,CAAC,OAAO,GAAE,OAAM,EAAC,CAAC,CAAC,GAAE,GAAG,WAAU,WAAU,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,GAAG,WAAU,QAAO,MAAM,GAAE,KAAG,EAAE,CAAC,EAAE,6CAA6C,CAAC,GAAE,EAAE;;;ACAty5C,IAAMiB,KAAE,EAAC,OAAM,SAAQ,MAAK,QAAO,eAAc,mBAAkB,kBAAiB,oBAAmB;AAAvG,IAAyGC,KAAE,EAAE,OAAO,EAAC;AAArH,IAAuHC,KAAE,oBAAI,IAAI,CAAC,kCAAiC,4BAA2B,wBAAuB,4BAA2B,4BAA2B,2BAA0B,0BAAyB,4BAA2B,4BAA2B,gCAA+B,6BAA4B,+BAA8B,oCAAmC,4BAA2B,+BAA8B,2BAA0B,0BAAyB,iCAAgC,yBAAwB,0BAAyB,wBAAuB,wBAAuB,yBAAwB,wBAAuB,8BAA6B,6CAA4C,gDAA+C,qDAAoD,iCAAiC,CAAC;AAAx9B,IAA09BC,KAAE;AAA59B,IAA8/BC,KAAE;AAAhgC,IAA6hCC,KAAE;AAA/hC,IAAskC,IAAE,CAACF,IAAEC,IAAE,mBAAkBC,EAAC;AAAE,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAE;AAAC,UAAMA,GAAC,GAAE,KAAK,sBAAoB,CAAC,GAAE,KAAK,2BAAyB,CAAC,GAAE,KAAK,iCAA+B,CAAC,GAAE,KAAK,gCAA8B,IAAI,KAAE,KAAK,mBAAiB,IAAIN,MAAE,KAAK,uBAAqB,OAAG,KAAK,sBAAoB,OAAG,KAAK,6BAA2B,OAAG,KAAK,qBAAmB,OAAG,KAAK,mCAAiC,OAAG,KAAK,yBAAuB,MAAG,KAAK,aAAW,CAAC,GAAE,KAAK,OAAK;AAAA,EAAI;AAAA,EAAC,aAAY;AAAC,SAAK,WAAW,EAAG,MAAI,KAAK,MAAO,MAAI,KAAK,aAAa,GAAG,CAAC,GAAED,GAAE,IAAI,GAAE,KAAK,WAAW,EAAG,MAAI,KAAK,SAAS,CAAE,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,6BAA6B,GAAE,KAAK,OAAK;AAAA,EAAI;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK,MAAM,QAAM,UAAQ;AAAA,EAAU;AAAA,EAAC,eAAc;AAAC,SAAK,cAAcA,GAAE,KAAK,GAAE,KAAK,QAAM,KAAK,WAAW,EAAG,MAAI,KAAK,OAAQ,MAAI,KAAK,cAAc,GAAG,CAAC,GAAEA,GAAE,KAAK;AAAA,EAAC;AAAA,EAAC,gBAAe;AAAC,SAAK,UAAU,GAAE,YAAU,KAAK,SAAO,KAAK,iCAAiC;AAAA,EAAC;AAAA,EAAC,YAAW;AAAC,SAAK,cAAc,CAACA,GAAE,eAAcA,GAAE,gBAAgB,CAAC,GAAE,KAAK,6BAA6B,GAAE,KAAK,iBAAiB,UAAU;AAAA,EAAC;AAAA,EAAC,+BAA8B;AAAC,WAAO,KAAK,KAAK,8BAA8B,EAAE,QAAQ,KAAK,6BAA4B,IAAI;AAAA,EAAC;AAAA,EAAC,4BAA4BO,KAAE;AAAC,SAAK,cAAcA,GAAC;AAAE,UAAMC,KAAE,KAAK,+BAA+BD,GAAC;AAAE,WAAO,KAAK,+BAA+BA,GAAC,GAAEC,IAAG,UAAQA,GAAE,OAAO,SAAS,OAAOA,EAAC;AAAA,EAAC;AAAA,EAAC,mCAAkC;AAAC,UAAK,EAAC,MAAKD,IAAC,IAAE;AAAK,QAAG,CAACA,IAAE;AAAO,UAAK,EAAC,eAAcC,GAAC,IAAED;AAAE,IAAAC,GAAE,UAAQ,KAAK,SAAS,GAAE,KAAK,WAAWA,GAAE,GAAG,UAAU,CAAAD,QAAG,KAAK,2BAA2BA,GAAC,CAAE,GAAEP,GAAE,aAAa,GAAE,KAAK,WAAW,EAAG,MAAI,CAAC,KAAK,YAAW,KAAK,sBAAqB,KAAK,mBAAmB,GAAI,MAAI,KAAK,wBAAwB,CAAE,GAAEA,GAAE,gBAAgB;AAAA,EAAC;AAAA,EAAC,2BAA2BO,KAAE;AAAC,IAAAA,IAAE,MAAM,SAAO,KAAK,wBAAwB,KAAGA,IAAE,QAAQ,QAAS,CAAAA,QAAG,KAAK,4BAA4BA,IAAE,GAAG,CAAE,GAAE,KAAK,SAAS;AAAA,EAAE;AAAA,EAAC,0BAAyB;AAAC,SAAK,6BAA6B,GAAE,KAAK,SAAS;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,SAAK,2BAAyB,CAAC,GAAE,KAAK,iBAAiB,UAAU,GAAE,KAAK,oBAAoB,EAAE,OAAO,KAAK,+BAA8B,IAAI,EAAE,OAAO,KAAK,uBAAsB,IAAI,EAAE,QAAQ,KAAK,0BAAyB,IAAI,GAAE,KAAK,sBAAsB,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,sBAAsBA,KAAE;AAAC,UAAMC,KAAE,KAAK;AAAK,QAAGD,IAAE,SAAO,KAAG,CAACC,GAAE;AAAO,UAAMC,KAAE,CAAC;AAAE,IAAAF,IAAE,QAAS,CAAAC,OAAG;AAAC,UAAG,CAACA,GAAE,QAAO;AAAC,cAAME,KAAEF,GAAE,MAAM,QAAOG,KAAED,MAAG,SAAQA,MAAG,KAAK,oBAAoBA,GAAE,GAAG,GAAEE,MAAED,MAAG,KAAK,+BAA+BA,GAAE,GAAG;AAAE,QAAAC,OAAGL,IAAE,SAASK,GAAC,MAAIH,GAAE,KAAKD,EAAC,GAAEA,GAAE,SAAOI,KAAEA,IAAE,SAAS,IAAIJ,EAAC,GAAE,KAAK,sBAAsBI,IAAE,QAAQ;AAAA,MAAE;AAAA,IAAC,CAAE,GAAEL,IAAE,WAAWE,EAAC;AAAE,UAAMC,KAAE,CAAC;AAAE,IAAAF,GAAE,cAAc,QAAS,CAACD,KAAEC,OAAIE,GAAEH,IAAE,MAAM,GAAG,IAAEC,EAAE,GAAED,IAAE,KAAM,CAACA,KAAEC,OAAI;AAAC,YAAMC,KAAEC,GAAEH,IAAE,MAAM,GAAG,KAAG;AAAE,cAAOG,GAAEF,GAAE,MAAM,GAAG,KAAG,KAAGC;AAAA,IAAC,CAAE;AAAA,EAAC;AAAA,EAAC,sBAAqB;AAAC,UAAMF,MAAE,CAAC;AAAE,WAAO,EAAE,OAAO,KAAK,mBAAkB,IAAI,EAAE,IAAK,CAAAA,QAAG,EAAE,MAAKA,GAAC,CAAE,EAAE,OAAQ,CAAAA,QAAG,QAAMA,GAAE,EAAE,QAAQ,KAAK,mBAAmB,cAAaA,GAAC,CAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,kBAAkBA,KAAE;AAAC,UAAMC,KAAE,CAAC,KAAK,yBAAuBD,QAAIJ,MAAGI,QAAIF,KAAGI,KAAE,CAAC,KAAK,uBAAqBF,QAAIH;AAAE,WAAM,CAACI,MAAG,CAACC;AAAA,EAAC;AAAA,EAAC,mBAAmBF,KAAEC,IAAE;AAAC,UAAMC,KAAE,CAAAC,QAAIA,MAAGA,GAAE,QAAS,CAAAA,OAAG;AAAC,MAAAF,GAAE,KAAKE,EAAC,GAAED,GAAEC,GAAEH,GAAC,CAAC;AAAA,IAAC,CAAE,GAAEC;AAAG,WAAOC;AAAA,EAAC;AAAA,EAAC,8BAA8BF,KAAE;AAAC,UAAMC,KAAE,KAAK;AAAW,WAAM,CAACA,MAAG,CAACA,GAAE,UAAQA,GAAE,KAAM,CAAAA,OAAG,KAAK,cAAcA,IAAED,GAAC,CAAE;AAAA,EAAC;AAAA,EAAC,cAAcA,KAAEC,IAAE;AAAC,UAAMC,KAAE,KAAK,oBAAoBF,IAAE,OAAMC,GAAE,MAAM,GAAG;AAAE,WAAOC,OAAI,KAAK,yBAAyBD,GAAE,GAAG,IAAED,MAAGE;AAAA,EAAC;AAAA,EAAC,oBAAoBF,KAAEC,IAAE;AAAC,WAAOD,QAAIA,IAAE,QAAMC,MAAG,KAAK,aAAaD,IAAE,QAAOC,EAAC;AAAA,EAAE;AAAA,EAAC,aAAaD,KAAEC,IAAE;AAAC,WAAOD,OAAGA,IAAE,KAAM,CAAAA,QAAG,KAAK,oBAAoBA,KAAEC,EAAC,CAAE;AAAA,EAAC;AAAA,EAAC,sBAAsBD,KAAE;AAAC,WAAM,CAAC,CAACL,GAAE,IAAIK,IAAE,MAAM,aAAa,MAAI,KAAK,oBAAoBA,IAAE,MAAM,GAAG,IAAEA,KAAE;AAAA,EAAG;AAAA,EAAC,yBAAyBA,KAAE;AAAC,SAAK,eAAeA,GAAC,IAAE,KAAK,sBAAsBA,GAAC,KAAG,KAAK,cAAcA,IAAE,GAAG,GAAE,KAAK,WAAW,EAAG,MAAI,CAACA,IAAE,eAAcA,IAAE,OAAO,aAAa,GAAI,MAAI,KAAK,mBAAmBA,GAAC,CAAE,GAAEA,IAAE,GAAG;AAAA,EAAE;AAAA,EAAC,mBAAmBA,KAAE;AAAC,SAAK,eAAeA,GAAC,MAAI,KAAK,cAAcA,IAAE,GAAG,GAAE,KAAK,sBAAsBA,GAAC;AAAA,EAAE;AAAA,EAAC,eAAeA,KAAE;AAAC,WAAM,CAAC,KAAK,0BAAwBA,IAAE,iBAAeA,IAAE,OAAO;AAAA,EAAa;AAAA,EAAC,sBAAsBA,KAAE;AAAC,UAAMC,KAAED,IAAE,OAAME,KAAEF,IAAE,KAAIM,KAAE,KAAK,yBAAyBJ,EAAC;AAAE,QAAIK,KAAE,KAAK,+BAA+BL,EAAC;AAAE,QAAG,CAACK,IAAE;AAAC,YAAMJ,KAAE,WAASG,IAAG,SAAOA,GAAE,MAAM,QAAML,GAAE;AAAI,MAAAM,KAAE,IAAI,GAAE,EAAC,OAAMN,IAAE,WAAUD,KAAE,OAAMG,KAAEG,GAAE,QAAML,GAAE,OAAM,MAAK,KAAK,QAAM,QAAO,kCAAiC,KAAK,kCAAiC,wBAAuB,KAAK,wBAAuB,4BAA2B,KAAK,4BAA2B,oBAAmB,KAAK,oBAAmB,aAAYK,IAAG,eAAa,CAAC,EAAC,CAAC,GAAE,KAAK,+BAA+BJ,EAAC,IAAEK;AAAA,IAAC;AAAC,UAAMC,KAAEP,GAAE,UAAQ,SAAQA,GAAE,SAAO,KAAK,oBAAoBA,GAAE,QAAQ,GAAG,IAAE;AAAK,QAAGM,GAAE,SAAO,KAAK,+BAA+BC,IAAG,GAAG,GAAE,CAAC,KAAK,WAAWN,EAAC,GAAE;AAAC,YAAMI,MAAE,CAAC,EAAG,MAAIL,GAAE,OAAQ,CAAAD,QAAG,KAAK,aAAaA,KAAEO,EAAC,CAAE,GAAE,EAAG,MAAI,CAACN,GAAE,SAAQ,cAAaA,MAAGA,GAAE,UAAS,iBAAgBA,MAAGA,GAAE,aAAY,gBAAeA,MAAGA,GAAE,YAAW,mBAAkBA,MAAGA,GAAE,aAAa,GAAI,MAAI,KAAK,yBAAyBM,EAAC,CAAE,GAAEV,GAAG,MAAI,SAAK,KAAK,MAAM,YAAa,MAAI,KAAK,aAAaU,EAAC,GAAG,CAAC,GAAE,EAAG,MAAIP,IAAE,QAAMA,GAAEA,IAAE,OAAMA,IAAE,IAAI,IAAE,MAAO,MAAI,KAAK,yBAAyBO,EAAC,CAAE,GAAE,EAAG,MAAIP,IAAE,UAAW,MAAI;AAAC,YAAG,QAAMA,IAAE,MAAM;AAAO,gBAAMA,GAAEA,IAAE,OAAMA,IAAE,IAAI,KAAG,KAAK,yBAAyBO,EAAC;AAAA,MAAC,CAAE,GAAE,EAAG,MAAI,YAAWN,MAAGA,GAAE,QAAS,MAAI,KAAK,yBAAyBM,EAAC,CAAE,GAAEV,GAAG,MAAI,KAAK,MAAM,UAAW,MAAI,KAAK,yBAAyBU,EAAC,GAAG,CAAC,CAAC;AAAE,UAAG,KAAK,wBAAuB;AAAC,cAAML,KAAE,EAAG,MAAIF,IAAE,eAAgB,CAAAA,QAAG,KAAK,qBAAqBA,KAAEO,EAAC,CAAE,GAAEH,KAAE,EAAG,MAAIH,GAAE,eAAgB,CAAAD,QAAG,KAAK,qBAAqBA,KAAEO,EAAC,CAAE;AAAE,QAAAD,IAAE,KAAKJ,IAAEE,EAAC;AAAA,MAAC;AAAC,UAAG,KAAK,oCAAkC,0BAAyBH,IAAE;AAAC,cAAMD,MAAE,EAAG,MAAI,CAACC,GAAE,sBAAqB,KAAK,gCAAgC,GAAI,MAAI;AAAC,UAAAM,GAAE,mCAAiC,KAAK,kCAAiC,KAAK,yBAAyBA,EAAC;AAAA,QAAC,CAAE;AAAE,QAAAD,IAAE,KAAKN,GAAC;AAAA,MAAC;AAAC,WAAK,WAAWM,KAAEJ,EAAC;AAAA,IAAC;AAAC,IAAAK,GAAE,iBAAe,KAAK,yBAAyBA,EAAC,GAAE,KAAK,oBAAoBA,EAAC;AAAA,EAAC;AAAA,EAAC,aAAaP,KAAEC,IAAE;AAAC,IAAAA,GAAE,QAAMD,KAAE,KAAK,yBAAyBC,EAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBD,KAAEC,IAAE;AAAC,IAAAD,MAAE,KAAK,oBAAoBC,EAAC,IAAE,KAAK,uBAAuBA,EAAC;AAAA,EAAC;AAAA,EAAC,aAAaD,KAAE;AAAC,KAACA,IAAE,iBAAeA,IAAE,+BAA6B,KAAK,yBAAyBA,GAAC;AAAA,EAAC;AAAA,EAAC,oBAAoBA,KAAE;AAAC,UAAK,EAAC,WAAUC,IAAE,OAAMC,GAAC,IAAEF;AAAE,QAAG,KAAK,eAAeC,EAAC,KAAG,CAAC,KAAK,iBAAiB,SAASD,GAAC,GAAE;AAAC,YAAMC,KAAED,IAAE;AAAO,UAAGC,GAAE,CAAAA,GAAE,SAAS,SAASD,GAAC,KAAGC,GAAE,SAAS,KAAKD,GAAC,GAAE,KAAK,sBAAsBC,GAAE,QAAQ;AAAA,WAAM;AAAC,cAAMA,KAAE,KAAK,YAAY,KAAM,CAAAD,QAAGA,IAAE,MAAM,QAAME,GAAE,GAAI,GAAEC,KAAED,GAAE;AAAO,SAACC,MAAG,SAAQA,KAAE,KAAK,oBAAoBA,GAAE,GAAG,IAAE,SAAO,CAACF,KAAE,KAAK,8BAA8B,IAAID,GAAC,KAAG,KAAK,iBAAiB,IAAIA,GAAC,GAAE,KAAK,sBAAsB,KAAK,gBAAgB;AAAA,MAAE;AAAC,UAAG,KAAK,8BAA8B,QAAO;AAAC,cAAMA,MAAE,CAAC;AAAE,aAAK,8BAA8B,QAAS,CAAAC,OAAG;AAAC,gBAAMC,KAAED,GAAE,MAAM,QAAOE,KAAED,MAAG,SAAQA,KAAE,KAAK,oBAAoBA,IAAG,GAAG,IAAE,MAAKE,KAAE,KAAK,+BAA+BD,IAAG,GAAG;AAAE,UAAAC,OAAIJ,IAAE,KAAKC,EAAC,GAAEA,GAAE,SAAOG;AAAA,QAAE,CAAE,GAAEJ,IAAE,WAAS,KAAK,8BAA8B,WAAWA,GAAC,GAAEA,IAAE,QAAS,CAAAA,QAAG,KAAK,oBAAoBA,GAAC,CAAE;AAAA,MAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,uBAAuBA,KAAE;AAAC,UAAMC,KAAED,IAAE;AAAO,IAAAC,KAAEA,GAAE,SAAS,OAAOD,GAAC,IAAE,KAAK,iBAAiB,OAAOA,GAAC;AAAA,EAAC;AAAA,EAAC,yBAAyBA,KAAE;AAAC,UAAMC,KAAED,IAAE;AAAM,4BAAuBC,MAAGA,GAAE,qBAAmBD,IAAE,yCAAyCC,GAAE,kBAAkB,IAAE,sBAAqBA,MAAGA,GAAE,oBAAkB,cAAaA,GAAE,qBAAmB,cAAYA,GAAE,iBAAiB,QAAM,cAAYA,GAAE,iBAAiB,UAAQ,CAAC,KAAK,QAAMA,GAAE,iBAAiB,YAAU,KAAK,KAAK,SAAOD,IAAE,uCAAuCC,GAAE,gBAAgB,IAAE,cAAaA,MAAGA,GAAE,YAAU,EAAE,eAAcA,MAAGD,IAAE,+BAA+BC,GAAE,QAAQ,IAAE,SAAQA,MAAGA,GAAE,OAAK,cAAYA,GAAE,QAAM,sBAAoBA,GAAE,OAAKD,IAAE,4BAA4B,IAAEA,IAAE,SAAS,QAAS,CAAAA,QAAG,KAAK,yBAAyBA,GAAC,CAAE;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,EAAC,MAAKN,GAAC,CAAC,CAAC,GAAEK,GAAE,WAAU,oBAAmB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,wBAAuB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,uBAAsB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,8BAA6B,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,sBAAqB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,oCAAmC,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,0BAAyB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,SAAQ,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,QAAO,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,qCAAqC,CAAC,GAAEA,EAAC;;;ACAp7T,IAAMU,KAAE;AAAR,IAA4BC,KAAE;AAA9B,IAA4CC,KAAE,EAAC,WAAU,GAAGF,EAAC,mCAAkC,MAAKA,IAAE,SAAQ,GAAGC,EAAC,aAAY,eAAc,GAAGD,EAAC,oBAAmB,WAAU,GAAGA,EAAC,wBAAuB,mBAAkB,GAAGA,EAAC,wBAAuB,4BAA2B,GAAGA,EAAC,oCAAmC,YAAW,GAAGA,EAAC,iBAAgB,cAAa,GAAGA,EAAC,mBAAkB,cAAa,GAAGA,EAAC,mBAAkB,UAAS,GAAGA,EAAC,eAAc,WAAU,GAAGA,EAAC,gBAAe,SAAQ,GAAGA,EAAC,aAAY,WAAU,GAAGA,EAAC,gBAAe,SAAQ,GAAGA,EAAC,aAAY,qBAAoB,GAAGA,EAAC,0BAAyB,oBAAmB,GAAGA,EAAC,0BAAyB,gBAAe,GAAGA,EAAC,qBAAoB,SAAQ,GAAGA,EAAC,aAAY,YAAW,GAAGA,EAAC,iBAAgB,iBAAgB,GAAGA,EAAC,uBAAsB,QAAO,GAAGA,EAAC,YAAW,aAAY,GAAGA,EAAC,mBAAkB,WAAU,GAAGA,EAAC,gBAAe,YAAW,GAAGA,EAAC,iBAAgB,UAAS,GAAGA,EAAC,cAAa,cAAa,GAAGA,EAAC,mBAAkB,oBAAmB,GAAGA,EAAC,kCAAiC,6BAA4B,GAAGA,EAAC,mCAAkC,4BAA2B,GAAGA,EAAC,kCAAiC,gBAAe,GAAGA,EAAC,qBAAoB,yBAAwB,GAAGA,EAAC,+BAA8B,iBAAgB,GAAGA,EAAC,sBAAqB,oBAAmB,GAAGA,EAAC,0BAAyB,mBAAkB,GAAGA,EAAC,yBAAwB,iBAAgB,GAAGA,EAAC,uBAAsB,qBAAoB,GAAGA,EAAC,4BAA2B,eAAc,GAAGC,EAAC,WAAU,oBAAmB,GAAGA,EAAC,2BAA0B,qBAAoB,GAAGA,EAAC,iBAAgB,WAAU,GAAGA,EAAC,gBAAgBA,EAAC,sBAAqB,kCAAiC,oDAAmD;;;ACA1/C,SAASE,GAAEC,KAAEC,IAAE;AAAC,SAAOA;AAAC;AAAC,SAASC,GAAEF,KAAE;AAAC,QAAMC,KAAE;AAAK,EAAAD,IAAE,YAAYC,EAAC;AAAC;AAAC,SAASE,GAAEC,IAAEF,IAAEC,IAAE;AAAC,MAAG,CAACD,GAAE;AAAO,MAAG,YAAU,OAAOA,GAAE,QAAOA;AAAE,MAAG,YAAU,OAAOA,GAAE,QAAO,EAAEA,EAAC;AAAE,MAAG,WAAUA,MAAG,UAASA,GAAE,QAAOG,GAAED,GAAE,UAASF,EAAC;AAAE,MAAG,eAAcA,MAAG,cAAaA,GAAE,QAAOE,GAAEF,GAAE,SAAS,IAAE,QAAME,GAAEF,GAAE,QAAQ,KAAGA,GAAE;AAAU,MAAG,eAAcA,GAAE,QAAOA,GAAE,YAAUE,GAAE,oBAAkB;AAAO,MAAIE,MAAE;AAAK,SAAOP,GAAEG,IAAEC,EAAC,IAAEG,MAAEJ,GAAE,oBAAkB,0BAAwBA,GAAE,eAAa,qBAAmBA,GAAE,QAAM,cAAYA,GAAE,YAAU,kBAAgBA,GAAE,QAAM,cAAY,OAAKK,GAAEL,IAAEC,EAAC,MAAIG,MAAEJ,GAAE,YAAU,kBAAgBA,GAAE,YAAU,gBAAcA,GAAE,QAAM,cAAY,OAAMI,MAAED,GAAE,gBAAcC,MAAE,YAAUF,GAAEE,GAAC,GAAE,EAAC,OAAMJ,GAAE,OAAM,WAAUA,GAAE,UAAS,CAAC,IAAE;AAAM;AAAC,SAASK,GAAEP,KAAEC,IAAE;AAAC,SAAM,CAACA;AAAC;AAAC,SAASK,IAAEN,KAAEC,IAAE;AAAC,SAAM,CAAC,EAAEA,MAAG,gBAAcA,MAAG,aAAYD,OAAG,YAAU,OAAOA,IAAE,WAASA,IAAE,WAAS,QAAM,+BAA6BA,IAAE;AAAc;AAAC,SAASQ,GAAER,KAAEC,IAAE;AAAC,SAAOD,IAAE,QAAMC,GAAED,IAAE,KAAK,IAAE,QAAM,YAAU,OAAOA,IAAE,QAAMA,IAAE,QAAMG,GAAEH,IAAE,SAAO,GAAE,EAAC,OAAM,WAAU,UAASA,IAAE,OAAO,SAAS,EAAE,YAAY,EAAE,SAAS,GAAG,IAAE,eAAa,WAAU,CAAC,KAAG;AAAE;;;ACA7pC,SAASS,GAAEC,IAAEC,KAAEF,IAAE;AAAC,UAAOE,KAAE;AAAA,IAAC,KAAI;AAAe,aAAOF,GAAEC,GAAE,KAAK,KAAGA,GAAE;AAAA,IAAM,KAAI;AAAe,aAAOE,GAAEF,IAAED,EAAC;AAAA,IAAE;AAAQ,aAAOC,GAAE;AAAA,EAAK;AAAC;AAAC,SAASG,GAAEC,IAAEL,IAAE;AAAC,MAAG,CAACK,GAAE,SAAO,YAAU,OAAOA,GAAE,MAAM,QAAOA,GAAE;AAAM,QAAMD,KAAE,iBAAeC,GAAE,QAAM,mBAAiBA,GAAE,MAAKC,KAAED,GAAE,OAAME,KAAEA,GAAEP,IAAEM,IAAEF,EAAC;AAAE,SAAOJ,GAAEM,IAAEF,EAAC,KAAGE,GAAE,QAAM,GAAGA,GAAE,KAAK,KAAKC,EAAC,MAAIA;AAAC;AAAC,SAASD,GAAEL,IAAE;AAAC,SAAM,EAAE,CAACA,MAAG,YAAU,OAAOA;AAAE;;;ACA2N,IAAMO,KAAE;AAAR,IAAWC,KAAE;AAAb,IAAgBC,KAAE;AAAI,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAMD,MAAE,KAAK,cAAc,MAAM,MAAM,EAAE,QAAQ;AAAE,WAAO,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQE,GAAE,UAASA,GAAE,kBAAkB,EAAC,GAAE,KAAK,iBAAiBF,IAAE,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAME,GAAE,gBAAe,GAAE,KAAK,eAAeF,GAAC,GAAE,KAAK,2BAA2BA,GAAC,CAAC,GAAE,KAAK,iBAAiBA,IAAE,GAAG,EAAE,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,eAAeA,KAAE;AAAC,UAAK,EAAC,SAAQC,GAAC,IAAE,MAAKC,KAAE,mBAAiB,KAAK,cAAc,MAAKC,KAAEH,IAAE,SAAO,GAAEI,KAAEP,IAAEQ,KAAEF,KAAE,KAAG,CAACD,KAAEN,KAAEO,KAAEL,IAAEC,MAAEM,KAAE,IAAGC,KAAE,IAAGC,KAAE,CAAC,CAAC,EAAC,OAAM,EAAC,MAAK,QAAO,MAAK,MAAMH,KAAE,CAAC,KAAKE,EAAC,OAAOA,EAAC,IAAIF,EAAC,KAAI,GAAE,MAAKJ,IAAE,CAAC,EAAE,OAAM,QAAO,EAAC,OAAM,EAAC,EAAC,GAAE,EAAC,OAAM,EAAC,MAAK,QAAO,GAAEM,IAAE,GAAE,GAAE,OAAMD,IAAE,QAAOD,GAAC,GAAE,MAAK,EAAC,MAAK,UAAS,IAAGE,IAAE,IAAG,GAAE,IAAGD,KAAEC,IAAE,IAAG,GAAE,QAAON,IAAE,IAAK,CAACA,KAAEC,QAAK,EAAC,OAAMD,IAAE,OAAM,QAAOE,MAAG,WAAUF,MAAEA,IAAE,QAAMC,KAAEE,GAAC,EAAG,EAAC,GAAE,QAAO,EAAC,OAAM,EAAC,EAAC,GAAE,EAAC,OAAM,EAAC,MAAK,QAAO,MAAK,IAAIE,KAAEC,EAAC,OAAOP,GAAC,IAAIK,KAAE,CAAC,KAAKC,KAAEC,EAAC,IAAIF,EAAC,KAAI,GAAE,MAAKJ,IAAEA,IAAE,SAAO,CAAC,EAAE,OAAM,QAAO,EAAC,OAAM,EAAC,EAAC,CAAC,CAAC,GAAEQ,KAAEC,GAAEF,IAAER,KAAEK,EAAC,GAAEM,MAAE,EAAC,QAAO,EAAE,KAAK,UAAU,KAAG,QAAO,SAAQ,QAAMT,KAAE,SAAO,GAAGA,EAAC,GAAE;AAAE,WAAO,EAAE,OAAM,EAAC,QAAOS,IAAC,GAAEF,EAAC;AAAA,EAAC;AAAA,EAAC,2BAA2BR,KAAE;AAAC,UAAMC,KAAED,IAAE,SAAO,KAAG,IAAEA,IAAEA,IAAE,SAAO,IAAE,CAAC,IAAE;AAAK,WAAOC,KAAE,EAAE,OAAM,EAAC,OAAMC,GAAE,4BAA2B,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,kBAAiB,GAAE,GAAG,GAAE,KAAK,iBAAiBD,EAAC,CAAC,IAAE;AAAA,EAAI;AAAA,EAAC,iBAAiBD,KAAE;AAAC,WAAO,EAAE,OAAM,EAAC,OAAME,GAAE,UAAS,GAAEE,GAAEJ,KAAE,KAAK,cAAc,MAAK,KAAK,QAAQ,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,2CAA2C,CAAC,GAAEA,EAAC;;;ACAt8D,IAAMY,KAAE;AAAR,IAAeC,KAAE,OAAO;AAAxB,IAAyCC,KAAE;AAA3C,IAA6DC,KAAE,EAAC,oBAAmB,GAAGD,EAAC,eAAc,2BAA0B,GAAGA,EAAC,uBAAsB,kBAAiB,GAAGA,EAAC,aAAY,wBAAuB,GAAGA,EAAC,oBAAmB,gBAAe,GAAGA,EAAC,WAAU,0BAAyB,GAAGA,EAAC,sBAAqB,gBAAe,GAAGA,EAAC,UAAS;AAAE,SAASE,GAAEC,KAAE;AAAC,SAAO,MAAIA,IAAE,MAAM,SAAO,OAAK,EAAE,OAAM,EAAC,OAAMF,GAAE,mBAAkB,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,0BAAyB,GAAEG,GAAED,GAAC,GAAEE,GAAEF,GAAC,CAAC,GAAEG,GAAEH,GAAC,CAAC;AAAC;AAAC,SAASC,GAAED,KAAE;AAAC,QAAK,CAACI,IAAET,IAAEC,EAAC,IAAES,GAAEL,GAAC,EAAE,IAAK,CAAC,EAAC,SAAQA,IAAC,MAAI;AAAC,QAAG,CAACA,IAAE,QAAO;AAAK,UAAMI,KAAEJ,IAAE,UAAU,IAAE;AAAE,WAAOI,GAAE,UAAU,IAAIN,GAAE,sBAAsB,GAAEM;AAAA,EAAC,CAAE;AAAE,SAAOA,MAAGT,MAAGC,KAAE,EAAE,OAAM,EAAC,OAAME,GAAE,iBAAgB,GAAE,EAAE,OAAM,EAAC,aAAYM,IAAE,MAAKR,GAAC,CAAC,GAAE,EAAE,OAAM,EAAC,aAAYQ,IAAE,MAAKT,GAAC,CAAC,GAAE,EAAE,OAAM,EAAC,aAAYS,IAAE,MAAKA,GAAC,CAAC,CAAC,IAAE;AAAI;AAAC,SAASF,GAAEL,KAAE;AAAC,QAAK,CAAC,EAAC,OAAME,IAAE,QAAOE,GAAC,GAAE,EAAC,OAAMC,GAAC,GAAE,EAAC,OAAMC,KAAE,QAAOG,GAAC,CAAC,IAAED,GAAER,GAAC,EAAE,IAAK,CAAC,EAAC,MAAKU,GAAC,MAAIZ,GAAEY,EAAC,IAAE,EAAC,OAAM,EAAEA,GAAE,KAAK,GAAE,QAAO,EAAEA,GAAE,MAAM,EAAC,IAAE,EAAC,OAAM,GAAE,QAAO,EAAC,CAAE,GAAEC,KAAE,IAAGC,KAAE,GAAEC,MAAEX,KAAEG,KAAEC,MAAE,IAAEK,IAAEG,KAAEV,IAAEW,KAAE,SAAS,cAAc,QAAQ;AAAE,EAAAA,GAAE,SAAOF,MAAEF,MAAGZ,IAAEgB,GAAE,SAAOD,KAAEf,IAAEgB,GAAE,MAAM,QAAMA,GAAE,QAAMhB,KAAE,MAAKgB,GAAE,MAAM,SAAOA,GAAE,SAAOhB,KAAE;AAAK,QAAMiB,KAAED,GAAE,WAAW,IAAI;AAAE,EAAAC,GAAE,UAAU;AAAE,QAAM,IAAEH,OAAGX,KAAE,IAAES,KAAGM,KAAE,GAAEC,KAAEL,MAAED,IAAEO,KAAE;AAAE,EAAAH,GAAE,OAAO,IAAEjB,IAAEkB,KAAElB,EAAC,GAAEiB,GAAE,OAAOE,KAAEnB,IAAEoB,KAAEpB,EAAC;AAAE,QAAMqB,MAAGP,MAAED,MAAG,GAAES,MAAGjB,KAAEK,MAAG,GAAEa,KAAET,MAAED,IAAE,KAAGR,KAAEK,MAAG;AAAE,EAAAO,GAAE,OAAOI,KAAErB,IAAEsB,KAAEtB,EAAC,GAAEiB,GAAE,OAAOM,KAAEvB,IAAE,IAAEA,EAAC;AAAE,QAAM,IAAEO,MAAE,GAAEiB,KAAET,KAAEL,IAAEe,KAAEX,MAAED,IAAEa,KAAEX,KAAEL;AAAE,SAAOO,GAAE,OAAO,IAAEjB,IAAEwB,KAAExB,EAAC,GAAEiB,GAAE,OAAOQ,KAAEzB,IAAE0B,KAAE1B,EAAC,GAAEiB,GAAE,cAAYlB,IAAEkB,GAAE,YAAU,MAAGjB,IAAEiB,GAAE,OAAO,GAAE,EAAE,OAAM,EAAC,aAAYT,IAAE,MAAKQ,IAAE,OAAMd,GAAE,eAAc,CAAC;AAAC;AAAC,SAASK,GAAEI,IAAE;AAAC,QAAK,CAAC,EAAC,OAAMZ,IAAE,QAAOC,GAAC,GAAE,EAAC,OAAMC,IAAC,GAAE,EAAC,OAAME,IAAE,QAAOE,GAAC,CAAC,IAAEI,GAAEE,EAAC,EAAE,IAAK,CAAC,EAAC,OAAMA,IAAE,MAAKgB,GAAC,OAAK,EAAC,OAAMhB,IAAE,QAAOZ,GAAE4B,EAAC,IAAE,EAAEA,GAAE,MAAM,IAAE,EAAC,EAAG,GAAErB,KAAEN,KAAEK,IAAEE,MAAE,EAAC,UAAS,YAAW,KAAI,IAAG,GAAEG,KAAE,EAAC,UAAS,YAAW,KAAIJ,KAAE,IAAE,KAAI,GAAEM,KAAE,EAAC,UAAS,YAAW,KAAI,GAAGN,EAAC,KAAI;AAAE,SAAO,EAAE,OAAM,EAAC,OAAMJ,GAAE,yBAAwB,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,gBAAe,QAAOK,IAAC,GAAER,EAAC,GAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,gBAAe,QAAOQ,GAAC,GAAET,GAAC,GAAE,EAAE,OAAM,EAAC,OAAMC,GAAE,gBAAe,QAAOU,GAAC,GAAET,EAAC,CAAC;AAAC;AAAC,SAASM,GAAEL,KAAE;AAAC,SAAOA,IAAE,MAAM,OAAQ,CAACA,KAAEI,OAAIA,KAAE,KAAG,CAAE;AAAC;;;ACA7/C,IAAMoB,KAAE;AAAR,IAAeC,KAAE,OAAO;AAAiB,SAASC,GAAEC,KAAE;AAAC,MAAG,CAACA,IAAE;AAAO,MAAGA,IAAE,KAAK,SAAS,IAAI,GAAE;AAAC,QAAG,CAACA,IAAE,cAAc,OAAO;AAAO,UAAMC,KAAED,IAAE,aAAa,GAAG,EAAE,GAAEE,KAAED,GAAE,UAAU;AAAU,WAAM,aAAWC,MAAG,YAAUA,MAAG,WAASA,MAAG,aAAWA,MAAG,WAASA,MAAG,cAAYA;AAAA,EAAC;AAAC,QAAMD,KAAED,IAAE;AAAM,SAAM,aAAWC,MAAG,cAAYA,MAAG,YAAUA;AAAC;AAAC,SAASE,GAAEH,KAAE;AAAC,MAAGA,KAAE;AAAC,QAAGA,IAAE,KAAK,SAAS,IAAI,GAAE;AAAC,UAAG,CAACA,IAAE,cAAc,OAAO;AAAO,YAAMC,KAAED,IAAE,aAAa,GAAG,EAAE,GAAEE,KAAED,IAAG,UAAU;AAAU,aAAM,eAAaC,MAAG,WAASA,MAAG,kBAAgBA;AAAA,IAAC;AAAC,WAAM,eAAaF,IAAE;AAAA,EAAK;AAAC;AAAC,IAAII,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYJ,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,gBAAc,OAAG,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,QAAG,YAAU,KAAK,cAAc,MAAM,QAAO,EAAE,OAAM,EAAC,QAAO,EAAC,SAAQ,QAAO,MAAK,KAAI,gBAAe,SAAQ,EAAC,GAAEI,GAAE,KAAK,aAAa,CAAC;AAAE,UAAK,EAAC,eAAcL,KAAE,eAAcC,IAAE,SAAQC,GAAC,IAAE,MAAKI,KAAEN,IAAE,OAAMK,KAAEC,GAAE,GAAG,CAAC,GAAET,KAAES,GAAE,GAAG,EAAE;AAAE,QAAG,CAACD,MAAG,CAACR,GAAE,QAAO;AAAK,UAAK,EAAC,OAAMC,IAAE,GAAGC,IAAC,IAAEM,IAAE,EAAC,OAAMF,IAAE,GAAGC,GAAC,IAAEP;AAAE,QAAIU,MAAER,IAAE,SAAQS,KAAEJ,GAAE;AAAQ,UAAMK,KAAE,EAAC,kBAAiBR,KAAE,WAAS,cAAa;AAAE,QAAG,CAACM,OAAG,CAACC,GAAE,QAAO;AAAK,IAAAD,MAAEA,IAAE,UAAU,IAAE,GAAEA,IAAE,MAAM,UAAQ,QAAOC,KAAEA,GAAE,UAAU,IAAE,GAAEA,GAAE,MAAM,UAAQ;AAAO,UAAME,KAAE,EAAC,SAAQ,GAAGR,MAAG,EAAE,GAAE;AAAE,WAAO,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQG,GAAE,UAAS,EAAC,CAACA,GAAE,WAAW,GAAEJ,GAAC,CAAC,EAAC,GAAE,EAAE,OAAM,EAAC,OAAMI,GAAE,UAAS,GAAEJ,KAAEH,KAAEK,EAAC,GAAE,EAAE,OAAM,EAAC,OAAME,GAAE,mBAAkB,QAAOI,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYH,IAAE,MAAKC,KAAE,OAAMF,GAAE,iBAAgB,QAAOK,GAAC,CAAC,GAAE,KAAK,qBAAqBV,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYM,IAAE,MAAKE,IAAE,OAAMH,GAAE,iBAAgB,QAAOK,GAAC,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAML,GAAE,UAAS,GAAEJ,KAAEE,KAAEL,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBE,KAAE;AAAC,UAAME,KAAEF,IAAE,OAAMM,KAAEJ,GAAE,GAAG,CAAC,GAAEG,KAAEH,GAAE,GAAG,EAAE;AAAE,QAAG,CAACI,MAAG,CAACD,GAAE,QAAO;AAAK,UAAMM,KAAEL,GAAE,QAAOM,KAAE,KAAK,eAAcR,KAAEE,GAAE,QAAM,YAAU,OAAOA,GAAE,OAAKA,GAAE,OAAK,GAAEC,MAAEF,GAAE,QAAM,YAAU,OAAOA,GAAE,OAAKA,GAAE,OAAK,GAAEG,KAAEF,GAAE,eAAa,GAAEG,KAAEJ,GAAE,eAAa,GAAEK,KAAE,EAAEN,KAAEI,EAAC,IAAEV,IAAEe,KAAE,EAAEN,MAAEE,EAAC,IAAEX,IAAEgB,KAAEF,KAAEF,KAAEA,KAAE,KAAGZ,IAAEiB,KAAEH,KAAEF,KAAE,IAAE,KAAGZ,KAAEY,IAAEM,KAAEb,GAAEQ,EAAC,GAAEM,KAAElB,GAAEY,EAAC,GAAEO,KAAE,SAAS,cAAc,QAAQ;AAAE,IAAAA,GAAE,QAAMJ,IAAEI,GAAE,SAAOH,IAAEG,GAAE,MAAM,QAAMA,GAAE,QAAMpB,KAAE,MAAKoB,GAAE,MAAM,SAAOA,GAAE,SAAOpB,KAAE;AAAK,UAAM,IAAEoB,GAAE,WAAW,IAAI;AAAE,QAAGN,IAAE;AAAC,QAAE,UAAU;AAAE,YAAMZ,MAAE,GAAEC,KAAE,GAAEC,KAAEY,KAAE,IAAED,KAAE,GAAEP,KAAES;AAAE,QAAE,OAAOf,KAAEC,EAAC,GAAE,EAAE,OAAOC,IAAEI,EAAC;AAAE,YAAMD,KAAES,IAAEH,KAAE,GAAEC,MAAEE,KAAE,IAAED,KAAE,GAAEM,KAAEJ;AAAE,QAAE,OAAOV,IAAEM,EAAC,GAAE,EAAE,OAAOC,KAAEO,EAAC;AAAA,IAAC,OAAK;AAAC,QAAE,UAAU;AAAE,YAAMnB,MAAE,GAAEC,KAAEc,KAAE,IAAEF,KAAE,GAAEX,KAAEY,IAAER,KAAE;AAAE,QAAE,OAAON,KAAEC,EAAC,GAAE,EAAE,OAAOC,IAAEI,EAAC;AAAE,YAAMD,KAAE,GAAEM,KAAEI,KAAE,IAAEF,KAAE,GAAED,MAAEE,IAAEK,KAAEJ;AAAE,QAAE,OAAOV,IAAEM,EAAC,GAAE,EAAE,OAAOC,KAAEO,EAAC;AAAA,IAAC;AAAC,WAAO,EAAE,cAAYtB,IAAE,EAAE,OAAO,GAAE,EAAE,OAAM,EAAC,aAAYS,IAAE,MAAKY,IAAE,QAAON,KAAE,EAAC,SAAQ,QAAO,WAAU,IAAII,KAAE,IAAEC,KAAEP,KAAE,IAAE,CAAC,MAAK,cAAa,IAAIM,KAAEH,KAAEI,KAAEJ,KAAE,IAAE,CAAC,KAAI,IAAE,EAAC,SAAQ,QAAO,aAAY,IAAIG,KAAE,IAAEC,KAAEP,KAAE,IAAE,CAAC,MAAK,YAAW,IAAIM,KAAE,IAAEC,KAAEJ,KAAE,IAAE,CAAC,KAAI,EAAC,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAET,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,0CAA0C,CAAC,GAAEA,EAAC;;;ACAp2F,IAAMgB,KAAEC,GAAE;AAAV,IAAYC,KAAE;AAAd,IAAiBC,KAAE;AAAnB,IAAsBC,KAAE;AAAxB,IAA2BC,KAAE;AAA7B,IAAgCC,KAAE,EAAC,+BAA8B,gDAA+C,WAAU,0BAAyB;AAAE,SAASC,GAAEC,MAAE,YAAW;AAAC,QAAMC,KAAE;AAA2C,SAAM,eAAaD,MAAE,EAAE,OAAM,EAAC,QAAO,KAAI,OAAM,KAAI,GAAE,EAAE,QAAO,EAAC,OAAMC,IAAE,IAAG,KAAI,IAAG,MAAK,IAAG,KAAI,IAAG,IAAG,CAAC,CAAC,IAAE,EAAE,OAAM,EAAC,QAAO,MAAK,OAAM,KAAI,GAAE,EAAE,QAAO,EAAC,OAAMA,IAAE,IAAG,KAAI,IAAG,KAAI,IAAG,KAAI,IAAG,KAAI,CAAC,CAAC;AAAC;AAAC,SAASC,GAAEF,KAAEC,KAAE,YAAW;AAAC,QAAMR,KAAE,SAAS,cAAc,KAAK;AAAE,SAAOA,GAAE,MAAM,SAAO,GAAGE,EAAC,MAAKF,GAAE,YAAUK,GAAE,+BAA8B,QAAME,QAAIP,GAAE,MAAM,UAAQO,IAAE,SAAS,IAAGR,GAAE,OAAOC,IAAEM,GAAE,KAAK,MAAKE,EAAC,CAAC,GAAER;AAAC;AAAC,SAASU,IAAEF,IAAEG,IAAEC,KAAE,YAAWb,IAAE;AAAC,EAAAS,GAAE,MAAM,QAAS,CAACA,IAAEP,OAAI;AAAC,QAAGF,MAAG,MAAIE,GAAE,CAAAO,GAAE,UAAQC,GAAEE,IAAEC,EAAC;AAAA,SAAM;AAAC,YAAMD,MAAGZ,GAAES,GAAE,IAAI,IAAE,EAAEA,GAAE,IAAI,IAAE,MAAI,iBAAeI,KAAER,KAAED,KAAGJ,MAAES,GAAE,SAAQP,KAAE,UAAQF,KAAG,QAAQ,YAAY,GAAEG,KAAED,KAAEF,MAAE,SAAS,cAAc,KAAK;AAAE,MAAAG,GAAE,YAAUG,GAAE,+BAA8B,iBAAeO,KAAEV,GAAE,MAAM,QAAM,GAAGS,EAAC,OAAKT,GAAE,MAAM,SAAO,GAAGS,EAAC,MAAK,CAACV,MAAGF,OAAGG,GAAE,YAAYH,GAAC,GAAES,GAAE,UAAQN;AAAA,IAAC;AAAA,EAAC,CAAE;AAAC;AAAC,SAASW,GAAEL,IAAEG,KAAE,WAAU;AAAC,QAAMC,KAAEJ,GAAE,OAAMT,KAAEa,GAAE,GAAG,CAAC,GAAEX,KAAEW,GAAE,GAAG,EAAE,GAAEV,KAAEH,GAAEA,GAAE,IAAI,IAAE,EAAEA,GAAE,IAAI,IAAE,GAAEK,KAAEL,GAAEE,GAAE,IAAI,IAAE,EAAEA,GAAE,IAAI,IAAE;AAAE,SAAM,cAAYU,MAAGT,KAAEC,MAAG,KAAGD,KAAEE,MAAG;AAAC;AAAC,SAASU,GAAEP,KAAEC,IAAE;AAAC,MAAG,CAACD,IAAE,QAAO;AAAK,QAAMP,KAAEO,IAAE,MAAM,IAAK,CAAAA,QAAGA,IAAE,KAAM,GAAEK,KAAEC,GAAE,WAASL,GAAE,OAAKR,KAAE,YAAUQ,GAAE,OAAKR,GAAE,MAAM,GAAE,CAAC,IAAEA,GAAE,MAAM,GAAE,CAAC,GAAE,EAAC,OAAMQ,GAAE,OAAM,QAAOA,GAAE,QAAO,OAAMA,GAAE,eAAc,YAAWA,GAAE,YAAW,WAAUA,GAAE,UAAS,CAAC;AAAE,SAAOI,GAAE,YAAUP,GAAE,WAAU,QAAMG,GAAE,YAAUI,GAAE,MAAM,UAAQJ,GAAE,QAAQ,SAAS,IAAGI;AAAC;AAAC,SAASG,GAAEP,IAAEG,IAAEC,IAAEb,KAAE,YAAW;AAAC,MAAIM,KAAE;AAAE,QAAMC,KAAEE,GAAE,OAAMC,KAAE,KAAK,MAAMH,GAAE,SAAO,CAAC,GAAEI,MAAE,WAASC,MAAG,YAAUA,KAAE,IAAEF,IAAEI,KAAE,WAASF,MAAG,YAAUA,KAAEL,GAAE,SAAO,IAAEG;AAAE,WAAQK,KAAEJ,KAAEI,MAAGD,IAAEC,KAAI,KAAGF,MAAGE,OAAIL,GAAE,CAAAJ,MAAG,iBAAeN,KAAEE,KAAEC;AAAA,OAAM;AAAC,UAAMM,KAAEF,GAAEQ,EAAC,EAAE;AAAK,IAAAT,OAAIN,GAAES,EAAC,IAAE,EAAEA,EAAC,IAAE,MAAI,iBAAeT,KAAEK,KAAED;AAAA,EAAE;AAAC,SAAO,KAAK,MAAME,EAAC;AAAC;AAAC,SAASW,GAAER,IAAEG,IAAEC,IAAEb,KAAE,YAAW;AAAC,QAAMM,KAAEU,GAAEP,IAAEG,IAAEC,IAAEb,EAAC,GAAEO,KAAEE,GAAE,OAAMC,KAAE,KAAK,MAAMH,GAAE,SAAO,CAAC,GAAEI,MAAE,WAASC,MAAG,YAAUA,KAAE,IAAEF,IAAEI,KAAE,WAASF,MAAG,YAAUA,KAAEL,GAAE,SAAO,IAAEG,IAAEK,KAAEf,GAAEO,GAAEI,GAAC,EAAE,IAAI,IAAEJ,GAAEI,GAAC,EAAE,OAAK,GAAEM,KAAEjB,GAAEO,GAAEO,EAAC,EAAE,IAAI,IAAEP,GAAEO,EAAC,EAAE,OAAK,GAAEI,KAAE,WAASN,KAAEG,KAAEE,KAAE,YAAUL,KAAEG,KAAEE,IAAEE,KAAEN,KAAE,eAAab,KAAEG,KAAED,KAAE,GAAEkB,KAAE,eAAapB,KAAEI,MAAG,WAASQ,KAAE,IAAE,KAAGP,MAAG,WAASO,KAAE,IAAE;AAAG,SAAO,KAAK,MAAMN,MAAG,EAAEY,EAAC,IAAE,IAAEC,KAAE,IAAEC,KAAE,EAAE;AAAC;AAAC,SAASF,GAAEV,KAAEC,IAAER,KAAE,YAAW;AAAC,QAAMW,KAAEJ,IAAE;AAAM,MAAIK,KAAED,GAAE,KAAM,CAAC,EAAC,MAAKJ,IAAC,MAAI,gBAAcA,GAAE,GAAER,KAAEY,GAAE,KAAM,CAAC,EAAC,MAAKJ,IAAC,MAAI,iBAAeA,GAAE;AAAE,SAAOK,OAAIA,KAAE,EAAC,GAAGA,GAAC,GAAEA,GAAE,QAAM,CAAC,GAAGA,GAAE,KAAK,GAAEF,IAAEE,IAAEJ,IAAER,IAAE,IAAE,IAAGD,OAAIA,KAAE,EAAC,GAAGA,GAAC,GAAEA,GAAE,QAAM,CAAC,GAAGA,GAAE,KAAK,IAAG,iBAAeC,OAAIY,IAAG,MAAM,QAAQ,GAAEb,IAAG,MAAM,QAAQ,IAAG,EAAC,iBAAgBa,IAAE,kBAAiBb,GAAC;AAAC;AAAC,SAASmB,GAAEX,KAAEC,KAAE,YAAW;AAAC,QAAMR,KAAEO,IAAE;AAAM,MAAII,KAAEX,GAAE,KAAM,CAAC,EAAC,MAAKO,IAAC,MAAI,gBAAcA,GAAE,GAAEK,KAAEZ,GAAE,KAAM,CAAC,EAAC,MAAKO,IAAC,MAAI,iBAAeA,GAAE;AAAE,SAAOI,OAAIA,KAAE,EAAC,GAAGA,GAAC,GAAEA,GAAE,QAAM,CAAC,GAAGA,GAAE,KAAK,GAAED,IAAEC,IAAE,MAAKH,IAAE,KAAE,IAAGI,OAAIA,KAAE,EAAC,GAAGA,GAAC,GAAEA,GAAE,QAAM,CAAC,GAAGA,GAAE,KAAK,IAAG,iBAAeJ,OAAIG,IAAG,MAAM,QAAQ,GAAEC,IAAG,MAAM,QAAQ,IAAG,EAAC,iBAAgBD,IAAE,kBAAiBC,GAAC;AAAC;AAAC,IAAM,IAAE,EAAC,YAAW,MAAK;AAAzB,IAA2BQ,KAAE,EAAC,SAAQ,cAAa,eAAc,SAAQ;AAAzE,IAA2E,IAAE,EAAC,SAAQ,QAAO,YAAW,aAAY;;;ACAx8E,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAK,EAAC,eAAcD,KAAE,SAAQC,IAAE,YAAWC,IAAE,KAAIC,GAAC,IAAE,MAAK,EAAC,iBAAgBJ,IAAE,kBAAiBK,GAAC,IAAEC,GAAEL,KAAEC,IAAE,YAAY;AAAE,QAAG,CAACF,GAAE,QAAO;AAAK,UAAMO,KAAEC,GAAER,IAAE,QAAO,MAAG,YAAY,GAAES,MAAEJ,GAAEL,IAAE,SAAQ,MAAG,YAAY,GAAEU,KAAEL,GAAEL,IAAE,SAAQ,MAAG,YAAY,GAAEW,KAAE,IAAGL,KAAE,KAAK,UAAU,2BAA0BM,KAAEL,GAAEF,IAAE,EAAC,OAAMI,KAAE,QAAOE,IAAE,eAAc,cAAa,SAAQT,IAAE,MAAK,SAAQ,YAAWC,IAAE,WAAUG,GAAC,CAAC,GAAEO,KAAEN,GAAEF,IAAE,EAAC,OAAMK,IAAE,QAAOC,IAAE,eAAc,cAAa,SAAQT,IAAE,MAAK,SAAQ,YAAWC,IAAE,WAAUG,GAAC,CAAC,GAAEQ,KAAEJ,GAAEV,IAAE,MAAM,GAAEe,KAAEf,GAAE,MAAM,IAAK,CAAAC,QAAGA,IAAE,KAAM,GAAEe,KAAED,GAAE,SAAO,GAAEE,KAAEF,GAAE,IAAK,CAACd,KAAEC,OAAI,MAAIA,MAAGA,OAAIc,KAAE,EAAE,OAAM,EAAC,KAAId,GAAC,GAAED,GAAC,IAAE,IAAK,GAAE,IAAE,EAAC,SAAQ,QAAO,eAAc,SAAQ,GAAE,IAAE,EAAC,SAAQ,QAAO,eAAc,MAAK,GAAEiB,KAAE,EAAC,WAAU,OAAM,SAAQ,OAAM;AAAE,IAAAH,GAAE,KAAK,SAAS,IAAEG,GAAE,cAAY,GAAGJ,EAAC,OAAKI,GAAE,aAAW,GAAGJ,EAAC;AAAK,UAAMK,KAAE,EAAC,OAAM,GAAGZ,EAAC,MAAK,SAAQ,QAAO,eAAc,OAAM,gBAAe,gBAAe;AAAE,WAAO,EAAE,OAAM,EAAC,OAAMa,GAAE,UAAS,KAAI,GAAGhB,EAAC,cAAa,QAAO,EAAC,GAAE,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQgB,GAAE,iBAAgBA,GAAE,kBAAkB,GAAE,QAAO,EAAC,GAAEpB,GAAE,MAAM,IAAK,CAACC,KAAEC,OAAI,EAAE,OAAM,EAAC,aAAYmB,IAAE,MAAKpB,IAAE,SAAQ,OAAMmB,GAAE,QAAO,KAAIlB,GAAC,CAAC,CAAE,CAAC,GAAEU,KAAE,EAAE,OAAM,EAAC,OAAMQ,GAAE,kCAAiC,KAAI,sBAAqB,QAAOF,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYG,IAAE,MAAKT,GAAC,CAAC,GAAE,EAAE,OAAM,EAAC,aAAYS,IAAE,MAAKR,GAAC,CAAC,CAAC,IAAE,MAAK,EAAE,OAAM,EAAC,OAAMO,GAAE,UAAS,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,qBAAoB,QAAOD,GAAC,GAAEF,EAAC,CAAC,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEjB,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,6DAA6D,CAAC,GAAEA,EAAC;;;ACAppD,IAAIsB,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAK,EAAC,eAAcD,KAAE,SAAQC,IAAE,YAAWC,IAAE,KAAIC,GAAC,IAAE,MAAK,EAAC,iBAAgBJ,KAAE,kBAAiBK,GAAC,IAAEC,GAAEL,KAAE,YAAY;AAAE,QAAG,CAACD,IAAE,QAAO;AAAK,UAAMO,MAAEP,GAAEA,KAAE,QAAO,OAAG,YAAY,GAAEQ,KAAEH,GAAEL,KAAE,QAAO,OAAG,YAAY,GAAES,KAAED,GAAEH,IAAE,EAAC,OAAMG,IAAE,QAAO,IAAG,eAAc,cAAa,SAAQN,IAAE,MAAK,QAAO,YAAWC,IAAE,WAAU,KAAK,UAAU,0BAAyB,CAAC,GAAEG,KAAEG,GAAET,KAAE,MAAM,GAAEU,KAAEV,IAAE,MAAM,SAAO,GAAEW,KAAEX,IAAE,MAAM,IAAK,CAACC,KAAEC,OAAI,MAAIA,MAAGA,OAAIQ,KAAE,EAAE,OAAM,EAAC,KAAIR,GAAC,GAAED,IAAE,KAAK,IAAE,IAAK,GAAEW,KAAE,EAAC,SAAQ,QAAO,eAAc,SAAQ,GAAEC,KAAE,EAAC,SAAQ,QAAO,eAAc,MAAK,GAAEC,KAAE,EAAC,WAAU,OAAM,SAAQ,OAAM;AAAE,IAAAA,GAAE,KAAK,SAAS,IAAEA,GAAE,cAAY,GAAGR,EAAC,OAAKQ,GAAE,aAAW,GAAGR,EAAC;AAAK,UAAMS,KAAE,EAAC,OAAM,GAAGR,GAAC,MAAK,SAAQ,QAAO,eAAc,OAAM,gBAAe,gBAAe;AAAE,WAAO,EAAE,OAAM,EAAC,OAAMS,GAAE,UAAS,KAAI,GAAGZ,EAAC,cAAa,QAAOQ,GAAC,GAAE,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQI,GAAE,iBAAgBA,GAAE,kBAAkB,GAAE,QAAOH,GAAC,GAAEb,IAAE,MAAM,IAAK,CAACC,KAAEC,OAAI,EAAE,OAAM,EAAC,aAAYe,IAAE,MAAKhB,IAAE,SAAQ,OAAMe,GAAE,QAAO,KAAId,GAAC,CAAC,CAAE,CAAC,GAAE,EAAE,OAAM,EAAC,OAAMc,GAAE,kCAAiC,KAAI,sBAAqB,QAAOF,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYG,IAAE,MAAKR,GAAC,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAMO,GAAE,UAAS,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,qBAAoB,QAAOD,GAAC,GAAEJ,EAAC,CAAC,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEX,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,yDAAyD,CAAC,GAAEA,EAAC;;;ACAnqC,IAAIkB;AAAE,IAAIC,KAAED,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYE,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,gBAAc,OAAG,KAAK,eAAa,GAAE,KAAK,UAAQ,OAAG,KAAK,gBAAc;AAAA,EAAI;AAAA,EAAC,SAAQ;AAAC,UAAMD,MAAE,KAAK,qBAAqB,GAAEC,KAAEC,GAAE,KAAK,eAAc,KAAK,QAAQ,GAAEC,KAAE,KAAK,iBAAe,CAAC,KAAK,UAAQ,EAAE,OAAM,MAAK,EAAEH,IAAE,EAAC,OAAMI,GAAE,eAAc,OAAM,KAAK,aAAY,GAAE,KAAK,gBAAgB,KAAK,GAAE,EAAEJ,IAAE,EAAC,OAAMI,GAAE,cAAa,OAAMC,GAAE,KAAK,YAAY,EAAC,GAAEJ,EAAC,CAAC,IAAEA,KAAE,EAAED,IAAE,EAAC,OAAMI,GAAE,cAAa,OAAM,KAAK,aAAY,GAAEH,EAAC,IAAE;AAAK,WAAO,EAAE,WAAU,EAAC,mBAAkB,KAAK,KAAI,OAAMG,GAAE,SAAQ,IAAG,GAAG,KAAK,GAAG,UAAS,KAAI,KAAK,KAAI,MAAK,YAAW,UAAS,EAAC,GAAED,IAAEH,GAAC;AAAA,EAAC;AAAA,EAAC,uBAAsB;AAAC,YAAO,KAAK,cAAc,MAAK;AAAA,MAAC,KAAI;AAAe,eAAO,KAAK,mBAAmB,KAAK,aAAa;AAAA,MAAE,KAAI;AAAY,eAAO,EAAEM,IAAE,EAAC,eAAc,KAAK,eAAc,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE,KAAI;AAAA,MAAa,KAAI;AAAA,MAAe,KAAI;AAAA,MAAe,KAAI;AAAe,eAAO,EAAEC,IAAE,EAAC,YAAW,KAAK,YAAW,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE,KAAI;AAAoB,eAAOC,GAAE,KAAK,eAAc,KAAK,IAAG,EAAC,SAAQ,KAAK,MAAM,SAAQ,YAAW,KAAK,YAAW,WAAU,KAAK,SAAS,kCAAiC,KAAI,KAAK,IAAG,CAAC;AAAA,MAAE,KAAI;AAAiB,eAAO,EAAE,OAAM,EAAC,aAAYN,IAAE,MAAK,KAAK,cAAc,SAAQ,OAAME,GAAE,qBAAoB,KAAI,GAAG,KAAK,GAAG,WAAU,CAAC;AAAA,MAAE,KAAI;AAAkC,eAAO,EAAEK,IAAE,EAAC,YAAW,KAAK,YAAW,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE,KAAI;AAA6B,eAAO,EAAEF,IAAE,EAAC,YAAW,KAAK,YAAW,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE;AAAQ,eAAO;AAAA,IAAI;AAAA,EAAC;AAAA,EAAC,mBAAmBP,KAAE;AAAC,UAAMC,KAAED,IAAE,MAAM,IAAK,CAAAC,OAAG,KAAK,mBAAmBA,IAAED,IAAE,UAAU,CAAE,EAAE,OAAO,OAAO;AAAE,QAAG,CAACC,GAAE,OAAO,QAAO;AAAK,UAAME,KAAE,KAAK,gBAAgB,eAAe,KAAM,CAAC,EAAC,MAAKH,IAAC,MAAI,wBAAsBA,GAAE,GAAEE,KAAED,GAAE,CAAC,GAAG,YAAY,UAAUG,GAAE,SAAS,GAAEA,KAAE,EAAC,CAACA,GAAE,cAAc,GAAE,CAACF,MAAG,CAACC,IAAE,CAACC,GAAE,0BAA0B,GAAED,GAAC;AAAE,WAAO,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQC,EAAC,EAAC,GAAEH,EAAC;AAAA,EAAC;AAAA,EAAC,mBAAmBD,KAAEC,IAAE;AAAC,UAAK,EAAC,OAAME,GAAC,IAAE,MAAKD,KAAE,WAAUF,MAAEA,IAAE,QAAM,MAAKI,KAAE,GAAG,KAAK,GAAG,IAAIF,EAAC;AAAG,QAAG,UAASF,OAAGA,IAAE,KAAK,QAAO,EAAEF,IAAE,EAAC,iBAAgB,KAAK,iBAAgB,YAAW,KAAK,YAAW,eAAc,KAAK,eAAc,cAAa,KAAK,cAAa,SAAQ,MAAG,KAAIM,IAAE,OAAMD,IAAE,eAAcH,KAAE,UAAS,KAAK,SAAQ,CAAC;AAAE,QAAG,EAAE,aAAYA,OAAGA,IAAE,WAAS,SAAQA,OAAGA,IAAE,KAAK,QAAO;AAAK,UAAMU,MAAEC,IAAER,IAAEF,EAAC,GAAEW,KAAEC,GAAE,KAAK,UAASX,IAAE,KAAE,KAAG;AAAG,QAAG,SAAQF,OAAGA,IAAE,IAAI,QAAO,EAAE,OAAM,EAAC,OAAMI,GAAE,UAAS,KAAI,GAAGA,EAAC,OAAM,GAAE,KAAK,aAAaJ,KAAEG,IAAEO,GAAC,GAAE,EAAE,OAAM,EAAC,OAAMN,GAAE,WAAU,GAAEQ,EAAC,CAAC;AAAE,QAAG,YAAWZ,OAAGA,IAAE,SAAQ;AAAC,UAAG,CAACA,IAAE,QAAQ,KAAK,SAAS,aAAa,GAAE;AAAC,YAAG,CAACA,IAAE,MAAM,QAAO,EAAE,OAAM,EAAC,aAAYE,IAAE,MAAKF,IAAE,SAAQ,KAAI,GAAGI,EAAC,OAAM,CAAC;AAAE,cAAMH,KAAE,EAAC,CAACG,GAAE,UAAU,GAAE,KAAK,cAAa;AAAE,eAAO,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQA,GAAE,UAAS,EAAC,CAACA,GAAE,SAAS,GAAE,KAAK,cAAa,CAAC,GAAE,KAAI,GAAGA,EAAC,OAAM,GAAE,EAAE,OAAM,EAAC,aAAYF,IAAE,MAAKF,IAAE,SAAQ,OAAM,KAAK,QAAQC,EAAC,EAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQG,GAAE,YAAW,EAAC,CAACA,GAAE,SAAS,GAAE,KAAK,cAAa,CAAC,EAAC,GAAEQ,EAAC,CAAC;AAAA,MAAC;AAAC,aAAO,EAAE,OAAM,EAAC,OAAMR,GAAE,UAAS,KAAI,GAAGA,EAAC,OAAM,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,cAAa,QAAO,KAAK,qBAAqBJ,GAAC,EAAC,GAAEY,EAAC,CAAC;AAAA,IAAC;AAAC,WAAO;AAAA,EAAI;AAAA,EAAC,qBAAqBZ,KAAE;AAAC,UAAMG,KAAEH,IAAE,QAAOE,KAAEC,GAAE,OAAMO,MAAE,CAAC,CAACR,IAAG,GAAEU,KAAE,aAAYT,KAAEA,GAAE,UAAQ,MAAKU,KAAE,CAAC,CAACD,IAAG,OAAO,GAAEP,KAAE,IAAIO,GAAEF,OAAGR,KAAE,CAACA,GAAE,GAAEA,GAAE,GAAEA,GAAE,GAAEA,GAAE,IAAE,KAAK,MAAM,OAAO,IAAE,CAAC,KAAI,KAAI,KAAI,CAAC,CAAC,GAAEY,KAAED,MAAGD,GAAE,QAAM,IAAIA,GAAE,CAACA,GAAE,MAAM,GAAEA,GAAE,MAAM,GAAEA,GAAE,MAAM,GAAEA,GAAE,MAAM,IAAE,KAAK,MAAM,OAAO,CAAC,IAAE,IAAIA,GAAE,CAAC,KAAI,KAAI,KAAI,CAAC,CAAC,GAAEG,KAAEf,IAAE,OAAO,OAAO,YAAU,MAAGgB,KAAED,KAAE,UAAQ,SAAQE,KAAEF,KAAE,4BAA0B;AAAoB,WAAM,EAAC,YAAWL,MAAEL,GAAE,MAAM,IAAE,IAAE,QAAO,OAAMW,IAAE,YAAW,eAAeC,EAAC;AAAA,+BAAmCA,EAAC;AAAA,+BAAmCA,EAAC;AAAA,8BAAkCA,EAAC,IAAG,QAAOJ,KAAE,aAAaC,GAAE,MAAM,IAAE,CAAC,KAAG,QAAO,QAAO,EAAE,KAAK,UAAU,KAAG,OAAM;AAAA,EAAC;AAAA,EAAC,aAAad,KAAEC,IAAEE,IAAE;AAAC,UAAK,EAAC,OAAMD,IAAE,KAAIE,IAAE,SAAQM,IAAC,IAAEV,KAAEY,KAAE,EAAC,CAACR,GAAE,0BAA0B,GAAED,IAAE,CAACC,GAAE,MAAM,GAAE,CAACD,GAAC,GAAEE,KAAE,EAAC,SAAQ,GAAGK,OAAGT,GAAE,OAAO,GAAE,GAAEa,KAAED,GAAE,KAAK,UAASX,IAAE,KAAE;AAAE,WAAO,EAAE,OAAM,EAAC,KAAIY,IAAE,cAAaA,IAAE,QAAO,GAAE,OAAM,KAAK,QAAQF,EAAC,GAAE,QAAOZ,IAAE,QAAO,KAAII,IAAE,QAAOC,IAAE,OAAML,IAAE,MAAK,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,GAAE,WAAU,mBAAkB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAEA,KAAED,KAAE,EAAE,CAAC,EAAE,+CAA+C,CAAC,GAAEC,EAAC;;;ACA7yJ,IAAMmB,KAAE;AAAI,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,iBAAe,OAAG,KAAK,mBAAiB,MAAK,KAAK,eAAa,GAAE,KAAK,SAAO,SAAQ,KAAK,WAAS,MAAK,KAAK,iBAAe,MAAK,KAAK,OAAK,QAAO,KAAK,OAAK;AAAA,EAAI;AAAA,EAAC,mBAAkB;AAAC,WAAOC,GAAE,EAAC,UAAS,MAAI,OAAO,gCAA2D,GAAE,iBAAgB,MAAI,OAAO,qCAAgE,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,SAAK,iBAAe,WAAS,KAAK,UAAQ,KAAK,QAAM,KAAK,KAAK,UAAU,eAAaJ,MAAG,YAAU,KAAK;AAAO,UAAME,MAAE,KAAK,iBAAe,KAAK,gBAAgB,IAAE,KAAK,cAAc,GAAEC,KAAE,EAAC,CAACE,GAAE,OAAO,GAAE,KAAK,eAAc;AAAE,WAAO,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQA,GAAE,MAAKF,EAAC,EAAC,GAAED,OAAG,EAAE,OAAM,EAAC,OAAMG,GAAE,QAAO,GAAE,KAAK,SAAS,QAAQ,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAiB;AAAC,UAAMH,MAAE,CAAC,GAAEC,KAAE,KAAK;AAAiB,QAAGA,GAAE,YAAUG,MAAKH,GAAE,MAAK,gBAAgBG,IAAEJ,GAAC;AAAE,WAAOA,KAAG,SAAO,EAAE,oBAAmB,EAAC,OAAMG,GAAE,UAAS,OAAM,KAAK,SAAS,SAAQ,GAAEH,IAAE,IAAK,CAACC,IAAEG,OAAI,EAAE,yBAAwB,EAAC,OAAMD,GAAE,cAAa,KAAIC,IAAE,OAAMH,GAAE,KAAK,eAAe,WAAW,UAAS,EAAC,OAAMG,KAAE,GAAE,OAAMJ,IAAE,OAAM,CAAC,EAAC,GAAEC,EAAC,CAAE,CAAC,IAAE;AAAA,EAAI;AAAA,EAAC,gBAAe;AAAC,UAAMD,MAAE,KAAK,kBAAiBC,KAAED,KAAG,QAAQ,GAAG,IAAK,CAAAA,QAAG,KAAK,sBAAsBA,GAAC,CAAE,EAAE,OAAO,OAAO;AAAE,WAAOC,IAAG,SAAOA,KAAE;AAAA,EAAI;AAAA,EAAC,sBAAsBD,KAAE;AAAC,QAAG,CAACA,IAAE,MAAM,QAAO;AAAK,QAAGA,IAAE,SAAS,QAAO;AAAC,YAAMC,KAAED,IAAE,SAAS,QAAQ,EAAE,IAAI,KAAK,uBAAsB,IAAI;AAAE,aAAO,EAAE,WAAU,EAAC,OAAM,KAAK,QAAQG,GAAE,SAAQA,GAAE,UAAU,GAAE,KAAIH,IAAE,MAAM,IAAG,GAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,wBAAuB,GAAEH,IAAE,KAAK,GAAEC,EAAC;AAAA,IAAC;AAAC,WAAO,KAAK,8BAA8BD,GAAC;AAAA,EAAC;AAAA,EAAC,8BAA8BA,KAAE;AAAC,UAAMC,KAAED,IAAE,gBAAgB,OAAO,OAAO;AAAE,QAAG,CAACC,IAAG,OAAO,QAAO;AAAK,UAAMG,KAAEH,GAAE,IAAK,CAAAA,OAAG,EAAEI,IAAE,EAAC,iBAAgBL,KAAE,YAAWA,IAAE,YAAW,eAAc,KAAK,gBAAe,cAAa,KAAK,cAAa,SAAQ,OAAG,KAAI,GAAGA,IAAE,MAAM,GAAG,IAAIC,GAAE,IAAI,IAAG,OAAMD,IAAE,OAAM,eAAcC,IAAE,UAAS,KAAK,SAAQ,CAAC,CAAE,GAAEE,KAAE,EAAC,CAACA,GAAE,eAAe,GAAE,CAAC,CAACH,IAAE,OAAM;AAAE,WAAO,EAAE,WAAU,EAAC,OAAM,KAAK,QAAQG,GAAE,SAAQA,EAAC,GAAE,KAAIH,IAAE,MAAM,IAAG,GAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,wBAAuB,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,mBAAkB,GAAEH,IAAE,KAAK,CAAC,GAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,eAAc,GAAEC,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,gBAAgBJ,KAAEC,IAAE;AAAC,QAAG,CAACD,IAAE,MAAM;AAAO,QAAGA,IAAE,SAAS,OAAO,YAAUG,MAAKH,IAAE,SAAS,MAAK,gBAAgBG,IAAEF,EAAC;AAAE,UAAMG,KAAEJ,IAAE;AAAe,QAAGI,IAAG,OAAO,YAAUD,MAAKC,IAAE;AAAC,YAAMA,KAAE,EAAEC,IAAE,EAAC,iBAAgBL,KAAE,YAAWA,IAAE,YAAW,eAAc,KAAK,gBAAe,cAAa,KAAK,cAAa,SAAQ,OAAG,KAAI,GAAGA,IAAE,MAAM,GAAG,IAAIG,GAAE,IAAI,IAAG,OAAMH,IAAE,OAAM,eAAcG,IAAE,UAAS,KAAK,SAAQ,CAAC;AAAE,MAAAC,MAAGH,GAAE,KAAKG,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEL,GAAE,WAAU,oBAAmB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,UAAS,MAAM,GAAE,EAAE,CAAC,EAAE,GAAEC,GAAE,gCAAgC,CAAC,GAAED,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,GAAEC,GAAE,iBAAiB,CAAC,GAAED,GAAE,WAAU,kBAAiB,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,QAAO,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,QAAO,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,0CAA0C,CAAC,GAAEA,EAAC;;;ACApmH,IAAMO,KAAE;AAAR,IAAsBC,KAAE,EAAC,SAAQ,GAAGD,EAAC,aAAY,OAAM,GAAGA,EAAC,mBAAkB,OAAM,GAAGA,EAAC,WAAU,YAAW,GAAGA,EAAC,iBAAgB,iBAAgB,GAAGA,EAAC,uBAAsB,YAAW,GAAGA,EAAC,iBAAgB,oBAAmB,GAAGA,EAAC,4BAA2B,iBAAgB,GAAGA,EAAC,uBAAsB,cAAa,GAAGA,EAAC,mBAAkB,WAAU,GAAGA,EAAC,gBAAe,UAAS,GAAGA,EAAC,eAAc,WAAU,GAAGA,EAAC,gBAAe,WAAU,GAAGA,EAAC,gBAAgBA,EAAC,sBAAqB,4BAA2B,GAAGA,EAAC,oCAAmC,2BAA0B,GAAGA,EAAC,mCAAkC,2BAA0B,GAAGA,EAAC,mCAAkC,iBAAgB,GAAGA,EAAC,gBAAgBA,EAAC,yBAAwB,QAAO,GAAGA,EAAC,YAAW,eAAc,GAAGA,EAAC,WAAU,UAAS,GAAGA,EAAC,eAAc,WAAU,GAAGA,EAAC,gBAAe,aAAY,GAAGA,EAAC,kBAAiB,gBAAe,GAAGA,EAAC,qBAAoB,UAAS,GAAGA,EAAC,eAAc,eAAc,GAAGA,EAAC,qBAAoB,cAAa,GAAGA,EAAC,oBAAmB,qBAAoB,GAAGA,EAAC,iBAAgB,WAAU,GAAGA,EAAC,gBAAe,SAAQ,GAAGA,EAAC,aAAY,8BAA6B,8CAA6C;;;ACA3jB,IAAME,KAAE;AAAG,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,UAAMD,MAAE,KAAK,cAAc;AAAQ,QAAG,CAACA,IAAE,QAAO;AAAK,UAAMC,KAAE,mBAAiB,KAAK,cAAc,OAAKH,GAAE,cAAY;AAAG,WAAOE,IAAE,YAAU,GAAGF,GAAE,SAAS,IAAIG,EAAC,IAAG,QAAM,KAAK,YAAUD,IAAE,MAAM,UAAQ,KAAK,QAAQ,SAAS,IAAGA;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAK,EAAC,eAAcA,KAAE,UAASC,GAAC,IAAE;AAAK,QAAG,CAACA,GAAE,QAAO;AAAK,UAAMC,KAAE,EAAC,OAAM,GAAGJ,EAAC,KAAI,GAAEK,KAAE,EAAC,QAAOF,GAAE,MAAM,OAAM;AAAE,WAAO,EAAE,OAAM,EAAC,OAAMH,GAAE,UAAS,KAAI,GAAG,KAAK,GAAG,OAAM,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,iBAAgB,QAAOI,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYE,IAAE,MAAKH,IAAE,OAAMH,GAAE,cAAa,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,UAAS,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,qBAAoB,QAAOK,GAAC,GAAEH,IAAE,MAAM,IAAK,CAACC,IAAEC,OAAI,KAAK,iBAAiBD,IAAEC,IAAEF,IAAE,IAAI,CAAE,CAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,iBAAiBA,KAAEC,IAAEC,IAAE;AAAC,WAAO,EAAE,OAAM,EAAC,OAAMF,IAAE,QAAMF,GAAE,YAAU,QAAO,KAAI,GAAG,KAAK,GAAG,SAASE,IAAE,SAAOC,EAAC,SAAQ,GAAEI,GAAEL,KAAEE,IAAE,KAAK,QAAQ,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEH,GAAE,WAAU,YAAW,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,8CAA8C,CAAC,GAAEA,EAAC;;;ACAvjC,IAAIO,MAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,gBAAc;AAAA,EAAI;AAAA,EAAC,SAAQ;AAAC,UAAMD,MAAE,KAAK,cAAc,MAAM,IAAK,CAAAA,QAAG,KAAK,WAAWA,GAAC,CAAE,EAAE,OAAO,OAAO;AAAE,WAAOA,IAAE,SAAO,YAAU,KAAK,cAAc,QAAME,GAAE,KAAK,aAAa,IAAE,EAAE,OAAM,EAAC,OAAMH,GAAE,UAAS,GAAEC,GAAC,IAAE;AAAA,EAAI;AAAA,EAAC,WAAWA,KAAE;AAAC,WAAOA,IAAE,UAAQ,EAAE,OAAM,EAAC,OAAMD,GAAE,UAAS,KAAI,GAAG,KAAK,GAAG,IAAIC,IAAE,KAAK,OAAM,GAAE,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQD,GAAE,iBAAgBA,GAAE,QAAQ,EAAC,GAAE,EAAE,OAAM,EAAC,aAAYI,IAAE,MAAKH,IAAE,SAAQ,OAAMD,GAAE,OAAM,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAMA,GAAE,UAAS,GAAEK,GAAE,KAAK,UAASJ,IAAE,OAAM,KAAE,KAAG,EAAE,CAAC,IAAE;AAAA,EAAI;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,IAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,IAAE,WAAU,YAAW,MAAM,GAAEA,MAAE,EAAE,CAAC,EAAE,6CAA6C,CAAC,GAAEA,GAAC;;;ACAld,IAAIM,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAK,EAAC,eAAcD,KAAE,SAAQC,IAAE,YAAWC,IAAE,KAAIC,GAAC,IAAE,MAAK,EAAC,iBAAgBJ,IAAE,kBAAiBK,GAAC,IAAEA,GAAEJ,KAAEC,EAAC;AAAE,QAAG,CAACF,GAAE,QAAO;AAAK,UAAMM,KAAE,KAAK,SAAS,2BAA0BC,MAAEP,GAAEA,IAAE,SAAQ,IAAE,GAAEQ,KAAER,GAAEA,IAAE,SAAQ,IAAE,GAAES,KAAE,IAAGC,KAAED,GAAEJ,IAAE,EAAC,OAAMI,IAAE,QAAOF,KAAE,eAAc,YAAW,SAAQL,IAAE,MAAK,SAAQ,YAAWC,IAAE,WAAUG,GAAC,CAAC,GAAEK,KAAEF,GAAEJ,IAAE,EAAC,OAAMI,IAAE,QAAOD,IAAE,eAAc,YAAW,SAAQN,IAAE,MAAK,SAAQ,YAAWC,IAAE,WAAUG,GAAC,CAAC,GAAEM,KAAEC,GAAEb,EAAC,GAAE,IAAEA,GAAE,MAAM,IAAK,CAAAC,QAAGA,IAAE,KAAM,GAAE,IAAE,EAAE,IAAK,CAACA,KAAEC,OAAI;AAAC,YAAMC,KAAE,MAAID;AAAE,aAAO,MAAIA,KAAE,EAAE,OAAM,EAAC,OAAMD,MAAES,KAAEI,GAAE,+BAA6BA,GAAE,YAAU,QAAO,KAAI,GAAGV,EAAC,2BAA2BH,OAAGC,EAAC,GAAE,GAAED,GAAC,IAAEE,KAAE,EAAE,OAAM,IAAI,IAAE;AAAA,IAAI,CAAE,GAAEY,KAAE,EAAE,SAAO,GAAE,IAAE,KAAK,MAAM,EAAE,SAAO,CAAC,GAAEC,KAAE,EAAE,IAAK,CAACf,KAAEC,OAAIA,OAAI,KAAGA,OAAIa,KAAE,EAAE,OAAM,EAAC,OAAMd,MAAES,KAAEI,GAAE,+BAA6BA,GAAE,YAAU,QAAO,KAAI,GAAGV,EAAC,2BAA2BH,OAAGC,EAAC,GAAE,GAAED,GAAC,IAAE,IAAK,GAAEgB,KAAE,EAAC,SAAQ,cAAa,eAAc,SAAQ,GAAEC,KAAE,EAAC,WAAU,GAAGN,EAAC,KAAI,GAAE,IAAE,EAAC,QAAO,GAAGL,GAAC,KAAI,GAAE,IAAE,EAAC,QAAO,GAAGC,EAAC,KAAI;AAAE,WAAO,EAAE,OAAM,EAAC,KAAI,GAAGJ,EAAC,cAAa,QAAO,EAAC,GAAE,EAAE,OAAM,EAAC,OAAMU,GAAE,UAAS,GAAEd,GAAE,MAAM,IAAK,CAACC,KAAEC,OAAI,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQY,GAAE,UAASA,GAAE,QAAQ,GAAE,KAAI,GAAGV,EAAC,QAAQF,EAAC,GAAE,GAAE,EAAE,OAAM,EAAC,aAAYE,IAAE,MAAKH,IAAE,SAAQ,OAAMa,GAAE,QAAO,QAAOG,GAAC,CAAC,GAAEP,MAAGR,KAAE,KAAG,IAAE,OAAK,EAAE,OAAM,EAAC,OAAMY,GAAE,UAAS,GAAE,EAAEZ,EAAC,CAAC,CAAC,CAAE,CAAC,GAAEQ,KAAE,EAAE,OAAM,EAAC,QAAOQ,GAAC,GAAE,EAAE,OAAM,EAAC,QAAO,EAAC,GAAE,EAAE,OAAM,EAAC,QAAOP,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYP,IAAE,MAAKM,IAAE,OAAMI,GAAE,cAAa,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,QAAOH,GAAC,GAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,qBAAoB,QAAO,EAAC,GAAE,CAAC,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,QAAO,EAAC,GAAE,EAAE,OAAM,EAAC,QAAOH,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYP,IAAE,MAAKO,IAAE,OAAMG,GAAE,cAAa,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,QAAOH,GAAC,GAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,qBAAoB,QAAO,EAAC,GAAEE,EAAC,CAAC,CAAC,CAAC,IAAE,IAAI;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEhB,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,gEAAgE,CAAC,GAAEA,EAAC;;;ACAx4D,IAAImB,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,gBAAc,MAAK,KAAK,UAAQ;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,UAAK,EAAC,eAAcD,KAAE,SAAQC,IAAE,YAAWC,IAAE,KAAIC,GAAC,IAAE,MAAK,EAAC,iBAAgBJ,IAAE,kBAAiBK,GAAC,IAAEC,GAAEL,GAAC;AAAE,QAAG,CAACD,GAAE,QAAO;AAAK,UAAMO,MAAEF,GAAEL,EAAC,GAAEM,KAAE,IAAGE,KAAEC,GAAET,IAAE,QAAO,KAAE,GAAEU,KAAEA,GAAEL,IAAE,EAAC,OAAMC,IAAE,QAAOE,IAAE,eAAc,YAAW,SAAQN,IAAE,MAAK,QAAO,YAAWC,IAAE,WAAU,KAAK,UAAU,0BAAyB,CAAC,GAAEQ,KAAEX,GAAE,MAAM,SAAO,GAAEY,KAAEZ,GAAE,MAAM,IAAK,CAACC,KAAEC,OAAI,MAAIA,MAAGA,OAAIS,KAAE,EAAE,OAAM,EAAC,OAAMV,IAAE,QAAMI,KAAEQ,GAAE,+BAA6BA,GAAE,YAAU,QAAO,KAAI,GAAGT,EAAC,qBAAqBH,IAAE,SAAOC,EAAC,GAAE,GAAED,IAAE,KAAK,IAAE,IAAK,GAAEa,KAAE,EAAC,SAAQ,cAAa,eAAc,SAAQ,GAAEC,KAAE,EAAC,WAAU,GAAGR,GAAC,KAAI,GAAE,IAAE,EAAC,QAAO,GAAGC,EAAC,KAAI;AAAE,WAAO,EAAE,OAAM,EAAC,KAAI,GAAGJ,EAAC,cAAa,QAAO,EAAC,GAAE,EAAE,OAAM,EAAC,OAAMS,GAAE,UAAS,GAAEb,GAAE,MAAM,IAAK,CAACC,KAAEC,OAAI,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQW,GAAE,UAASA,GAAE,QAAQ,GAAE,KAAI,GAAGT,EAAC,QAAQF,EAAC,GAAE,GAAE,EAAE,OAAM,EAAC,aAAYc,IAAE,MAAKf,IAAE,SAAQ,OAAMY,GAAE,QAAO,QAAOC,GAAC,CAAC,CAAC,CAAE,CAAC,GAAE,EAAE,OAAM,EAAC,QAAOC,GAAC,GAAE,EAAE,OAAM,EAAC,QAAO,EAAC,GAAE,EAAE,OAAM,EAAC,QAAOD,GAAC,GAAE,EAAE,OAAM,EAAC,aAAYE,IAAE,MAAKN,IAAE,OAAMG,GAAE,cAAa,CAAC,CAAC,GAAE,EAAE,OAAM,EAAC,QAAOC,GAAC,GAAE,EAAE,OAAM,EAAC,OAAMD,GAAE,qBAAoB,QAAO,EAAC,GAAED,EAAC,CAAC,CAAC,CAAC,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEZ,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,4DAA4D,CAAC,GAAEA,EAAC;;;ACA1xC,IAAIiB;AAAE,IAAIC,KAAED,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYE,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,UAAQ,OAAG,KAAK,gBAAc;AAAA,EAAI;AAAA,EAAC,SAAQ;AAAC,UAAMD,MAAE,KAAK,qBAAqB,GAAEC,KAAEC,GAAE,KAAK,eAAc,KAAK,QAAQ,GAAEC,KAAE,KAAK,UAAQC,GAAE,kBAAgBA,GAAE,YAAWC,KAAEJ,KAAE,EAAE,OAAM,EAAC,OAAMG,GAAE,aAAY,GAAEH,EAAC,IAAE,MAAKC,KAAE,EAAC,CAACE,GAAE,kBAAkB,GAAE,gBAAc,KAAK,cAAc,QAAM,CAAC,KAAK,QAAO;AAAE,WAAO,EAAE,WAAU,EAAC,OAAM,KAAK,QAAQD,IAAED,EAAC,GAAE,KAAI,GAAG,KAAK,GAAG,SAAQ,GAAEG,IAAEL,GAAC;AAAA,EAAC;AAAA,EAAC,uBAAsB;AAAC,YAAO,KAAK,cAAc,MAAK;AAAA,MAAC,KAAI;AAAe,eAAO,KAAK,mBAAmB,KAAK,aAAa;AAAA,MAAE,KAAI;AAAY,eAAO,EAAEI,KAAE,EAAC,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,SAAQ,CAAC;AAAA,MAAE,KAAI;AAAA,MAAa,KAAI;AAAA,MAAe,KAAI;AAAA,MAAe,KAAI;AAAe,eAAO,EAAEE,IAAE,EAAC,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE,KAAI;AAAoB,eAAOC,GAAE,KAAK,eAAc,KAAK,IAAG,EAAC,SAAQ,KAAK,MAAM,SAAQ,YAAW,KAAK,YAAW,WAAU,KAAK,SAAS,kCAAiC,KAAI,KAAK,IAAG,CAAC;AAAA,MAAE,KAAI;AAAiB,eAAO,EAAE,OAAM,EAAC,aAAYL,IAAE,MAAK,KAAK,cAAc,SAAQ,KAAI,GAAG,KAAK,GAAG,WAAU,CAAC;AAAA,MAAE,KAAI;AAAkC,eAAO,EAAEM,IAAE,EAAC,YAAW,KAAK,YAAW,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE,KAAI;AAA6B,eAAO,EAAET,IAAE,EAAC,YAAW,KAAK,YAAW,KAAI,KAAK,KAAI,eAAc,KAAK,eAAc,UAAS,KAAK,UAAS,SAAQ,KAAK,MAAM,QAAO,CAAC;AAAA,MAAE;AAAQ,eAAO;AAAA,IAAI;AAAA,EAAC;AAAA,EAAC,mBAAmBC,KAAE;AAAC,UAAMC,KAAED,IAAE,MAAM,IAAK,CAAAC,OAAG,KAAK,mBAAmBA,IAAED,IAAE,UAAU,CAAE,EAAE,OAAO,OAAO;AAAE,WAAOC,GAAE,SAAO,EAAE,OAAM,EAAC,OAAMG,GAAE,UAAS,GAAEH,EAAC,IAAE;AAAA,EAAI;AAAA,EAAC,mBAAmBD,KAAEC,IAAE;AAAC,UAAK,EAAC,OAAME,GAAC,IAAE,MAAKE,KAAE,WAAUL,MAAEA,IAAE,QAAM,MAAKE,KAAE,GAAG,KAAK,GAAG,IAAIG,EAAC;AAAG,QAAG,UAASL,OAAGA,IAAE,KAAK,QAAO,EAAEF,IAAE,EAAC,YAAW,KAAK,YAAW,SAAQ,MAAG,KAAII,IAAE,OAAMC,IAAE,eAAcH,KAAE,UAAS,KAAK,SAAQ,CAAC;AAAE,QAAG,EAAE,aAAYA,OAAGA,IAAE,WAAS,SAAQA,OAAGA,IAAE,KAAK,QAAO;AAAK,UAAMS,KAAEC,IAAEP,IAAEF,EAAC,GAAEU,KAAE,EAAC,CAACP,GAAE,yBAAyB,GAAEK,GAAC,GAAEH,KAAE,EAAC,CAACF,GAAE,yBAAyB,GAAEK,GAAC;AAAE,WAAO,EAAE,OAAM,EAAC,OAAML,GAAE,UAAS,KAAI,GAAGF,EAAC,OAAM,GAAE,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQE,GAAE,iBAAgBE,EAAC,EAAC,GAAE,KAAK,eAAeN,KAAES,EAAC,CAAC,GAAE,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQL,GAAE,WAAUO,EAAC,EAAC,GAAEA,GAAE,KAAK,UAASN,IAAE,KAAE,KAAG,EAAE,CAAC;AAAA,EAAC;AAAA,EAAC,eAAeL,KAAEC,IAAE;AAAC,UAAK,EAAC,OAAME,GAAC,IAAE;AAAK,WAAM,aAAYH,OAAGA,IAAE,UAAQ,EAAE,OAAM,EAAC,aAAYE,IAAE,MAAKF,IAAE,SAAQ,OAAMI,GAAE,OAAM,CAAC,IAAE,SAAQJ,OAAGA,IAAE,MAAI,KAAK,aAAaA,KAAEG,IAAEF,EAAC,IAAE;AAAA,EAAI;AAAA,EAAC,aAAaD,KAAEC,IAAEE,IAAE;AAAC,UAAK,EAAC,OAAME,IAAE,KAAIH,IAAE,SAAQO,GAAC,IAAET,KAAEW,KAAE,EAAC,CAACP,GAAE,0BAA0B,GAAED,IAAE,CAACC,GAAE,MAAM,GAAE,CAACD,GAAC,GAAEG,KAAE,EAAC,SAAQ,GAAGG,MAAGR,GAAE,OAAO,GAAE,GAAEW,KAAED,GAAE,KAAK,UAASN,IAAE,KAAE;AAAE,WAAO,EAAE,OAAM,EAAC,KAAIO,IAAE,cAAaA,IAAE,QAAO,GAAE,OAAM,KAAK,QAAQD,EAAC,GAAE,QAAOX,IAAE,QAAO,KAAIE,IAAE,QAAOI,IAAE,OAAMN,IAAE,MAAK,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,WAAU,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,YAAW,MAAM,GAAEA,KAAED,KAAE,EAAE,CAAC,EAAE,kDAAkD,CAAC,GAAEC,EAAC;;;ACA1hG,IAAMc,KAAE,GAAGC,EAAC;AAAK,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYD,KAAEE,IAAE;AAAC,UAAMF,KAAEE,EAAC,GAAE,KAAK,mBAAiB,MAAK,KAAK,eAAa,GAAE,KAAK,WAAS,MAAK,KAAK,OAAK;AAAA,EAAS;AAAA,EAAC,SAAQ;AAAC,UAAMF,MAAE,KAAK,kBAAiBE,KAAEF,KAAG,QAAQ,EAAE,IAAK,CAAAA,QAAG,KAAK,sBAAsBA,GAAC,CAAE,EAAE,OAAO,OAAO;AAAE,WAAOE,IAAG,SAAO,EAAE,WAAU,MAAKA,EAAC,IAAE,EAAE,OAAM,EAAC,OAAMC,GAAE,SAAQ,KAAI,YAAW,GAAE,KAAK,SAAS,QAAQ;AAAA,EAAC;AAAA,EAAC,sBAAsBH,KAAEE,IAAE;AAAC,QAAG,CAACF,IAAE,MAAM,QAAO;AAAK,UAAMI,KAAE,GAAGJ,IAAE,MAAM,GAAG,YAAYA,IAAE,OAAO,IAAGK,KAAE,GAAGN,EAAC,GAAGG,KAAE,GAAGA,EAAC,MAAI,EAAE,GAAGE,EAAC,IAAGE,KAAEN,IAAE,QAAMA,GAAE,EAAC,OAAM,KAAK,cAAa,OAAM,KAAK,QAAQA,GAAE,SAAQG,GAAE,KAAK,EAAC,GAAEH,IAAE,KAAK,IAAE;AAAK,QAAGA,IAAE,SAAS,QAAO;AAAC,YAAME,KAAEF,IAAE,SAAS,QAAQ,EAAE,IAAK,CAAAA,QAAG,KAAK,sBAAsBA,KAAEI,EAAC,CAAE;AAAE,aAAO,EAAE,WAAU,EAAC,OAAM,KAAK,QAAQD,GAAE,SAAQA,GAAE,UAAU,GAAE,KAAIE,GAAC,GAAEC,IAAEJ,EAAC;AAAA,IAAC;AAAC,WAAO,KAAK,8BAA8BF,KAAEM,IAAED,EAAC;AAAA,EAAC;AAAA,EAAC,8BAA8BL,KAAEE,IAAEE,IAAE;AAAC,UAAMC,KAAEL,IAAE,gBAAgB,OAAO,OAAO;AAAE,QAAG,CAACK,IAAG,OAAO,QAAO;AAAK,UAAMC,KAAED,GAAE,IAAK,CAAAH,OAAG,EAAEK,IAAE,EAAC,YAAWP,IAAE,YAAW,SAAQ,OAAG,KAAI,GAAGI,EAAC,IAAIF,GAAE,IAAI,IAAG,OAAMF,IAAE,OAAM,eAAcE,IAAE,UAAS,KAAK,SAAQ,CAAC,CAAE,GAAEM,KAAE,EAAC,CAACL,GAAE,eAAe,GAAE,CAAC,CAACH,IAAE,OAAM;AAAE,WAAO,EAAE,WAAU,EAAC,OAAM,KAAK,QAAQG,GAAE,SAAQK,EAAC,GAAE,KAAIJ,GAAC,GAAEF,IAAE,EAAE,OAAM,EAAC,OAAMC,GAAE,MAAK,GAAEG,EAAC,CAAC;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAEL,GAAE,WAAU,oBAAmB,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAAC,EAAE,GAAED,GAAE,gCAAgC,CAAC,GAAEC,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,EAAC,UAAS,KAAE,CAAC,CAAC,GAAEA,GAAE,WAAU,QAAO,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,gDAAgD,CAAC,GAAEA,EAAC;;;ACA13C,IAAMQ,KAAE,EAAC,MAAK,cAAa;AAAE,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,KAAEC,IAAE;AAAC,UAAMD,KAAEC,EAAC,GAAE,KAAK,eAAa,GAAE,KAAK,WAAS,MAAK,KAAK,YAAU,IAAIC,MAAE,KAAK,QAAM,IAAIC;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,SAAK,WAAW,CAACC,GAAG,MAAI,KAAK,MAAM,UAAU,MAAI,KAAK,eAAe,CAAE,GAAEA,GAAG,MAAI,KAAK,kBAAkB,UAAU,MAAI,KAAK,yBAAyB,KAAK,gBAAgB,CAAE,GAAE,EAAG,MAAI,KAAK,cAAe,CAAAJ,QAAG;AAAC,YAAK,EAAC,OAAMC,GAAC,IAAE;AAAK,MAAAA,OAAIA,GAAE,eAAaD;AAAA,IAAE,CAAE,GAAE,EAAG,MAAI,KAAK,OAAQ,CAACA,KAAEC,OAAI;AAAC,MAAAA,MAAGD,QAAIC,MAAGA,GAAE,QAAQ,GAAED,QAAIA,IAAE,mBAAiB,KAAK,kBAAiB,WAASA,IAAE,SAAOA,IAAE,OAAK,KAAK,OAAMA,IAAE,eAAa,KAAK;AAAA,IAAa,GAAG,CAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,OAAO,QAAQ;AAAA,EAAC;AAAA,EAAC,IAAI,mBAAkB;AAAC,WAAO,KAAK,UAAU;AAAA,EAAgB;AAAA,EAAC,IAAI,iBAAiBA,KAAE;AAAC,SAAK,UAAU,mBAAiBA;AAAA,EAAC;AAAA,EAAC,IAAI,uBAAsB;AAAC,WAAO,KAAK,UAAU;AAAA,EAAoB;AAAA,EAAC,IAAI,qBAAqBA,KAAE;AAAC,SAAK,UAAU,uBAAqBA;AAAA,EAAC;AAAA,EAAC,IAAI,sBAAqB;AAAC,WAAO,KAAK,UAAU;AAAA,EAAmB;AAAA,EAAC,IAAI,oBAAoBA,KAAE;AAAC,SAAK,UAAU,sBAAoBA;AAAA,EAAC;AAAA,EAAC,IAAI,6BAA4B;AAAC,WAAO,KAAK,UAAU;AAAA,EAA0B;AAAA,EAAC,IAAI,2BAA2BA,KAAE;AAAC,SAAK,UAAU,6BAA2BA;AAAA,EAAC;AAAA,EAAC,IAAI,qBAAoB;AAAC,WAAO,KAAK,UAAU;AAAA,EAAkB;AAAA,EAAC,IAAI,mBAAmBA,KAAE;AAAC,SAAK,UAAU,qBAAmBA;AAAA,EAAC;AAAA,EAAC,IAAI,mCAAkC;AAAC,WAAO,KAAK,UAAU;AAAA,EAAgC;AAAA,EAAC,IAAI,iCAAiCA,KAAE;AAAC,SAAK,UAAU,mCAAiCA;AAAA,EAAC;AAAA,EAAC,IAAI,yBAAwB;AAAC,WAAO,KAAK,UAAU;AAAA,EAAsB;AAAA,EAAC,IAAI,uBAAuBA,KAAE;AAAC,SAAK,UAAU,yBAAuBA;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAC,WAAM;AAAA,EAAQ;AAAA,EAAC,IAAI,KAAKA,KAAE;AAAC,SAAK,gBAAgB,QAAOA,GAAC;AAAA,EAAC;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK,UAAU,eAAa;AAAA,EAAE;AAAA,EAAC,IAAI,MAAMA,KAAE;AAAC,SAAK,gBAAgB,SAAQA,GAAC;AAAA,EAAC;AAAA,EAAC,IAAI,aAAY;AAAC,WAAO,KAAK,UAAU;AAAA,EAAU;AAAA,EAAC,IAAI,WAAWA,KAAE;AAAC,SAAK,UAAU,aAAWA;AAAA,EAAC;AAAA,EAAC,IAAI,MAAMA,KAAE;AAAC,UAAMC,KAAE,KAAK,KAAK,OAAO;AAAE,IAAAD,QAAIC,MAAGA,IAAG,QAAQ,GAAE,KAAK,KAAK,SAAQD,GAAC;AAAA,EAAC;AAAA,EAAC,UAAUA,KAAE;AAAC,QAAGA,eAAaK,MAAGL,eAAaG,GAAE,QAAOH;AAAE,QAAG,YAAU,OAAOA,IAAE,QAAM,WAASA,MAAE,IAAIK,OAAE,IAAIF;AAAE,QAAGH,OAAG,YAAU,OAAOA,IAAE,MAAK;AAAC,YAAMC,KAAE,EAAC,GAAGD,IAAC;AAAE,aAAO,OAAOC,GAAE,MAAK,WAASD,IAAE,OAAK,IAAIK,GAAEJ,EAAC,IAAE,IAAIE,GAAEF,EAAC;AAAA,IAAC;AAAC,WAAO,IAAIE;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAC,WAAO,KAAK,UAAU;AAAA,EAAI;AAAA,EAAC,IAAI,KAAKH,KAAE;AAAC,SAAK,UAAU,OAAKA;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,WAAO,EAAE,OAAM,EAAC,OAAM,KAAK,QAAQF,GAAE,MAAKE,GAAE,QAAO,KAAK,iBAAiBG,KAAEH,GAAE,QAAM,IAAI,EAAC,GAAE,KAAK,MAAM,OAAO,CAAC;AAAA,EAAC;AAAA,EAAC,yBAAyBA,KAAE;AAAC,IAAAA,IAAE,QAAS,CAAAA,QAAG;AAAC,WAAK,cAAc,WAAWA,IAAE,MAAM,GAAG,EAAE,GAAE,KAAK,+BAA+BA,GAAC;AAAA,IAAC,CAAE,GAAE,KAAK,eAAe;AAAA,EAAC;AAAA,EAAC,+BAA+BA,KAAE;AAAC,UAAMM,KAAE,EAAG,MAAIN,IAAE,SAAU,MAAI,KAAK,eAAe,CAAE;AAAE,SAAK,WAAWM,IAAE,WAAWN,IAAE,MAAM,GAAG,EAAE;AAAE,UAAMO,KAAEH,GAAG,MAAIJ,IAAE,UAAU,UAAU,MAAIA,IAAE,SAAS,QAAS,CAAAA,QAAG,KAAK,+BAA+BA,GAAC,CAAE,GAAG,CAAC;AAAE,SAAK,WAAWO,IAAE,WAAWP,IAAE,MAAM,GAAG,EAAE,GAAEA,IAAE,SAAS,QAAS,CAAAA,QAAG,KAAK,+BAA+BA,GAAC,CAAE;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,GAAE,WAAU,oBAAmB,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,wBAAuB,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,uBAAsB,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,8BAA6B,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,sBAAqB,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,oCAAmC,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,0BAAyB,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,QAAO,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,SAAQ,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,cAAa,IAAI,GAAE,EAAE,CAAC,EAAE,GAAEC,GAAE,gCAAgC,CAAC,GAAED,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,SAAQ,IAAI,GAAE,EAAE,CAAC,EAAE,OAAO,CAAC,GAAEA,GAAE,WAAU,aAAY,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,QAAO,IAAI,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,aAAY,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,qBAAqB,CAAC,GAAEA,EAAC;AAAE,IAAMS,MAAET;",
  "names": ["l", "i", "s", "a", "n", "e", "t", "u", "r", "f", "o", "s", "t", "n", "o", "e", "r", "o", "u", "m", "e", "t", "s", "i", "l", "r", "n", "a", "v", "c", "d", "y", "h", "p", "f", "w", "g", "L", "k", "c", "L", "p", "u", "f", "v", "w", "e", "i", "r", "t", "s", "a", "n", "o", "l", "e", "a", "r", "r", "e", "t", "i", "o", "n", "s", "u", "l", "a", "l", "t", "e", "a", "i", "r", "n", "o", "n", "m", "c", "d", "e", "t", "r", "i", "l", "p", "h", "y", "f", "V", "u", "n", "o", "a", "p", "r", "e", "l", "m", "d", "i", "h", "c", "t", "v", "b", "u", "w", "k", "f", "g", "_", "y", "C", "L", "x", "j", "T", "S", "s", "c", "p", "d", "e", "t", "s", "m", "y", "r", "i", "u", "f", "h", "g", "o", "n", "v", "b", "x", "z", "j", "w", "l", "n", "i", "r", "s", "a", "c", "f", "p", "e", "t", "m", "u", "o", "l", "v", "h", "d", "y", "b", "g", "z", "w", "f", "e", "t", "o", "s", "y", "b", "h", "d", "u", "v", "g", "w", "j", "x", "L", "z", "C", "k", "E", "r", "i", "d", "e", "t", "o", "s", "y", "g", "u", "h", "v", "j", "x", "b", "w", "L", "C", "r", "i", "b", "L", "e", "s", "i", "t", "r", "n", "y", "d", "k", "f", "a", "u", "l", "o", "c", "p", "h", "m", "d", "p", "e", "s", "c", "r", "t", "L", "e", "a", "a", "n", "e", "t", "s", "r", "i", "l", "a", "e", "s", "r", "i", "o", "y", "e", "s", "t", "i", "b", "f", "u", "g", "h", "L", "w", "j", "v", "a", "C", "k", "x", "E", "f", "e", "s", "t", "r", "v", "g", "u", "b", "y", "h", "j", "L", "a", "w", "C", "i", "g", "f", "e", "s", "i", "t", "a", "r", "n", "k", "y", "l", "u", "o", "m", "d", "e", "m", "s", "a", "r", "t", "i", "f", "l", "g", "v", "e", "t", "w", "m", "a", "p", "r", "o", "u"]
}
