{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/rasterTransforms/IdentityTransform.js", "../../@arcgis/core/layers/support/rasterTransforms/utils.js", "../../@arcgis/core/layers/support/RasterWorker.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{enumeration as o}from\"../../../core/accessorSupport/decorators/enumeration.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import t from\"./BaseRasterTransform.js\";var e;let a=e=class extends t{constructor(){super(...arguments),this.type=\"identity\"}clone(){return new e}};r([o({IdentityXform:\"identity\"})],a.prototype,\"type\",void 0),a=e=r([s(\"esri.layers.support.rasterTransforms.IdentityTransform\")],a);export{a as default};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport r from\"./GCSShiftTransform.js\";import o from\"./IdentityTransform.js\";import t from\"./PolynomialTransform.js\";const n={GCSShiftXform:r,IdentityXform:o,PolynomialXform:t};function f(r){const o=r?.type;if(!o)return null;const t=n[r?.type];if(t){const o=new t;return o.read(r),o}return null}export{f as readTransform};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport r from\"../../geometry/Extent.js\";import e from\"../../geometry/Point.js\";import t from\"../../geometry/operators/support/GeographicTransformation.js\";import s from\"./PixelBlock.js\";import{decode as o}from\"./rasterFormats/RasterCodec.js\";import{split as i,clipTile as n,mosaic as a,approximateTransform as l,getLocalArithmeticNorthRotations as m}from\"./rasterFunctions/pixelUtils.js\";import{create as c}from\"./rasterFunctions/rasterFunctionHelper.js\";import{load as f,getProjectionOffsetGrid as p}from\"./rasterFunctions/rasterProjectionHelper.js\";import{computeStatisticsHistograms as u,estimateStatisticsHistograms as S}from\"./rasterFunctions/stretchUtils.js\";import{convertVectorFieldData as d,convertToLocalDirections as x}from\"./rasterFunctions/vectorFieldUtils.js\";import{readTransform as y}from\"./rasterTransforms/utils.js\";import h from\"../../renderers/support/RasterSymbolizer.js\";import{createFlowMesh as O}from\"../../views/2d/engine/flow/dataUtils.js\";class N{convertVectorFieldData(r){const e=s.fromJSON(r.pixelBlock),t=d(e,r.type);return Promise.resolve(null!=t?t.toJSON():null)}computeStatisticsHistograms(r){const e=s.fromJSON(r.pixelBlock),t=u(e);return Promise.resolve(t)}async decode(r){const e=await o(r.data,r.options);return e&&e.toJSON()}symbolize(e){e.pixelBlock=s.fromJSON(e.pixelBlock),e.extent=e.extent?r.fromJSON(e.extent):null;const t=this.symbolizer.symbolize(e);return Promise.resolve(null!=t?t.toJSON():null)}async updateSymbolizer(r){this.symbolizer=h.fromJSON(r.symbolizerJSON),r.histograms&&\"rasterStretch\"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=r.histograms)}async updateRasterFunction(r){this.rasterFunction=c(r.rasterFunctionJSON)}async process(t){const o=this.rasterFunction.process({extent:r.fromJSON(t.extent),primaryPixelBlocks:t.primaryPixelBlocks.map((r=>null!=r?s.fromJSON(r):null)),primaryPixelSizes:t.primaryPixelSizes?.map((r=>null!=r?e.fromJSON(r):null)),primaryRasterIds:t.primaryRasterIds});return null!=o?o.toJSON():null}stretch(r){const e=this.symbolizer.simpleStretch(s.fromJSON(r.srcPixelBlock),r.stretchParams);return Promise.resolve(e?.toJSON())}estimateStatisticsHistograms(r){const e=S(s.fromJSON(r.srcPixelBlock));return Promise.resolve(e)}split(r){const e=i(s.fromJSON(r.srcPixelBlock),r.tileSize,r.maximumPyramidLevel??0,!1===r.useBilinear);return e&&e.forEach(((r,t)=>{e.set(t,r?.toJSON())})),Promise.resolve(e)}clipTile(r){const e=s.fromJSON(r.pixelBlock),t=n({...r,pixelBlock:e});return Promise.resolve(t?.toJSON())}async mosaicAndTransform(r){const e=r.srcPixelBlocks.map((r=>r?new s(r):null)),t=a(e,r.srcMosaicSize,{blockWidths:r.blockWidths,alignmentInfo:r.alignmentInfo,clipOffset:r.clipOffset,clipSize:r.clipSize});let o,i=t;return r.coefs&&(i=l(t,r.destDimension,r.coefs,r.sampleSpacing,r.interpolation)),r.projectDirections&&r.gcsGrid&&(o=m(r.destDimension,r.gcsGrid),i=x(i,r.isUV?\"vector-uv\":\"vector-magdir\",o)),{pixelBlock:i?.toJSON(),localNorthDirections:o}}async createFlowMesh(r,e){const t={data:new Float32Array(r.flowData.buffer),mask:new Uint8Array(r.flowData.maskBuffer),width:r.flowData.width,height:r.flowData.height},{vertexData:s,indexData:o}=await O(r.meshType,r.simulationSettings,t,e.signal);return{result:{vertexBuffer:s.buffer,indexBuffer:o.buffer},transferList:[s.buffer,o.buffer]}}async getProjectionOffsetGrid(e){const s=r.fromJSON(e.projectedExtent),o=r.fromJSON(e.srcBufferExtent);let i=null;e.datumTransformationSteps?.length&&(i=new t({steps:e.datumTransformationSteps})),await f();const n=e.rasterTransform?y(e.rasterTransform):null;return p({...e,projectedExtent:s,srcBufferExtent:o,datumTransformation:i,rasterTransform:n})}}export{N as default};\r\n"],
  "mappings": "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",
  "names": ["a", "r", "n", "a", "f", "r", "t", "o", "r", "e", "t", "_", "T", "j", "s", "c", "n", "f"]
}
