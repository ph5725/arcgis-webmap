{
  "version": 3,
  "sources": ["../../@esri/calcite-components/dist/components/calcite-flow/customElement.js"],
  "sourcesContent": ["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\r\nv3.2.1 */\r\nimport { c as customElement } from \"../../chunks/runtime.js\";\r\nimport { ref } from \"lit-html/directives/ref.js\";\r\nimport { html } from \"lit\";\r\nimport { LitElement, safeClassMap } from \"@arcgis/lumina\";\r\nimport { c as createObserver } from \"../../chunks/observers.js\";\r\nimport { c as componentFocusable } from \"../../chunks/component.js\";\r\nimport { z as whenAnimationDone } from \"../../chunks/dom.js\";\r\nimport { css } from \"@lit/reactive-element/css-tag.js\";\r\nconst CSS = {\r\n  frame: \"frame\",\r\n  frameAdvancing: \"frame--advancing\",\r\n  frameRetreating: \"frame--retreating\"\r\n};\r\nconst styles = css`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`;\r\nclass Flow extends LitElement {\r\n  constructor() {\r\n    super();\r\n    this.itemMutationObserver = createObserver(\"mutation\", () => this.updateItemsAndProps());\r\n    this.items = [];\r\n    this.selectedIndex = -1;\r\n    this.flowDirection = \"standby\";\r\n    this.listen(\"calciteInternalFlowItemChange\", this.handleCalciteInternalFlowItemChange);\r\n    this.listen(\"calciteFlowItemBack\", this.handleItemBackClick);\r\n  }\r\n  static {\r\n    this.properties = { flowDirection: [16, {}, { state: true }], customItemSelectors: 1 };\r\n  }\r\n  static {\r\n    this.styles = styles;\r\n  }\r\n  async back() {\r\n    const { items, selectedIndex } = this;\r\n    const selectedItem = items[selectedIndex];\r\n    const nextSelectedItem = items[selectedIndex - 1];\r\n    if (!selectedItem || !nextSelectedItem) {\r\n      return;\r\n    }\r\n    const beforeBack = selectedItem.beforeBack ? selectedItem.beforeBack : () => Promise.resolve();\r\n    try {\r\n      await beforeBack.call(selectedItem);\r\n    } catch {\r\n      return;\r\n    }\r\n    selectedItem.selected = false;\r\n    nextSelectedItem.selected = true;\r\n    return nextSelectedItem;\r\n  }\r\n  async setFocus() {\r\n    await componentFocusable(this);\r\n    const { items } = this;\r\n    const selectedItem = items[this.selectedIndex];\r\n    return selectedItem?.setFocus();\r\n  }\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    this.itemMutationObserver?.observe(this.el, { childList: true, subtree: true });\r\n  }\r\n  willUpdate(changes) {\r\n    if (changes.has(\"flowDirection\") && (this.hasUpdated || this.flowDirection !== \"standby\")) {\r\n      this.handleFlowDirectionChange(this.flowDirection);\r\n    }\r\n  }\r\n  loaded() {\r\n    this.updateItemsAndProps();\r\n  }\r\n  disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n    this.itemMutationObserver?.disconnect();\r\n  }\r\n  async handleFlowDirectionChange(flowDirection) {\r\n    if (flowDirection === \"standby\") {\r\n      return;\r\n    }\r\n    await whenAnimationDone(this.frameEl, flowDirection === \"retreating\" ? \"calcite-frame-retreat\" : \"calcite-frame-advance\");\r\n    this.resetFlowDirection();\r\n  }\r\n  handleCalciteInternalFlowItemChange(event) {\r\n    event.stopPropagation();\r\n    this.updateFlowProps();\r\n  }\r\n  async handleItemBackClick(event) {\r\n    if (event.defaultPrevented) {\r\n      return;\r\n    }\r\n    await this.back();\r\n    return this.setFocus();\r\n  }\r\n  resetFlowDirection() {\r\n    this.flowDirection = \"standby\";\r\n  }\r\n  getFlowDirection(oldSelectedIndex, newSelectedIndex) {\r\n    const allowRetreatingDirection = oldSelectedIndex > 0;\r\n    const allowAdvancingDirection = oldSelectedIndex > -1 && newSelectedIndex > 0;\r\n    if (!allowAdvancingDirection && !allowRetreatingDirection) {\r\n      return \"standby\";\r\n    }\r\n    return newSelectedIndex < oldSelectedIndex ? \"retreating\" : \"advancing\";\r\n  }\r\n  updateItemsAndProps() {\r\n    const { customItemSelectors, el } = this;\r\n    const newItems = Array.from(el.querySelectorAll(`calcite-flow-item${customItemSelectors ? `,${customItemSelectors}` : \"\"}`)).filter((flowItem) => flowItem.closest(\"calcite-flow\") === el);\r\n    this.items = newItems;\r\n    this.ensureSelectedFlowItemExists();\r\n    this.updateFlowProps();\r\n  }\r\n  updateFlowProps() {\r\n    const { selectedIndex, items } = this;\r\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\r\n    items.forEach((flowItem, index) => {\r\n      const currentlySelected = index === foundSelectedIndex;\r\n      if (!currentlySelected) {\r\n        flowItem.menuOpen = false;\r\n      }\r\n      flowItem.showBackButton = currentlySelected && foundSelectedIndex > 0;\r\n    });\r\n    if (foundSelectedIndex === -1) {\r\n      return;\r\n    }\r\n    if (selectedIndex !== foundSelectedIndex) {\r\n      this.flowDirection = this.getFlowDirection(selectedIndex, foundSelectedIndex);\r\n    }\r\n    this.selectedIndex = foundSelectedIndex;\r\n  }\r\n  findSelectedFlowItemIndex(items) {\r\n    const selectedItem = items.slice(0).reverse().find((item) => !!item.selected);\r\n    return items.indexOf(selectedItem);\r\n  }\r\n  ensureSelectedFlowItemExists() {\r\n    const { items } = this;\r\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\r\n    if (foundSelectedIndex !== -1) {\r\n      return;\r\n    }\r\n    const lastItem = items[items.length - 1];\r\n    if (lastItem) {\r\n      lastItem.selected = true;\r\n    }\r\n  }\r\n  setFrameEl(el) {\r\n    this.frameEl = el;\r\n  }\r\n  render() {\r\n    const { flowDirection } = this;\r\n    const frameDirectionClasses = {\r\n      [CSS.frame]: true,\r\n      [CSS.frameAdvancing]: flowDirection === \"advancing\",\r\n      [CSS.frameRetreating]: flowDirection === \"retreating\"\r\n    };\r\n    return html`<div class=${safeClassMap(frameDirectionClasses)} ${ref(this.setFrameEl)}><slot></slot></div>`;\r\n  }\r\n}\r\ncustomElement(\"calcite-flow\", Flow);\r\nexport {\r\n  Flow\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
