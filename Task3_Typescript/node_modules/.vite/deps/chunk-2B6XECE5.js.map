{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/graphics/data/projectionSupport.js", "../../@arcgis/core/layers/graphics/data/queryUtils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{isSome as s}from\"../../../core/arrayUtils.js\";import{createResolver as t}from\"../../../core/promiseUtils.js\";import{initializeProjection as e,projectMany as n}from\"../../../geometry/projectionUtils.js\";import{jsonAdapter as r}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as i,equals as o,isWebMercator as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{canProject as m,lngLatToXY as u,xyToLngLat as l}from\"../../../geometry/support/webMercatorUtils.js\";const p=[0,0];function c(s,t){if(!t)return null;if(\"x\"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,p),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if(\"xmin\"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,p),[e.xmax,e.ymax]=s(t.xmax,t.ymax,p),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return\"rings\"in t?{rings:h(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:h(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:f(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function h(s,t){const e=[];for(const n of s)e.push(f(n,t));return e}function f(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function x(t,n){if(!t||!n)return;const r=Array.isArray(t)?t.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(s):[t];await e(r.map((s=>({source:s,dest:n}))))}const y=c.bind(null,u),g=c.bind(null,l);function j(s,t,e,u){if(!s)return null;if(e||(e=t,t=s.spatialReference),!i(t)||!i(e)||o(t,e))return s;if(m(t,e)){const t=a(e)?y(s):g(s);return t.spatialReference=e,t}return n(r,[s],t,e,null,u)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,e,n,r){if(!s?.length||!e||!n||o(e,n))return s;const i={geometries:s,inSpatialReference:e,outSpatialReference:n,geographicTransformation:r,resolve:t()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:o,geographicTransformation:u}=s;m(e,i)?a(i)?o(t.map(y)):o(t.map(g)):o(n(r,t,e,i,u,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const M=new _;function b(s,t,e,n){return M.push(s,t,e,n)}export{x as checkProjectionSupport,j as project,b as projectMany};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport t from\"../../../core/Error.js\";import{JSONMap as e}from\"../../../core/jsonMap.js\";import{getUnitString as i}from\"../../../core/unitUtils.js\";import{canProjectWithoutEngine as r}from\"../../../geometry/projectionUtils.js\";import{getGeometryExtent as n}from\"../../../geometry/support/extentUtils.js\";import{fromJSON as a,isPolygon as o,isExtent as s,isPolyline as l}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as m}from\"../../../geometry/support/normalizeUtils.js\";import{isGeographic as u,isWebMercator as c,wgs84 as p,equals as f}from\"../../../geometry/support/spatialReferenceUtils.js\";import{checkProjectionSupport as y,project as d}from\"./projectionSupport.js\";const g=new e({esriSRUnit_Meter:\"meters\",esriSRUnit_Kilometer:\"kilometers\",esriSRUnit_Foot:\"feet\",esriSRUnit_StatuteMile:\"miles\",esriSRUnit_NauticalMile:\"nautical-miles\",esriSRUnit_USNauticalMile:\"us-nautical-miles\"}),S=Object.freeze({}),R=\"frequency\";async function w(t,e,i){const r=t.bin;return r.onField&&(r.onField=r.onField.trim()),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),\"normalizationField\"in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),t.outStatistics?.length||(t.outStatistics=[{statisticType:\"count\",onStatisticField:\"1\",outStatisticFieldName:R}]),x(t,e,i)}async function x(t,e,i){const{outFields:r,orderByFields:n,groupByFieldsForStatistics:a,outStatistics:o}=t;if(r)for(let s=0;s<r.length;s++)r[s]=r[s].trim();if(n)for(let s=0;s<n.length;s++)n[s]=n[s].trim();if(a)for(let s=0;s<a.length;s++)a[s]=a[s].trim();if(o)for(let s=0;s<o.length;s++)o[s].onStatisticField&&(o[s].onStatisticField=o[s].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),B(t,e,i)}async function B(t,e,i){if(!t)return null;let{where:r}=t;if(t.where=r=r?.trim(),(!r||/^1 *= *1$/.test(r)||e&&e===r)&&(t.where=null),!t.geometry)return t;let o=await v(t);if(t.distance=0,t.units=null,\"esriSpatialRelEnvelopeIntersects\"===t.spatialRel){const{spatialReference:e}=t.geometry;o=n(o),o.spatialReference=e}if(o){await y(o.spatialReference,i),o=j(o,i);const e=(await m(a(o)))[0];if(null==e)throw S;const r=\"quantizationParameters\"in t&&t.quantizationParameters?.tolerance||\"maxAllowableOffset\"in t&&t.maxAllowableOffset||0,n=r&&F(o,i)?{densificationStep:8*r}:void 0,s=e.toJSON(),l=d(s,s.spatialReference,i,n);if(!l)throw S;l.spatialReference=i,t.geometry=l}return t}function F(t,e){if(!t)return!1;const i=t.spatialReference;return(s(t)||o(t)||l(t))&&!f(i,e)&&!r(i,e)}function j(t,e){const i=t.spatialReference;return F(t,e)&&s(t)?{spatialReference:i,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function v(e){const{distance:r,units:n}=e,a=e.geometry;if(null==r||\"vertexAttributes\"in a)return a;const s=a.spatialReference,l=n?g.fromJSON(n):i(s),m=s&&(u(s)||c(s))?a:await y(s,p).then((()=>d(a,p))),f=await import(\"../../../geometry/operators/json/geodesicBufferOperator.js\");await f.load();const S=f.execute(m,r||1,{unit:l})??void 0;if(!S||!o(S)||0===S.rings.length)throw new t(\"unsupported-query:invalid-parameters\",\"Invalid parameters for query by distance\");return S}function h(t,e){return null==t?null:\"string\"==typeof t?e?new Date(`1970-01-01T${t}Z`).getTime():new Date(t).getTime():t instanceof Date?t.getTime():t}export{h as getDateInNumber,w as normalizeAttributeBinsQuery,x as normalizeQuery,B as normalizeQueryLike,S as queryEngineEmptyResult,g as unitsKebabDict};\r\n"],
  "mappings": "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",
  "names": ["s", "t", "f", "y", "L", "o", "M", "g", "R", "t", "x", "o", "s", "e", "j", "r", "l", "L", "m", "f", "S", "h"]
}
