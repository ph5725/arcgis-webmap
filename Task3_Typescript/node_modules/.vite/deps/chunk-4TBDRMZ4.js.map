{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{DoublePrecision as t}from\"../util/DoublePrecision.glsl.js\";import{Float3DrawUniform as a}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as i}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as m}from\"../../shaderModules/glsl.js\";import{Matrix3DrawUniform as s}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as d}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as l}from\"../../shaderModules/Matrix4PassUniform.js\";import{VertexAttribute as n}from\"../../../lib/VertexAttribute.js\";import{NoParameters as f}from\"../../../../../webgl/NoParameters.js\";function v(r,o){const{attributes:e,vertex:f,varyings:v,fragment:F}=r;f.include(t,o),e.add(n.POSITION,\"vec3\"),v.add(\"vPositionWorldCameraRelative\",\"vec3\"),v.add(\"vPosition_view\",\"vec3\",{invariant:!0}),f.uniforms.add(new i(\"transformWorldFromViewTH\",(r=>r.transformWorldFromViewTH)),new i(\"transformWorldFromViewTL\",(r=>r.transformWorldFromViewTL)),new d(\"transformViewFromCameraRelativeRS\",(r=>r.transformViewFromCameraRelativeRS)),new l(\"transformProjFromView\",(r=>r.transformProjFromView)),new s(\"transformWorldFromModelRS\",(r=>r.transformWorldFromModelRS)),new a(\"transformWorldFromModelTH\",(r=>r.transformWorldFromModelTH)),new a(\"transformWorldFromModelTL\",(r=>r.transformWorldFromModelTL))),f.code.add(m`vec3 positionWorldCameraRelative() {\r\nvec3 rotatedModelPosition = transformWorldFromModelRS * position;\r\nvec3 transform_CameraRelativeFromModel = dpAdd(\r\ntransformWorldFromModelTL,\r\ntransformWorldFromModelTH,\r\n-transformWorldFromViewTL,\r\n-transformWorldFromViewTH\r\n);\r\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\r\n}`),f.code.add(m`\r\n    void forwardPosition(float fOffset) {\r\n      vPositionWorldCameraRelative = positionWorldCameraRelative();\r\n      if (fOffset != 0.0) {\r\n        vPositionWorldCameraRelative += fOffset * ${o.spherical?m`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:m`vec3(0.0, 0.0, 1.0)`};\r\n      }\r\n\r\n      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;\r\n      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);\r\n    }\r\n  `),F.uniforms.add(new i(\"transformWorldFromViewTL\",(r=>r.transformWorldFromViewTL))),f.code.add(m`vec3 positionWorld() {\r\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\r\n}`),F.code.add(m`vec3 positionWorld() {\r\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\r\n}`)}class F extends f{constructor(){super(...arguments),this.transformWorldFromViewTH=e(),this.transformWorldFromViewTL=e(),this.transformViewFromCameraRelativeRS=r(),this.transformProjFromView=o()}}class w extends f{constructor(){super(...arguments),this.transformWorldFromModelRS=r(),this.transformWorldFromModelTH=e(),this.transformWorldFromModelTL=e()}}export{v as VertexPosition,w as VertexPositionDrawParameters,F as VertexPositionPassParameters};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{ShaderOutput as e}from\"./ShaderOutput.js\";import{VertexPosition as a}from\"./attributes/VertexPosition.glsl.js\";import{Float2BindUniform as r}from\"../shaderModules/Float2BindUniform.js\";import{glsl as o}from\"../shaderModules/glsl.js\";function i(e){e.varyings.add(\"linearDepth\",\"float\",{invariant:!0})}function t(e){e.vertex.uniforms.add(new r(\"nearFar\",(e=>e.camera.nearFar)))}function n(e){e.vertex.code.add(o`float calculateLinearDepth(vec2 nearFar,float z) {\r\nreturn (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);\r\n}`)}function d(r,d){const{vertex:s}=r;switch(d.output){case e.Color:case e.ColorEmission:if(d.receiveShadows)return i(r),void s.code.add(o`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case e.Shadow:case e.ShadowHighlight:case e.ShadowExcludeHighlight:case e.ViewshedShadow:return r.include(a,d),i(r),t(r),n(r),void s.code.add(o`void forwardLinearDepth() {\r\nlinearDepth = calculateLinearDepth(nearFar, vPosition_view.z);\r\n}`)}s.code.add(o`void forwardLinearDepth() {}`)}export{d as ForwardLinearDepth,n as addCalculateLinearDepth,i as addLinearDepth,t as addNearFar};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{addCalculateLinearDepth as e}from\"./ForwardLinearDepth.glsl.js\";import{glsl as r}from\"../shaderModules/glsl.js\";function o(o){e(o),o.vertex.code.add(r`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\r\nvec4 eye = view * vec4(pos, 1.0);\r\ndepth = calculateLinearDepth(nearFar,eye.z);\r\nreturn proj * eye;\r\n}`),o.vertex.code.add(r`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\r\nreturn proj * (view * vec4(pos, 1.0));\r\n}`)}export{o as Transform};\r\n"],
  "mappings": "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",
  "names": ["o", "e", "v", "F", "r", "n", "e", "t", "o", "n", "d", "o", "n"]
}
