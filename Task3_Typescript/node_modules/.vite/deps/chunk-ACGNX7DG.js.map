{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/interactive/SnappingVisualizer2D.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport e from\"../../../Graphic.js\";import{makeHandle as t}from\"../../../core/handleUtils.js\";import{px2pt as r}from\"../../../core/screenUtils.js\";import{ensureClass as i}from\"../../../core/accessorSupport/ensureType.js\";import{subtract as o,cross as n}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as a}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as l}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import s from\"../../../geometry/Point.js\";import m from\"../../../geometry/Polyline.js\";import c from\"../../../geometry/SpatialReference.js\";import p from\"../../../symbols/CIMSymbol.js\";import y from\"../../../symbols/SimpleLineSymbol.js\";import g from\"../../../symbols/SimpleMarkerSymbol.js\";import{LineJoinStyle as h,LineCapStyle as b}from\"../../../symbols/cim/enums.js\";import{asVec2 as S}from\"../../interactive/sketch/normalizedPoint.js\";import{defaults as f}from\"../../interactive/snapping/Settings.js\";import{SnappingVisualizer as u}from\"../../interactive/snapping/SnappingVisualizer.js\";class d extends u{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new s({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"intersectionPoint\",t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new s({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol(\"point\",t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new m({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:i(c,t.spatialReference)}),this._getOrCreateSymbol(\"line\",t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new m({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:i(c,t.spatialReference)}),this._getOrCreateSymbol(\"parallelSign\",t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,t){const r=a(),s=a(),p=l();o(r,S(e.centerVertex),S(e.previousVertex)),o(s,S(e.nextVertex),S(e.previousVertex)),n(p,r,s);const y=`rightAngleQuad${p[2]<0?45:225}`;return this._visualizeSnappingIndicator(new m({paths:[[[...e.previousVertex],[...e.centerVertex],[...e.nextVertex]]],spatialReference:i(c,t.spatialReference)}),this._getOrCreateSymbol(y,t.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(r,i){const o=new e({geometry:r,symbol:i});return this._graphicsLayer.add(o),t((()=>{this._graphicsLayer.remove(o)}))}_getOrCreateSymbol(e,t){const r=this._symbolPairingsByType;return r.get(e)?.color!==t&&r.set(e,{color:t,symbol:M(e,t)}),r.get(e).symbol}}function M(e,t){const i=[...t.toRgb(),255*t.a];switch(e){case\"point\":return new g({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case\"intersectionPoint\":return new g({outline:new y({width:1.5,color:t}),size:15,color:[0,0,0,0]});case\"line\":return new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",enable:!0,capStyle:b.Butt,joinStyle:h.Round,miterLimit:10,width:r(f.lineHintWidthTarget),color:i}]}}});case\"parallelSign\":return new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:\"Relative\",size:5,markerPlacement:{type:\"CIMMarkerPlacementOnLine\",placePerPart:!0,angleToLine:!0,relativeTo:\"LineMiddle\"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:\"Relative\",size:5,markerPlacement:{type:\"CIMMarkerPlacementOnLine\",placePerPart:!0,angleToLine:!0,relativeTo:\"LineMiddle\"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case\"rightAngleQuad45\":case\"rightAngleQuad225\":{const o=\"rightAngleQuad45\"===e?45:225;return new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:\"Relative\",size:r(f.rightAngleHintSize),rotation:o,markerPlacement:{type:\"CIMMarkerPlacementOnVertices\",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",miterLimit:10,width:r(f.rightAngleHintOutlineSize),color:i},{type:\"CIMSolidFill\",enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}export{d as SnappingVisualizer2D};\r\n"],
  "mappings": "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",
  "names": ["d", "e", "r", "n", "s", "p", "y", "m"]
}
