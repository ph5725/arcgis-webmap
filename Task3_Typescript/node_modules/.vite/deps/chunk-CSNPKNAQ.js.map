{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodResources.js", "../../@arcgis/core/views/3d/layers/graphics/primitiveObjectSymbolUtils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{unique as e}from\"../../../../../core/arrayUtils.js\";import{estimateNumberArrayMemory as t,baseTypedArrayMemory as r}from\"../../../../../core/memoryEstimations.js\";import{StoreResults as s}from\"../IntersectorInterfaces.js\";import{IntersectorResult as n}from\"../IntersectorResult.js\";import{IntersectorType as i}from\"../IntersectorType.js\";import{VertexAttribute as o}from\"../VertexAttribute.js\";import{LodTarget as u}from\"./Intersector.js\";class m{constructor(e,t,r,s){this.material=e,this.bufferWriter=e.createBufferWriter(),this.vertexBufferLayout=this.bufferWriter.vertexBufferLayout,this.buffer=t,this.elementCount=r,this.boundingInfo=s}get numTriangles(){return this.elementCount/3}get numVertices(){return this.elementCount}computeUsedMemory(){return this.buffer.byteLength+r}getRenderGeometry(){return this}intersect(e,t,r,s,n,i,o,u){const m=this.bufferWriter,a=this.buffer;m.intersect(a,this.material.parameters,null,e,r,s,((r,s,m)=>c(r,s,m,e,t,i,o,n,u)))}}class a{constructor(e){this.engineGeometry=e}get material(){return this.engineGeometry.material}get numVertices(){return this.engineGeometry.attributes.get(o.POSITION).indices.length}get numTriangles(){return this.engineGeometry.indexCount/3}get boundingInfo(){return this.engineGeometry.boundingInfo}computeUsedMemory(){return Array.from(this.engineGeometry.attributes.values()).reduce(((e,r)=>e+t(r.data,r.indices)),0)}getRenderGeometry(){const e=this.material,t=this.engineGeometry,r=t.attributes,s=t.boundingInfo,n=e.createBufferWriter(),i=n.vertexBufferLayout,o=n.elementCount(r),u=i.createBuffer(o);return n.write(null,null,r,null,u,0),new m(e,u.buffer,o,s)}intersect(e,t,r,s,n,i,o,u){const m=this.engineGeometry;this.material.intersect(m,e.transform.transform,e,r,s,((r,s,m)=>c(r,s,m,e,t,i,o,n,u)))}}function c(e,t,r,o,m,a,c,l,f){if(e<0)return;if(m&&!m(o.rayBegin,o.rayEnd,e))return;const h=new u(a.layerViewUid,a.graphicUid(l),r,c,f);if((null==o.results.min.distance||e<o.results.min.distance)&&o.results.min.set(i.LOD,h,e,t,o.transform.transform),(null==o.results.max.distance||e>o.results.max.distance)&&o.results.max.set(i.LOD,h,e,t,o.transform.transform),o.options.store===s.ALL){const r=new n(o.results.min.ray);r.set(i.LOD,h,e,t,o.transform.transform),o.results.all.push(r)}}class l{constructor(e,t=null){this.geometry=e,this.textures=t}get material(){return this.geometry.material}get numTriangles(){return this.geometry.numTriangles}}class f{constructor(t,r,s){this.components=t,this.minScreenSpaceRadius=r,this.pivotOffset=s;const n=e(this.components.map((e=>e.geometry)));this.numVertices=n.reduce(((e,t)=>e+t.numVertices),0)}}class h{constructor(e){this.levels=e,this.levels.sort(((e,t)=>e.minScreenSpaceRadius===t.minScreenSpaceRadius?e.numVertices-t.numVertices:e.minScreenSpaceRadius-t.minScreenSpaceRadius))}getMaterials(){const t=[];return this.levels.forEach((e=>e.components.forEach((e=>t.push(e.geometry.material))))),e(t)}getTextures(){const t=new Array;return this.levels.forEach((e=>e.components.forEach((e=>{null!=e.textures&&t.push(...e.textures)})))),e(t)}getGeometries(){const t=new Array;return this.levels.forEach((e=>e.components.forEach((e=>{t.push(e.geometry)})))),e(t)}getEngineGeometries(){return this.getGeometries().map((e=>e.engineGeometry)).filter((e=>null!=e))}computeUsedMemory(){const e=this.getGeometries(),t=this.getTextures(),r=e.reduce(((e,t)=>e+t.computeUsedMemory()),0);return t.reduce(((e,t)=>e+t.usedMemory),0)+r}}export{a as LodComponentEngineGeometry,m as LodComponentRenderGeometry,l as LodComponentResources,f as LodLevelResources,h as LodResources};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport\"../../../../core/has.js\";import{cgToGIS as e,createDiamondGeometry as n,createTetrahedronGeometry as s,createCylinderGeometry as a,createConeGeometry as c,createBoxGeometry as i,createPolySphereGeometry as t}from\"../../webgl-engine/lib/GeometryUtil.js\";import{LodResources as r,LodLevelResources as o,LodComponentResources as u,LodComponentEngineGeometry as d}from\"../../webgl-engine/lib/lodRendering/LodResources.js\";function S(e){switch(e){case\"sphere\":case\"cube\":case\"diamond\":case\"cylinder\":case\"cone\":case\"inverted-cone\":case\"tetrahedron\":return!0}return!1}function l(S,l){const p=(n,s,a=!1)=>new r(n.map((n=>{const c=s(n.tesselation);return a&&e(c),new o([new u(new d(c))],n.minScreenSpaceRadius)})));switch(S){case\"sphere\":return p([{tesselation:0,minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],(e=>t(l,.5,e,!0)));case\"cube\":return p([{tesselation:0,minScreenSpaceRadius:0}],(()=>i(l,1)));case\"cone\":return p(m,(e=>c(l,1,.5,e,!1)),!0);case\"inverted-cone\":return p(m,(e=>c(l,1,.5,e,!0)),!0);case\"cylinder\":return p(m,(e=>a(l,1,.5,e,[0,0,1],[0,0,.5])));case\"tetrahedron\":return p([{tesselation:0,minScreenSpaceRadius:0}],(()=>s(l,1)),!0);case\"diamond\":return p([{tesselation:0,minScreenSpaceRadius:0}],(()=>n(l,1)),!0);default:return}}const m=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];export{S as isValidPrimitive,l as primitiveLodResources};\r\n"],
  "mappings": "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",
  "names": ["e", "s", "i", "m", "a", "r", "c", "l", "f", "h", "t", "e", "l", "S", "p", "s", "a", "n", "c", "m"]
}
