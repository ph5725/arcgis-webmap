{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/BitmapTile.js", "../../@arcgis/core/views/2d/engine/BitmapTileContainer.js", "../../@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js", "../../@arcgis/core/views/2d/layers/support/imageUtils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{create as e}from\"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{Bitmap as t}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(e,s,r,i,a,n,o=null){super(e,s,r,i,a,n),this.bitmap=new t(o),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){this.bitmap.beforeRender(e),super.beforeRender(e)}afterRender(e){this.bitmap.afterRender(e),super.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{displayViewScreenMat3:e(),tileMat3:e()}}setTransform(e){super.setTransform(e),this.bitmap.transforms.displayViewScreenMat3=this.transforms.displayViewScreenMat3}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import n from\"./webgl/TileContainer.js\";import{BitmapTechnique as r}from\"./webgl/shaderGraph/techniques/bitmap/BitmapTechnique.js\";class s extends n{constructor(){super(...arguments),this._bitmapTechnique=null}get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(t){const n=this.tileInfoView.getTileBounds(e(),t),r=this.tileInfoView.getTileResolution(t.level),[s,o]=this.tileInfoView.tileInfo.size;return new i(t,r,n[0],n[3],s,o)}onAttach(){super.onAttach(),this._bitmapTechnique=new r}onDetach(){super.onDetach(),this._bitmapTechnique?.shutdown(),this._bitmapTechnique=null}renderChildren(e){if(super.renderChildren(e),!this.visible||e.drawPhase!==t.MAP||null==this._bitmapTechnique)return;const i=this.children.map((e=>e.bitmap));this._bitmapTechnique.render(e,{bitmaps:i})}}export{s as BitmapTileContainer};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return s=i([e(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAIqL,IAAMA,KAAN,cAAgBA,GAAC;AAAA,EAAC,YAAYC,IAAEC,IAAEF,IAAEG,IAAEC,IAAEC,IAAEC,KAAE,MAAK;AAAC,UAAML,IAAEC,IAAEF,IAAEG,IAAEC,IAAEC,EAAC,GAAE,KAAK,SAAO,IAAI,EAAEC,EAAC,GAAE,KAAK,OAAO,aAAW,CAACF,IAAEC,EAAC,GAAE,KAAK,OAAO,KAAK,WAAW,MAAI,KAAK,MAAM,CAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,UAAM,QAAQ,GAAE,KAAK,OAAO,QAAQ;AAAA,EAAC;AAAA,EAAC,aAAaJ,IAAE;AAAC,SAAK,OAAO,aAAaA,EAAC,GAAE,MAAM,aAAaA,EAAC;AAAA,EAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,SAAK,OAAO,YAAYA,EAAC,GAAE,MAAM,YAAYA,EAAC;AAAA,EAAC;AAAA,EAAC,IAAI,WAAWA,IAAE;AAAC,SAAK,OAAO,aAAWA;AAAA,EAAC;AAAA,EAAC,IAAI,aAAY;AAAC,WAAO,KAAK,OAAO;AAAA,EAAU;AAAA,EAAC,oBAAmB;AAAC,WAAM,EAAC,uBAAsB,EAAE,GAAE,UAAS,EAAE,EAAC;AAAA,EAAC;AAAA,EAAC,aAAaA,IAAE;AAAC,UAAM,aAAaA,EAAC,GAAE,KAAK,OAAO,WAAW,wBAAsB,KAAK,WAAW;AAAA,EAAqB;AAAA,EAAC,WAAU;AAAC,SAAK,OAAO,QAAM,KAAK;AAAA,EAAK;AAAA,EAAC,WAAU;AAAC,SAAK,WAAS,KAAK,OAAO,QAAM;AAAA,EAAK;AAAC;;;ACAtlB,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,mBAAiB;AAAA,EAAI;AAAA,EAAC,IAAI,uBAAsB;AAAC,WAAO,KAAK,SAAS,KAAM,CAAAM,OAAG,eAAaA,GAAE,OAAO,aAAc;AAAA,EAAC;AAAA,EAAC,WAAWC,IAAE;AAAC,UAAMC,KAAE,KAAK,aAAa,cAAc,EAAE,GAAED,EAAC,GAAEE,KAAE,KAAK,aAAa,kBAAkBF,GAAE,KAAK,GAAE,CAACG,IAAEC,EAAC,IAAE,KAAK,aAAa,SAAS;AAAK,WAAO,IAAIF,GAAEF,IAAEE,IAAED,GAAE,CAAC,GAAEA,GAAE,CAAC,GAAEE,IAAEC,EAAC;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,UAAM,SAAS,GAAE,KAAK,mBAAiB,IAAI;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,UAAM,SAAS,GAAE,KAAK,kBAAkB,SAAS,GAAE,KAAK,mBAAiB;AAAA,EAAI;AAAA,EAAC,eAAeL,IAAE;AAAC,QAAG,MAAM,eAAeA,EAAC,GAAE,CAAC,KAAK,WAASA,GAAE,cAAY,EAAE,OAAK,QAAM,KAAK,iBAAiB;AAAO,UAAMM,KAAE,KAAK,SAAS,IAAK,CAAAN,OAAGA,GAAE,MAAO;AAAE,SAAK,iBAAiB,OAAOA,IAAE,EAAC,SAAQM,GAAC,CAAC;AAAA,EAAC;AAAC;;;ACAxpB,IAAMC,KAAE,CAAAA,OAAG;AAAC,MAAIC,KAAE,cAAcD,GAAC;AAAA,IAAC,SAAQ;AAAC,WAAK,KAAK,SAAS,OAAO,GAAG,KAAK,MAAM,KAAK,2BAA2B,GAAE,KAAK,cAAY,IAAI,EAAE,KAAK,aAAa,GAAE,KAAK,UAAU,SAAS,KAAK,WAAW;AAAA,IAAC;AAAA,IAAC,SAAQ;AAAC,WAAK,UAAU,YAAY,KAAK,WAAW,GAAE,KAAK,aAAa,kBAAkB,GAAE,KAAK,cAAY;AAAA,IAAI;AAAA,EAAC;AAAE,SAAOC,KAAE,EAAE,CAAC,EAAE,4CAA4C,CAAC,GAAEA,EAAC,GAAEA;AAAC;;;ACAtsB,SAASC,GAAEA,IAAE;AAAC,SAAOA,cAAa,mBAAiBA,GAAE,eAAaA,GAAE;AAAK;AAAC,SAAS,EAAEA,IAAE;AAAC,SAAOA,cAAa,mBAAiBA,GAAE,gBAAcA,GAAE;AAAM;AAAC,SAAS,EAAEC,IAAE,GAAEC,IAAEC,IAAE;AAAC,MAAGD,GAAE,UAAQC,GAAE,MAAM,QAAO;AAAE,QAAMC,KAAEH,GAAE,SAAS,MAAKI,KAAEJ,GAAE,kBAAkBC,GAAE,KAAK,GAAE,IAAED,GAAE,kBAAkBE,GAAE,KAAK;AAAE,MAAI,IAAEF,GAAE,aAAaE,GAAE,KAAK;AAAE,QAAM,IAAE,EAAE,cAAcA,GAAE,GAAG,GAAE,IAAE,EAAE,WAAWA,GAAE,GAAG;AAAE,MAAEF,GAAE,aAAaC,GAAE,KAAK;AAAE,QAAM,IAAE,EAAE,cAAcA,GAAE,GAAG,GAAEI,KAAE,EAAE,WAAWJ,GAAE,GAAG,GAAE,IAAEF,GAAE,CAAC,IAAEI,GAAE,CAAC,GAAE,IAAE,EAAE,CAAC,IAAEA,GAAE,CAAC,GAAE,IAAE,KAAK,MAAM,MAAI,IAAE,KAAGC,GAAE,GAAE,IAAE,KAAK,MAAM,KAAG,EAAE,IAAEC,MAAGD,GAAE,GAAE,IAAE,KAAK,MAAM,IAAED,GAAE,CAAC,KAAG,IAAEC,GAAE,GAAE,IAAE,KAAK,MAAM,IAAED,GAAE,CAAC,KAAG,IAAEC,GAAE,GAAE,IAAE,EAAED,EAAC;AAAE,SAAO,EAAE,WAAW,IAAI,EAAE,UAAU,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAEA,GAAE,CAAC,GAAEA,GAAE,CAAC,CAAC,GAAE;AAAC;AAAC,SAAS,EAAEJ,IAAE;AAAC,QAAMO,KAAE,SAAS,cAAc,QAAQ;AAAE,SAAM,CAACA,GAAE,OAAMA,GAAE,MAAM,IAAEP,IAAEO;AAAC;",
  "names": ["r", "e", "s", "i", "a", "n", "o", "e", "t", "n", "r", "s", "o", "i", "r", "s", "e", "n", "r", "u", "i", "a", "s", "t"]
}
