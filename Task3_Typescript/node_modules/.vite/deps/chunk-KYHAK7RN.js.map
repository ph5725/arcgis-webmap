{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/GraphicInstanceStore.js", "../../@arcgis/core/views/2d/layers/graphics/GraphicBoundsRenderer.js", "../../@arcgis/core/views/2d/layers/graphics/AGraphicContainer.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{FeatureTechniqueInstance as e}from\"./TechniqueInstance.js\";import{Techniques as i}from\"./TechniqueRegistry.js\";import{castInstanceId as t}from\"./mesh/instanceIdUtils.js\";let n=0;function a(i,a){return new e(t(n++),i,a)}const o={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null};class l{constructor(){this.instances={fill:a(i.fill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),marker:a(i.marker,{uniforms:o,optionalAttributes:{zoomRange:!0}}),line:a(i.line,{uniforms:o,optionalAttributes:{zoomRange:!0}}),text:a(i.text,{uniforms:o,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1,visibility:!1}}),outlineFill:a(i.outlineFill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),complexFill:a(i.complexFill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),gradientFill:a(i.gradientFill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),texturedLine:a(i.texturedLine,{uniforms:o,optionalAttributes:{zoomRange:!0}}),gradientStroke:a(i.gradientStroke,{uniforms:o,optionalAttributes:{zoomRange:!0}}),animatedMarker:a(i.animatedMarker,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),animatedMarkerShift:a(i.animatedMarkerShift,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!0,lineLength:!0}}),animatedPolygon:a(i.animatedFill,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),animatedPolyline:a(i.animatedLine,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,accumulatedDistance:!0,segmentDirection:!0,normal:!0,lineLength:!1}}),animatedPolylineShift:a(i.animatedLine,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,accumulatedDistance:!0,segmentDirection:!0,normal:!0,lineLength:!0}})},this._instancesById=Object.values(this.instances).reduce(((e,i)=>(e.set(i.instanceId,i),e)),new Map)}getInstance(e){return this._instancesById.get(e)}}export{l as GraphicInstanceStore};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{disposeMaybe as t}from\"../../../../core/maybe.js\";import{identity as e,multiply as r,translate as i,scale as s,rotate as o}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{fromValues as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{fromValues as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import{normalizeMapX as f}from\"../../../../geometry/support/normalizeUtils.js\";import{DisplayObject as m}from\"../../engine/DisplayObject.js\";import{createProgramDescriptor as c}from\"../../engine/webgl/Utils.js\";import{BufferObject as u}from\"../../../webgl/BufferObject.js\";import{BlendFactor as _,PrimitiveType as h,DataType as p,Usage as d}from\"../../../webgl/enums.js\";import{VertexArrayObject as g}from\"../../../webgl/VertexArrayObject.js\";const v=Math.PI/180,x=4;class b extends m{constructor(t){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=a(),this._localOrigin={x:0,y:0},this._getBounds=t}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=t(this._program)}doRender(t){const{context:e}=t,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,r),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(_.ONE,_.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);const i=this._program;e.bindVAO(this._vao),e.useProgram(i),i.setUniformMatrix3fv(\"u_dvsMat3\",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(h.LINES,8*r.length,p.UNSIGNED_INT,0),e.bindVAO()}_createTransforms(){return{displayViewScreenMat3:a()}}_createShaderProgram(t){if(this._program)return;const e=\"precision highp float;\\n        uniform mat3 u_dvsMat3;\\n\\n        attribute vec2 a_position;\\n\\n        void main() {\\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\\n        }\",r=\"precision mediump float;\\n      void main() {\\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\\n      }\";this._program=t.programCache.acquire(e,r,y().attributes)}_updateMatricesAndLocalOrigin(t){const{state:a}=t,{displayMat3:m,size:c,resolution:u,pixelRatio:_,rotation:h,viewpoint:p}=a,d=v*h,{x:g,y:x}=p.targetGeometry,b=f(g,a.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const y=_*c[0],B=_*c[1],M=u*y,j=u*B,A=e(this._dvsMat3);r(A,A,m),i(A,A,n(y/2,B/2)),s(A,A,l(c[0]/M,-B/j,1)),o(A,A,-d)}_updateBufferData(t,e){const{x:r,y:i}=this._localOrigin,s=2*x*e.length,o=new Float32Array(s),a=new Uint32Array(8*e.length);let n=0,l=0;for(const f of e)f&&(o[2*n]=f[0]-r,o[2*n+1]=f[1]-i,o[2*n+2]=f[0]-r,o[2*n+3]=f[3]-i,o[2*n+4]=f[2]-r,o[2*n+5]=f[3]-i,o[2*n+6]=f[2]-r,o[2*n+7]=f[1]-i,a[l]=n+0,a[l+1]=n+3,a[l+2]=n+3,a[l+3]=n+2,a[l+4]=n+2,a[l+5]=n+1,a[l+6]=n+1,a[l+7]=n+0,n+=4,l+=8);if(this._vertexBuffer?this._vertexBuffer.setData(o.buffer):this._vertexBuffer=u.createVertex(t,d.DYNAMIC_DRAW,o.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=u.createIndex(t,d.DYNAMIC_DRAW,a),!this._vao){const e=y();this._vao=new g(t,e.attributes,e.bufferLayouts,new Map([[\"geometry\",this._vertexBuffer]]),this._indexBuffer)}}}const y=()=>c(\"bounds\",{geometry:[{location:0,name:\"a_position\",count:2,type:p.FLOAT}]});export{b as default};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{destroyMaybe as e}from\"../../../../core/maybe.js\";import{AFeatureContainer as t}from\"../../engine/AFeatureContainer.js\";import{FeatureBatchingStrategy as n}from\"../../engine/webgl/enums.js\";import{GraphicInstanceStore as r}from\"../../engine/webgl/shaderGraph/techniques/GraphicInstanceStore.js\";import s from\"./GraphicBoundsRenderer.js\";class i extends t{constructor(e){super(e),this._instanceStore=new r,this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=e(this._boundsRenderer)}get instanceStore(){return this._instanceStore}enableRenderingBounds(e){this._boundsRenderer=new s(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.onMessage(t),this.contains(e)||this.addChild(e),this.requestRender()}_renderChildren(e,t){e.selection=t;for(const r of this.children){if(!r.visible)continue;const t=r.getDisplayList(this._instanceStore,n.STRICT_ORDER);t?.render(e)}}}export{i as AGraphicContainer};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIiL,IAAIA,KAAE;AAAE,SAAS,EAAEC,IAAEC,IAAE;AAAC,SAAO,IAAID,GAAEE,GAAEH,IAAG,GAAEC,IAAEC,EAAC;AAAC;AAAC,IAAME,KAAE,EAAC,qBAAoB,MAAK,uBAAsB,MAAK,+BAA8B,MAAK,8BAA6B,MAAK,yBAAwB,MAAK,6BAA4B,MAAK,wBAAuB,MAAK,qCAAoC,KAAI;AAAE,IAAM,IAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,YAAU,EAAC,MAAK,EAAE,EAAE,MAAK,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,QAAO,EAAE,EAAE,QAAO,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,MAAK,EAAE,EAAE,MAAK,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,MAAK,EAAE,EAAE,MAAK,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,MAAG,iBAAgB,OAAG,WAAU,OAAG,YAAW,MAAE,EAAC,CAAC,GAAE,aAAY,EAAE,EAAE,aAAY,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,aAAY,EAAE,EAAE,aAAY,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,cAAa,EAAE,EAAE,cAAa,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,cAAa,EAAE,EAAE,cAAa,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,gBAAe,EAAE,EAAE,gBAAe,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,KAAE,EAAC,CAAC,GAAE,gBAAe,EAAE,EAAE,gBAAe,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,MAAG,uBAAsB,OAAG,YAAW,MAAE,EAAC,CAAC,GAAE,qBAAoB,EAAE,EAAE,qBAAoB,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,MAAG,uBAAsB,MAAG,YAAW,KAAE,EAAC,CAAC,GAAE,iBAAgB,EAAE,EAAE,cAAa,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,MAAG,uBAAsB,OAAG,YAAW,MAAE,EAAC,CAAC,GAAE,kBAAiB,EAAE,EAAE,cAAa,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,MAAG,uBAAsB,OAAG,qBAAoB,MAAG,kBAAiB,MAAG,QAAO,MAAG,YAAW,MAAE,EAAC,CAAC,GAAE,uBAAsB,EAAE,EAAE,cAAa,EAAC,UAASA,IAAE,oBAAmB,EAAC,WAAU,MAAG,uBAAsB,OAAG,qBAAoB,MAAG,kBAAiB,MAAG,QAAO,MAAG,YAAW,KAAE,EAAC,CAAC,EAAC,GAAE,KAAK,iBAAe,OAAO,OAAO,KAAK,SAAS,EAAE,OAAQ,CAACC,IAAEJ,QAAKI,GAAE,IAAIJ,GAAE,YAAWA,EAAC,GAAEI,KAAI,oBAAI,KAAG;AAAA,EAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,WAAO,KAAK,eAAe,IAAIA,EAAC;AAAA,EAAC;AAAC;;;ACAhsC,IAAM,IAAE,KAAK,KAAG;AAAhB,IAAoB,IAAE;AAAE,IAAM,IAAN,cAAgBC,GAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAM,GAAE,KAAK,WAAS,MAAK,KAAK,OAAK,MAAK,KAAK,gBAAc,MAAK,KAAK,eAAa,MAAK,KAAK,WAAS,EAAE,GAAE,KAAK,eAAa,EAAC,GAAE,GAAE,GAAE,EAAC,GAAE,KAAK,aAAW;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,SAAO,KAAK,KAAK,QAAQ,GAAE,KAAK,OAAK,MAAK,KAAK,gBAAc,MAAK,KAAK,eAAa,OAAM,KAAK,WAAS,EAAE,KAAK,QAAQ;AAAA,EAAC;AAAA,EAAC,SAAS,GAAE;AAAC,UAAK,EAAC,SAAQA,GAAC,IAAE,GAAEC,KAAE,KAAK,WAAW;AAAE,QAAGA,GAAE,SAAO,EAAE;AAAO,SAAK,qBAAqBD,EAAC,GAAE,KAAK,8BAA8B,CAAC,GAAE,KAAK,kBAAkBA,IAAEC,EAAC,GAAED,GAAE,mBAAmB,IAAE,GAAEA,GAAE,oBAAoB,KAAE,GAAEA,GAAE,oBAAoB,CAAC,GAAEA,GAAE,sBAAsB,KAAE,GAAEA,GAAE,iBAAiB,EAAE,KAAI,EAAE,mBAAmB,GAAEA,GAAE,aAAa,MAAG,MAAG,MAAG,IAAE;AAAE,UAAME,KAAE,KAAK;AAAS,IAAAF,GAAE,QAAQ,KAAK,IAAI,GAAEA,GAAE,WAAWE,EAAC,GAAEA,GAAE,oBAAoB,aAAY,KAAK,QAAQ,GAAEF,GAAE,GAAG,UAAU,CAAC,GAAEA,GAAE,aAAa,EAAE,OAAM,IAAEC,GAAE,QAAO,EAAE,cAAa,CAAC,GAAED,GAAE,QAAQ;AAAA,EAAC;AAAA,EAAC,oBAAmB;AAAC,WAAM,EAAC,uBAAsB,EAAE,EAAC;AAAA,EAAC;AAAA,EAAC,qBAAqB,GAAE;AAAC,QAAG,KAAK,SAAS;AAAO,UAAMA,KAAE,uPAAsPC,KAAE;AAA6G,SAAK,WAAS,EAAE,aAAa,QAAQD,IAAEC,IAAE,EAAE,EAAE,UAAU;AAAA,EAAC;AAAA,EAAC,8BAA8B,GAAE;AAAC,UAAK,EAAC,OAAME,GAAC,IAAE,GAAE,EAAC,aAAY,GAAE,MAAK,GAAE,YAAWC,IAAE,YAAW,GAAE,UAASC,IAAE,WAAU,EAAC,IAAEF,IAAE,IAAE,IAAEE,IAAE,EAAC,GAAE,GAAE,GAAEC,GAAC,IAAE,EAAE,gBAAeC,KAAE,EAAE,GAAEJ,GAAE,gBAAgB;AAAE,SAAK,aAAa,IAAEI,IAAE,KAAK,aAAa,IAAED;AAAE,UAAME,KAAE,IAAE,EAAE,CAAC,GAAE,IAAE,IAAE,EAAE,CAAC,GAAEC,KAAEL,KAAEI,IAAE,IAAEJ,KAAE,GAAEM,KAAE,EAAE,KAAK,QAAQ;AAAE,MAAEA,IAAEA,IAAE,CAAC,GAAE,EAAEA,IAAEA,IAAET,GAAEO,KAAE,GAAE,IAAE,CAAC,CAAC,GAAE,EAAEE,IAAEA,IAAET,GAAE,EAAE,CAAC,IAAEQ,IAAE,CAAC,IAAE,GAAE,CAAC,CAAC,GAAE,EAAEC,IAAEA,IAAE,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAkB,GAAEV,IAAE;AAAC,UAAK,EAAC,GAAEC,IAAE,GAAEC,GAAC,IAAE,KAAK,cAAa,IAAE,IAAE,IAAEF,GAAE,QAAOW,KAAE,IAAI,aAAa,CAAC,GAAER,KAAE,IAAI,YAAY,IAAEH,GAAE,MAAM;AAAE,QAAIY,KAAE,GAAEC,KAAE;AAAE,eAAUC,MAAKd,GAAE,CAAAc,OAAIH,GAAE,IAAEC,EAAC,IAAEE,GAAE,CAAC,IAAEb,IAAEU,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEZ,IAAES,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEb,IAAEU,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEZ,IAAES,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEb,IAAEU,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEZ,IAAES,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEb,IAAEU,GAAE,IAAEC,KAAE,CAAC,IAAEE,GAAE,CAAC,IAAEZ,IAAEC,GAAEU,EAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAET,GAAEU,KAAE,CAAC,IAAED,KAAE,GAAEA,MAAG,GAAEC,MAAG;AAAG,QAAG,KAAK,gBAAc,KAAK,cAAc,QAAQF,GAAE,MAAM,IAAE,KAAK,gBAAc,EAAE,aAAa,GAAE,EAAE,cAAaA,GAAE,MAAM,GAAE,KAAK,eAAa,KAAK,aAAa,QAAQR,EAAC,IAAE,KAAK,eAAa,EAAE,YAAY,GAAE,EAAE,cAAaA,EAAC,GAAE,CAAC,KAAK,MAAK;AAAC,YAAMH,KAAE,EAAE;AAAE,WAAK,OAAK,IAAIW,GAAE,GAAEX,GAAE,YAAWA,GAAE,eAAc,oBAAI,IAAI,CAAC,CAAC,YAAW,KAAK,aAAa,CAAC,CAAC,GAAE,KAAK,YAAY;AAAA,IAAC;AAAA,EAAC;AAAC;AAAC,IAAM,IAAE,MAAI,EAAE,UAAS,EAAC,UAAS,CAAC,EAAC,UAAS,GAAE,MAAK,cAAa,OAAM,GAAE,MAAK,EAAE,MAAK,CAAC,EAAC,CAAC;;;ACA5hG,IAAMe,KAAN,cAAgB,EAAC;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,iBAAe,IAAI,KAAE,KAAK,iBAAe,MAAI;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,UAAM,QAAQ,GAAE,KAAK,kBAAgB,EAAE,KAAK,eAAe;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAe;AAAC,WAAO,KAAK;AAAA,EAAc;AAAA,EAAC,sBAAsBA,IAAE;AAAC,SAAK,kBAAgB,IAAI,EAAEA,EAAC,GAAE,KAAK,cAAc;AAAA,EAAC;AAAA,EAAC,IAAI,eAAc;AAAC,WAAO,KAAK,eAAe;AAAA,EAAC;AAAA,EAAC,WAAWA,IAAE,GAAE;AAAC,IAAAA,GAAE,UAAU,CAAC,GAAE,KAAK,SAASA,EAAC,KAAG,KAAK,SAASA,EAAC,GAAE,KAAK,cAAc;AAAA,EAAC;AAAA,EAAC,gBAAgBA,IAAE,GAAE;AAAC,IAAAA,GAAE,YAAU;AAAE,eAAUC,MAAK,KAAK,UAAS;AAAC,UAAG,CAACA,GAAE,QAAQ;AAAS,YAAMC,KAAED,GAAE,eAAe,KAAK,gBAAe,EAAE,YAAY;AAAE,MAAAC,IAAG,OAAOF,EAAC;AAAA,IAAC;AAAA,EAAC;AAAC;",
  "names": ["n", "i", "a", "r", "o", "e", "e", "r", "i", "a", "u", "h", "x", "b", "y", "M", "A", "o", "n", "l", "f", "i", "e", "r", "t"]
}
