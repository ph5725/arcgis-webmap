{
  "version": 3,
  "sources": ["../../@arcgis/core/views/support/projectionUtils.js", "../../@arcgis/core/geometry/support/heightModelInfoUtils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{isLoaded as e,canProjectWithoutEngine as r,project as n,load as o,projectWithZConversion as i}from\"../../geometry/projectionUtils.js\";let a,c=null;async function l(e){c||(c=import(\"../../portal/support/geometryServiceUtils.js\").then((t=>a=t))),await c,t(e)}async function s(t,i,c,p){if(!t)return null;const u=t.spatialReference;return e()||r(u,i)?n(t,i):a?a.projectGeometry(t,i,c,p):(await Promise.race([l(p),o(p)]),s(t,i,c,p))}async function p(t,e){try{return t?.spatialReference?await i(t,e):null}catch{return null}}export{s as projectWithEngineOrService,p as projectWithZConversionSilent};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport\"../../core/has.js\";import e from\"../../core/Error.js\";import t from\"../HeightModelInfo.js\";import{parse as n}from\"../../layers/support/arcgisLayerUrl.js\";function i(n,i){if(!n)return null;if(!s(n))return new e(\"webscene:unsupported-height-model-info\",\"The vertical coordinate system of the scene is not supported\",{heightModelInfo:n});const a=n.heightUnit,r=t.deriveUnitFromSR(n,i).heightUnit;return a!==r?new e(\"webscene:incompatible-height-unit\",`The vertical units of the scene (${a}) must match the horizontal units of the scene (${r})`,{verticalUnit:a,horizontalUnit:r}):null}function a(n,i,a){const s=l(n),h=i,u=r(s,h,a);if(s){const i=t.deriveUnitFromSR(s,n.spatialReference).heightUnit;if(!a&&i!==s.heightUnit){const t=new e(\"layerview:unmatched-height-unit\",`The vertical units of the layer must match the horizontal units (${i})`,{horizontalUnit:i});return new e(\"layerview:unsupported-height-model-info\",\"The vertical coordinate system of the layer is not supported\",{heightModelInfo:s,error:t})}}if(!c(n)||u===o.Unsupported)return new e(\"layerview:unsupported-height-model-info\",\"The vertical coordinate system of the layer is not supported\",{heightModelInfo:s});switch(u){case o.Units:{const t=s?.heightUnit||\"unknown\",n=h?.heightUnit||\"unknown\",i=new e(\"layerview:incompatible-height-unit\",`The vertical units of the layer (${t}) must match the vertical units of the scene (${n})`,{layerUnit:t,sceneUnit:n});return new e(\"layerview:incompatible-height-model-info\",\"The vertical coordinate system of the layer is incompatible with the scene\",{layerHeightModelInfo:s,sceneHeightModelInfo:h,error:i})}case o.HeightModel:{const t=s?.heightModel||\"unknown\",n=h?.heightModel||\"unknown\",i=new e(\"layerview:incompatible-height-model\",`The height model of the layer (${t}) must match the height model of the scene (${n})`,{layerHeightModel:t,sceneHeightModel:n});return new e(\"layerview:incompatible-height-model-info\",\"The vertical coordinate system of the layer is incompatible with the scene\",{layerHeightModelInfo:s,sceneHeightModelInfo:h,error:i})}case o.CRS:{const t=s?.vertCRS||\"unknown\",n=h?.vertCRS||\"unknown\",i=new e(\"layerview:incompatible-vertical-datum\",`The vertical datum of the layer (${t}) must match the vertical datum of the scene (${n})`,{layerDatum:t,sceneDatum:n});return new e(\"layerview:incompatible-height-model-info\",\"The vertical coordinate system of the layer is incompatible with the scene\",{layerHeightModelInfo:s,sceneHeightModelInfo:h,error:i})}}return null}function r(e,t,n){if(!s(e)||!s(t))return o.Unsupported;if(null==e||null==t)return o.Ok;if(!n&&e.heightUnit!==t.heightUnit)return o.Units;if(e.heightModel!==t.heightModel)return o.HeightModel;switch(e.heightModel){case\"gravity-related-height\":return o.Ok;case\"ellipsoidal\":return e.vertCRS===t.vertCRS?o.Ok:o.CRS;default:return o.Unsupported}}var o;function s(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function c(e){return\"heightModelInfo\"in e&&null!=e.heightModelInfo||null!=e.spatialReference||!d(e)}function l(e){if(\"integrated-mesh-3dtiles\"===e.type)return null;const i=e.url?n(e.url):void 0,a=e.spatialReference?.vcsWkid;return!(null==a&&null!=i&&\"ImageServer\"===i.serverType)&&h(e)&&e.heightModelInfo?e.heightModelInfo:d(e)?t.deriveUnitFromSR(p,e.spatialReference):null}function h(e){return\"heightModelInfo\"in e}function u(e){if(\"unknown\"===e.type||!(\"capabilities\"in e))return!1;switch(e.type){case\"catalog\":case\"catalog-footprint\":case\"csv\":case\"feature\":case\"geojson\":case\"subtype-group\":case\"ogc-feature\":case\"oriented-imagery\":case\"wfs\":case\"knowledge-graph-sublayer\":return!0;default:return!1}}function d(e){return u(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):f(e)}function g(e){return null!=e.layers||f(e)||u(e)||h(e)}function f(e){switch(e.type){case\"building-scene\":case\"elevation\":case\"integrated-mesh\":case\"integrated-mesh-3dtiles\":case\"point-cloud\":case\"scene\":case\"voxel\":return!0;case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"catalog\":case\"catalog-footprint\":case\"catalog-dynamic-group\":case\"csv\":case\"dimension\":case\"geojson\":case\"feature\":case\"subtype-group\":case\"geo-rss\":case\"graphics\":case\"group\":case\"imagery\":case\"imagery-tile\":case\"kml\":case\"knowledge-graph\":case\"link-chart\":case\"knowledge-graph-sublayer\":case\"line-of-sight\":case\"map-image\":case\"map-notes\":case\"media\":case\"ogc-feature\":case\"open-street-map\":case\"oriented-imagery\":case\"parquet\":case\"route\":case\"stream\":case\"tile\":case\"unknown\":case\"unsupported\":case\"vector-tile\":case\"video\":case\"viewshed\":case\"wcs\":case\"web-tile\":case\"wfs\":case\"wms\":case\"wmts\":case null:return!1}return!1}!function(e){e[e.Ok=0]=\"Ok\",e[e.Units=1]=\"Units\",e[e.HeightModel=2]=\"HeightModel\",e[e.CRS=3]=\"CRS\",e[e.Unsupported=4]=\"Unsupported\"}(o||(o={}));const p=new t({heightModel:\"gravity-related-height\"});export{l as deriveHeightModelInfoFromLayer,a as rejectLayerError,g as supportsHeightModelInfo,i as validateWebSceneError};\r\n"],
  "mappings": "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",
  "names": ["s", "c", "p", "u", "a", "s", "l", "h", "u", "i", "c", "n", "p"]
}
