{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/effects/EffectView.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import has from\"../../core/has.js\";import{clone as s}from\"../../core/lang.js\";import r from\"../../core/Logger.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import{parse as c}from\"./parser.js\";import{canInterpolateEffects as o,normalizeEffects as f}from\"./utils.js\";const l=-1;let a=class extends e{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=has(\"mapview-transitions-duration\"),this.effects=[]}set effect(t){if(this._get(\"effect\")!==(t=t||\"\")){this._set(\"effect\",t);try{this._transitionTo(h(t))}catch(e){this._transitionTo([]),r.getLogger(this).warn(\"Invalid Effect\",{effect:t,error:e})}}}get final(){return this._final}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&u(this._current,h(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}endTransition(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&u(this._current,t,this.scale)?(this._final=t,this._to=s(t),_(this._current,this._to,this.scale),this._from=s(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set(\"effects\",this._current[0]?s(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const t=this._current[s],r=this._from[s],i=this._to[s];t.scale=p(r.scale,i.scale,e);for(let s=0;s<t.effects.length;s++){const n=t.effects[s],c=r.effects[s],o=i.effects[s];n.interpolate(c,o,e)}}1===e&&(this._current=this._final,this._set(\"effects\",this._current[0]?s(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set(\"scale\",t),0===this._current.length)return;const e=this._current,s=this._current.length-1;let r,i,n=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[s].scale)i=r=e[s].effects;else for(let c=0;c<s;c++){const s=e[c],o=e[c+1];if(s.scale>=t&&o.scale<=t){n=(t-s.scale)/(o.scale-s.scale),r=s.effects,i=o.effects;break}}for(let c=0;c<this.effects.length;c++){this.effects[c].interpolate(r[c],i[c],n)}}};function h(t){const e=c(t)||[];return m(e)?[{scale:l,effects:e}]:e}function u(t,e,s){if(!t[0]?.effects||!e[0]?.effects)return!0;return!((t[0]?.scale===l||e[0]?.scale===l)&&(t.length>1||e.length>1)&&s<=0)&&o(t[0].effects,e[0].effects)}function _(t,e,s){const r=t.length>e.length?t:e,i=t.length>e.length?e:t,n=i[i.length-1],c=n?.scale??s,o=n?.effects??[];for(let f=i.length;f<r.length;f++)i.push({scale:c,effects:[...o]});for(let a=0;a<r.length;a++)i[a].scale=i[a].scale===l?s:i[a].scale,r[a].scale=r[a].scale===l?s:r[a].scale,f(i[a].effects,r[a].effects)}function p(t,e,s){return t+(e-t)*s}function m(t){const e=t[0];return!!e&&\"type\"in e}t([i()],a.prototype,\"_to\",void 0),t([i()],a.prototype,\"duration\",void 0),t([i({value:\"\"})],a.prototype,\"effect\",null),t([i({readOnly:!0})],a.prototype,\"effects\",void 0),t([i({readOnly:!0})],a.prototype,\"final\",null),t([i({readOnly:!0})],a.prototype,\"hasEffects\",null),t([i({value:0})],a.prototype,\"scale\",null),t([i({readOnly:!0})],a.prototype,\"transitioning\",null),a=t([n(\"esri.layers.effects.EffectView\")],a);export{a as EffectView,u as canInterpolateEffectStops,h as convertEffectToStops,_ as normalizeEffectStops};\r\n"],
  "mappings": "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",
  "names": ["a", "t", "e", "r", "i", "s", "m"]
}
