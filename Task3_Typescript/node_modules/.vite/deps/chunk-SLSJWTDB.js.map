{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js", "../../@arcgis/core/views/3d/support/engineContent/marker.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as r}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as i}from\"../materials/DefaultTechniqueConfiguration.js\";var s,p;!function(e){e[e.Draped=0]=\"Draped\",e[e.Screen=1]=\"Screen\",e[e.World=2]=\"World\",e[e.COUNT=3]=\"COUNT\"}(s||(s={})),function(e){e[e.Center=0]=\"Center\",e[e.Tip=1]=\"Tip\",e[e.COUNT=2]=\"COUNT\"}(p||(p={}));class a extends i{constructor(){super(...arguments),this.space=s.Screen,this.anchor=p.Center,this.occluder=!1,this.writeDepth=!1,this.hideOnShortSegments=!1,this.hasCap=!1,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=t.None,this.emissionSource=o.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.objectAndLayerIdColorInstanced=!1,this.overlayEnabled=!1,this.snowCover=!1}get draped(){return this.space===s.Draped}}e([r({count:s.COUNT})],a.prototype,\"space\",void 0),e([r({count:p.COUNT})],a.prototype,\"anchor\",void 0),e([r()],a.prototype,\"occluder\",void 0),e([r()],a.prototype,\"writeDepth\",void 0),e([r()],a.prototype,\"hideOnShortSegments\",void 0),e([r()],a.prototype,\"hasCap\",void 0),e([r()],a.prototype,\"hasTip\",void 0),e([r()],a.prototype,\"vvSize\",void 0),e([r()],a.prototype,\"vvColor\",void 0),e([r()],a.prototype,\"vvOpacity\",void 0),e([r()],a.prototype,\"hasOccludees\",void 0),e([r()],a.prototype,\"terrainDepthTest\",void 0),e([r()],a.prototype,\"cullAboveTerrain\",void 0);export{p as LineMarkerAnchor,s as LineMarkerSpace,a as LineMarkerTechniqueConfiguration};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{VisualVariables as i}from\"../shading/VisualVariables.glsl.js\";import{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as a}from\"../../shaderModules/FloatPassUniform.js\";import{FloatsPassUniform as t}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as v}from\"../../shaderModules/glsl.js\";import{VertexAttribute as r}from\"../../../lib/VertexAttribute.js\";const o=8;function c(c,l){const{vertex:s,attributes:n}=c;s.uniforms.add(new a(\"intrinsicWidth\",(i=>i.width))),l.vvSize?(n.add(r.SIZEFEATUREATTRIBUTE,\"float\"),s.uniforms.add(new e(\"vvSizeMinSize\",(i=>i.vvSize.minSize)),new e(\"vvSizeMaxSize\",(i=>i.vvSize.maxSize)),new e(\"vvSizeOffset\",(i=>i.vvSize.offset)),new e(\"vvSizeFactor\",(i=>i.vvSize.factor)),new e(\"vvSizeFallback\",(i=>i.vvSize.fallback))),s.code.add(v`float getSize() {\r\nif (isnan(sizeFeatureAttribute)) {\r\nreturn vvSizeFallback.x;\r\n}\r\nreturn intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\r\n}`)):(n.add(r.SIZE,\"float\"),s.code.add(v`float getSize(){\r\nreturn intrinsicWidth * size;\r\n}`)),l.vvOpacity?(n.add(r.OPACITYFEATUREATTRIBUTE,\"float\"),s.constants.add(\"vvOpacityNumber\",\"int\",8),s.uniforms.add(new t(\"vvOpacityValues\",(i=>i.vvOpacity.values),o),new t(\"vvOpacityOpacities\",(i=>i.vvOpacity.opacityValues),o),new a(\"vvOpacityFallback\",(i=>i.vvOpacity.fallback))),s.code.add(v`float interpolateOpacity(float value){\r\nif (isnan(value)) {\r\nreturn vvOpacityFallback;\r\n}\r\nif (value <= vvOpacityValues[0]) {\r\nreturn vvOpacityOpacities[0];\r\n}\r\nfor (int i = 1; i < vvOpacityNumber; ++i) {\r\nif (vvOpacityValues[i] >= value) {\r\nfloat f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\r\nreturn mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\r\n}\r\n}\r\nreturn vvOpacityOpacities[vvOpacityNumber - 1];\r\n}\r\nvec4 applyOpacity( vec4 color ){\r\nreturn vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\r\n}`)):s.code.add(v`vec4 applyOpacity( vec4 color ){\r\nreturn color;\r\n}`),l.vvColor?(c.include(i,l),n.add(r.COLORFEATUREATTRIBUTE,\"float\"),s.code.add(v`vec4 getColor(){\r\nreturn applyOpacity(interpolateVVColor(colorFeatureAttribute));\r\n}`)):(n.add(r.COLOR,\"vec4\"),s.code.add(v`vec4 getColor(){\r\nreturn applyOpacity(color);\r\n}`))}export{c as RibbonVertexPosition};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{createPrimitive as r}from\"./sdfPrimitives.js\";import{PixelFormat as e,TextureWrapMode as t}from\"../../../webgl/enums.js\";import{Texture as o}from\"../../../webgl/Texture.js\";import{TextureDescriptor as i}from\"../../../webgl/TextureDescriptor.js\";const m=64,s=m/2,n=s/5,p=m/n,w=.25;function f(p,w){const f=r(p,m,s,n),u=new i;return u.internalFormat=e.RGBA,u.width=m,u.height=m,u.wrapMode=t.CLAMP_TO_EDGE,new o(w,u,f)}export{f as createMarkerTexture,p as markerSizePerLineWidth,s as markerSymbolSize,m as markerTextureSize,n as markerThickness,w as markerTipThicknessFactor};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{markerSizePerLineWidth as e}from\"../../../../support/engineContent/marker.js\";import{addPixelRatio as r}from\"../util/View.glsl.js\";import{FloatBindUniform as o}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as t}from\"../../shaderModules/glsl.js\";import{LineMarkerSpace as a}from\"../../../shaders/LineMarkerTechniqueConfiguration.js\";function n(n,i){const d=n.vertex;r(d),null==d.uniforms.get(\"markerScale\")&&d.constants.add(\"markerScale\",\"float\",1),d.constants.add(\"markerSizePerLineWidth\",\"float\",e).code.add(t`float getLineWidth() {\r\nreturn max(getSize(), 1.0) * pixelRatio;\r\n}\r\nfloat getScreenMarkerSize() {\r\nreturn markerSizePerLineWidth * markerScale * getLineWidth();\r\n}`),i.space===a.World&&(d.constants.add(\"maxSegmentLengthFraction\",\"float\",.45),d.uniforms.add(new o(\"perRenderPixelRatio\",(e=>e.camera.perRenderPixelRatio))),d.code.add(t`bool areWorldMarkersHidden(vec4 pos, vec4 other) {\r\nvec3 midPoint = mix(pos.xyz, other.xyz, 0.5);\r\nfloat distanceToCamera = length(midPoint);\r\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\r\nfloat worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;\r\nfloat segmentLen = length(pos.xyz - other.xyz);\r\nreturn worldMarkerSize > maxSegmentLengthFraction * segmentLen;\r\n}\r\nfloat getWorldMarkerSize(vec4 pos) {\r\nfloat distanceToCamera = length(pos.xyz);\r\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\r\nreturn getScreenMarkerSize() * screenToWorldRatio;\r\n}`))}export{n as MarkerSizing};\r\n"],
  "mappings": "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",
  "names": ["s", "e", "a", "o", "c", "s", "n", "i", "e", "s", "n", "p", "w", "n", "i", "p", "s", "e"]
}
