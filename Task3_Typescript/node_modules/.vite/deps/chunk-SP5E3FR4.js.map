{
  "version": 3,
  "sources": ["../../@arcgis/core/views/interactive/support/utils.js", "../../@arcgis/core/views/interactive/GraphicManipulator.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{pt2px as o}from\"../../../core/screenUtils.js\";function s(s){let t=0,a=0,e=0;return s?(\"cim\"===s.type&&s.data.symbol&&\"symbolLayers\"in s.data.symbol&&s.data.symbol.symbolLayers&&s.data.symbol.symbolLayers.map((o=>{\"CIMVectorMarker\"===o.type&&o.anchorPoint&&(Math.abs(o.anchorPoint.x)>t&&(t=o.anchorPoint.x),Math.abs(o.anchorPoint.y)>a&&(a=o.anchorPoint.y),null!=o.size&&o.size>e&&(e=o.size))})),t=o(t),a=o(a),e=o(e),{offsetX:t,offsetY:a,size:e}):{offsetX:t,offsetY:a,size:e}}export{s as getSymbolInfo};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{watch as i,sync as s}from\"../../core/reactiveUtils.js\";import{screenPointObjectToArray as r,pt2px as l,createScreenPointArray as n}from\"../../core/screenUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as h}from\"../../core/libs/gl-matrix-2/math/vec2.js\";import{j as p}from\"../../chunks/vec32.js\";import{create as m}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{canProjectWithoutEngine as u,project as y}from\"../../geometry/projectionUtils.js\";import{projectPointToVector as g}from\"../../geometry/projection/projectPointToVector.js\";import{getGraphicEffectiveElevationMode as b}from\"../../support/elevationInfoUtils.js\";import{getDefaultSymbol2D as d}from\"../../symbols/support/defaults.js\";import f from\"../../symbols/support/ElevationInfo.js\";import{getSymbolInfo as _}from\"./support/utils.js\";import{intersectsDrapedGeometry as v}from\"../support/drapedUtils.js\";let S=class extends e{set graphic(t){this._circleCollisionCache=null,this._originalSymbol=t.symbol,this._set(\"graphic\",t),this.attachSymbolChanged()}get elevationInfo(){const{layer:t}=this.graphic,e=t&&\"elevationInfo\"in t?t.elevationInfo:null,o=b(this.graphic),i=e?e.offset:0;return new f({mode:o,offset:i})}set focusedSymbol(t){t!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",t),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(t){t!==this._get(\"grabbing\")&&(this._set(\"grabbing\",t),this._updateGraphicSymbol())}set hovering(t){t!==this._get(\"hovering\")&&(this._set(\"hovering\",t),this._updateGraphicSymbol())}set selected(t){t!==this._get(\"selected\")&&(this._set(\"selected\",t),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:t?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}constructor(t){super(t),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.consumesClicks=!0,this.events=new o.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(t){const e=this.graphic;if(!1===e.visible)return null;const o=e.geometry;if(null==o)return null;const i=this._get(\"focusedSymbol\"),s=null!=i?i:e.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,t,o,s):this._intersectDistance3D(this.view,t,e)}attach(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=i((()=>this.graphic?.symbol),(t=>{null!=t&&t!==this.focusedSymbol&&t!==this._originalSymbol&&(this._originalSymbol=t,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))}),s)}detachSymbolChanged(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(t,e,o,i){if(null==(i=i||d(o)))return null;const s=1;let n=this._circleCollisionCache;if(\"point\"===o.type&&\"cim\"===i.type&&\"CIMPointSymbol\"===i.data.symbol?.type&&i.data.symbol.symbolLayers){const{offsetX:l,offsetY:n,size:a}=_(i),c=r(e,j),p=a/2,m=t.toScreen(o),u=m.x+l,y=m.y+n;return h(c,[u,y])<p*p?s:null}if(\"point\"!==o.type||\"simple-marker\"!==i.type)return v(e,o,t)?s:null;if(null==n||!n.originalPoint.equals(o)){const e=o,s=t.spatialReference;if(u(e.spatialReference,s)){const t=y(e,s);n={originalPoint:e.clone(),mapPoint:t,radiusPx:l(i.size)},this._circleCollisionCache=n}}if(null!=n){const o=r(e,j),a=t.toScreen?.(n.mapPoint);if(!a)return null;const c=n.radiusPx,p=a.x+l(i.xoffset),m=a.y-l(i.yoffset);return h(o,[p,m])<c*c?s:null}return null}_intersectDistance3D(t,e,o){const i=t.toMap(e,{include:[o]});return i&&g(i,C,t.renderSpatialReference)?p(C,t.state.camera.eye):null}};t([a({constructOnly:!0,nonNullable:!0})],S.prototype,\"graphic\",null),t([a()],S.prototype,\"elevationInfo\",null),t([a({constructOnly:!0,nonNullable:!0})],S.prototype,\"view\",void 0),t([a({value:null})],S.prototype,\"focusedSymbol\",null),t([a({constructOnly:!0})],S.prototype,\"layer\",void 0),t([a()],S.prototype,\"interactive\",void 0),t([a()],S.prototype,\"selectable\",void 0),t([a()],S.prototype,\"grabbable\",void 0),t([a({value:!1})],S.prototype,\"grabbing\",null),t([a()],S.prototype,\"dragging\",void 0),t([a()],S.prototype,\"hovering\",null),t([a({value:!1})],S.prototype,\"selected\",null),t([a()],S.prototype,\"cursor\",void 0),S=t([c(\"esri.views.interactive.GraphicManipulator\")],S);const C=m(),j=n();export{S as GraphicManipulator};\r\n"],
  "mappings": "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",
  "names": ["s", "a", "o", "o", "l", "i", "s", "n", "a", "c", "p", "m", "u", "b", "e", "t"]
}
