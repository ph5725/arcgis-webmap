{
  "version": 3,
  "sources": ["../../@arcgis/core/portal/support/featureCollectionUtils.js", "../../@arcgis/core/layers/support/layersCreator.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import y from\"../../portal/PortalItem.js\";import{isMapNotesLayer as t,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as o}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as n}from\"../../renderers/support/styleUtils.js\";async function l(e,r,a){if(!r)return;const y=r.map((e=>G(e,a))),t=await Promise.allSettled(y);for(const i of t)\"rejected\"===i.status||i.value&&e.add(i.value)}const c={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",Object3DTilesLayer:\"UnsupportedLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",KML:\"KMLLayer\",LineOfSightLayer:\"LineOfSightLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",PointCloudLayer:\"PointCloudLayer\",RasterDataLayer:\"UnsupportedLayer\",VectorTileLayer:\"VectorTileLayer\",ViewshedLayer:\"ViewshedLayer\",Voxel:\"VoxelLayer\",WCS:\"WCSLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISImageServiceLayer:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",WebTiledLayer:\"WebTileLayer\"},u={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISVideoLayer:\"VideoLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GeoRSS:\"GeoRSSLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"KnowledgeGraphLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"WCSLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},d={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"SubtypeGroupLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"WCSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},m={...u,LinkChartLayer:\"LinkChartLayer\"},g={...d},T={...I};async function G(e,r){return f(await M(e,r),e,r)}async function f(e,r,a){const y=new e;return y.read(r,a.context),\"group\"===y.type&&(\"GroupLayer\"===r.layerType?await v(y,r,a):b(r)?C(y,r,a.context):A(r)&&await h(y,r,a.context)),await n(y,a.context),y}async function M(e,n){const l=n.context,c=w(l);let s=e.layerType||e.type;!s&&n?.defaultLayerType&&(s=n.defaultLayerType);const p=c[s];let S=p?a[p]:a.UnknownLayer;if(b(e)){const t=l?.portal;if(e.itemId){const i=new y({id:e.itemId,portal:t});await i.load();const L=(await o(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===s?t(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===s&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||b(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function b(e){return\"Feature Collection\"===e.type}function w(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap\":r=S;break;case\"ground\":r=s;break;case\"tables\":r=p;break;default:r=c}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap\":r=T;break;case\"tables\":r=g;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=d;break;default:r=u}}return r}async function v(r,a,y){const t=new e,i=l(t,Array.isArray(a.layers)?a.layers:[],y);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(t),r}catch(L){r.destroy();for(const e of t)e.destroy();throw L}}catch(L){throw L}}function C(e,r,a){r.itemId&&(e.portalItem=new y({id:r.itemId,portal:a?.portal}),e.when((()=>{const y=y=>{const t=y.layerId;W(y,e,r,t,a);const i=r.featureCollection?.layers?.[t];i&&y.read(i,a)};e.layers?.forEach(y),e.tables?.forEach(y)})))}async function h(e,r,y){const t=a.FeatureLayer,i=await t(),L=r.featureCollection,o=L?.showLegend,n=L?.layers?.map(((a,t)=>{const L=new i;L.read(a,y);const n={...y,ignoreDefaults:!0};return W(L,e,r,t,n),null!=o&&L.read({showLegend:o},n),L}));e.layers.addMany(n??[])}function W(e,r,a,y,t){e.read({id:`${r.id}-sublayer-${y}`,visibility:a.visibleLayers?.includes(y)??!0},t)}export{v as populateGroupLayer,l as populateOperationalLayers};\r\n"],
  "mappings": "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",
  "names": ["e", "t", "r", "e", "r", "a", "t", "n", "l", "c", "s", "p", "S", "y", "L"]
}
