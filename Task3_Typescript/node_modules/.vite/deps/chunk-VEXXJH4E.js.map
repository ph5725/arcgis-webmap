{
  "version": 3,
  "sources": ["../../@arcgis/core/chunks/SSAOBlur.glsl.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{FloatPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DDrawUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as s}from\"../views/webgl/ShaderBuilder.js\";const d=4;function i(){const i=new s,f=i.fragment;i.include(e);const u=(d+1)/2,c=1/(2*u*u);return f.include(r),f.uniforms.add(new n(\"depthMap\",(e=>e.depthTexture)),new l(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new o(\"projScale\",((e,r)=>{const t=r.camera.distance;return t>5e4?Math.max(0,e.projScale-(t-5e4)):e.projScale}))),f.code.add(a`\r\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\r\n      float c = texture(tex, uv).r;\r\n      float d = linearDepthFromTexture(depthMap, uv);\r\n\r\n      float ddiff = d - center_d;\r\n\r\n      float w = exp(-r * r * ${a.float(c)} - ddiff * ddiff * sharpness);\r\n      wTotal += w;\r\n      bTotal += w * c;\r\n    }\r\n  `),i.outputs.add(\"fragBlur\",\"float\"),f.main.add(a`\r\n    float b = 0.0;\r\n    float w_total = 0.0;\r\n\r\n    float center_d = linearDepthFromTexture(depthMap, uv);\r\n\r\n    float sharpness = -0.05 * projScale / center_d;\r\n    for (int r = -${a.int(d)}; r <= ${a.int(d)}; ++r) {\r\n      float rf = float(r);\r\n      vec2 uvOffset = uv + rf * blurSize;\r\n      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\r\n    }\r\n    fragBlur = b / w_total;`),i}const f=Object.freeze(Object.defineProperty({__proto__:null,build:i},Symbol.toStringTag,{value:\"Module\"}));export{f as S,i as b};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;AAIgvB,IAAMA,KAAE;AAAE,SAASC,KAAG;AAAC,QAAMA,KAAE,IAAI,KAAEC,KAAED,GAAE;AAAS,EAAAA,GAAE,QAAQ,CAAC;AAAE,QAAM,KAAGD,KAAE,KAAG,GAAE,IAAE,KAAG,IAAE,IAAE;AAAG,SAAOE,GAAE,QAAQ,CAAC,GAAEA,GAAE,SAAS,IAAI,IAAIC,GAAE,YAAY,CAAAC,OAAGA,GAAE,YAAa,GAAE,IAAI,EAAE,OAAO,CAAAA,OAAGA,GAAE,YAAa,GAAE,IAAIC,GAAE,YAAY,CAAAD,OAAGA,GAAE,QAAS,GAAE,IAAI,EAAE,aAAa,CAACA,IAAE,MAAI;AAAC,UAAM,IAAE,EAAE,OAAO;AAAS,WAAO,IAAE,MAAI,KAAK,IAAI,GAAEA,GAAE,aAAW,IAAE,IAAI,IAAEA,GAAE;AAAA,EAAS,CAAE,CAAC,GAAEF,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAOrjC,EAAE,MAAM,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,GAItC,GAAED,GAAE,QAAQ,IAAI,YAAW,OAAO,GAAEC,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAO9B,EAAE,IAAIF,EAAC,CAAC,UAAU,EAAE,IAAIA,EAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,4BAKlB,GAAEC;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAMA,GAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["d", "i", "f", "s", "e", "o"]
}
