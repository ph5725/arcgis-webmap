{
  "version": 3,
  "sources": ["../../@arcgis/core/core/accessorSupport/ensureType.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport\"../has.js\";import e from\"../Logger.js\";import{getOrCreateMapValue as n}from\"../MapUtils.js\";const r=()=>e.getLogger(\"esri.core.accessorSupport.ensureTypes\");function t(e){if(null==e)return e;const n=new Date(e);return isNaN(n.getTime())?(r().error(\"Accessor#set\",`Invalid date value: '${e}', falling back to current date`),new Date):n}function o(e){return null==e?e:!!e}function u(e){return null==e?e:e.toString()}function a(e,n=0){return null==e?e:(e=parseFloat(e),isNaN(e)?n:e)}function s(e){return null==e?e:Math.round(parseFloat(e))}function l(e){return null}function i(e,n){return r=>{let t=e(r);return null!=n.step&&(t=Math.round(t/n.step)*n.step),null!=n.min&&(t=Math.max(n.min,t)),null!=n.max&&(t=Math.min(n.max,t)),t}}function c(e){return e?.constructor&&void 0!==e.constructor.__accessorMetadata__}function f(e,n){return null!=n&&e&&!(n instanceof e)}function p(e){return e&&\"isCollection\"in e}function y(e){return e?.Type?\"function\"==typeof e.Type?e.Type:e.Type.base:null}function v(e,n){if(!n?.constructor||!p(n.constructor))return g(e,n)?n:new e(n);const r=y(e.prototype.itemType),t=y(n.constructor.prototype.itemType);return r?t?r===t?n:r.prototype.isPrototypeOf(t.prototype)?new e(n):(g(e,n),n):new e(n):n}function g(e,n){return!!c(n)&&(r().error(\"Accessor#set\",\"Assigning an instance of '\"+(n.declaredClass||\"unknown\")+\"' which is not a subclass of '\"+h(e)+\"'\"),!0)}function m(e,n){return null==n?n:p(e)?v(e,n):f(e,n)?g(e,n)?n:new e(n):n}function h(e){return e?.prototype?.declaredClass||\"unknown\"}const d=new WeakMap;function b(e){switch(e){case Number:return e=>a(e);case x:return s;case Boolean:return o;case String:return u;case Date:return t;case D:return l;default:return n(d,e,(()=>m.bind(null,e)))}}function w(e,n){const r=b(e);return 1===arguments.length?r:r(n)}function A(e,n,r){return 1===arguments.length?A.bind(null,e):n?Array.isArray(n)?n.map((n=>e(n,r))):[e(n,r)]:n}function $(e,n){return 1===arguments.length?A((n=>w(e,n))):A((n=>w(e,n)),n)}function j(e,n,r){return 0!==n&&Array.isArray(r)?r.map((r=>j(e,n-1,r))):e(r)}function k(e,n,r){if(2===arguments.length)return r=>k(e,n,r);if(!r)return r;r=j(e,n,r);let t=n,o=r;for(;t>0&&Array.isArray(o);)t--,o=o[0];if(void 0!==o)for(let u=0;u<t;u++)r=[r];return r}function M(e,n,r){return 2===arguments.length?k((n=>w(e,n)),n):k((n=>w(e,n)),n,r)}function N(e){return!!Array.isArray(e)&&!e.some((n=>{const r=typeof n;return!(\"string\"===r||\"number\"===r||\"function\"===r&&e.length>1)}))}function T(e,n){if(2===arguments.length)return T(e).call(null,n);const t=new Set,o=e.filter((e=>\"function\"!=typeof e)),u=e.filter((e=>\"function\"==typeof e));for(const r of e)\"string\"!=typeof r&&\"number\"!=typeof r||t.add(r);let a=null,s=null;return(e,n)=>{if(null==e)return e;const l=typeof e,i=\"string\"===l||\"number\"===l;return i&&(t.has(e)||u.some((e=>\"string\"===l&&e===String||\"number\"===l&&e===Number)))||\"object\"===l&&u.some((n=>!f(e,n)))?e:(i&&o.length?(a||(a=o.map((e=>\"string\"==typeof e?`'${e}'`:`${e}`)).join(\", \")),r().error(\"Accessor#set\",`'${e}' is not a valid value for this property, only the following values are valid: ${a}`)):\"object\"==typeof e&&u.length?(s||(s=u.map((e=>h(e))).join(\", \")),r().error(\"Accessor#set\",`'${e}' is not a valid value for this property, value must be one of ${s}`)):r().error(\"Accessor#set\",`'${e}' is not a valid value for this property`),n&&(n.valid=!1),null)}}function S(e,n){if(2===arguments.length)return S(e).call(null,n);const t={},o=[],u=[];for(const r in e.typeMap){const n=e.typeMap[r];t[r]=w(n),o.push(h(n)),u.push(r)}const a=()=>`'${o.join(\"', '\")}'`,s=()=>`'${u.join(\"', '\")}'`,l=\"string\"==typeof e.key?n=>n[e.key]:e.key;return n=>{if(e.base&&!f(e.base,n))return n;if(null==n)return n;const o=l(n)||e.defaultKeyValue,u=t[o];if(!u)return r().error(\"Accessor#set\",`Invalid property value, value needs to be one of ${a()}, or a plain object that can autocast (having .type = ${s()})`),null;if(!f(e.typeMap[o],n))return n;if(\"string\"==typeof e.key&&!c(n)){const r={};for(const t in n)t!==e.key&&(r[t]=n[t]);return u(r)}return u(n)}}class x{}class D{}const _={native:e=>({type:\"native\",value:e}),array:e=>({type:\"array\",value:e}),oneOf:e=>({type:\"one-of\",values:e})};function B(e){if(!e||!(\"type\"in e))return!1;switch(e.type){case\"native\":case\"array\":case\"one-of\":return!0}return!1}function C(e){switch(e.type){case\"native\":return w(e.value);case\"array\":return A(C(e.value));case\"one-of\":return I(e);default:return null}}function I(e){let n=null;return(t,o)=>L(t,e)?t:(null==n&&(n=F(e)),r().error(\"Accessor#set\",`Invalid property value, value needs to be of type ${n}`),o&&(o.valid=!1),null)}function F(e){switch(e.type){case\"native\":switch(e.value){case Number:return\"number\";case String:return\"string\";case Boolean:return\"boolean\";case x:return\"integer\";case Date:return\"date\";case D:return\"null\";default:return h(e.value)}case\"array\":return`array of ${F(e.value)}`;case\"one-of\":{const n=e.values.map((e=>F(e)));return`one of ${n.slice(0,-1)} or ${n[n.length-1]}`}}return\"unknown\"}function L(e,n){if(null==e)return!0;switch(n.type){case\"native\":switch(n.value){case Number:case x:return\"number\"==typeof e;case Boolean:return\"boolean\"==typeof e;case String:return\"string\"==typeof e;case D:return null===e}return e instanceof n.value;case\"array\":return!!Array.isArray(e)&&!e.some((e=>!L(e,n.value)));case\"one-of\":return n.values.some((n=>L(e,n)))}}export{x as Integer,D as Null,$ as ensureArray,A as ensureArrayTyped,o as ensureBoolean,m as ensureClass,t as ensureDate,s as ensureInteger,C as ensureLongFormType,M as ensureNArray,k as ensureNArrayTyped,l as ensureNull,a as ensureNumber,T as ensureOneOf,S as ensureOneOfType,i as ensureRange,u as ensureString,w as ensureType,c as isClassedType,B as isLongFormType,N as isOneOf,f as requiresType,_ as types};\r\n"],
  "mappings": "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",
  "names": ["u", "i", "r", "t", "e", "n", "o", "a", "s", "l"]
}
