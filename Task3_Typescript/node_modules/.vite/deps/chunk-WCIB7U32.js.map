{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/LayerLoadContext.js", "../../@arcgis/core/portal/support/loadUtils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const s=this._serviceMetadatas.get(e);if(s)return s;const r=await t(e,a);return this._serviceMetadatas.set(e,r),r}async fetchItemData(t){const{id:e}=t;if(!e)return null;const{_itemDatas:a}=this;if(a.has(e))return a.get(e);const s=await t.fetchData();return a.set(e,s),s}async fetchCustomParameters(t,e){const a=await this.fetchItemData(t);return a&&\"object\"==typeof a&&(e?e(a):a.customParameters)||null}}export{e as LayerLoadContext};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{getLayerModuleType as r}from\"../../layers/support/fetchService.js\";import{getPreferredHost as t}from\"../../layers/support/layerUtils.js\";function a(e){const t={id:e.id,name:e.name},a=r(e.type);return\"FeatureLayer\"!==a&&(t.layerType=a),t}async function l(e,r,l){let n;if(null==e?.layers||null==e?.tables){const u=await l.fetchServiceMetadata(r,{customParameters:s(e)?.customParameters});n=t(),(e=e||{}).layers=e.layers||u?.layers?.map(a),e.tables=e.tables||u?.tables?.map(a)}return{data:e,preferredHost:n}}function s(e){if(!e)return null;const{layers:r,tables:t}=e;return r?.length?r[0]:t?.length?t[0]:null}function n(e,r){if(null==r)return null;return[...e.layers||[],...e.tables||[]].find((e=>e.id===r))}function u(e,r){return[...e.layers||[],...e.tables||[]].filter((({layerType:e})=>e?r.includes(e):r.includes(\"ArcGISFeatureLayer\")))}function c(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function o(e){switch(e){case\"catalog\":return[\"CatalogLayer\"];case\"feature\":return[\"ArcGISFeatureLayer\"];case\"oriented-imagery\":return[\"OrientedImageryLayer\"];case\"subtype-group\":return[\"SubtypeGroupLayer\",\"SubtypeGroupTable\"]}return null}function i(e){switch(e){case\"CatalogLayer\":return\"CatalogLayer\";case\"OrientedImageryLayer\":return\"OrientedImageryLayer\";case\"SubtypeGroupLayer\":case\"SubtypeGroupTable\":return\"SubtypeGroupLayer\"}return\"FeatureLayer\"}async function y(r,t,l){if(!r?.url)return t??{};if(t??={},!t.layers){const e=await l.fetchServiceMetadata(r.url);t.layers=e.layers?.map(a)}const{serverUrl:n,portalItem:u}=await e(r.url,{sceneLayerItem:r,customParameters:s(t)?.customParameters}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return t.tables=[],t;if(!t.tables&&u){const e=await u.fetchData().catch((()=>null));if(e?.tables)t.tables=e.tables.map(a);else{const r=await l.fetchServiceMetadata(n,{customParameters:s(e)?.customParameters}).catch((()=>null));t.tables=r?.tables?.map(a)}}if(t.tables)for(const e of t.tables)e.url=`${n}/${e.id}`;return t}export{a as createSublayerData,s as getFirstLayerOrTable,n as getLayerOrTable,c as getNumLayersAndTables,u as getSublayersByLayerType,o as instanceTypeToLayerTypes,i as layerTypeToLayerModuleType,y as populateSceneServiceItemData,l as preprocessFSItemData};\r\n"],
  "mappings": "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",
  "names": ["e", "a", "s", "t", "e", "t", "a", "l", "n", "u", "s", "r"]
}
