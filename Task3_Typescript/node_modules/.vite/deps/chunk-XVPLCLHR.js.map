{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js", "../../@arcgis/core/chunks/ShadedColorMaterial.glsl.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{addCameraPosition as e}from\"./util/View.glsl.js\";import{FloatBindUniform as r}from\"../shaderModules/FloatBindUniform.js\";import{FloatPassUniform as i}from\"../shaderModules/FloatPassUniform.js\";import{glsl as o}from\"../shaderModules/glsl.js\";function n(n,c){if(!c.screenSizeEnabled)return;const t=n.vertex;e(t,c),t.uniforms.add(new r(\"perScreenPixelRatio\",(e=>e.camera.perScreenPixelRatio)),new i(\"screenSizeScale\",(e=>e.screenSizeScale))).code.add(o`float computeRenderPixelSizeAt( vec3 pWorld ){\r\nvec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\r\nfloat viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));\r\nreturn viewDirectionDistance * perScreenPixelRatio;\r\n}\r\nvec3 screenSizeScaling(vec3 position, vec3 anchor){\r\nreturn position * screenSizeScale * computeRenderPixelSizeAt(anchor) + anchor;\r\n}`)}export{n as ScreenSizeScaling};\r\n", "/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{create as e}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ScreenSizeScaling as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{terrainDepthTest as n}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as s,addViewNormal as a}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{glsl as g}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{VertexAttribute as c}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as m}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as v}from\"../views/webgl/ShaderBuilder.js\";function w(e){const w=new v;w.include(i,e),w.include(r,e),w.fragment.include(o,e),w.include(m,e),w.include(n,e);const{vertex:b,fragment:u}=w;return u.include(l),s(b,e),u.uniforms.add(new t(\"uColor\",(e=>e.color))),w.attributes.add(c.POSITION,\"vec3\"),w.varyings.add(\"vWorldPosition\",\"vec3\"),e.screenSizeEnabled&&w.attributes.add(c.OFFSET,\"vec3\"),e.shadingEnabled&&(a(b),w.attributes.add(c.NORMAL,\"vec3\"),w.varyings.add(\"vViewNormal\",\"vec3\"),u.uniforms.add(new d(\"shadingDirection\",(e=>e.shadingDirection))),u.uniforms.add(new t(\"shadedColor\",(e=>f(e.shadingTint,e.color))))),b.main.add(g`\r\n      vWorldPosition = ${e.screenSizeEnabled?g`screenSizeScaling(offset, position)`:g`position`};\r\n      ${e.shadingEnabled?g`vec3 worldNormal = normal;\r\n                 vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`:\"\"}\r\n      forwardViewPosDepth((view * vec4(vWorldPosition, 1.0)).xyz);\r\n      gl_Position = transformPosition(proj, view, vWorldPosition);\r\n  `),u.main.add(g`\r\n      discardBySlice(vWorldPosition);\r\n      discardByTerrainDepth();\r\n      ${e.shadingEnabled?g`vec3 viewNormalNorm = normalize(vViewNormal);\r\n             float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\r\n             vec4 finalColor = mix(uColor, shadedColor, shadingFactor);`:g`vec4 finalColor = uColor;`}\r\n      outputColorHighlightOID(finalColor, vWorldPosition, finalColor.rgb);`),w}function f(e,r){const o=1-e[3],i=e[3]+r[3]*o;return 0===i?(b[3]=i,b):(b[0]=(e[0]*e[3]+r[0]*r[3]*o)/i,b[1]=(e[1]*e[3]+r[1]*r[3]*o)/i,b[2]=(e[2]*e[3]+r[2]*r[3]*o)/i,b[3]=r[3],b)}const b=e(),u=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:\"Module\"}));export{u as S,w as b};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIwP,SAASA,GAAEA,IAAE,GAAE;AAAC,MAAG,CAAC,EAAE,kBAAkB;AAAO,QAAM,IAAEA,GAAE;AAAO,IAAE,GAAE,CAAC,GAAE,EAAE,SAAS,IAAI,IAAIC,GAAE,uBAAuB,CAAAA,OAAGA,GAAE,OAAO,mBAAoB,GAAE,IAAI,EAAE,mBAAmB,CAAAA,OAAGA,GAAE,eAAgB,CAAC,EAAE,KAAK,IAAID;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOrc;AAAC;;;ACPqsC,SAAS,EAAEE,IAAE;AAAC,QAAMC,KAAE,IAAI;AAAE,EAAAA,GAAE,QAAQ,GAAED,EAAC,GAAEC,GAAE,QAAQC,IAAEF,EAAC,GAAEC,GAAE,SAAS,QAAQ,GAAED,EAAC,GAAEC,GAAE,QAAQ,GAAED,EAAC,GAAEC,GAAE,QAAQE,IAAEH,EAAC;AAAE,QAAK,EAAC,QAAOI,IAAE,UAASC,GAAC,IAAEJ;AAAE,SAAOI,GAAE,QAAQL,EAAC,GAAE,EAAEI,IAAEJ,EAAC,GAAEK,GAAE,SAAS,IAAI,IAAIL,GAAE,UAAU,CAAAA,OAAGA,GAAE,KAAM,CAAC,GAAEC,GAAE,WAAW,IAAI,EAAE,UAAS,MAAM,GAAEA,GAAE,SAAS,IAAI,kBAAiB,MAAM,GAAED,GAAE,qBAAmBC,GAAE,WAAW,IAAI,EAAE,QAAO,MAAM,GAAED,GAAE,mBAAiBM,GAAEF,EAAC,GAAEH,GAAE,WAAW,IAAI,EAAE,QAAO,MAAM,GAAEA,GAAE,SAAS,IAAI,eAAc,MAAM,GAAEI,GAAE,SAAS,IAAI,IAAIL,GAAE,oBAAoB,CAAAA,OAAGA,GAAE,gBAAiB,CAAC,GAAEK,GAAE,SAAS,IAAI,IAAIL,GAAE,eAAe,CAAAA,OAAGO,GAAEP,GAAE,aAAYA,GAAE,KAAK,CAAE,CAAC,IAAGI,GAAE,KAAK,IAAIF;AAAA,yBACvvDF,GAAE,oBAAkBE,0CAAuCA,YAAW;AAAA,QACvFF,GAAE,iBAAeE;AAAA,2EACgD,EAAE;AAAA;AAAA;AAAA,GAGxE,GAAEG,GAAE,KAAK,IAAIH;AAAA;AAAA;AAAA,QAGRF,GAAE,iBAAeE;AAAA;AAAA,2EAEgDA,6BAA4B;AAAA,2EAC1B,GAAED;AAAC;AAAC,SAASM,GAAEP,IAAE,GAAE;AAAC,QAAMQ,KAAE,IAAER,GAAE,CAAC,GAAEG,KAAEH,GAAE,CAAC,IAAE,EAAE,CAAC,IAAEQ;AAAE,SAAO,MAAIL,MAAG,EAAE,CAAC,IAAEA,IAAE,MAAI,EAAE,CAAC,KAAGH,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,IAAEQ,MAAGL,IAAE,EAAE,CAAC,KAAGH,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,IAAEQ,MAAGL,IAAE,EAAE,CAAC,KAAGH,GAAE,CAAC,IAAEA,GAAE,CAAC,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,IAAEQ,MAAGL,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,GAAE;AAAE;AAAC,IAAM,IAAE,EAAE;AAAV,IAAYE,KAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["n", "e", "e", "w", "n", "i", "b", "u", "p", "f", "o"]
}
