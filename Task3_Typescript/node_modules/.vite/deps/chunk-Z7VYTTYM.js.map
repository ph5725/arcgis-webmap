{
  "version": 3,
  "sources": ["../../@arcgis/core/smartMapping/support/utils.js"],
  "sourcesContent": ["/*\r\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\r\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\r\n*/\r\nimport{formatDate as t,convertDateFormatToIntlOptions as e,formatTimestamp as n,formatTimeOnly as o,formatDateOnly as r}from\"../../intl/date.js\";import{isDateField as i,isDateOnlyField as s,isTimestampOffsetField as a}from\"../../layers/support/fieldUtils.js\";import{getWellKnownBasemapId as l}from\"../../support/basemapUtils.js\";import{loadArcade as u}from\"../../support/loadArcade.js\";import{utc as m}from\"../../time/constants.js\";import{getTimeZoneFormattingOptions as d}from\"../../time/timeZoneUtils.js\";const f=\",\",c={light:[\"streets\",\"gray\",\"topo\",\"terrain\",\"oceans\",\"osm\",\"gray-vector\",\"streets-vector\",\"topo-vector\",\"streets-relief-vector\",\"streets-navigation-vector\",\"topo-3d\",\"navigation-3d\",\"streets-3d\",\"osm-3d\",\"gray-3d\"],dark:[\"satellite\",\"hybrid\",\"dark-gray\",\"dark-gray-vector\",\"streets-night-vector\",\"navigation-dark-3d\",\"streets-dark-3d\",\"dark-gray-3d\"]},p=\"percent-of-total\",g=\"field\",y={exclude:[\"median\"]},h={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},v=new Set([\"integer\",\"small-integer\"]);let T=null;const Z=[\"date\",\"date-only\",\"timestamp-offset\"];function $(t){return i(t)||s(t)||a(t)}async function U(t){const{field:e,field2:n,field3:o,normalizationField:r,valueExpression:i}=t;let s=[];if(i){if(!T){const{arcadeUtils:t}=await u();T=t}s=T.extractFieldNames(i)}return e&&s.push(e),n&&s.push(n),o&&s.push(o),r&&s.push(r),s}function w(t){let e=t.normalizationType;return e||(t.normalizationField?e=g:null!=t.normalizationTotal&&(e=p)),e??void 0}function S(t){return String(t).padStart(2,\"0\")}function k(t,e,n){let o;if(\"date\"===e||\"number\"===e){\"number\"===e&&(t=new Date(t));o=`TIMESTAMP'${n?t.getFullYear():t.getUTCFullYear()}-${S((n?t.getMonth():t.getUTCMonth())+1)}-${S(n?t.getDate():t.getUTCDate())} ${S(n?t.getHours():t.getUTCHours())}:${S(n?t.getMinutes():t.getUTCMinutes())}:${S(n?t.getSeconds():t.getUTCSeconds())}'`}else o=t;return o}function C(t,e,n,o){const{hasQueryEngine:r}=t,i=`(${k(n,D(t,n),r)} - ${k(e,D(t,e),r)})`;let s=h[o],a=\"/\";s<1&&(s=1/s,a=\"*\");return{sqlExpression:1===s?i:`(${i} ${a} ${s})`,sqlWhere:null}}function D(t,e){if(e instanceof Date)return\"date\";if(\"number\"==typeof e)return\"number\";if(\"string\"==typeof e){const n=t.getField(e);if(\"<now>\"===e.toLowerCase())return;if(i(n))return\"field\"}}function F(t,e=c){for(const n in e)if(e[n].includes(t))return n}function b(t,e,n=!0){let o=null;return t&&(\"string\"==typeof t?e.includes(t)&&(o=t):o=l(t)),n?o||\"gray\":o}function j(t,e){const n=e&&t.getField(e);return!!n&&v.has(n.type)}function M(t){return`cast(${t} as float)`}function N(i,s){const{format:a,timeZoneOptions:l,fieldType:u}=s??{};let f,c;if(l&&({timeZone:f,timeZoneName:c}=d(l.layerTimeZone,l.datesInUnknownTimezone,l.viewTimeZone,e(a||\"short-date-short-time\"),u)),\"string\"==typeof i&&isNaN(Date.parse(\"time-only\"===u?`1970-01-01T${i}Z`:i)))return i;switch(u){case\"date-only\":{const n=e(a||\"short-date\");return\"string\"==typeof i?r(i,{...n}):t(i,{...n,timeZone:m})}case\"time-only\":{const n=e(a||\"short-time\");return\"string\"==typeof i?o(i,n):t(i,{...n,timeZone:m})}case\"timestamp-offset\":{if(!f&&\"string\"==typeof i&&new Date(i).toISOString()!==i)return i;const o=a||l?e(a||\"short-date-short-time\"):void 0,r=o?{...o,timeZone:f,timeZoneName:c}:void 0;return\"string\"==typeof i?n(i,r):t(i,r)}default:{const n=a||l?e(a||\"short-date-short-time\"):void 0;return t(\"string\"==typeof i?new Date(i):i,n?{...n,timeZone:f,timeZoneName:c}:void 0)}}}export{M as castIntegerFieldToFloat,Z as dateTypes,c as defaultBasemapGroups,y as defaultStatisticTypes,f as fieldDelimiter,N as formatAnyDate,F as getBasemapGroup,b as getBasemapId,C as getDateDiffSQL,D as getDateType,U as getFieldsList,w as getNormalizationType,$ as isAnyDateField,j as isIntegerField,h as unitValueInDays};\r\n"],
  "mappings": "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",
  "names": ["f", "h", "e", "n", "t", "e", "n", "C", "h", "e", "n", "N", "f"]
}
