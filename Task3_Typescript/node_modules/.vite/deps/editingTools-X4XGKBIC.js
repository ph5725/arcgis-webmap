import {
  A as A4,
  E as E10,
  a as a18,
  b as b10,
  c2 as c15,
  g as g8,
  h as h12,
  l as l13,
  p as p12,
  r as r18,
  r2 as r19,
  te
} from "./chunk-LGKW5DH4.js";
import "./chunk-Q7ET6JQT.js";
import {
  A as A3,
  C as C3,
  a as a16,
  a2 as a17,
  e as e14,
  f as f15,
  it as it2,
  l2 as l12,
  o as o18,
  q as q7,
  u as u14
} from "./chunk-4KOJY6ZH.js";
import {
  e as e16,
  i as i13,
  s as s9
} from "./chunk-3CFE5G42.js";
import {
  e as e15,
  i as i11,
  p as p13
} from "./chunk-MEKLRE3T.js";
import {
  i as i12
} from "./chunk-GEXDBKAY.js";
import {
  P as P5,
  r as r16
} from "./chunk-HUIZDFYQ.js";
import {
  b as b11
} from "./chunk-FMN5TITJ.js";
import "./chunk-LZTYUE2M.js";
import "./chunk-XFQJH5FF.js";
import "./chunk-M3GWMAOD.js";
import "./chunk-SLSJWTDB.js";
import "./chunk-PBOUSKLD.js";
import "./chunk-EI2IZ446.js";
import "./chunk-XGNIK5GN.js";
import {
  u as u15
} from "./chunk-XVPLCLHR.js";
import "./chunk-A7N7HE4I.js";
import {
  c as c14,
  i as i10,
  m as m7,
  r as r17
} from "./chunk-LLHDNASY.js";
import {
  $,
  V as V4
} from "./chunk-5P3YY34Z.js";
import {
  u as u13
} from "./chunk-5S6DUMDL.js";
import "./chunk-IY3EUEEF.js";
import "./chunk-NGK4G3ZA.js";
import "./chunk-YMLCITSE.js";
import "./chunk-BUMCVHOE.js";
import "./chunk-YSZ4SRX4.js";
import {
  i as i9
} from "./chunk-EQXUGRYF.js";
import {
  D as D2,
  E as E7,
  F as F5,
  F2 as F6,
  G,
  M as M4,
  S as S4,
  S2 as S6,
  T as T2,
  c as c13,
  d as d8,
  f as f13,
  f2 as f14,
  g as g7,
  j as j5,
  l as l11,
  m as m6,
  n as n14,
  p as p11,
  v as v5,
  w as w7,
  z as z5
} from "./chunk-FF3F3NJA.js";
import {
  E as E8,
  E2 as E9,
  P2 as P4,
  Q,
  R as R7,
  e as e12,
  e3 as e13,
  h as h10,
  j as j4,
  k as k4,
  r as r14,
  w as w6,
  x as x5,
  z as z4
} from "./chunk-3AJC75KZ.js";
import {
  C2,
  F as F4,
  H2 as H3,
  R as R6,
  V as V3,
  e as e11,
  r as r15,
  x as x4,
  z as z3
} from "./chunk-RFM3ACHA.js";
import {
  S as S5
} from "./chunk-SP5E3FR4.js";
import {
  R as R8,
  g as g6,
  y as y8
} from "./chunk-6VC2SGU3.js";
import {
  c as c12
} from "./chunk-R4OUYMNP.js";
import {
  p as p10
} from "./chunk-YIOJR4CO.js";
import "./chunk-U6CQ42B3.js";
import "./chunk-HPOHIVBI.js";
import "./chunk-5TKMN7TZ.js";
import "./chunk-P5XPQUDN.js";
import "./chunk-WYLBCBQH.js";
import {
  h as h11
} from "./chunk-LYH5EAFA.js";
import {
  E2 as E6,
  T,
  m as m5,
  n as n13,
  y as y7
} from "./chunk-ENM5QFON.js";
import "./chunk-QRQFF5JU.js";
import "./chunk-3JLAYQHR.js";
import {
  N as N4,
  b as b9,
  j as j3,
  q as q6
} from "./chunk-2H2JCT45.js";
import {
  E as E5
} from "./chunk-733XT7D4.js";
import "./chunk-NMV57LDC.js";
import {
  a as a15,
  f as f12,
  h as h9,
  o as o17,
  y as y6
} from "./chunk-NZUIJLHR.js";
import "./chunk-XLZA3DH7.js";
import {
  ue
} from "./chunk-4PEDH45I.js";
import {
  Ot,
  at,
  b as b8,
  ft,
  gt,
  it,
  lt,
  ot,
  pt,
  wt
} from "./chunk-JSKJKRHP.js";
import {
  c as c10,
  o as o16,
  s as s8,
  u as u11
} from "./chunk-V4C53BKZ.js";
import {
  k as k3,
  u as u10,
  x as x3
} from "./chunk-67IMFEKD.js";
import "./chunk-PYKMDQYM.js";
import "./chunk-4TMVUEZQ.js";
import "./chunk-JOUWZB2W.js";
import {
  a as a14,
  g as g5,
  m as m4,
  p as p9,
  y as y5
} from "./chunk-VBGMA7VY.js";
import "./chunk-SEPZOYEZ.js";
import {
  t as t11
} from "./chunk-5MPGCN36.js";
import "./chunk-KPM5L4IF.js";
import "./chunk-BM2FDZGO.js";
import "./chunk-ZQOTJCBQ.js";
import "./chunk-LSZNAZI4.js";
import "./chunk-5WTH3GBK.js";
import "./chunk-LA7PPTGA.js";
import "./chunk-VOIQQS36.js";
import "./chunk-2XBUTZI3.js";
import "./chunk-UCYIFIM5.js";
import "./chunk-IWFEA465.js";
import {
  A as A2,
  E as E4,
  F as F3,
  N as N3,
  O as O4,
  R as R5,
  b2 as b7,
  e3 as e10,
  f as f10,
  f2 as f11,
  h as h6,
  i as i8,
  k as k2,
  m as m3,
  o2 as o14,
  p as p6,
  p2 as p7,
  p3 as p8,
  z as z2
} from "./chunk-CWLDBABC.js";
import "./chunk-37WACOMS.js";
import {
  L as L3
} from "./chunk-SHXYOAIC.js";
import "./chunk-5DVJFLIL.js";
import "./chunk-VRSDJVZH.js";
import {
  O as O3
} from "./chunk-B7AMZ4LC.js";
import "./chunk-VLNFWLNQ.js";
import "./chunk-PJ7AE5BM.js";
import {
  g as g4,
  t as t9,
  t2 as t10,
  u as u9
} from "./chunk-SMESMUA5.js";
import "./chunk-KQMSRGRD.js";
import "./chunk-BQVMDMIB.js";
import "./chunk-XLYBLHTD.js";
import "./chunk-4TBDRMZ4.js";
import {
  e as e9,
  f as f8,
  o as o10
} from "./chunk-RS3I6DPK.js";
import "./chunk-756RU7RS.js";
import "./chunk-7UTSKTVG.js";
import {
  B,
  c as c9,
  f as f9,
  g as g3,
  o as o13
} from "./chunk-56ZY2WLU.js";
import "./chunk-KCTSIZOP.js";
import "./chunk-HSRD3P5Q.js";
import "./chunk-5JV4N5AU.js";
import {
  a as a13,
  d2 as d6,
  n as n11,
  n2 as n12,
  o2 as o12
} from "./chunk-4XEYVSQH.js";
import "./chunk-XSPND757.js";
import {
  o as o11
} from "./chunk-QY6CN52R.js";
import {
  o2 as o15
} from "./chunk-VT5VIQO4.js";
import "./chunk-4D63UIH5.js";
import "./chunk-ENL2JUSP.js";
import {
  a as a12,
  i as i7
} from "./chunk-U3CE4V5Z.js";
import "./chunk-7KQYSRGY.js";
import "./chunk-SJV3HVGJ.js";
import "./chunk-SWINDW7X.js";
import "./chunk-R2HTWJLS.js";
import {
  c as c8
} from "./chunk-2ZADANKQ.js";
import {
  K as K2,
  W as W2,
  Z as Z2
} from "./chunk-MI6QXJMY.js";
import {
  M as M3,
  b as b6,
  d as d5,
  h as h5,
  l as l10,
  p as p5,
  v as v4
} from "./chunk-3GCFO25G.js";
import "./chunk-4TMSLZIY.js";
import "./chunk-QPAG77FN.js";
import "./chunk-6FK2OY3E.js";
import "./chunk-US6IOLIT.js";
import "./chunk-6LQLTORF.js";
import "./chunk-FFB32VN7.js";
import "./chunk-WUNNTEK6.js";
import "./chunk-R2Q57RB2.js";
import "./chunk-PEF2Q5HH.js";
import "./chunk-A4KKV2O6.js";
import {
  n as n9
} from "./chunk-3MVOHROR.js";
import {
  e as e7
} from "./chunk-RVXIJHL6.js";
import "./chunk-QXKZRZ4D.js";
import "./chunk-ILO2YRRS.js";
import {
  a as a11,
  c as c7,
  d as d4,
  h as h4,
  i as i6,
  j as j2,
  m as m2,
  p as p4,
  r as r13,
  u as u8,
  x as x2,
  z
} from "./chunk-2JAL6FAS.js";
import {
  t as t8
} from "./chunk-ZN7Z7TAB.js";
import "./chunk-Q77BGVST.js";
import "./chunk-TTPBKTNJ.js";
import {
  c as c6,
  h as h3,
  i as i5,
  n as n10,
  u as u7
} from "./chunk-ZPAWXU2P.js";
import "./chunk-KQOOCDUQ.js";
import "./chunk-PP3UNFGS.js";
import "./chunk-FYCLQ3SU.js";
import {
  S as S3,
  b as b5,
  k,
  w as w5
} from "./chunk-BGR5EVZD.js";
import "./chunk-DQG3SJJO.js";
import "./chunk-LWV5GP6V.js";
import "./chunk-QNHQE3IL.js";
import "./chunk-6EOJZ6DP.js";
import "./chunk-DRLVYVHZ.js";
import {
  e as e8
} from "./chunk-UZRZVWLE.js";
import "./chunk-TUSII7EA.js";
import "./chunk-MYOG5JEY.js";
import "./chunk-C4ANG4R2.js";
import "./chunk-GYAK76KG.js";
import "./chunk-KKAHMR7F.js";
import {
  H as H2,
  M as M2,
  O as O2,
  l as l7,
  q2 as q5
} from "./chunk-RTDWTAVK.js";
import {
  c as c5,
  f2 as f6,
  i as i3,
  o as o7,
  t as t7
} from "./chunk-QLJ6JQFC.js";
import "./chunk-YWGFBTRS.js";
import {
  w as w4,
  y as y4
} from "./chunk-BHCIAS6L.js";
import "./chunk-XOCYWQ7P.js";
import "./chunk-2OTCLWRN.js";
import "./chunk-XZOH57EG.js";
import "./chunk-LSL2QL5U.js";
import "./chunk-DDDUQRA2.js";
import "./chunk-XOMXNJJG.js";
import "./chunk-IMFGC5DS.js";
import "./chunk-LG4SF54U.js";
import {
  i as i4
} from "./chunk-TNKA4BMD.js";
import "./chunk-VKKELZ6R.js";
import {
  n as n8
} from "./chunk-DLD56RZZ.js";
import {
  t as t6
} from "./chunk-3SJIVSAT.js";
import "./chunk-HXR4TQII.js";
import {
  a as a10,
  e as e6
} from "./chunk-67CCONUO.js";
import {
  f as f7,
  o as o9
} from "./chunk-6DBRCIDV.js";
import {
  s as s7
} from "./chunk-YSRSL2SU.js";
import {
  R as R3
} from "./chunk-FQ4JUVCN.js";
import "./chunk-3LL6ALVC.js";
import {
  e as e3,
  n as n5,
  r as r10
} from "./chunk-NZPABYQQ.js";
import {
  e as e4
} from "./chunk-CCHJ3WNU.js";
import {
  h as h7
} from "./chunk-OFHPFWHF.js";
import "./chunk-MZJEBIXX.js";
import "./chunk-H5K53FMS.js";
import "./chunk-KHEIHGIK.js";
import {
  D,
  E as E2,
  F as F2,
  I,
  N,
  P as P2,
  R as R2,
  S as S2
} from "./chunk-76QJRCNC.js";
import {
  t as t12
} from "./chunk-C4G2D42P.js";
import {
  t as t13,
  u as u12
} from "./chunk-XGPYUGO5.js";
import {
  c as c11,
  d as d7
} from "./chunk-BUA5NESM.js";
import "./chunk-SHYE33QH.js";
import "./chunk-LTMF2W73.js";
import "./chunk-5Y3EUPZN.js";
import "./chunk-XBU3UEEJ.js";
import "./chunk-F5C72MOD.js";
import {
  h as h8
} from "./chunk-YIXK32VF.js";
import "./chunk-BDWOUZQR.js";
import "./chunk-H34ENSPL.js";
import "./chunk-XFKS4JQP.js";
import "./chunk-H6F6O2KE.js";
import "./chunk-AF3FX2UV.js";
import {
  n as n7
} from "./chunk-DRAQJS2F.js";
import {
  C,
  R as R4,
  Y,
  _ as _5
} from "./chunk-BZYXFNL4.js";
import {
  n as n6,
  r as r11
} from "./chunk-VNTS5E5O.js";
import {
  A,
  E as E3,
  H,
  I as I2,
  J,
  K,
  N as N2,
  P as P3,
  W,
  _ as _3,
  c as c4,
  g as g2,
  j,
  o as o6,
  p as p3,
  q as q4,
  r as r9,
  s as s6,
  u as u5,
  v as v2,
  y as y3
} from "./chunk-TMFB3DKM.js";
import {
  r as r5
} from "./chunk-LBC3MAJX.js";
import {
  l as l9
} from "./chunk-H7XUEHGR.js";
import "./chunk-YHYQP7QX.js";
import {
  _ as _4,
  b as b4,
  e as e5,
  l as l8,
  o as o8,
  r as r12,
  u as u6,
  v as v3
} from "./chunk-TNW4TPNP.js";
import "./chunk-XAXNVZUO.js";
import "./chunk-DIR2YFTR.js";
import "./chunk-ZSRASSN6.js";
import "./chunk-N5GLJRXG.js";
import "./chunk-77M4J56U.js";
import "./chunk-XLF2NMGX.js";
import "./chunk-X5GD6LFD.js";
import "./chunk-MX5VW6PC.js";
import {
  c as c3
} from "./chunk-JJNHUYXK.js";
import "./chunk-UG6RJXJ2.js";
import "./chunk-G5DA3EEG.js";
import "./chunk-DJJNSAUR.js";
import "./chunk-PZBXBPVO.js";
import "./chunk-TMC6HYGQ.js";
import {
  r as r8,
  t as t5,
  u as u4
} from "./chunk-7FAVUXK2.js";
import {
  E,
  a as a9
} from "./chunk-IVNFIIVI.js";
import "./chunk-NOGWEW4X.js";
import "./chunk-ZCZERMS4.js";
import "./chunk-GPMIOMDJ.js";
import "./chunk-RGFH75DR.js";
import "./chunk-FEGY3M6U.js";
import "./chunk-RWRC6JKB.js";
import "./chunk-M6AESODI.js";
import "./chunk-6WL2SHX6.js";
import "./chunk-7ZMGKXLG.js";
import "./chunk-JMXPE5PE.js";
import "./chunk-LL73CCBG.js";
import "./chunk-6TS2ZJL4.js";
import "./chunk-IBGTNH54.js";
import "./chunk-L7EN54WK.js";
import "./chunk-6QTMK7BB.js";
import "./chunk-BNO7HCVD.js";
import {
  L as L2,
  nn
} from "./chunk-7NMH5MM5.js";
import "./chunk-TCIXF7MM.js";
import {
  o as o4,
  v
} from "./chunk-UGTICYU7.js";
import "./chunk-3MHRDLQO.js";
import {
  a as a4,
  s as s2
} from "./chunk-ZAISHGSP.js";
import "./chunk-KHRHKYU2.js";
import "./chunk-2IMSGFJN.js";
import "./chunk-VHTQ5H2C.js";
import "./chunk-YX2VTIZR.js";
import "./chunk-LYSDGL5S.js";
import "./chunk-SRJX4QLW.js";
import "./chunk-WPTJIN2M.js";
import "./chunk-KUP5BM5G.js";
import "./chunk-HNQNVI5C.js";
import "./chunk-G34OBNLT.js";
import "./chunk-WJUYGRZY.js";
import {
  O,
  P,
  b as b2,
  q as q2,
  s as s5,
  t as t3,
  u as u3
} from "./chunk-FKFXOPPT.js";
import {
  l as l6
} from "./chunk-KE3WBZYL.js";
import "./chunk-EOMIFMDH.js";
import "./chunk-QFU5COFB.js";
import "./chunk-45ILJ6ZH.js";
import "./chunk-VCRP2PLV.js";
import "./chunk-BDLVUYG2.js";
import "./chunk-6QA2BVC5.js";
import {
  n as n2
} from "./chunk-HWKQJUGY.js";
import "./chunk-XDCUZFJX.js";
import {
  R,
  _ as _2,
  b as b3,
  c as c2,
  d as d3,
  f as f5,
  h as h2,
  i as i2,
  l as l5,
  n as n4,
  o as o5,
  p as p2,
  q as q3,
  r as r7,
  x
} from "./chunk-DNZK6PPI.js";
import {
  e as e2
} from "./chunk-7BWCD63N.js";
import "./chunk-65K4DQAH.js";
import {
  a as a7,
  f as f4,
  g,
  l as l4,
  p,
  y as y2
} from "./chunk-MUKDJQWB.js";
import "./chunk-6KFXWKZZ.js";
import {
  d as d2
} from "./chunk-HPGYEHVI.js";
import {
  V as V2
} from "./chunk-X3R5OB6L.js";
import {
  a as a8,
  n as n3,
  r as r6,
  t as t4
} from "./chunk-RACDQ3AL.js";
import "./chunk-TEXTBDH7.js";
import "./chunk-N3A2BVTW.js";
import "./chunk-IGYEHOTB.js";
import {
  a as a3
} from "./chunk-TVM3SZJR.js";
import "./chunk-52HWRRRQ.js";
import {
  a as a6
} from "./chunk-VNTEV3V4.js";
import {
  y
} from "./chunk-OGOQOMMV.js";
import "./chunk-7Z3AF3B2.js";
import {
  q,
  w as w3
} from "./chunk-6GWORUT3.js";
import "./chunk-U57T7EQN.js";
import "./chunk-CMHHL5UO.js";
import {
  f
} from "./chunk-XHYOFJ4U.js";
import "./chunk-HCYE6OE4.js";
import "./chunk-KJSBBQ22.js";
import "./chunk-LMEOPAGQ.js";
import {
  o as o3
} from "./chunk-YIV2QKTZ.js";
import {
  U,
  a as a5,
  f as f2,
  h,
  l as l3,
  w as w2
} from "./chunk-A3VAC24F.js";
import {
  M,
  r as r4,
  s
} from "./chunk-FPSA4NFH.js";
import "./chunk-UY6B6IVT.js";
import "./chunk-6PV45IYU.js";
import "./chunk-SRQCQD63.js";
import "./chunk-FIRNXFAH.js";
import "./chunk-O5TPFXRT.js";
import {
  _
} from "./chunk-Q6XRAGMA.js";
import "./chunk-JUAPMINU.js";
import {
  f as f3
} from "./chunk-PK2ZR2SJ.js";
import "./chunk-YFPGM5UE.js";
import {
  V,
  Z,
  ee,
  s2 as s4
} from "./chunk-OXSERRAR.js";
import "./chunk-7HI4VRVW.js";
import "./chunk-ZX46THLM.js";
import {
  d
} from "./chunk-Y2ZIOB7Y.js";
import {
  s as s3
} from "./chunk-KTUX3OKX.js";
import {
  l as l2
} from "./chunk-E3KEUGUG.js";
import {
  b,
  i3 as i,
  m,
  r2
} from "./chunk-N3XLUQJI.js";
import {
  a2
} from "./chunk-JUAD7TJ6.js";
import {
  a,
  w
} from "./chunk-VHLUKPRH.js";
import {
  r
} from "./chunk-5TPMG26T.js";
import "./chunk-3NBBZ43U.js";
import "./chunk-VOLWOTEG.js";
import {
  F
} from "./chunk-XTNIDRTB.js";
import "./chunk-FGWIXJQY.js";
import "./chunk-TKYAZCMB.js";
import "./chunk-3TBMFSPB.js";
import "./chunk-PSZLDJJA.js";
import "./chunk-ZWFY3WY5.js";
import "./chunk-LQFTAGIV.js";
import "./chunk-S7IJH524.js";
import {
  c,
  e,
  l2 as l,
  o,
  o2,
  r2 as r3,
  t,
  t2,
  u,
  u2
} from "./chunk-GZ2P4SCJ.js";
import "./chunk-XWG6QGFK.js";
import "./chunk-GWNLQRNM.js";
import {
  L,
  S,
  has,
  n
} from "./chunk-FXKORAMT.js";
import "./chunk-GNMFMITH.js";

// node_modules/@arcgis/core/libs/maquette/h.js
var e17 = (e25) => ({ vnodeSelector: "", properties: void 0, children: void 0, text: e25.toString(), domNode: null });
var r20 = (t25, o25, n30) => {
  for (let l26 = 0, i23 = o25.length; l26 < i23; l26++) {
    let i24 = o25[l26];
    Array.isArray(i24) ? r20(t25, i24, n30) : null != i24 && false !== i24 && ("string" == typeof i24 && (i24 = e17(i24)), n30.push(i24));
  }
};
function t14(e25, t25, o25) {
  if (Array.isArray(t25)) o25 = t25, t25 = void 0;
  else if (t25 && ("string" == typeof t25 || t25.hasOwnProperty("vnodeSelector")) || o25 && ("string" == typeof o25 || o25.hasOwnProperty("vnodeSelector"))) throw new Error("h called with invalid arguments");
  let n30, l26;
  return o25 && 1 === o25.length && "string" == typeof o25[0] ? n30 = o25[0] : o25 && (l26 = [], r20(e25, o25, l26), 0 === l26.length && (l26 = void 0)), { vnodeSelector: e25, properties: t25, children: l26, text: "" === n30 ? void 0 : n30, domNode: null };
}

// node_modules/@arcgis/core/views/overlay/TextOverlayItem.js
var l14 = { bottom: "esri-text-overlay-item-anchor-bottom", "bottom-right": "esri-text-overlay-item-anchor-bottom-right", "bottom-left": "esri-text-overlay-item-anchor-bottom-left", top: "esri-text-overlay-item-anchor-top", "top-right": "esri-text-overlay-item-anchor-top-right", "top-left": "esri-text-overlay-item-anchor-top-left", center: "esri-text-overlay-item-anchor-center", right: "esri-text-overlay-item-anchor-right", left: "esri-text-overlay-item-anchor-left" };
var n15 = class extends b {
  get position() {
    return [this.x, this.y];
  }
  set position(t25) {
    this._set("x", t25[0]), this._set("y", t25[1]);
  }
  get _textShadowColor() {
    const { textColor: t25, backgroundColor: e25 } = this, o25 = e25.clone();
    return o25.a *= t25.a, o25;
  }
  get _textShadow() {
    const t25 = this._textShadowColor.toCss(true);
    return `0 0 ${this._textShadowSize}px ${t25}`;
  }
  get padding() {
    return 0.5 * this.fontSize;
  }
  get borderRadius() {
    return this.padding;
  }
  set borderRadius(t25) {
    this._overrideIfSome("borderRadius", t25);
  }
  constructor(t25) {
    super(t25), this.x = 0, this.y = 0, this.text = "-", this.fontSize = 14, this.anchor = "center", this.visible = true, this.isDecoration = true, this.backgroundColor = new l6([0, 0, 0, 0.6]), this.textColor = new l6([255, 255, 255]), this._textShadowSize = 1;
  }
  render() {
    return t14("div", { classes: this._cssClasses(), styles: { left: Math.floor(this.x) + "px", top: Math.floor(this.y) + "px", visibility: this.visible ? "visible" : "hidden", fontSize: this.fontSize + "px", lineHeight: this.fontSize + "px", backgroundColor: this.backgroundColor.toCss(true), color: this.textColor.toCss(true), padding: this.padding + "px", borderRadius: this.borderRadius + "px", textShadow: this._textShadow } }, [this.text]);
  }
  renderCanvas(t25) {
    if (!this.visible) return;
    const e25 = t25.font.replace(/^(.*?)px/, "");
    t25.font = `${this.fontSize}px ${e25}`;
    const { padding: o25, borderRadius: i23 } = this, r26 = t25.measureText(this.text).width, s13 = "" !== this.text ? this.fontSize : 0, l26 = h13[this.anchor];
    t25.textAlign = "center", t25.textBaseline = "middle";
    const n30 = r26 + 2 * o25, a36 = s13 + 2 * o25, x13 = this.x + l26.x * n30, d18 = this.y + l26.y * a36;
    this._roundedRect(t25, x13, d18, n30, a36, i23), t25.fillStyle = this.backgroundColor.toCss(true), t25.fill();
    const p17 = this.x + (l26.x + 0.5) * n30, c26 = this.y + (l26.y + 0.5) * a36;
    this._renderTextShadow(t25, this.text, p17, c26), t25.fillStyle = this.textColor.toCss(true), t25.fillText(this.text, p17, c26);
  }
  _renderTextShadow(t25, e25, o25, i23) {
    t25.lineJoin = "miter", t25.fillStyle = `rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1 / a19.length})`;
    const r26 = this._textShadowSize;
    for (const [s13, l26] of a19) t25.fillText(e25, o25 + r26 * s13, i23 + r26 * l26);
  }
  _roundedRect(t25, e25, o25, i23, r26, s13) {
    s13 = Math.min(s13, r26 / 2, i23 / 2), t25.beginPath(), t25.moveTo(e25, o25 + s13), t25.arcTo(e25, o25, e25 + s13, o25, s13), t25.lineTo(e25 + i23 - s13, o25), t25.arcTo(e25 + i23, o25, e25 + i23, o25 + s13, s13), t25.lineTo(e25 + i23, o25 + r26 - s13), t25.arcTo(e25 + i23, o25 + r26, e25 + i23 - s13, o25 + r26, s13), t25.lineTo(e25 + s13, o25 + r26), t25.arcTo(e25, o25 + r26, e25, o25 + r26 - s13, s13), t25.closePath();
  }
  _cssClasses() {
    const t25 = { "esri-text-overlay-item": true };
    let e25;
    for (e25 in l14) t25[l14[e25]] = this.anchor === e25;
    return t25;
  }
};
r([m()], n15.prototype, "x", void 0), r([m()], n15.prototype, "y", void 0), r([m()], n15.prototype, "position", null), r([m()], n15.prototype, "text", void 0), r([m()], n15.prototype, "fontSize", void 0), r([m()], n15.prototype, "anchor", void 0), r([m()], n15.prototype, "visible", void 0), r([m()], n15.prototype, "isDecoration", void 0), r([m()], n15.prototype, "backgroundColor", void 0), r([m()], n15.prototype, "textColor", void 0), r([m()], n15.prototype, "_textShadowSize", void 0), r([m()], n15.prototype, "_textShadowColor", null), r([m()], n15.prototype, "_textShadow", null), r([m()], n15.prototype, "padding", null), r([m()], n15.prototype, "borderRadius", null), n15 = r([a2("esri.views.overlay.TextOverlayItem")], n15);
var h13 = { bottom: { x: -0.5, y: -1, textAlign: "center", textBaseline: "bottom" }, "bottom-left": { x: 0, y: -1, textAlign: "left", textBaseline: "bottom" }, "bottom-right": { x: -1, y: -1, textAlign: "right", textBaseline: "bottom" }, center: { x: -0.5, y: -0.5, textAlign: "center", textBaseline: "middle" }, left: { x: 0, y: -0.5, textAlign: "left", textBaseline: "middle" }, right: { x: -1, y: -0.5, textAlign: "right", textBaseline: "middle" }, top: { x: -0.5, y: 0, textAlign: "center", textBaseline: "top" }, "top-left": { x: 0, y: 0, textAlign: "left", textBaseline: "top" }, "top-right": { x: -1, y: 0, textAlign: "right", textBaseline: "top" } };
var a19 = [];
{
  const t25 = 16;
  for (let e25 = 0; e25 < 360; e25 += 360 / t25) a19.push([Math.cos(Math.PI * e25 / 180), Math.sin(Math.PI * e25 / 180)]);
}

// node_modules/@arcgis/core/views/interactive/SegmentLabels.js
var O5 = 3025;
var P6 = { default: 15, far: 25 };
var V5 = class extends b {
  constructor(t25) {
    super(t25), this.context = null, this.stagedVertex = null, this.visible = true, this.edgeDistance = "default", this._messageUnitsTask = null, this._labelInfos = [], this._nextLabelIndex = 0;
  }
  initialize() {
    this.addHandles([l3(() => [null != this.context && this.getCameraOrExtent(this.context), this.visible, this._edgeDistancePixels, this.stagedVertex, this._messagesUnits], () => this._update()), ...["vertex-add", "vertex-update", "vertex-remove"].map((t25) => a5(() => this.context?.editGeometryOperations, t25, () => this._update())), l3(() => this._colors, (t25) => this._updateStyle(t25)), d(() => this._refreshMessages()), e(() => this._messageUnitsTask?.abort())]), this._refreshMessages();
  }
  destroy() {
    for (this._nextLabelIndex = 0; this._labelInfos.length; ) this._destroyLabel(this._labelInfos.pop());
  }
  get updating() {
    return null == this._messagesUnits;
  }
  get test() {
  }
  get _messagesUnits() {
    return this._messageUnitsTask?.value;
  }
  get _edgeDistancePixels() {
    return P6[this.edgeDistance];
  }
  get _colors() {
    const t25 = this.context?.view.effectiveTheme.textColor ?? l6.fromArray([255, 255, 255]);
    return { textColor: t25, backgroundColor: P2(E2(t25, R2.Low), 0.6) };
  }
  _update() {
    if (this.destroyed) return;
    this._nextLabelIndex = 0;
    const { context: t25, stagedVertex: e25 } = this;
    if (!t25) return this._destroyUnusedLabels();
    const { editGeometryOperations: s13 } = t25, { components: o25, geometry: r26, coordinateHelper: i23 } = s13.data;
    if (!r26) return this._destroyUnusedLabels();
    const n30 = o25.length;
    for (let l26 = 0; l26 < n30; ++l26) {
      const o26 = G2(r26, s13, e25, i23, l26);
      if (o26.length < 2 || !A5(o26, t25.view, t25.elevationInfo, i23.spatialReference)) continue;
      const a36 = 1 === n30 && !a6(o26);
      let c26 = F7, h23 = H4;
      this.toScreenPointArray(t25, o26[0], c26);
      for (let e26 = 1; e26 < o26.length; ++e26) {
        const s14 = o26[e26 - 1], r27 = o26[e26];
        this.toScreenPointArray(t25, r27, h23), this._addLabel(t25, s14, c26, r27, h23, a36), [c26, h23] = [h23, c26];
      }
    }
    this._destroyUnusedLabels();
  }
  _updateStyle({ textColor: t25, backgroundColor: e25 }) {
    const s13 = this._nextLabelIndex, o25 = this._labelInfos;
    for (let r26 = 0; r26 < s13; ++r26) {
      const { label: s14 } = o25[r26];
      s14.textColor = t25, s14.backgroundColor = e25;
    }
  }
  _addLabel(t25, e25, s13, o25, r26, i23) {
    const { label: n30 } = this._getOrCreateLabel(t25);
    if (!this.visible || b4(s13, r26) < O5) return void (n30.visible = false);
    const { spatialReference: l26 } = t25.editGeometryOperations.data, a36 = t25.automaticLengthMeasurementUtils.autoDistance2D(e25, o25, l26), h23 = this._messagesUnits, p17 = e11(t25.view);
    n30.text = null != h23 && null != a36 ? x4(h23, a36, p17) : "", n30.visible = true;
    const m16 = r26[0] - s13[0], d18 = r26[1] - s13[1];
    i23 ? o8(q8, -d18, m16) : o8(q8, d18, -m16), v3(q8, q8), l8(q8, q8, this._edgeDistancePixels), _4(z6, s13, r26, 0.5), u6(z6, z6, q8), n30.position = [z6[0], z6[1]], Math.abs(q8[0]) > Math.abs(q8[1]) ? n30.anchor = q8[0] > 0 ? "left" : "right" : n30.anchor = -q8[1] < 0 ? "top" : "bottom";
  }
  _getOrCreateLabel(t25) {
    const e25 = this._labelInfos.length > this._nextLabelIndex, { textColor: s13, backgroundColor: o25 } = this._colors;
    if (e25) {
      const t26 = this._labelInfos[this._nextLabelIndex++], { label: e26 } = t26;
      return e26.textColor = s13, e26.backgroundColor = o25, t26;
    }
    const r26 = new n15({ anchor: "center", fontSize: 8, textColor: s13, backgroundColor: o25 });
    t25.view.overlay?.items.add(r26);
    const i23 = { label: r26 };
    return this._labelInfos.push(i23), this._nextLabelIndex = this._labelInfos.length, i23;
  }
  _destroyUnusedLabels() {
    for (; this._labelInfos.length > this._nextLabelIndex; ) this._destroyLabel(this._labelInfos.pop());
  }
  _destroyLabel({ label: t25 }) {
    this.context?.view.overlay?.items.remove(t25), t25.destroy();
  }
  _refreshMessages() {
    this._messageUnitsTask?.abort(), this._messageUnitsTask = d2(() => f("esri/core/t9n/Units"));
  }
};
function G2(t25, e25, s13, o25, r26) {
  const i23 = [];
  if (e25.data.components[r26].iterateVertices((t26) => {
    i23.push(o25.toXYZ(t26.pos, c5.get()));
  }), 0 === r26 && null != s13 && i23.push(o25.toXYZ(s13, c5.get())), i23.length < 2) return i23;
  const n30 = i23[0], l26 = i23[i23.length - 1];
  return "polygon" === t25.type && i23.length > 2 && !J(n30, l26) && i23.push(n30), i23;
}
function A5(t25, e25, s13, o25) {
  if ("2d" === e25.type) return true;
  const r26 = ee(o25) ?? 1, i23 = V(o25), n30 = (t26) => x2(e25, t26, o25, s13, j2) ?? 0;
  for (let l26 = 1; l26 < t25.length; ++l26) {
    const e26 = t25[l26 - 1], s14 = t25[l26], o26 = (s14[0] - e26[0]) * r26, a36 = (s14[1] - e26[1]) * r26, c26 = (n30(s14) - n30(e26)) * i23;
    if (Math.abs(c26) / Math.sqrt(o26 * o26 + a36 * a36) > R9) return false;
  }
  return true;
}
r([m()], V5.prototype, "context", void 0), r([m()], V5.prototype, "stagedVertex", void 0), r([m()], V5.prototype, "visible", void 0), r([m()], V5.prototype, "edgeDistance", void 0), r([m()], V5.prototype, "updating", null), r([m()], V5.prototype, "_messageUnitsTask", void 0), r([m()], V5.prototype, "_messagesUnits", null), r([m()], V5.prototype, "_edgeDistancePixels", null), r([m()], V5.prototype, "_colors", null), V5 = r([a2("esri.views.interactive.SegmentLabels")], V5);
var R9 = s(5);
var q8 = n6();
var z6 = n6();
var F7 = f4();
var H4 = f4();

// node_modules/@arcgis/core/views/3d/interactive/SegmentLabels3D.js
var a20 = class extends V5 {
  getCameraOrExtent({ view: e25 }) {
    return e25.state.camera;
  }
  toScreenPointArray({ view: e25, elevationInfo: t25, editGeometryOperations: o25 }, i23, a36 = f4()) {
    const { spatialReference: m16 } = o25.data.coordinateHelper;
    return i9(i23, m16, t25, e25, c16), e25.state.camera.projectToScreen(c16, a36), a36;
  }
};
a20 = r([a2("esri.views.3d.interactive.SegmentLabels3D")], a20);
var c16 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/DrapedVisualElementResources.js
var d9 = class {
  constructor(e25) {
    this._resourceFactory = e25, this._resources = null, this._visible = true, this._attached = false, this._renderGroup = a16.Outline;
  }
  destroy() {
    this._destroyResources();
  }
  get resources() {
    return this._resources?.external;
  }
  get visible() {
    return this._visible;
  }
  set visible(e25) {
    e25 !== this._visible && (this._visible = e25, this._syncGeometriesToRenderer());
  }
  get attached() {
    return this._attached;
  }
  set attached(e25) {
    e25 !== this._attached && (this._attached = e25, this._createOrDestroyResources());
  }
  get renderGroup() {
    return this._renderGroup;
  }
  set renderGroup(e25) {
    this._renderGroup = e25;
    const r26 = this._resources?.layerView;
    r26 && (r26.renderGroup = e25);
  }
  recreate() {
    this.attached && this._createResources();
  }
  recreateGeometry() {
    this._resourceFactory.recreateGeometry ? null != this._resources && (this._ensureRenderGeometriesRemoved(), this._resourceFactory.recreateGeometry(this._resources.external), this._syncGeometriesToRenderer()) : this.recreate();
  }
  forEachMaterial(e25) {
    this._resources && this._resourceFactory.forEachMaterial(this._resources.external, e25);
  }
  _createOrDestroyResources() {
    this._attached ? null == this._resources && this._createResources() : this._destroyResources();
  }
  _createResources() {
    this._destroyResources();
    const e25 = this._resourceFactory.createResources(), r26 = new n16({ view: this._resourceFactory.view, renderGroup: this._renderGroup }), s13 = this._resourceFactory.view.basemapTerrain?.overlayManager;
    this._resources = { layerView: r26, external: e25, geometriesAdded: false }, s13 && (this._resources.drapeSourceRenderer = s13.registerGeometryDrapeSource(r26)), this._syncGeometriesToRenderer();
  }
  _destroyResources() {
    if (null == this._resources) return;
    this._ensureRenderGeometriesRemoved();
    const e25 = this._resourceFactory.view.basemapTerrain?.overlayManager;
    e25 && e25.unregisterDrapeSource(this._resources.layerView), this._resourceFactory.destroyResources(this._resources.external), this._resources = null;
  }
  _syncGeometriesToRenderer() {
    this._visible ? this._ensureRenderGeometriesAdded() : this._ensureRenderGeometriesRemoved();
  }
  _ensureRenderGeometriesRemoved() {
    if (null == this._resources?.drapeSourceRenderer) return;
    if (!this._resources.geometriesAdded) return;
    this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries, E10.UPDATE), this._resources.geometriesAdded = false;
  }
  _ensureRenderGeometriesAdded() {
    if (null == this._resources?.drapeSourceRenderer) return;
    if (this._resources.geometriesAdded) return;
    this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries, E10.UPDATE), this._resources.geometriesAdded = true;
  }
};
var n16 = class extends n2.IdentifiableMixin(b) {
  constructor(e25) {
    super(e25), this.drapeSourceType = e14.Features, this.updatePolicy = C3.SYNC, this.renderGroup = a16.Outline;
  }
};
r([m({ constructOnly: true })], n16.prototype, "view", void 0), r([m({ readOnly: true })], n16.prototype, "drapeSourceType", void 0), r([m()], n16.prototype, "renderGroup", void 0), n16 = r([a2("esri.views.3d.interactive.visualElements.DrapedVisualElementResources")], n16);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js
var t15 = class {
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e25) {
    this._isDecoration = e25, this.forEachMaterial((t25) => t25?.setParameters({ isDecoration: e25 }));
  }
  constructor(t25) {
    this._isDecoration = false, this._attached = false, this._resourcesCreated = false, this._visible = true, this.view = t25.view, this._handle = l3(() => t25.view.ready, (e25) => {
      this._resourcesCreated && (e25 ? this._createResources() : this._destroyResources());
    });
  }
  applyProperties(e25) {
    let t25 = false;
    for (const s13 in e25) s13 in this && ("attached" === s13 ? t25 = !!e25[s13] : this[s13] = e25[s13]);
    this.attached = t25;
  }
  destroy() {
    this.attached = false, this._handle.remove();
  }
  get attached() {
    return this._attached;
  }
  set attached(e25) {
    e25 !== this._attached && this.view.stage && (this._attached = e25, this._attached && !this._resourcesCreated ? this._createResources() : !this._attached && this._resourcesCreated && this._destroyResources(), this.onAttachedChange(e25));
  }
  onAttachedChange(e25) {
  }
  get visible() {
    return this._visible;
  }
  set visible(e25) {
    e25 !== this._visible && (this._visible = e25, this.attached && this.updateVisibility(e25));
  }
  _createResources() {
    this.createResources(), this._resourcesCreated = true, this.updateVisibility(this.visible);
  }
  _destroyResources() {
    this.destroyResources(), this._resourcesCreated = false;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js
var i14 = class {
  constructor(e25) {
    this._resourceFactory = e25, this._resources = null, this._visible = true, this._attached = false;
  }
  destroy() {
    this._destroyResources();
  }
  get object() {
    return null != this._resources ? this._resources.object : null;
  }
  get resources() {
    return null != this._resources ? this._resources.external : null;
  }
  get visible() {
    return this._visible;
  }
  set visible(e25) {
    e25 !== this._visible && (this._visible = e25, this._syncVisible());
  }
  get attached() {
    return this._attached;
  }
  set attached(e25) {
    e25 !== this._attached && (this._attached = e25, this._createOrDestroyResources());
  }
  recreate() {
    this.attached && this._createResources();
  }
  recreateGeometry() {
    if (!this._resourceFactory.recreateGeometry) return void this.recreate();
    const e25 = this._resourceFactory.view.stage;
    if (null == this._resources || !e25) return;
    const s13 = this._resources.object;
    s13.removeAllGeometries(), this._resourceFactory.recreateGeometry(this._resources.external, s13, this._resources.layer);
  }
  forEachMaterial(e25) {
    this._resources && this._resourceFactory.forEachMaterial(this._resources.external, e25);
  }
  _createOrDestroyResources() {
    this._attached ? this._resources || this._createResources() : this._destroyResources();
  }
  _createResources() {
    this._destroyResources();
    const i23 = this._resourceFactory, o25 = i23.view, a36 = o25.stage;
    if (!a36) return;
    const h23 = new l12(a36, { pickable: false, updatePolicy: C3.SYNC }), u23 = new A3({ castShadow: false }), l26 = i23.createResources(u23, h23);
    h23.add(u23);
    const _10 = i23.cameraChanged, n30 = _10 ? l3(() => o25.state.camera, (e25) => _10(e25), h) : null;
    this._resources = { layer: h23, object: u23, external: l26, cameraHandle: n30 }, this._syncVisible();
  }
  _destroyResources() {
    null != this._resources && (this._resources.layer.destroy(), this._resources.object.dispose(), this._resources.cameraHandle?.remove(), this._resourceFactory.destroyResources(this._resources.external), this._resources = null);
  }
  _syncVisible() {
    null != this._resources && (this._resources.object.visible = this._visible);
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/EngineVisualElement.js
var t16 = class extends t15 {
  constructor(s13) {
    super(s13), this._isDraped = false, this.object3dResources = new i14(this.createObject3DResourceFactory(s13.view)), this.drapedResources = new d9(this.createDrapedResourceFactory(s13.view)), this.isDraped = s13.isDraped ?? false;
  }
  get isDraped() {
    return this._isDraped;
  }
  set isDraped(e25) {
    e25 !== this._isDraped && (this._isDraped = e25, this.object3dResources.attached = this.attached && !e25, this.drapedResources.attached = this.attached && e25);
  }
  get renderGroup() {
    return this.drapedResources.renderGroup;
  }
  set renderGroup(e25) {
    this.drapedResources.renderGroup = e25;
  }
  createResources() {
    this.object3dResources.attached = !this._isDraped, this.drapedResources.attached = this._isDraped;
  }
  destroyResources() {
    this.object3dResources.attached = false, this.drapedResources.attached = false;
  }
  recreate() {
    this.object3dResources.recreate(), this.drapedResources.recreate();
  }
  recreateGeometry() {
    this.object3dResources.recreateGeometry(), this.drapedResources.recreateGeometry();
  }
  destroy() {
    this.object3dResources.destroy(), this.drapedResources.destroy(), super.destroy();
  }
  updateVisibility(e25) {
    this.object3dResources.visible = e25, this.drapedResources.visible = e25;
  }
  forEachMaterial(e25) {
    this.object3dResources?.forEachMaterial(e25), this.drapedResources?.forEachMaterial(e25);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CompositingTechnique.js
var a21 = class extends g4 {
  constructor(e25, o25) {
    super(e25, o25, new t9(c14, () => import("./Compositing.glsl-WU4NBOMM.js")));
  }
  initializePipeline(r26) {
    switch (r26.blitMode) {
      case i10.None:
      case i10.Depth:
        return B({ colorWrite: g3 });
      case i10.Alpha:
        return B({ blending: c9, colorWrite: g3 });
      default:
        n(r26.blitMode);
      case i10.PremultipliedAlpha:
      case i10.COUNT:
        return B({ blending: o13, colorWrite: g3 });
    }
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/blit/Blit.js
var o19 = class {
  constructor(s13, o25 = i10.None) {
    this._techniques = s13, this._parameters = new m7(), this._configuration = new r17(), this._configuration.blitMode = o25, s13.precompile(a21, this._configuration);
  }
  blit(e25, i23, r26, o25) {
    e25.bindFramebuffer(r26.fbo), e25.setClearColor(0, 0, 0, 1), e25.clear(_5.COLOR), this._parameters.texture = i23.getTexture();
    const n30 = this._techniques.get(a21, this._configuration);
    e25.bindTechnique(n30, o25, this._parameters), e25.screen.draw();
  }
  blend(e25, i23, r26, s13, o25 = 1) {
    this._configuration.hasOpacityFactor = o25 < 1;
    const n30 = this._techniques.get(a21, this._configuration);
    return !!n30.compiled && (e25.bindFramebuffer(r26.fbo), this._parameters.texture = i23.getTexture(), this._parameters.opacity = o25, e25.bindTechnique(n30, s13, this._parameters), e25.screen.draw(), true);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js
var a22 = class extends c8 {
  constructor() {
    super(...arguments), this.innerColor = r6(1, 1, 1), this.innerWidth = 1, this.glowColor = r6(1, 0.5, 0), this.glowWidth = 8, this.glowFalloff = 8, this.globalAlpha = 0.75, this.globalAlphaContrastBoost = 2, this.angleCutoff = s(6), this.pointDistanceOrigin = n3(), this.pointDistanceTarget = n3(), this.lineVerticalPlaneSegment = v4(), this.intersectsLineSegment = v4(), this.intersectsLineRadius = 3, this.heightManifoldTarget = n3(), this.lineStartWorld = n3(), this.lineEndWorld = n3();
  }
};
var h14 = class extends g4 {
  constructor(e25, t25) {
    super(e25, t25, new t9($, () => import("./Laserlines.glsl-EBLPRAUP.js")));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js
var a23 = class extends a22 {
  constructor() {
    super(...arguments), this.origin = n3();
  }
};
var c17 = class extends g4 {
  constructor(e25, s13) {
    super(e25, s13, new t9(u13, () => import("./LaserlinePath.glsl-FMR52QFG.js")), n17);
  }
};
var n17 = /* @__PURE__ */ new Map([[e8.START, 0], [e8.END, 1], [e8.EXTRUDE, 2], [e8.START_UP, 3], [e8.END_UP, 4]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js
var _6 = class {
  constructor(e25) {
    this._renderCoordsHelper = e25, this._buffers = null, this._origin = n3(), this._dirty = false, this._count = 0, this._vao = null;
  }
  set vertices(e25) {
    const t25 = t3(3 * e25.length);
    let r26 = 0;
    for (const s13 of e25) t25[r26++] = s13[0], t25[r26++] = s13[1], t25[r26++] = s13[2];
    this.buffers = [t25];
  }
  set buffers(t25) {
    if (this._buffers = t25, this._buffers.length > 0) {
      const t26 = this._buffers[0], r26 = 3 * Math.floor(t26.length / 3 / 2);
      o6(this._origin, t26[r26], t26[r26 + 1], t26[r26 + 2]);
    } else o6(this._origin, 0, 0, 0);
    this._dirty = true;
  }
  get origin() {
    return this._origin;
  }
  draw(e25) {
    const t25 = this._ensureVAO(e25);
    null != t25 && (e25.bindVAO(t25), e25.drawArrays(R4.TRIANGLES, 0, this._count));
  }
  dispose() {
    null != this._vao && this._vao.dispose();
  }
  get _layout() {
    return this._renderCoordsHelper.viewingMode === l9.Global ? b12 : g9;
  }
  _ensureVAO(e25) {
    return null == this._buffers ? null : (this._vao ??= this._createVAO(e25, this._buffers), this._ensureVertexData(this._vao, this._buffers), this._vao);
  }
  _createVAO(e25, t25) {
    const r26 = this._createDataBuffer(t25);
    return this._dirty = false, new r18(e25, n17, /* @__PURE__ */ new Map([["data", t11(this._layout)]]), /* @__PURE__ */ new Map([["data", E5.createVertex(e25, Y.STATIC_DRAW, r26)]]));
  }
  _ensureVertexData(e25, t25) {
    if (!this._dirty) return;
    const r26 = this._createDataBuffer(t25);
    e25.vertexBuffers.get("data")?.setData(r26), this._dirty = false;
  }
  _createDataBuffer(r26) {
    const s13 = r26.reduce((e25, t25) => e25 + d10(t25), 0);
    this._count = s13;
    const i23 = this._layout.createBuffer(s13), o25 = this._origin;
    let f21 = 0, n30 = 0;
    const u23 = "startUp" in i23 ? this._setUpVectors.bind(this, i23) : void 0;
    for (const a36 of r26) {
      for (let r27 = 0; r27 < a36.length; r27 += 3) {
        const s14 = o6(m8, a36[r27], a36[r27 + 1], a36[r27 + 2]);
        0 === r27 ? n30 = this._renderCoordsHelper.getAltitude(s14) : this._renderCoordsHelper.setAltitude(s14, n30);
        const l26 = f21 + 2 * r27;
        u23?.(r27, l26, a36, s14);
        const c26 = c4(m8, s14, o25);
        if (r27 < a36.length - 3) {
          for (let e25 = 0; e25 < 6; e25++) i23.start.setVec(l26 + e25, c26);
          i23.extrude.setValues(l26, 0, -1), i23.extrude.setValues(l26 + 1, 1, -1), i23.extrude.setValues(l26 + 2, 1, 1), i23.extrude.setValues(l26 + 3, 0, -1), i23.extrude.setValues(l26 + 4, 1, 1), i23.extrude.setValues(l26 + 5, 0, 1);
        }
        if (r27 > 0) for (let e25 = -6; e25 < 0; e25++) i23.end.setVec(l26 + e25, c26);
      }
      f21 += d10(a36);
    }
    return i23.buffer;
  }
  _setUpVectors(e25, t25, r26, s13, i23) {
    const o25 = this._renderCoordsHelper.worldUpAtPosition(i23, p14);
    if (t25 < s13.length - 3) for (let f21 = 0; f21 < 6; f21++) e25.startUp.setVec(r26 + f21, o25);
    if (t25 > 0) for (let f21 = -6; f21 < 0; f21++) e25.endUp.setVec(r26 + f21, o25);
  }
};
function d10(e25) {
  return 3 * (2 * (e25.length / 3 - 1));
}
var p14 = n3();
var m8 = n3();
var b12 = O3().vec3f(e8.START).vec3f(e8.END).vec2f(e8.EXTRUDE).vec3f(e8.START_UP).vec3f(e8.END_UP);
var g9 = O3().vec3f(e8.START).vec3f(e8.END).vec2f(e8.EXTRUDE);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js
var e18 = class extends a12 {
  constructor() {
    super(...arguments), this.contrastControlEnabled = false, this.spherical = false;
  }
};
r([i7()], e18.prototype, "contrastControlEnabled", void 0), r([i7()], e18.prototype, "spherical", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js
var n18 = class extends e18 {
  constructor() {
    super(...arguments), this.heightManifoldEnabled = false, this.pointDistanceEnabled = false, this.lineVerticalPlaneEnabled = false, this.intersectsLineEnabled = false;
  }
};
r([i7()], n18.prototype, "heightManifoldEnabled", void 0), r([i7()], n18.prototype, "pointDistanceEnabled", void 0), r([i7()], n18.prototype, "lineVerticalPlaneEnabled", void 0), r([i7()], n18.prototype, "intersectsLineEnabled", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js
var j6 = class extends u9 {
  constructor(e25) {
    super(e25), this.isDecoration = true, this.produces = t10.LASERLINES, this.consumes = { required: [t10.LASERLINES, "normals"] }, this.requireGeometryDepth = true, this._configuration = new n18(), this._pathTechniqueConfiguration = new e18(), this._heightManifoldEnabled = false, this._pointDistanceEnabled = false, this._lineVerticalPlaneEnabled = false, this._intersectsLineEnabled = false, this._intersectsLineInfinite = false, this._pathVerticalPlaneEnabled = false, this._passParameters = new a23();
    const t25 = e25.view.stage.renderView.techniques, i23 = new e18();
    i23.contrastControlEnabled = e25.contrastControlEnabled, t25.precompile(c17, i23);
  }
  initialize() {
    this._passParameters.renderCoordsHelper = this.view.renderCoordsHelper, this._pathTechniqueConfiguration.spherical = this.view.state.viewingMode === l9.Global, this._pathTechniqueConfiguration.contrastControlEnabled = this.contrastControlEnabled, this._techniques.precompile(c17, this._pathTechniqueConfiguration), this._blit = new o19(this._techniques, i10.PremultipliedAlpha);
  }
  destroy() {
    this._pathVerticalPlaneData = r3(this._pathVerticalPlaneData), this._blit = null;
  }
  get _techniques() {
    return this.view.stage.renderView.techniques;
  }
  get heightManifoldEnabled() {
    return this._heightManifoldEnabled;
  }
  set heightManifoldEnabled(e25) {
    this._heightManifoldEnabled !== e25 && (this._heightManifoldEnabled = e25, this.requestRender(a10.UPDATE));
  }
  get heightManifoldTarget() {
    return this._passParameters.heightManifoldTarget;
  }
  set heightManifoldTarget(e25) {
    s6(this._passParameters.heightManifoldTarget, e25), this.requestRender(a10.UPDATE);
  }
  get pointDistanceEnabled() {
    return this._pointDistanceEnabled;
  }
  set pointDistanceEnabled(e25) {
    e25 !== this._pointDistanceEnabled && (this._pointDistanceEnabled = e25, this.requestRender(a10.UPDATE));
  }
  get pointDistanceTarget() {
    return this._passParameters.pointDistanceTarget;
  }
  set pointDistanceTarget(e25) {
    s6(this._passParameters.pointDistanceTarget, e25), this.requestRender(a10.UPDATE);
  }
  get pointDistanceOrigin() {
    return this._passParameters.pointDistanceOrigin;
  }
  set pointDistanceOrigin(e25) {
    s6(this._passParameters.pointDistanceOrigin, e25), this.requestRender(a10.UPDATE);
  }
  get lineVerticalPlaneEnabled() {
    return this._lineVerticalPlaneEnabled;
  }
  set lineVerticalPlaneEnabled(e25) {
    e25 !== this._lineVerticalPlaneEnabled && (this._lineVerticalPlaneEnabled = e25, this.requestRender(a10.UPDATE));
  }
  get lineVerticalPlaneSegment() {
    return this._passParameters.lineVerticalPlaneSegment;
  }
  set lineVerticalPlaneSegment(e25) {
    p5(e25, this._passParameters.lineVerticalPlaneSegment), this.requestRender(a10.UPDATE);
  }
  get intersectsLineEnabled() {
    return this._intersectsLineEnabled;
  }
  set intersectsLineEnabled(e25) {
    e25 !== this._intersectsLineEnabled && (this._intersectsLineEnabled = e25, this.requestRender(a10.UPDATE));
  }
  get intersectsLineSegment() {
    return this._passParameters.intersectsLineSegment;
  }
  set intersectsLineSegment(e25) {
    p5(e25, this._passParameters.intersectsLineSegment), this.requestRender(a10.UPDATE);
  }
  get intersectsLineInfinite() {
    return this._intersectsLineInfinite;
  }
  set intersectsLineInfinite(e25) {
    e25 !== this._intersectsLineInfinite && (this._intersectsLineInfinite = e25, this.requestRender(a10.UPDATE));
  }
  get pathVerticalPlaneEnabled() {
    return this._pathVerticalPlaneEnabled;
  }
  set pathVerticalPlaneEnabled(e25) {
    e25 !== this._pathVerticalPlaneEnabled && (this._pathVerticalPlaneEnabled = e25, null != this._pathVerticalPlaneData && this.requestRender(a10.UPDATE));
  }
  set pathVerticalPlaneVertices(e25) {
    null == this._pathVerticalPlaneData && (this._pathVerticalPlaneData = new _6(this._passParameters.renderCoordsHelper)), this._pathVerticalPlaneData.vertices = e25, this.pathVerticalPlaneEnabled && this.requestRender(a10.UPDATE);
  }
  set pathVerticalPlaneBuffers(e25) {
    null == this._pathVerticalPlaneData && (this._pathVerticalPlaneData = new _6(this._passParameters.renderCoordsHelper)), this._pathVerticalPlaneData.buffers = e25, this.pathVerticalPlaneEnabled && this.requestRender(a10.UPDATE);
  }
  setParameters(e25) {
    n11(this._passParameters, e25) && this.requestRender(a10.UPDATE);
  }
  precompile() {
    this._acquireTechnique();
  }
  render(e25) {
    const t25 = e25.find(({ name: e26 }) => e26 === this.produces);
    if (this.isDecoration && !this.bindParameters.decorations || null == this._blit) return t25;
    const i23 = this.renderingContext, n30 = e25.find(({ name: e26 }) => "normals" === e26);
    this._passParameters.normals = n30?.getTexture();
    const s13 = () => {
      (this.heightManifoldEnabled || this.pointDistanceEnabled || this.lineVerticalPlaneSegment || this.intersectsLineEnabled) && this._renderUnified(), this.pathVerticalPlaneEnabled && this._renderPath();
    };
    if (!this.contrastControlEnabled) return i23.bindFramebuffer(t25.fbo), s13(), t25;
    this._passParameters.colors = t25.getTexture();
    const r26 = this.fboCache.acquire(t25.fbo.width, t25.fbo.height, "laser lines");
    return i23.bindFramebuffer(r26.fbo), i23.setClearColor(0, 0, 0, 0), i23.clear(_5.COLOR | _5.DEPTH), s13(), i23.unbindTexture(t25.getTexture()), this._blit.blend(i23, r26, t25, this.bindParameters) || this.requestRender(a10.UPDATE), r26.release(), t25;
  }
  _acquireTechnique() {
    return this._configuration.heightManifoldEnabled = this.heightManifoldEnabled, this._configuration.lineVerticalPlaneEnabled = this.lineVerticalPlaneEnabled, this._configuration.pointDistanceEnabled = this.pointDistanceEnabled, this._configuration.intersectsLineEnabled = this.intersectsLineEnabled, this._configuration.contrastControlEnabled = this.contrastControlEnabled, this._configuration.spherical = this.view.state.viewingMode === l9.Global, this._techniques.get(h14, this._configuration);
  }
  _renderUnified() {
    if (!this._updatePassParameters()) return;
    const e25 = this._acquireTechnique();
    if (e25.compiled) {
      const t25 = this.renderingContext;
      t25.bindTechnique(e25, this.bindParameters, this._passParameters), t25.screen.draw();
    } else this.requestRender(a10.UPDATE);
  }
  _renderPath() {
    if (null == this._pathVerticalPlaneData) return;
    const e25 = this._techniques.get(c17, this._pathTechniqueConfiguration);
    if (e25.compiled) {
      const t25 = this.renderingContext;
      this._passParameters.origin = this._pathVerticalPlaneData.origin, t25.bindTechnique(e25, this.bindParameters, this._passParameters), this._pathVerticalPlaneData.draw(t25);
    } else this.requestRender(a10.UPDATE);
  }
  _updatePassParameters() {
    if (!this._intersectsLineEnabled) return true;
    const e25 = this.bindParameters.camera, t25 = this._passParameters;
    if (this._intersectsLineInfinite) {
      if (y5(k(t25.intersectsLineSegment.origin, t25.intersectsLineSegment.vector), w8), w8.c0 = -Number.MAX_VALUE, !m4(e25.frustum, w8)) return false;
      p9(w8, t25.lineStartWorld), g5(w8, t25.lineEndWorld);
    } else s6(t25.lineStartWorld, t25.intersectsLineSegment.origin), u5(t25.lineEndWorld, t25.intersectsLineSegment.origin, t25.intersectsLineSegment.vector);
    return true;
  }
  get test() {
  }
};
r([m({ constructOnly: true })], j6.prototype, "contrastControlEnabled", void 0), r([m()], j6.prototype, "isDecoration", void 0), r([m()], j6.prototype, "produces", void 0), r([m()], j6.prototype, "consumes", void 0), j6 = r([a2("esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer")], j6);
var w8 = a14();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js
var c18 = class extends t15 {
  constructor(e25) {
    super(e25), this._angleCutoff = V4, this._style = {}, this._heightManifoldTarget = n3(), this._heightManifoldEnabled = false, this._intersectsLine = v4(), this._intersectsLineEnabled = false, this._intersectsLineInfinite = false, this._lineVerticalPlaneSegment = null, this._pathVerticalPlaneBuffers = null, this._pointDistanceLine = null, this.applyProperties(e25);
  }
  get testData() {
  }
  createResources() {
    this._ensureRenderer();
  }
  destroyResources() {
    this._disposeRenderer();
  }
  updateVisibility() {
    this._syncRenderer(), this._syncHeightManifold(), this._syncIntersectsLine(), this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance();
  }
  get angleCutoff() {
    return this._angleCutoff;
  }
  set angleCutoff(e25) {
    this._angleCutoff !== e25 && (this._angleCutoff = e25, this._syncAngleCutoff());
  }
  get style() {
    return this._style;
  }
  set style(e25) {
    this._style = e25, this._syncStyle();
  }
  get heightManifoldTarget() {
    return this._heightManifoldEnabled ? this._heightManifoldTarget : null;
  }
  set heightManifoldTarget(t25) {
    null != t25 ? (s6(this._heightManifoldTarget, t25), this._heightManifoldEnabled = true) : this._heightManifoldEnabled = false, this._syncRenderer(), this._syncHeightManifold();
  }
  set intersectsWorldUpAtLocation(e25) {
    if (null == e25) return void (this.intersectsLine = null);
    const t25 = this.view.renderCoordsHelper.worldUpAtPosition(e25, _7);
    this.intersectsLine = b6(e25, t25), this.intersectsLineInfinite = true;
  }
  get intersectsLine() {
    return this._intersectsLineEnabled ? this._intersectsLine : null;
  }
  set intersectsLine(e25) {
    null != e25 ? (p5(e25, this._intersectsLine), this._intersectsLineEnabled = true) : this._intersectsLineEnabled = false, this._syncIntersectsLine(), this._syncRenderer();
  }
  get intersectsLineInfinite() {
    return this._intersectsLineInfinite;
  }
  set intersectsLineInfinite(e25) {
    this._intersectsLineInfinite = e25, this._syncIntersectsLineInfinite();
  }
  get lineVerticalPlaneSegment() {
    return this._lineVerticalPlaneSegment;
  }
  set lineVerticalPlaneSegment(e25) {
    this._lineVerticalPlaneSegment = null != e25 ? p5(e25) : null, this._syncLineVerticalPlane(), this._syncRenderer();
  }
  get pathVerticalPlane() {
    return this._pathVerticalPlaneBuffers;
  }
  set pathVerticalPlane(e25) {
    this._pathVerticalPlaneBuffers = e25, this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance(), this._syncRenderer();
  }
  get pointDistanceLine() {
    return this._pointDistanceLine;
  }
  set pointDistanceLine(e25) {
    this._pointDistanceLine = null != e25 ? { origin: t4(e25.origin), target: e25.target ? t4(e25.target) : null } : null, this._syncPointDistance(), this._syncRenderer();
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e25) {
    this._isDecoration = e25, this._renderer && (this._renderer.isDecoration = e25);
  }
  _syncRenderer() {
    this.attached && this.visible && (this._intersectsLineEnabled || this._heightManifoldEnabled || null != this._pointDistanceLine || null != this._pathVerticalPlaneBuffers) ? this._ensureRenderer() : this._disposeRenderer();
  }
  _ensureRenderer() {
    null == this._renderer && (this._renderer = new j6({ view: this.view, contrastControlEnabled: true, isDecoration: this.isDecoration }), this._syncStyle(), this._syncHeightManifold(), this._syncIntersectsLine(), this._syncIntersectsLineInfinite(), this._syncPathVerticalPlane(), this._syncLineVerticalPlane(), this._syncPointDistance(), this._syncAngleCutoff());
  }
  _syncStyle() {
    null != this._renderer && this._renderer.setParameters(this._style);
  }
  _syncAngleCutoff() {
    this._renderer?.setParameters({ angleCutoff: this._angleCutoff });
  }
  _syncHeightManifold() {
    null != this._renderer && (this._renderer.heightManifoldEnabled = this._heightManifoldEnabled && this.visible, this._heightManifoldEnabled && (this._renderer.heightManifoldTarget = this._heightManifoldTarget));
  }
  _syncIntersectsLine() {
    null != this._renderer && (this._renderer.intersectsLineEnabled = this._intersectsLineEnabled && this.visible, this._intersectsLineEnabled && (this._renderer.intersectsLineSegment = this._intersectsLine));
  }
  _syncIntersectsLineInfinite() {
    null != this._renderer && (this._renderer.intersectsLineInfinite = this._intersectsLineInfinite);
  }
  _syncPathVerticalPlane() {
    null != this._renderer && (this._renderer.pathVerticalPlaneEnabled = null != this._pathVerticalPlaneBuffers && this.visible, null != this._pathVerticalPlaneBuffers && (this._renderer.pathVerticalPlaneBuffers = this._pathVerticalPlaneBuffers));
  }
  _syncLineVerticalPlane() {
    null != this._renderer && (this._renderer.lineVerticalPlaneEnabled = null != this._lineVerticalPlaneSegment && this.visible, null != this._lineVerticalPlaneSegment && (this._renderer.lineVerticalPlaneSegment = this._lineVerticalPlaneSegment));
  }
  _syncPointDistance() {
    if (null == this._renderer) return;
    const e25 = this._pointDistanceLine, t25 = null != e25;
    this._renderer.pointDistanceEnabled = t25 && null != e25.target && this.visible, t25 && (this._renderer.pointDistanceOrigin = e25.origin, null != e25.target && (this._renderer.pointDistanceTarget = e25.target));
  }
  _disposeRenderer() {
    null != this._renderer && this.view.stage && (this._renderer.destroy(), this._renderer = null);
  }
  forEachMaterial() {
  }
};
var _7 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/ExtendedLineVisualElement.js
var G3 = class extends t16 {
  constructor(e25) {
    super(e25), this._ray = b5(), this._isWorldDown = false, this._start = n3(), this._end = r6(1, 0, 0), this._width = 1, this._color = r8(1, 0, 1, 1), this._polygonOffset = false, this._writeDepthEnabled = true, this._innerWidth = 0, this._innerColor = r8(1, 1, 1, 1), this._stipplePattern = null, this._stippleOffColor = null, this._stipplePreferContinuous = true, this._falloff = 0, this._extensionType = V6.LINE, this._laserlineStyle = null, this._laserlineEnabled = false, this._renderOccluded = o12.OccludeAndTransparent, this._fadedExtensions = L4, this._laserline = new c18({ view: this.view, isDecoration: e25.isDecoration }), this.applyProperties(e25);
  }
  destroy() {
    this._laserline.destroy(), super.destroy();
  }
  createObject3DResourceFactory(e25) {
    return { view: e25, createResources: (e26) => this._createObject3DResources(e26), destroyResources: P7, recreateGeometry: (e26, t25) => this._recreateObject3DGeometry(e26, t25), cameraChanged: () => this._updateGeometry(), forEachMaterial: (e26, t25) => t25(e26.material) };
  }
  createDrapedResourceFactory(e25) {
    return { view: e25, createResources: () => this._createDrapedResources(), destroyResources: P7, recreateGeometry: (e26) => this._recreateDrapedGeometry(e26), forEachMaterial: (e26, t25) => t25(e26.material) };
  }
  updateVisibility(e25) {
    super.updateVisibility(e25), this._laserline.visible = e25;
  }
  onAttachedChange() {
    this._laserline.attached = this._laserlineAttached;
  }
  setStartEndFromWorldDownAtLocation(r26) {
    this._isWorldDown = true, s6(this._start, r26), this.view.renderCoordsHelper.worldUpAtPosition(r26, this._end), c4(this._end, r26, this._end), S3(this._start, this._end, this._ray), this._updateGeometry();
  }
  get start() {
    return this._start;
  }
  set start(t25) {
    this._isWorldDown = false, H(this._start, t25) || (s6(this._start, t25), S3(this._start, this._end, this._ray), this._updateGeometry());
  }
  get end() {
    return this._end;
  }
  set end(t25) {
    this._isWorldDown = false, H(this._end, t25) || (s6(this._end, t25), S3(this._start, this._end, this._ray), this._updateGeometry());
  }
  get width() {
    return this._width;
  }
  set width(e25) {
    e25 !== this._width && (this._width = e25, this._updateMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e25) {
    E(e25, this._color) || (a9(this._color, e25), this._updateMaterial());
  }
  get polygonOffset() {
    return this._polygonOffset;
  }
  set polygonOffset(e25) {
    e25 !== this._polygonOffset && (this._polygonOffset = e25, this._updateMaterial());
  }
  get writeDepthEnabled() {
    return this._writeDepthEnabled;
  }
  set writeDepthEnabled(e25) {
    this._writeDepthEnabled !== e25 && (this._writeDepthEnabled = e25, this._updateMaterial());
  }
  get innerWidth() {
    return this._innerWidth;
  }
  set innerWidth(e25) {
    e25 !== this._innerWidth && (this._innerWidth = e25, this._updateMaterial());
  }
  get innerColor() {
    return this._innerColor;
  }
  set innerColor(e25) {
    E(e25, this._innerColor) || (a9(this._innerColor, e25), this._updateMaterial());
  }
  get stipplePattern() {
    return this._stipplePattern;
  }
  set stipplePattern(e25) {
    const t25 = null != e25 != (null != this._stipplePattern);
    this._stipplePattern = e25, t25 ? this.recreate() : this._updateMaterial();
  }
  get stippleOffColor() {
    return this._stippleOffColor;
  }
  set stippleOffColor(e25) {
    null != e25 && null != this._stippleOffColor && E(e25, this._stippleOffColor) || (this._stippleOffColor = null != e25 ? t5(e25) : null, this._updateMaterial());
  }
  get stipplePreferContinuous() {
    return this._stipplePreferContinuous;
  }
  set stipplePreferContinuous(e25) {
    e25 !== this._stipplePreferContinuous && (this._stipplePreferContinuous = e25, this._updateMaterial());
  }
  get falloff() {
    return this._falloff;
  }
  set falloff(e25) {
    e25 !== this._falloff && (this._falloff = e25, this._updateMaterial());
  }
  get extensionType() {
    return this._extensionType;
  }
  set extensionType(e25) {
    e25 !== this._extensionType && (this._extensionType = e25, this.recreateGeometry());
  }
  get _laserlineAttached() {
    return this._laserlineEnabled && null != this._laserlineStyle && this.attached && !this.isDraped;
  }
  get laserlineStyle() {
    return this._laserlineStyle;
  }
  set laserlineStyle(e25) {
    this._laserlineStyle = e25, this._laserline.attached = this._laserlineAttached, null != e25 && (this._laserline.style = e25);
  }
  get laserlineEnabled() {
    return this._laserlineEnabled;
  }
  set laserlineEnabled(e25) {
    this._laserlineEnabled !== e25 && (this._laserlineEnabled = e25, this._laserline.attached = this._laserlineAttached);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e25) {
    e25 !== this._renderOccluded && (this._renderOccluded = e25, this._updateMaterial());
  }
  get _normalizedRenderOccluded() {
    return this.isDraped && this._renderOccluded === o12.OccludeAndTransparentStencil ? o12.OccludeAndTransparent : this._renderOccluded;
  }
  get fadedExtensions() {
    return this._fadedExtensions;
  }
  set fadedExtensions(e25) {
    this._fadedExtensions = e25 ?? L4, this.recreateGeometry();
  }
  _updateMaterial() {
    const { materialParameters: e25 } = this;
    this.object3dResources.resources?.material.setParameters(e25), this.drapedResources.resources?.material.setParameters(e25);
  }
  get materialParameters() {
    return { width: this._width, color: this._color, stippleOffColor: this._stippleOffColor, stipplePattern: this._stipplePattern, stipplePreferContinuous: this._stipplePreferContinuous, innerWidth: this._innerWidth, innerColor: this._innerColor, falloff: this._falloff, hasPolygonOffset: this._polygonOffset, renderOccluded: this._normalizedRenderOccluded, isDecoration: this.isDecoration, writeDepth: this._writeDepthEnabled };
  }
  _createObject3DResources(e25) {
    const t25 = new q7(this.materialParameters), r26 = new Array();
    return this._createObject3DGeometry(t25, e25, r26), { material: t25, geometries: r26 };
  }
  _recreateObject3DGeometry(e25, t25) {
    e25.geometries.length = 0, this._createObject3DGeometry(e25.material, t25, e25.geometries);
  }
  _createObject3DGeometry(e25, t25, r26) {
    const i23 = this._createGeometry(e25);
    r26.push(i23), t25.addGeometry(i23), this._updateVerticesObject3D(t25);
  }
  _createDrapedResources() {
    const e25 = new q7(this.materialParameters);
    return { material: e25, geometries: [this._createDrapedGeometry(e25)] };
  }
  _recreateDrapedGeometry(e25) {
    e25.geometries = [this._createDrapedGeometry(e25.material)];
  }
  _createDrapedGeometry(e25) {
    const t25 = this._createGeometry(e25);
    return this._updateVerticesDraped(t25), new g8(t25);
  }
  _createGeometry(e25) {
    const t25 = this.extensionType === V6.FADED, r26 = t25 ? [n3(), n3(), n3(), n3()] : [n3(), n3()];
    return wt(e25, r26, null, t25 ? [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0] : null);
  }
  _updateGeometry() {
    if (this.isDraped) this.drapedResources.recreateGeometry();
    else {
      const e25 = this.object3dResources.object;
      e25 && this._updateVerticesObject3D(e25);
    }
  }
  _updateVerticesObject3D(e25) {
    const t25 = this._lineSegment;
    this._updateVertexAttributesObject3D(e25, t25), this._laserline.intersectsLine = t25;
  }
  _updateVerticesDraped(e25) {
    this._updateVertexAttributesDraped(e25, this._lineSegment);
  }
  get _lineSegment() {
    return this._extensionType === V6.FADED ? this._updateLineSegmentFinite(S7) : this._updateLineSegmentInfinite(this._extensionType, S7);
  }
  _updateLineSegmentFinite(e25) {
    return h5(this._start, this._end, e25);
  }
  _updateLineSegmentInfinite(e25, t25) {
    const r26 = this.view.state.camera;
    switch (y5(this._ray, x6), e25) {
      case V6.LINE:
        x6.c0 = -Number.MAX_VALUE;
        break;
      case V6.RAY:
      case V6.GROUND_RAY: {
        const e26 = this._ray.origin, t26 = this.view.elevationProvider.getElevation(e26[0], e26[1], e26[2], this.view.renderCoordsHelper.spatialReference, "ground") ?? 0, r27 = this.view.renderCoordsHelper.getAltitude(e26);
        this._isWorldDown && r27 < t26 && y3(x6.ray.direction, x6.ray.direction), this._extensionType === V6.GROUND_RAY && null != t26 && (x6.c1 = Math.abs(r27 - t26));
        break;
      }
    }
    if (!m4(r26.frustum, x6)) return this._updateLineSegmentFinite(t25);
    const s13 = p9(x6, v6), n30 = g5(x6, M5);
    return h5(s13, n30, t25);
  }
  _updateVertexAttributesObject3D(e25, t25) {
    const r26 = e25.geometries[0].getMutableAttribute(e8.POSITION)?.data;
    if (!r26) return;
    let i23 = 0;
    for (const s13 of this._lineVertices(t25)) r26[i23++] = s13[0], r26[i23++] = s13[1], r26[i23++] = s13[2];
    e25.geometryVertexAttributeUpdated(e25.geometries[0], e8.POSITION);
  }
  _updateVertexAttributesDraped(e25, t25) {
    const r26 = e25.getMutableAttribute(e8.POSITION)?.data;
    if (!r26) return;
    let i23 = 0;
    for (const s13 of this._lineVertices(t25)) r26[i23++] = s13[0], r26[i23++] = s13[1], r26[i23++] = te;
    e25.invalidateBoundingInfo();
  }
  *_lineVertices(e25) {
    this.extensionType === V6.FADED ? (yield l10(e25, -this.fadedExtensions.start, v6), yield l10(e25, 0, v6), yield l10(e25, 1, v6), yield l10(e25, 1 + this.fadedExtensions.end, v6)) : (yield l10(e25, 0, v6), yield l10(e25, 1, v6));
  }
};
function P7(e25) {
  e25.geometries = [];
}
var x6 = a14();
var v6 = n3();
var M5 = n3();
var S7 = v4();
var V6;
!function(e25) {
  e25[e25.LINE = 0] = "LINE", e25[e25.RAY = 1] = "RAY", e25[e25.GROUND_RAY = 2] = "GROUND_RAY", e25[e25.FADED = 3] = "FADED";
}(V6 || (V6 = {}));
var T3 = 1 / 3;
var L4 = { start: T3, end: T3 };

// node_modules/@arcgis/core/views/3d/interactive/visualElements/ParallelLineVisualElement.js
var v7 = class extends t16 {
  constructor(e25) {
    super(e25), this._location = n3(), this._direction = r6(1, 0, 0), this._width = 1, this._offset = 1, this._length = 18, this._color = r8(1, 0, 1, 1), this._renderOccluded = o12.OccludeAndTransparent, this.applyProperties(e25);
  }
  createObject3DResourceFactory(e25) {
    return { view: e25, createResources: (e26) => this._createObject3DResources(e26), destroyResources: M6, recreateGeometry: (e26, t25) => this._recreateObject3DGeometry(e26, t25), cameraChanged: () => this._updateGeometry(), forEachMaterial: (e26, t25) => t25(e26.material) };
  }
  createDrapedResourceFactory(e25) {
    return { view: e25, createResources: () => this._createDrapedResources(), destroyResources: A6, recreateGeometry: (e26) => this._recreateDrapedGeometry(e26), forEachMaterial: (e26, t25) => t25(e26.material) };
  }
  get location() {
    return this._location;
  }
  set location(e25) {
    H(this._location, e25) || (s6(this._location, e25), this._updateGeometry());
  }
  get direction() {
    return this._direction;
  }
  set direction(e25) {
    H(this._direction, e25) || (s6(this._direction, e25), this._updateGeometry());
  }
  setDirectionFromPoints(e25, t25) {
    A(this._direction, c4(this._direction, t25, e25)), this._updateGeometry();
  }
  get width() {
    return this._width;
  }
  set width(e25) {
    e25 !== this._width && (this._width = e25, this._updateMaterial());
  }
  get offset() {
    return this._offset;
  }
  set offset(e25) {
    e25 !== this._offset && (this._offset = e25, this._updateGeometry());
  }
  get length() {
    return this._length;
  }
  set length(e25) {
    e25 !== this._length && (this._length = e25, this._updateGeometry());
  }
  get color() {
    return this._color;
  }
  set color(e25) {
    E(e25, this._color) || (a9(this._color, e25), this._updateMaterial());
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e25) {
    e25 !== this._renderOccluded && (this._renderOccluded = e25, this._updateMaterial());
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e25) {
    this._isDecoration = e25, this._updateMaterial();
  }
  _createObject3DResources(e25) {
    const t25 = new q7(this.materialParameters), r26 = new Array();
    return this._createObject3DGeometry(t25, e25, r26), { material: t25, geometries: r26 };
  }
  _recreateObject3DGeometry(e25, t25) {
    e25.geometries.length = 0, this._createObject3DGeometry(e25.material, t25, e25.geometries);
  }
  _createObject3DGeometry(e25, t25, r26) {
    const [i23, s13] = P8(e25);
    t25.addGeometry(i23), t25.addGeometry(s13), r26.push(i23), r26.push(s13), this._updateVerticesObject3D(t25);
  }
  _createDrapedResources() {
    const t25 = new q7(this.materialParameters), r26 = l3(() => this.view.state.contentPixelRatio, () => this.drapedResources.recreateGeometry());
    return { material: t25, geometries: this._createDrapedGeometry(t25), pixelRatioHandle: r26 };
  }
  _recreateDrapedGeometry(e25) {
    e25.geometries = this._createDrapedGeometry(e25.material);
  }
  _createDrapedGeometry(e25) {
    const t25 = P8(e25);
    return this._updateVerticesDraped(t25), t25.map((e26) => new g8(e26));
  }
  _updateMaterial() {
    const { materialParameters: e25 } = this;
    this.object3dResources.resources?.material.setParameters(e25), this.drapedResources.resources?.material.setParameters(e25);
  }
  get materialParameters() {
    return { width: this._width, color: this._color, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateGeometry() {
    if (this.isDraped) this.drapedResources.recreateGeometry();
    else {
      const e25 = this.object3dResources.object;
      e25 && this._updateVerticesObject3D(e25);
    }
  }
  _updateVerticesObject3D(e25) {
    const t25 = this.view.state.camera;
    t25.projectToScreen(this.location, U2), u5(I3, this.location, this.direction), t25.projectToScreen(I3, E11), v3(E11, e5(E11, E11, U2)), this._updateVertexAttributesObject3D(t25, e25, 0, U2, E11, 1), this._updateVertexAttributesObject3D(t25, e25, 1, U2, E11, -1);
  }
  _updateVertexAttributesObject3D(e25, t25, i23, s13, a36, o25) {
    const c26 = t25.geometries[i23], n30 = c26.getMutableAttribute(e8.POSITION)?.data;
    if (!n30) return;
    const { start: d18, end: h23 } = V7(a36, s13, o25, this.offset, this.width, this.length);
    e25.unprojectFromScreen(a7(d18), I3), n30[0] = I3[0], n30[1] = I3[1], n30[2] = I3[2], e25.unprojectFromScreen(a7(h23), I3), n30[3] = I3[0], n30[4] = I3[1], n30[5] = I3[2], t25.geometryVertexAttributeUpdated(c26, e8.POSITION);
  }
  _updateVerticesDraped(e25) {
    const { view: { basemapTerrain: { overlayManager: t25 }, state: { contentPixelRatio: r26 } } } = this, { location: i23, width: s13, length: a36, offset: o25 } = this, c26 = N5;
    c26.spatialReference = t25.renderer.spatialReference, c26.x = i23[0], c26.y = i23[1];
    const n30 = this.view.overlayPixelSizeInMapUnits(c26) * r26, d18 = s13 * n30, h23 = a36 * n30, l26 = o25 * n30;
    this._updateVertexAttributesDraped(e25[0], d18, h23, l26, -1), this._updateVertexAttributesDraped(e25[1], d18, h23, l26, 1);
  }
  _updateVertexAttributesDraped(e25, t25, r26, i23, s13) {
    const a36 = e25.getMutableAttribute(e8.POSITION)?.data;
    if (!a36) return;
    const { location: o25, direction: c26 } = this, { start: n30, end: d18 } = V7(c26, o25, s13, i23, t25, r26);
    a36[0] = n30[0], a36[1] = n30[1], a36[2] = te, a36[3] = d18[0], a36[4] = d18[1], a36[5] = te, e25.invalidateBoundingInfo();
  }
};
function P8(e25) {
  return [wt(e25, [n3(), n3()]), wt(e25, [n3(), n3()])];
}
function V7(e25, t25, r26, i23, s13, n30) {
  const d18 = l8(S8, o8(S8, e25[1] * r26, e25[0] * -r26), i23 + s13 / 2), h23 = u6(T4, u6(T4, u6(T4, t25, l8(T4, e25, n30 / 2)), d18), d18);
  return { start: h23, end: u6(F8, h23, l8(F8, e25, -n30)) };
}
function M6(e25) {
  e25.geometries.length = 0;
}
function A6(e25) {
  e25.pixelRatioHandle.remove(), e25.geometries = [];
}
var I3 = n3();
var S8 = n6();
var T4 = n6();
var F8 = n6();
var U2 = f4();
var E11 = f4();
var N5 = e7(0, 0, void 0, null);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js
var c19 = class extends t15 {
  constructor(e25) {
    super(e25), this._resources = null, this._transform = e3();
  }
  get object() {
    return null != this._resources ? this._resources.object : null;
  }
  get transform() {
    return this._transform;
  }
  set transform(s13) {
    n4(this._transform, s13), null != this._resources && (this._resources.object.transformation = this._transform);
  }
  recreate() {
    this.attached && this.createResources();
  }
  recreateGeometry() {
    if (null == this._resources) return;
    const e25 = this._resources.object;
    e25.removeAllGeometries(), this.createGeometries(e25), e25.visible = this.visible;
  }
  createResources() {
    this.destroyResources();
    const e25 = this.view.stage;
    if (!e25) return;
    const s13 = new l12(e25, { pickable: false, updatePolicy: C3.SYNC }), r26 = new A3({ castShadow: false });
    r26.transformation = this._transform, this.createExternalResources(), this.createGeometries(r26), s13.add(r26), r26.visible = this.visible, this._resources = { layer: s13, object: r26 };
  }
  destroyResources() {
    const e25 = this.view.stage;
    null != this._resources && e25 && (this._resources.layer.destroy(), this._resources.object.dispose(), this.destroyExternalResources(), this._resources = null);
  }
  updateVisibility(e25) {
    null != this._resources && (this._resources.object.visible = e25);
  }
};

// node_modules/@arcgis/core/views/3d/interactive/visualElements/PointVisualElement.js
var S9 = class extends c19 {
  constructor(e25) {
    super(e25), this._material = null, this._texture = null, this._geometry = null, this._size = 3, this._color = r8(1, 0, 1, 1), this._pixelSnappingEnabled = true, this._primitive = "square", this._outlineSize = 1, this._outlineColor = r8(1, 1, 1, 1), this._elevationInfo = null, this.applyProperties(e25);
  }
  get geometry() {
    return this._geometry;
  }
  set geometry(e25) {
    this._geometry = e25, this.recreateGeometry();
  }
  get size() {
    return this._size;
  }
  set size(e25) {
    if (e25 !== this._size) {
      const t25 = this._preferredTextureSize;
      this._size = e25, t25 < this._preferredTextureSize ? this.recreate() : this._updateSizeAttribute();
    }
  }
  get color() {
    return this._color;
  }
  set color(e25) {
    E(e25, this._color) || (a9(this._color, e25), this._updateMaterial());
  }
  get pixelSnappingEnabled() {
    return this._pixelSnappingEnabled;
  }
  set pixelSnappingEnabled(e25) {
    this._pixelSnappingEnabled !== e25 && (this._pixelSnappingEnabled = e25, this._updateMaterial());
  }
  get primitive() {
    return this._primitive;
  }
  set primitive(e25) {
    this._primitive !== e25 && (this._primitive = e25, this.recreate());
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e25) {
    e25 !== this._outlineSize && (this._outlineSize = e25, this._updateMaterial());
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e25) {
    E(e25, this._outlineColor) || (a9(this._outlineColor, e25), this._updateMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e25) {
    this._elevationInfo = e25, this.recreateGeometry();
  }
  _updateMaterial() {
    this._material?.setParameters(this._materialParameters);
  }
  _updateSizeAttribute() {
    const e25 = this.object;
    if (null == e25) return;
    const t25 = e25.geometries[0];
    if (null == t25) return;
    const i23 = t25.getMutableAttribute(e8.SIZE).data, r26 = this._geometrySize;
    i23[0] = r26, i23[1] = r26, e25.geometryVertexAttributeUpdated(e25.geometries[0], e8.SIZE);
  }
  get _materialParameters() {
    return { color: this._color, textureIsSignedDistanceField: true, sampleSignedDistanceFieldTexelCenter: c10(this._primitive), distanceFieldBoundingBox: s8, occlusionTest: false, outlineColor: this._outlineColor, outlineSize: this._outlineSize, textureId: this._texture?.id, polygonOffset: false, shaderPolygonOffset: 0, drawAsLabel: true, depthEnabled: false, pixelSnappingEnabled: this.pixelSnappingEnabled, isDecoration: this.isDecoration };
  }
  get _geometrySize() {
    return this._size / o16;
  }
  createExternalResources() {
    this._texture = u11(this._primitive, this._preferredTextureSize), this._material = new ue(this._materialParameters, this.view.state.viewingMode === l9.Global);
    const e25 = this.view.stage;
    this._texture.load(e25.renderView.renderingContext), e25.addTexture(this._texture);
  }
  destroyExternalResources() {
    if (this._texture) {
      this.view.stage.removeTexture(this._texture), this._texture.dispose(), this._texture = null;
    }
    this._material = null;
  }
  createGeometries(e25) {
    const t25 = this._createRenderGeometry();
    null != t25 && e25.addGeometry(t25);
  }
  forEachMaterial(e25) {
    e25(this._material);
  }
  get _preferredTextureSize() {
    return r4(2 * this._geometrySize, 16, 128);
  }
  calculateMapBounds(e25) {
    const t25 = this.object?.geometries[0];
    if (!t25) return false;
    const i23 = t25.attributes.get(e8.POSITION).data;
    return n9(i23, this.view.renderCoordsHelper.spatialReference, b13, this.view.spatialReference), s5(e25, b13), true;
  }
  _createRenderGeometry() {
    const { geometry: e25, _material: i23 } = this;
    if (null == e25 || null == i23) return null;
    const { renderCoordsHelper: r26, elevationProvider: s13 } = this.view, o25 = f15(e25, s13, o18.fromElevationInfo(this.elevationInfo), r26), a36 = o6(c5.get(), e25.x, e25.y, o25), u23 = c5.get();
    n9(a36, e25.spatialReference, u23, r26.spatialReference);
    const h23 = this._geometrySize;
    return lt(i23, { position: u23, size: [h23, h23], centerOffsetAndDistance: [0, 0, 0, 1] });
  }
};
var b13 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js
var y9 = class extends t16 {
  constructor(e25) {
    super(e25), this._maxSize = 0, this._position = n3(), this._up = n3(), this._right = n3(), this._renderOccluded = o12.OccludeAndTransparent, this._color = r8(1, 0, 0, 1), this._outlineColor = r8(0, 0, 0, 1), this._outlineSize = 0, this._size = 32, this._outlineRenderOccluded = o12.Opaque, this.applyProperties(e25);
  }
  createObject3DResourceFactory(e25) {
    return { view: e25, createResources: (e26) => this._createObject3DResources(e26), destroyResources: () => {
    }, cameraChanged: () => this._updateTransformObject3D(), forEachMaterial: (e26, t25) => {
      t25(e26.outlineMaterial), t25(e26.quadMaterial);
    } };
  }
  createDrapedResourceFactory(e25) {
    return { view: e25, createResources: () => this._createDrapedResources(), destroyResources: P9, forEachMaterial: (e26, t25) => {
      t25(e26.outlineMaterial), t25(e26.quadMaterial);
    } };
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e25) {
    e25 !== this._renderOccluded && (this._renderOccluded = e25, this._updateQuadMaterial());
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e25) {
    this._isDecoration = e25, this._updateOutlineMaterial(), this._updateQuadMaterial();
  }
  get color() {
    return this._color;
  }
  set color(e25) {
    a9(this._color, e25), this._updateQuadMaterial();
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e25) {
    a9(this._outlineColor, e25), this._updateOutlineMaterial();
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e25) {
    const t25 = 0 === this._outlineSize != (0 === e25);
    this._outlineSize = e25, t25 ? this.recreateGeometry() : this._updateOutlineMaterial();
  }
  get size() {
    return this._size;
  }
  set size(e25) {
    e25 !== this._size && (this._size = e25, this._updateTransform());
  }
  get outlineRenderOccluded() {
    return this._outlineRenderOccluded;
  }
  set outlineRenderOccluded(e25) {
    this._outlineRenderOccluded = e25, this._updateOutlineMaterial();
  }
  set geometry({ previous: e25, center: t25, next: r26 }) {
    this._maxSize = Math.min(p3(t25, e25), p3(t25, r26)) / 3, A(this._up, c4(this._up, e25, t25)), A(this._right, c4(this._right, r26, t25)), s6(this._position, t25), this.recreateGeometry();
  }
  _createObject3DResources(e25) {
    const t25 = new A4(this._quadMaterialParameters), r26 = 0 === this._outlineSize ? void 0 : new q7(this._outlineMaterialParameters);
    return this._createObject3DGeometries(e25, t25, r26), { quadMaterial: t25, outlineMaterial: r26 };
  }
  _createObject3DGeometries(e25, t25, r26) {
    if (H(this._up, a8) && H(this._right, a8)) return;
    const i23 = this._createGeometries(t25, r26);
    for (const s13 of i23) e25.addGeometry(s13);
    this._updateTransformObject3D(e25);
  }
  _createDrapedResources() {
    const t25 = new A4(this._quadMaterialParameters), r26 = 0 === this._outlineSize ? void 0 : new q7(this._outlineMaterialParameters), i23 = this._createGeometries(t25, r26).map((e25) => new g8(e25));
    this._setTransformDraped(i23);
    return { quadMaterial: t25, outlineMaterial: r26, geometries: i23, pixelRatioHandle: l3(() => this.view.state.contentPixelRatio, () => this.drapedResources.recreateGeometry()) };
  }
  _createGeometries(e25, t25) {
    const { up: r26, right: i23, corner: s13 } = this._getVertices(), a36 = v8(r26, i23, s13, e25);
    if (!t25) return [a36];
    return [a36, wt(t25, [r26, s13, i23])];
  }
  _getVertices() {
    let e25 = this._up, t25 = this._right;
    const r26 = u5(c5.get(), e25, t25);
    return this.isDraped && (e25 = s6(c5.get(), e25), t25 = s6(c5.get(), t25), e25[2] = 0, t25[2] = 0, r26[2] = 0), { up: e25, right: t25, corner: r26 };
  }
  _updateTransform() {
    this.isDraped ? this.drapedResources.recreateGeometry() : this._updateTransformObject3D();
  }
  _updateTransformObject3D(e25 = this.object3dResources.object) {
    if (!e25) return;
    const i23 = this.view.state.camera, s13 = this._size * i23.computeScreenPixelSizeAt(this._position), a36 = Math.min(this._maxSize, s13);
    q3(x7, this._position), f5(x7, x7, [a36, a36, a36]), e25.transformation = x7;
  }
  _setTransformDraped(e25) {
    if (0 === e25.length) return;
    const { view: { basemapTerrain: { overlayManager: i23 }, state: { contentPixelRatio: s13 } } } = this, { _position: a36, _size: o25 } = this, c26 = s6(c5.get(), a36);
    c26[2] = te;
    const l26 = S10;
    l26.spatialReference = i23.renderer.spatialReference, l26.x = c26[0], l26.y = c26[1];
    const u23 = o25 * (this.view.overlayPixelSizeInMapUnits(l26) * s13), d18 = Math.min(this._maxSize, u23);
    q3(x7, c26), f5(x7, x7, [d18, d18, 1]);
    for (const t25 of e25) t25.transformation = x7;
  }
  get _quadMaterialParameters() {
    return { color: this._color, forceTransparentMode: true, writeDepth: false, polygonOffset: true, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateQuadMaterial() {
    this.object3dResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters), this.drapedResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters);
  }
  get _outlineMaterialParameters() {
    return { color: this._outlineColor, width: this._outlineSize, renderOccluded: this._outlineRenderOccluded, isDecoration: this.isDecoration };
  }
  _updateOutlineMaterial() {
    this.object3dResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters), this.drapedResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters);
  }
};
function P9(e25) {
  e25.pixelRatioHandle.remove(), e25.geometries = [];
}
function v8(e25, t25, r26, i23) {
  return new p6(i23, [[e8.POSITION, new t8([0, 0, 0, ...t25, ...e25, ...r26], [0, 1, 2, 1, 2, 3], 3, true)]]);
}
var x7 = e3();
var S10 = e7(0, 0, void 0, null);

// node_modules/@arcgis/core/views/3d/interactive/SnappingVisualizer3D.js
var R10 = class extends r14 {
  sortUniqueHints(e25) {
    return e25.sort((e26, i23) => (i23 instanceof n13 ? i23.length : 0) - (e26 instanceof n13 ? e26.length : 0));
  }
  visualizeIntersectionPoint(e25, i23) {
    const { spatialReference: t25, view: r26 } = i23, o25 = D3(i23);
    return c(new S9({ view: r26, primitive: "circle", geometry: T(e25.intersectionPoint, t25), elevationInfo: e25.isDraped ? z : j2, size: 20, outlineSize: 2, color: o25.intersectionPointColor, outlineColor: o25.intersectionPointOutlineColor, pixelSnappingEnabled: false, isDecoration: true, attached: true }));
  }
  visualizePoint(e25, i23) {
    const { view: t25, spatialReference: r26 } = i23, o25 = D3(i23), a36 = x8(e25.point, e25.domain, i23);
    return c(new S9({ view: t25, primitive: "circle", geometry: T(a36, r26), elevationInfo: A7(e25), size: 20, outlineSize: 2, color: o25.pointColor, outlineColor: o25.pointOutlineColor, pixelSnappingEnabled: false, isDecoration: true, attached: true }));
  }
  visualizeLine(e25, i23) {
    const { view: t25, spatialReference: r26 } = i23, o25 = D3(i23), a36 = x8(e25.lineStart, e25.domain, i23), l26 = x8(e25.lineEnd, e25.domain, i23);
    return c(H5(e25.type, a36, l26, r26, A7(e25), t25, o25, e25.isDraped, e25.fadeLeft, e25.fadeRight));
  }
  visualizeParallelSign(e25, i23) {
    const { view: r26, spatialReference: o25 } = i23, a36 = D3(i23), { isDraped: l26 } = e25, s13 = A7(e25), p17 = x8(e25.lineStart, e25.domain, i23), c26 = x8(e25.lineEnd, e25.domain, i23), m16 = z7(p17, o25, s13, r26, l26), u23 = z7(c26, o25, s13, r26, l26), v14 = I2(u23, m16, u23, 0.5), h23 = new v7({ view: r26, attached: false, offset: p10.parallelLineHintOffset, length: p10.parallelLineHintLength, width: p10.parallelLineHintWidth, color: a36.parallelSignColor, location: v14, renderOccluded: l26 ? o12.OccludeAndTransparent : o12.Opaque, isDraped: l26, renderGroup: a16.SnappingHint, isDecoration: true });
    return h23.setDirectionFromPoints(m16, v14), h23.attached = true, c(h23);
  }
  visualizeRightAngleQuad(e25, i23) {
    const { view: t25, spatialReference: r26 } = i23, o25 = D3(i23), a36 = A7(e25), { isDraped: l26 } = e25, s13 = x8(e25.previousVertex, e25.domain, i23), p17 = x8(e25.centerVertex, e25.domain, i23), c26 = x8(e25.nextVertex, e25.domain, i23), d18 = z7(s13, r26, a36, t25, l26), m16 = z7(p17, r26, a36, t25, l26), v14 = z7(c26, r26, a36, t25, l26);
    return c(new y9({ view: t25, attached: true, color: l26 ? o25.rightAngleColorDraped : o25.rightAngleColor, renderOccluded: l26 ? o12.OccludeAndTransparent : o12.Transparent, outlineRenderOccluded: l26 ? o12.OccludeAndTransparent : o12.Opaque, outlineColor: o25.rightAngleOutlineColor, outlineSize: p10.rightAngleHintOutlineSize, size: p10.rightAngleHintSize, isDraped: l26, geometry: { previous: d18, center: m16, next: v14 }, renderGroup: a16.SnappingHint, isDecoration: true }));
  }
};
function D3(n30) {
  const { effectiveTheme: t25 } = n30.view, r26 = l6.toUnitRGBA(t25.accentColor), o25 = [0, 0, 0, 0];
  return { intersectionPointColor: o25, intersectionPointOutlineColor: r26, pointColor: o25, pointOutlineColor: r26, lineColor: r26, lineOutlineColor: void 0, parallelSignColor: r26, rightAngleColor: r26, rightAngleColorDraped: l6.toUnitRGBA(P2(t25.accentColor, 0.5)), rightAngleOutlineColor: r26 };
}
function x8(e25, i23, { selfSnappingZ: n30, view: t25, spatialReference: r26 }) {
  return 0 !== (i23 & E6.SELF) && m5(e25) && null != n30 ? y7(e25, n30, t25, r26) : e25;
}
function A7(e25) {
  return e25.isDraped ? z : j2;
}
function H5(e25, i23, n30, t25, r26, o25, a36, l26 = false, s13 = true, d18 = true) {
  const m16 = z7(i23, t25, r26, o25, l26), u23 = z7(n30, t25, r26, o25, l26), v14 = new G3({ view: o25, extensionType: V6.FADED, start: m16, end: u23, isDraped: l26, color: a36.lineColor, renderOccluded: l26 ? o12.OccludeAndTransparent : o12.Opaque, renderGroup: a16.SnappingHint, isDecoration: true });
  switch (e25) {
    case h11.TARGET:
      v14.width = p10.lineHintWidthTarget, v14.fadedExtensions = { start: 0, end: p10.lineHintFadedExtensions };
      break;
    case h11.REFERENCE_EXTENSION:
      v14.width = p10.lineHintWidthReference, v14.fadedExtensions = { start: 0, end: 0 };
      break;
    case h11.REFERENCE:
      v14.width = p10.lineHintWidthReference, v14.fadedExtensions = { start: s13 ? p10.lineHintFadedExtensions : 0, end: d18 ? p10.lineHintFadedExtensions : 0 };
  }
  return v14.attached = true, v14;
}
function z7(e25, i23, n30, t25, a36) {
  const l26 = n3();
  if (a36) {
    const n31 = t25.basemapTerrain.overlayManager.renderer.spatialReference;
    n9(e25, i23, l26, n31);
  } else i9(e25, i23, n30, t25, l26);
  return l26;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/meshFastUpdateUtils.js
function a24(a36) {
  const t25 = a36.graphic;
  return t25 ? [l3(() => "visible" in a36 ? a36.visible : a36.displaying, (s13) => {
    s13 && t25.notifyMeshTransformChanged({ action: a18.EnableFastUpdates });
  }, { ...w2 }), e(() => t25.notifyMeshTransformChanged({ action: a18.DisableFastUpdates }))] : [];
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/settings.js
var d11 = 0.3;
function u16(o25, t25) {
  t25 && Object.assign(o25, t25);
}
var g10 = class {
  constructor(o25) {
    this.height = 90, this.coneHeight = 40, this.coneWidth = 23, this.width = 3, this.renderOccluded = o12.Opaque, this.color = o25.accent;
  }
};
var f16 = class {
  constructor({ colors: o25, ...t25 }) {
    this.size = 11, this.outlineSize = 1, this.collisionPadding = 9, this.color = o25.accent, this.outlineColor = o25.outline, this.renderOccluded = o12.Opaque, this.hoverOutlineColor = o25.selectedOutline, u16(this, t25);
  }
  applyColor(o25) {
    this._apply(this.color, o25);
  }
  applyOutline(o25) {
    this._apply(this.outlineColor, o25);
  }
  applyHoverOutline(o25) {
    this._apply(this.hoverOutlineColor, o25);
  }
  _apply(o25, t25) {
    t25.setParameters({ color: F2(o25), renderOccluded: this.renderOccluded });
  }
};
var w9 = class {
  constructor({ colors: o25, ...t25 }) {
    this.size = 40, this.height = 0.2, this.offset = 0.25, this.collisionPadding = 2, this.renderOccluded = o12.Transparent, this.minSquaredEdgeLength = 900, this.color = P2(o25.accent, 0.5), this.hoverColor = o25.accent, u16(this, t25);
  }
  applyColor(o25) {
    this._apply(this.color, o25);
  }
  applyHover(o25) {
    this._apply(this.hoverColor, o25);
  }
  _apply(o25, t25) {
    t25.setParameters({ color: F2(o25), renderOccluded: this.renderOccluded });
  }
};
var C4 = class {
  constructor(o25) {
    this.vertex = new f16({ colors: o25, color: o25.accent, outlineColor: o25.outline }), this.edge = new f16({ colors: o25, color: D(P2(o25.accent, 2 / 3), 0.5), outlineColor: P2(o25.outline, 0.5), size: 8, collisionPadding: 8 }), this.selected = new f16({ colors: o25, color: o25.selected, outlineColor: o25.outline }), this.edgeOffset = new w9({ colors: o25 });
  }
};
var m9 = class {
  constructor({ colors: o25, ...t25 }) {
    this.width = 1.5, this.stipplePattern = h12(3.3), this.falloff = 0, this.innerWidth = 1.5, this.renderOccluded = o12.OccludeAndTransparent, this.color = o25.selected, this.stippleOffColor = o25.outline, this.innerColor = o25.selected, u16(this, t25);
  }
  apply(o25) {
    o25.color = F2(this.color), o25.width = this.width, o25.stipplePattern = this.stipplePattern, o25.stippleOffColor = F2(this.stippleOffColor), o25.falloff = this.falloff, o25.innerWidth = this.innerWidth, o25.innerColor = F2(this.innerColor), o25.renderOccluded = this.renderOccluded;
  }
};
var O6 = class {
  constructor({ colors: o25, ...t25 }) {
    this.size = 4, this.outlineSize = 1, this.shape = "square", this.color = o25.selected, this.outlineColor = o25.outline, u16(this, t25);
  }
  apply(o25) {
    o25.color = F2(this.color), o25.size = this.size, o25.outlineSize = this.outlineSize, o25.outlineColor = F2(this.outlineColor), o25.primitive = this.shape;
  }
};
var y10 = class {
  constructor({ colors: o25, ...t25 }) {
    this.innerWidth = 1, this.glowWidth = 8, this.glowFalloff = 8, this.globalAlpha = d11, this.globalAlphaContrastBoost = 1.5, this.radius = 3, this.innerColor = o25.selected, this.glowColor = o25.accent, this.heightFillColor = o25.accent, u16(this, t25);
  }
  apply(o25, e25 = 1) {
    const l26 = { glowColor: l6.toUnitRGB(this.glowColor), glowFalloff: this.glowFalloff, glowWidth: this.glowWidth, innerColor: l6.toUnitRGB(this.innerColor), innerWidth: this.innerWidth, globalAlpha: this.globalAlpha * e25 * this.glowColor.a, globalAlphaContrastBoost: this.globalAlphaContrastBoost, intersectsLineRadius: this.radius };
    "style" in o25 ? o25.style = l26 : o25.laserlineStyle = l26;
  }
};
var A8 = class {
  constructor(o25) {
    this.outline = new m9({ colors: o25, color: o25.stippleOff, renderOccluded: o12.OccludeAndTransparentStencil, stippleOffColor: o25.stippleOn, innerWidth: 0 }), this.staged = new m9({ colors: o25, color: o25.stippleOn, renderOccluded: o12.OccludeAndTransparentStencil, innerColor: o25.stagedSolid, stippleOffColor: o25.stippleOff }), this.shadowStyle = new y10({ colors: o25, globalAlpha: d11, glowColor: o25.accent, glowFalloff: 8, glowWidth: 8, innerColor: o25.selected, innerWidth: 1 });
  }
};
var W3 = class {
  constructor(o25) {
    this.outline = new O6({ colors: o25, color: o25.selected, outlineColor: o25.outline, outlineSize: 1, shape: "circle", size: 4 }), this.shadowStyle = new y10({ colors: o25, globalAlpha: d11, glowColor: o25.accent, glowFalloff: 1.5, glowWidth: 6, innerColor: o25.selected, innerWidth: 1, radius: 2 });
  }
};
var b14 = class extends m9 {
  constructor({ colors: o25, ...t25 }) {
    super({ colors: o25 }), this.extensionType = V6.GROUND_RAY, u16(this, t25);
  }
};
var S11 = class {
  constructor(o25) {
    this.laserlineAlphaMultiplier = 1.5, this.heightPlaneAngleCutoff = 20, this.lineObjects = new A8(o25), this.pointObjects = new W3(o25), this.heightPlane = new y10({ colors: o25, globalAlpha: d11, glowColor: o25.accent, glowFalloff: 8, glowWidth: 8, innerColor: o25.selected, innerWidth: 1 }), this.heightBox = new y10({ colors: o25, globalAlpha: d11, glowColor: o25.accent, glowFalloff: 8, glowWidth: 8, innerColor: o25.selected, innerWidth: 0, heightFillColor: o25.accent }), this.zVerticalLine = new b14({ colors: o25, color: P2(o25.accent, 5 * d11 / 3), falloff: 2, innerColor: P2(o25.selected, 0), renderOccluded: o12.OccludeAndTransparent, stipplePattern: null, width: 5, extensionType: V6.GROUND_RAY });
  }
};
var j7 = class extends b {
  constructor(o25) {
    super(o25);
  }
  get colors() {
    const o25 = this.getTheme().accentColor, e25 = o25.a;
    return { accent: o25, contrast: E2(o25), selected: l6.fromArray([255, 255, 255, e25]), selectedOutline: l6.fromArray([255, 255, 255, e25]), staged: l6.fromArray([12, 207, 255, e25]), stagedSolid: l6.fromArray([12, 207, 255, 1]), outline: l6.fromArray([0, 0, 0, 0.5 * e25]), stippleOn: l6.fromArray([255, 255, 255, 1]), stippleOff: l6.fromArray([0, 0, 0, 0.5]) };
  }
  get visualElements() {
    return new S11(this.colors);
  }
  get manipulators() {
    return new C4(this.colors);
  }
  get zManipulator() {
    return new g10(this.colors);
  }
};
r([m()], j7.prototype, "colors", null), r([m()], j7.prototype, "visualElements", null), r([m()], j7.prototype, "manipulators", null), r([m()], j7.prototype, "zManipulator", null), r([m()], j7.prototype, "getTheme", void 0), j7 = r([a2("esri.views.3d.interactive.editingTools.settings")], j7);

// node_modules/@arcgis/core/views/3d/interactive/visualElements/OutlineVisualElement.js
var j8 = class extends t16 {
  constructor(t25) {
    super(t25), this._attachmentOrigin = e7(0, 0, 0, null), this._attachmentOriginDirty = true, this.events = new o3(), this._geometry = null, this._width = 1, this._color = r8(1, 0, 1, 1), this._innerWidth = 0, this._innerColor = r8(1, 1, 1, 1), this._stipplePattern = null, this._stippleOffColor = null, this._falloff = 0, this._elevationInfo = null, this._laserlineStyle = null, this._laserlineEnabled = false, this._renderOccluded = o12.OccludeAndTransparentStencil, this._attachmentOrigin.spatialReference = t25.view.spatialReference, this._laserline = new c18({ view: t25.view, isDecoration: t25.isDecoration }), this.applyProperties(t25), this.attached = t25.attached ?? true;
  }
  destroy() {
    this._laserline.destroy(), super.destroy();
  }
  createObject3DResourceFactory(e25) {
    return { view: e25, createResources: (e26) => this._createObject3DResources(e26), destroyResources: D4, recreateGeometry: (e26, t25) => {
      e26.geometries.length = 0, this._recreateGeometry(t25, e26.material, e26.geometries);
    }, forEachMaterial: (e26, t25) => t25(e26.material) };
  }
  createDrapedResourceFactory(e25) {
    return { view: e25, createResources: () => this._createDrapedResources(), destroyResources: D4, recreateGeometry: (e26) => {
      e26.geometries = this._createRenderGeometriesDraped(e26.material), this._attachmentOriginChanged();
    }, forEachMaterial: (e26, t25) => t25(e26.material) };
  }
  get _laserlineAttached() {
    return this.attached && this.visible && null != this._laserlineStyle && !this.isDraped && this.laserlineEnabled;
  }
  onAttachedChange(e25) {
    this._laserline.attached = this._laserlineAttached, e25 && this._attachmentOriginChanged();
  }
  get isDecoration() {
    return this._isDecoration;
  }
  set isDecoration(e25) {
    this._isDecoration = e25, this._updateMaterial();
  }
  get geometry() {
    return this._geometry;
  }
  set geometry(e25) {
    const t25 = this._isClosed;
    this._geometry = e25, this.recreateGeometry(), t25 !== this._isClosed && this._updateMaterial();
  }
  get width() {
    return this._width;
  }
  set width(e25) {
    e25 !== this._width && (this._width = e25, this._updateMaterial());
  }
  get color() {
    return this._color;
  }
  set color(e25) {
    E(e25, this._color) || (a9(this._color, e25), this._updateMaterial());
  }
  get innerWidth() {
    return this._innerWidth;
  }
  set innerWidth(e25) {
    e25 !== this._innerWidth && (this._innerWidth = e25, this._updateMaterial());
  }
  get innerColor() {
    return this._innerColor;
  }
  set innerColor(e25) {
    E(e25, this._innerColor) || (a9(this._innerColor, e25), this._updateMaterial());
  }
  get stipplePattern() {
    return this._stipplePattern;
  }
  set stipplePattern(e25) {
    const t25 = null != e25 != (null != this._stipplePattern);
    this._stipplePattern = e25, t25 ? this.recreate() : this._updateMaterial();
  }
  get stippleOffColor() {
    return this._stippleOffColor;
  }
  set stippleOffColor(e25) {
    e25 && this._stippleOffColor && E(e25, this._stippleOffColor) || (this._stippleOffColor = e25 ? t5(e25) : null, this._updateMaterial());
  }
  get falloff() {
    return this._falloff;
  }
  set falloff(e25) {
    e25 !== this._falloff && (this._falloff = e25, this._updateMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e25) {
    this._elevationInfo = e25, this.recreateGeometry();
  }
  get laserlineStyle() {
    return this._laserlineStyle;
  }
  set laserlineStyle(e25) {
    this._laserlineStyle = e25, this._laserline.attached = this._laserlineAttached, null != e25 && (this._laserline.style = e25);
  }
  get laserlineEnabled() {
    return this._laserlineEnabled;
  }
  set laserlineEnabled(e25) {
    this._laserlineEnabled !== e25 && (this._laserlineEnabled = e25, this._laserline.attached = this._laserlineAttached);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e25) {
    e25 !== this._renderOccluded && (this._renderOccluded = e25, this._updateMaterial());
  }
  get attachmentOrigin() {
    if (!this._attachmentOriginDirty) return this._attachmentOrigin;
    const e25 = this.object3dResources.resources?.geometries;
    if (!e25 || 0 === e25.length) return null;
    o6(E12, 0, 0, 0);
    let s13 = 0;
    for (const t25 of e25) t25.computeAttachmentOrigin(P10) && (u5(E12, E12, P10), s13++);
    return 0 === s13 ? null : (g2(E12, E12, 1 / s13), this.view.renderCoordsHelper.fromRenderCoords(E12, this._attachmentOrigin), this._attachmentOriginDirty = false, this._attachmentOrigin);
  }
  _updateMaterial() {
    this.object3dResources.resources?.material.setParameters(this._materialParameters), this.drapedResources.resources?.material.setParameters(this._materialParameters);
  }
  get _isClosed() {
    return null != this.geometry && "polygon" === this.geometry.type;
  }
  get _materialParameters() {
    return { width: this._width, color: this._color, stippleOffColor: this._stippleOffColor, stipplePattern: this._stipplePattern, stipplePreferContinuous: false, isClosed: this._isClosed, falloff: this._falloff, innerColor: this._innerColor, innerWidth: this._innerWidth, join: "round", hasPolygonOffset: true, renderOccluded: this._normalizedRenderOccluded, isDecoration: this.isDecoration };
  }
  get _normalizedRenderOccluded() {
    return this.isDraped && this._renderOccluded === o12.OccludeAndTransparentStencil ? o12.OccludeAndTransparent : this._renderOccluded;
  }
  _recreateGeometry(e25, t25, r26) {
    this._createRenderGeometries(t25, r26);
    for (const i23 of r26) e25.addGeometry(i23);
    this._attachmentOriginChanged();
  }
  _attachmentOriginChanged() {
    this._attachmentOriginDirty = true, this.events.emit("attachment-origin-changed");
  }
  _createObject3DResources(e25) {
    const t25 = new q7(this._materialParameters), r26 = new Array();
    return this._recreateGeometry(e25, t25, r26), { material: t25, geometries: r26 };
  }
  _createDrapedResources() {
    const e25 = new q7(this._materialParameters);
    return { material: e25, geometries: this._createRenderGeometriesDraped(e25) };
  }
  _createRenderGeometriesDraped(e25) {
    const { geometry: t25, view: r26 } = this, i23 = r26.basemapTerrain.spatialReference;
    if (null == t25 || null == i23) return [];
    return l13(t25, i23).lines.map(({ position: t26 }) => {
      const s13 = { overlayInfo: { spatialReference: i23, renderCoordsHelper: r26.renderCoordsHelper }, attributeData: { position: t26 }, removeDuplicateStartEnd: this._isClosed };
      return new g8(b10(e25, s13));
    });
  }
  calculateMapBounds(e25) {
    if (null == this.object3dResources.resources) return false;
    const t25 = this.view.renderCoordsHelper;
    for (const r26 of this.object3dResources.resources.geometries) {
      const i23 = r26.attributes.get(e8.POSITION), s13 = t3(i23.data.length);
      o4(i23.data, t25.spatialReference, 0, s13, this.view.spatialReference, 0), s5(e25, s13);
    }
    return true;
  }
  _createRenderGeometries(e25, t25) {
    const r26 = this.geometry;
    if (null == r26) return;
    const i23 = p12(r26, this.view.elevationProvider, this.view.renderCoordsHelper, o18.fromElevationInfo(this.elevationInfo ?? new c3({ mode: i6(r26, null) }))), s13 = new Array();
    for (const { position: n30, mapPositions: a36 } of i23.lines) {
      const r27 = { mapPositions: a36, attributeData: { position: n30 }, removeDuplicateStartEnd: this._isClosed };
      t25.push(b10(e25, r27)), s13.push(n30);
    }
    this._laserline.pathVerticalPlane = s13;
  }
};
function D4(e25) {
  e25.geometries = [];
}
var P10 = n3();
var E12 = n3();

// node_modules/@arcgis/core/views/3d/support/renderInfoUtils/point.js
function o20(o25, n30, r26, s13, i23) {
  const l26 = t3(3 * o25.length), p17 = t3(l26.length);
  o25.forEach((t25, e25) => {
    l26[3 * e25] = t25[0], l26[3 * e25 + 1] = t25[1], l26[3 * e25 + 2] = t25.length > 2 ? t25[2] : 0;
  });
  const c26 = u14(l26, n30, 0, p17, 0, l26, 0, l26.length / 3, r26, s13, i23), m16 = null != c26;
  return { numVertices: o25.length, position: l26, mapPositions: p17, projectionSuccess: m16, sampledElevation: c26 };
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js
var h15 = class extends g4 {
  constructor(e25, t25) {
    super(e25, t25, new t9(u15, () => import("./ShadedColorMaterial.glsl-IDXFYCGI.js")), f17);
  }
  initializePipeline(r26) {
    const { oitPass: t25, output: l26, transparent: d18, cullFace: h23, shadingEnabled: f21 } = r26, S20 = t25 === o11.NONE, b22 = t25 === o11.FrontFace;
    return B({ blending: u7(l26) && d18 ? p7(t25) : null, culling: f9(h23), depthTest: { func: b22 ? C.LESS : f21 ? C.LEQUAL : C.LESS }, depthWrite: N3(r26), drawBuffers: F3(t25, l26), colorWrite: g3, polygonOffset: S20 || b22 ? null : h6 });
  }
};
var f17 = /* @__PURE__ */ new Map([[e8.POSITION, 0], [e8.NORMAL, 1], [e8.OFFSET, 2]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechniqueConfiguration.js
var n19 = class extends a13 {
  constructor() {
    super(...arguments), this.cullFace = e6.None, this.transparent = false, this.writeDepth = true, this.screenSizeEnabled = true, this.shadingEnabled = true, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.textureCoordinateType = o10.None, this.emissionSource = f8.None, this.occlusionPass = false, this.objectAndLayerIdColorInstanced = false, this.draped = false, this.overlayEnabled = false, this.snowCover = false;
  }
  get discardInvisibleFragments() {
    return this.transparent;
  }
};
r([i7({ count: e6.COUNT })], n19.prototype, "cullFace", void 0), r([i7()], n19.prototype, "transparent", void 0), r([i7()], n19.prototype, "writeDepth", void 0), r([i7()], n19.prototype, "screenSizeEnabled", void 0), r([i7()], n19.prototype, "shadingEnabled", void 0), r([i7()], n19.prototype, "terrainDepthTest", void 0), r([i7()], n19.prototype, "cullAboveTerrain", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js
var z8 = class extends n12 {
  constructor(e25) {
    super(e25, M7), this._configuration = new n19(), this.vertexAttributeLocations = f17, this.supportsEdges = true, this._pp0 = r6(0, 0, 1), this._pp1 = r6(0, 0, 0), this.produces = /* @__PURE__ */ new Map([[A2.OPAQUE_MATERIAL, (e26) => e26 === n10.Highlight || c6(e26) && !this.parameters.transparent], [A2.TRANSPARENT_MATERIAL, (e26) => c6(e26) && this.parameters.transparent && this.parameters.writeDepth], [A2.TRANSPARENT_MATERIAL_WITHOUT_DEPTH, (e26) => c6(e26) && this.parameters.transparent && !this.parameters.writeDepth]]);
  }
  getConfiguration(e25, t25) {
    return super.getConfiguration(e25, t25, this._configuration), this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.transparent = this.parameters.transparent, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.screenSizeEnabled = this.parameters.screenSizeEnabled, this._configuration.shadingEnabled = this.parameters.shadingEnabled, this._configuration.oitPass = t25.oitPass, this._configuration.terrainDepthTest = t25.terrainDepthTest && u7(e25), this._configuration.cullAboveTerrain = t25.cullAboveTerrain, this._configuration;
  }
  get visible() {
    return this.parameters.color[3] >= o15;
  }
  intersect(e25, t25, r26, i23, s13, a36) {
    this._intersect(e25, r26, i23, s13, a36);
  }
  intersectDraped(e25, t25, r26, i23) {
    return this._pp0[0] = this._pp1[0] = r26[0], this._pp0[1] = this._pp1[1] = r26[1], this._intersect(e25, t25, this._pp0, this._pp1, i23);
  }
  _intersect(e25, s13, a36, n30, h23) {
    if (this.parameters.screenSizeEnabled) {
      const p17 = e25.attributes.get(e8.OFFSET), l26 = { applyToVertex: (e26, a37, n31, o25) => {
        const c26 = o6(I4, p17.data[3 * o25], p17.data[3 * o25 + 1], p17.data[3 * o25 + 2]), h24 = o6(L5, e26, a37, n31);
        return g2(c26, c26, this.parameters.screenSizeScale * (s13.camera?.computeScreenPixelSizeAt(c26) ?? 1)), u5(h24, h24, c26), [h24[0], h24[1], h24[2]];
      }, applyToAabb: (e26) => {
        const t25 = b2(e26, I4);
        return O(e26, this.parameters.screenSizeScale * (s13.camera?.computeScreenPixelSizeAt(t25) ?? 1));
      } };
      p8(e25, s13, a36, n30, l26, h23);
    } else p8(e25, s13, a36, n30, void 0, h23);
  }
  createGLMaterial(e25) {
    return new O7(e25);
  }
  createBufferWriter() {
    return new P11(this.parameters.screenSizeEnabled);
  }
};
var O7 = class extends e9 {
  beginSlot(e25) {
    return this.getTechnique(h15, e25);
  }
};
var M7 = class extends d6 {
  constructor() {
    super(...arguments), this.color = r8(1, 1, 1, 1), this.shadingTint = r8(0, 0, 0, 0.25), this.shadingDirection = A(n3(), [0.5, -0.5, -0.5]), this.screenSizeScale = 14, this.forceTransparentMode = false, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = e6.None, this.screenSizeEnabled = false, this.shadingEnabled = true;
  }
  get transparent() {
    return this.color[3] < 1 || this.forceTransparentMode;
  }
};
var P11 = class {
  constructor(e25) {
    this.screenSizeEnabled = e25;
    const t25 = O3().vec3f(e8.POSITION).vec3f(e8.NORMAL);
    this.screenSizeEnabled && t25.vec3f(e8.OFFSET), this.vertexBufferLayout = t25;
  }
  elementCount(e25) {
    return e25.get(e8.POSITION).indices.length;
  }
  write(e25, t25, r26, i23, s13, a36) {
    const n30 = k2(r26, i23, this.vertexBufferLayout, e25, t25, s13, a36);
    if (this.screenSizeEnabled) {
      if (!r26.has(e8.OFFSET)) throw new Error(`${e8.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);
      {
        const e26 = r26.get(e8.OFFSET);
        s7(3 === e26.size);
        const i24 = s13.getField(e8.OFFSET, o9);
        if (!i24) throw new Error("unable to acquire view for " + e8.OFFSET);
        R5(e26, t25, i24, a36);
      }
    }
    return n30;
  }
};
var I4 = n3();
var L5 = n3();

// node_modules/@arcgis/core/views/3d/interactive/visualElements/VerticesVisualElement.js
var d12 = class extends c19 {
  constructor(e25) {
    super(e25), this.view = null, this._renderOccluded = o12.OccludeAndTransparent, this._vertices = null, this._spatialReference = null, this._color = u4([1, 127 / 255, 0, 1]), this._size = 11, this._outlineColor = u4([0, 0, 0, 0.5]), this._outlineSize = 1, this._elevationInfo = null, this.applyProperties(e25);
  }
  get renderOccluded() {
    return this._renderOccluded;
  }
  set renderOccluded(e25) {
    e25 !== this._renderOccluded && (this._renderOccluded = e25, this._updateMaterial(), this._updateOutlineMaterial());
  }
  get vertices() {
    return this._vertices;
  }
  set vertices(e25) {
    this._vertices = e25, this.recreateGeometry();
  }
  get spatialReference() {
    return this._spatialReference;
  }
  set spatialReference(e25) {
    this._spatialReference = e25, this.recreateGeometry();
  }
  get color() {
    return this._color;
  }
  set color(e25) {
    E(e25, this._color) || (a9(this._color, e25), this._updateMaterial());
  }
  get size() {
    return this._size;
  }
  set size(e25) {
    e25 !== this._size && (this._size = e25, this._updateMaterial());
  }
  get outlineColor() {
    return this._outlineColor;
  }
  set outlineColor(e25) {
    E(e25, this._outlineColor) || (a9(this._outlineColor, e25), this._updateOutlineMaterial());
  }
  get outlineSize() {
    return this._outlineSize;
  }
  set outlineSize(e25) {
    e25 !== this._outlineSize && (this._outlineSize = e25, this._updateOutlineMaterial());
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e25) {
    this._elevationInfo = e25, this.recreateGeometry();
  }
  get _vertexMaterialParameters() {
    return { color: this._color, screenSizeScale: this.size, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  get _vertexOutlineMaterialParameters() {
    return { color: this._outlineColor, screenSizeScale: this.size + 2 * this.outlineSize, renderOccluded: this._renderOccluded, isDecoration: this.isDecoration };
  }
  _updateMaterial() {
    this.attached && this._vertexMaterial.setParameters(this._vertexMaterialParameters);
  }
  _updateOutlineMaterial() {
    this.attached && this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters);
  }
  _createRenderGeometries() {
    const t25 = this.vertices;
    if (null == t25 || 0 === t25.length) return [];
    const r26 = 0.5, i23 = 0.5, s13 = o20(t25, this.spatialReference, this.view.elevationProvider, this.view.renderCoordsHelper, o18.fromElevationInfo(this.elevationInfo)), a36 = [], n30 = s13.numVertices, c26 = s13.position;
    for (let l26 = 0; l26 < n30; ++l26) {
      const t26 = o6(_8, c26[3 * l26], c26[3 * l26 + 1], c26[3 * l26 + 2]), s14 = m10(this._vertexMaterial, r26, t26), o25 = m10(this._vertexOutlineMaterial, i23, t26);
      a36.push({ vertexGeometry: s14, vertexOutlineGeometry: o25 });
    }
    return a36;
  }
  createGeometries(e25) {
    const t25 = this._createRenderGeometries();
    for (const { vertexGeometry: r26, vertexOutlineGeometry: i23 } of t25) e25.addGeometry(r26), e25.addGeometry(i23);
  }
  createExternalResources() {
    this._vertexMaterial = new z8({ ...this._vertexMaterialParameters, writeDepth: true, cullFace: e6.Back, screenSizeEnabled: true }), this._vertexOutlineMaterial = new z8({ ...this._vertexOutlineMaterialParameters, forceTransparentMode: true, writeDepth: true, cullFace: e6.Front, screenSizeEnabled: true, shadingEnabled: false });
  }
  destroyExternalResources() {
    this._vertexMaterial = null, this._vertexOutlineMaterial = null;
  }
  forEachMaterial(e25) {
    e25(this._vertexMaterial), e25(this._vertexOutlineMaterial);
  }
};
var _8 = n3();
function m10(e25, t25, r26) {
  return ot(e25, t25, 16, 16, { offset: r26 });
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/draw/DrawGraphicTool3D.js
var z9 = class extends E7 {
  constructor(e25) {
    super(e25), this._activeVertexVisualElement = null, this._createGraphicState = null, this._outlineVisualElement = null, this._verticesVisualElement = null, this._verticalLineVisualElement = null, this._settings = new j7({ getTheme: () => this.view.effectiveTheme }), this.geometryType = null, this.type = "draw-3d";
  }
  initialize() {
    const { mode: e25, offset: t25, unit: i23 } = this.elevationInfo;
    this.internalGraphicsLayer.elevationInfo = new c3({ mode: e25, offset: t25, unit: i23 });
  }
  normalizeCtorArgs(e25) {
    if (!e25.elevationInfo) {
      const t25 = e25.hasZ ?? true;
      return { ...e25, elevationInfo: u8(t25) };
    }
    return e25;
  }
  initializeGraphic(e25) {
    const { view: t25 } = this, s13 = this._createGraphicState = new e15({ graphic: e25 });
    return t([t25.maskOccludee(e25), t25.trackGraphicState(s13), l3(() => ({ element: this._outlineVisualElement, isDraped: s13.isDraped }), ({ element: e26, isDraped: t26 }) => {
      e26 && (e26.isDraped = t26);
    }, w2), i(() => {
      z3(this.tooltipInfos.mesh, this.geometryToPlace);
    }), this._setupLoadingIndicator(s13), ...a24(s13)]);
  }
  makeDrawOperation() {
    const { geometryType: e25 } = this, t25 = "circle" !== e25 && "rectangle" !== e25;
    return new F6({ view: this.view, manipulators: this.manipulators, geometryType: F5(e25), drawingMode: this.mode, hasZ: this.hasZ, defaultZ: this.defaultZ, snapToSceneEnabled: this.snapToScene, drawSurface: new l11(this.view, this.elevationInfo, [this.internalGraphicsLayer]), elevationDrawSurface: new c13(this.elevationInfo, this.defaultZ, this.view, this.internalGraphicsLayer), hasM: false, elevationInfo: this.elevationInfo, snappingManager: this.snappingManager, snappingVisualizer: new R10(), segmentLabels: t25 ? new a20() : null, labelOptions: this.sketchOptions.labels, isDraped: this._createGraphicState ? this._createGraphicState.isDraped : "on-the-ground" === r13(this.hasZ, this.elevationInfo), cursor: this.cursor, constraintsEnabled: true, automaticLengthMeasurementUtils: this.automaticLengthMeasurementUtils });
  }
  onActiveVertexChanged(e25) {
    const { view: n30 } = this;
    if (this._activeVertexVisualElement) return this._activeVertexVisualElement.vertices = [e25], this._activeVertexVisualElement.recreate(), this._updateVerticalLineVisualElement(e25), e();
    const l26 = this._settings, c26 = l26.manipulators.vertex, m16 = new d12({ view: n30, spatialReference: n30.spatialReference, vertices: [e25], elevationInfo: this.internalGraphicsLayer.elevationInfo, size: c26.size, outlineSize: c26.outlineSize, renderOccluded: c26.renderOccluded, attached: false, isDecoration: true });
    this._activeVertexVisualElement = m16;
    const p17 = l26.visualElements.zVerticalLine, h23 = new G3({ view: n30, extensionType: p17.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: o12.OccludeAndTransparent, isDecoration: true });
    this._verticalLineVisualElement = h23;
    const u23 = t([l3(() => l26.visualElements.zVerticalLine, (e26) => e26.apply(h23), h), l3(() => ({ selectedColor: F2(l26.colors.selected), outlineColor: F2(l26.manipulators.vertex.outlineColor) }), ({ selectedColor: e26, outlineColor: t25 }) => {
      m16.color = e26, m16.outlineColor = t25;
    }, h), e(() => {
      this._activeVertexVisualElement = u2(this._activeVertexVisualElement), this._verticalLineVisualElement = u2(this._verticalLineVisualElement);
    })]);
    return m16.attached = true, this._updateVerticalLineVisualElement(e25), u23;
  }
  _updateVerticalLineVisualElement(e25) {
    const t25 = this._verticalLineVisualElement;
    if (!t25) return;
    const { renderCoordsHelper: i23, elevationProvider: s13 } = this.view;
    o6(A9, e25[0], e25[1], e25[2]), U3.setFromElevationInfo(this.elevationInfo), A9[2] = f15(A9, s13, U3, i23);
    i23.toRenderCoords(A9, this.view.spatialReference, A9) ? (t25.setStartEndFromWorldDownAtLocation(A9), t25.attached = true) : t25.attached = false;
  }
  onOutlineChanged(e25) {
    if (this._outlineVisualElement) return this._outlineVisualElement.geometry = e25, e();
    const t25 = this.internalGraphicsLayer.elevationInfo, { view: n30 } = this, l26 = this._settings, c26 = new j8({ view: n30, geometry: e25, elevationInfo: t25, isDraped: this._createGraphicState ? this._createGraphicState.isDraped : "on-the-ground" === r13(this.hasZ, t25), attached: false, isDecoration: true });
    this._outlineVisualElement = c26;
    const m16 = t([l3(() => l26.visualElements.lineObjects.outline, (e26) => e26.apply(c26), h), l3(() => l26.visualElements.lineObjects.shadowStyle, (e26) => e26.apply(c26), h), e(() => {
      this._outlineVisualElement = u2(this._outlineVisualElement);
    })]);
    return c26.attached = true, c26.laserlineEnabled = true, m16;
  }
  onRegularVerticesChanged(e25) {
    if (this._verticesVisualElement) return this._verticesVisualElement.vertices = e25, e();
    const { view: n30 } = this, l26 = this._settings, c26 = l26.manipulators.vertex, m16 = new d12({ view: n30, spatialReference: n30.spatialReference, vertices: e25, elevationInfo: this.internalGraphicsLayer.elevationInfo, size: c26.size, outlineSize: c26.outlineSize, renderOccluded: c26.renderOccluded, attached: false, isDecoration: true }), p17 = t([l3(() => ({ color: F2(l26.manipulators.vertex.color), outlineColor: F2(l26.manipulators.vertex.outlineColor) }), ({ color: e26, outlineColor: t25 }) => {
      m16.color = e26, m16.outlineColor = t25;
    }, h), e(() => {
      this._verticesVisualElement = u2(this._verticesVisualElement);
    })]);
    return m16.attached = true, this._verticesVisualElement = m16, p17;
  }
  updateGraphicGeometry(e25) {
    if ("mesh" !== this.geometryType || "point" !== e25?.type) super.updateGraphicGeometry(e25);
    else {
      const t25 = this.geometryToPlace;
      t25?.centerAt(e25), z3(this.tooltipInfos.mesh, t25);
      const i23 = this._graphic;
      t25 && i23.geometry === t25 || (i23.geometry = t25);
    }
  }
  _setupLoadingIndicator(e25) {
    const { drawOperation: t25 } = this;
    if (!this.geometryToPlace) return t25.loading = false, null;
    t25.loading = true;
    const r26 = e(() => {
      t25.loading = false;
    });
    let o25;
    const a36 = () => o25 && cancelAnimationFrame(o25);
    return t([f2(() => e25.displaying, () => {
      a36(), o25 = requestAnimationFrame(() => r26.remove());
    }, { ...w2, once: true }), e(a36), r26]);
  }
};
r([m({ constructOnly: true })], z9.prototype, "elevationInfo", void 0), r([m({ constructOnly: true })], z9.prototype, "geometryType", void 0), r([m()], z9.prototype, "type", void 0), r([m({ constructOnly: true })], z9.prototype, "view", void 0), z9 = r([a2("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")], z9);
var U3 = new o18();
var A9 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/geometryUtils.js
function n20(o25) {
  const n30 = r21(o25);
  return r11(Math.cos(n30), Math.sin(n30));
}
function r21(t25) {
  if (null == t25 || "polyline" !== t25.type && "polygon" !== t25.type) return 0;
  const n30 = "polyline" === t25.type ? t25.paths : t25.rings, r26 = e2();
  for (const o25 of n30) for (let t26 = 0; t26 < o25.length - 1; t26++) {
    const n31 = o25[t26], e25 = o25[t26 + 1], i23 = n31[0] - e25[0], l26 = n31[1] - e25[1];
    if (i23 * i23 + l26 * l26 > r26) return Math.atan2(e25[1] - n31[1], e25[0] - n31[0]);
  }
  return 0;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatedObjectUtils.js
function t17(t25) {
  return t25?.operations?.data.geometry;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatorUtils.js
function o21(e25, n30) {
  return t18(e25?.data.coordinateHelper.hasZ(), n30);
}
function t18(e25, o25) {
  return !!e25 && "on-the-ground" !== o25.mode && !c7(o25);
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/tooltipUtils3D.js
function m11(o25, e25, s13) {
  function l26() {
    const t25 = s13(), o26 = t25.sketchOptions.tooltips.effectiveEnabled ? t25.activeTooltipInfo : null;
    return { ...t25, activeTooltipInfo: o26 };
  }
  let p17 = false;
  function u23(t25) {
    p17 || (p17 = true, t25(), p17 = false);
  }
  function f21({ activeTooltipInfo: t25, sketchOptions: i23, scaleRotateTransform: n30 }) {
    u23(() => {
      t25 && (t25.sketchOptions = i23, h16(t25, e25), k5(t25, n30)), o25.info = t25;
    });
  }
  return t([l3(l26, f21, w2), l3(() => {
    const t25 = l26(), { activeTooltipInfo: o26 } = t25;
    if (o26) return { context: t25, activeTooltipInfo: o26, key: o26.key, geometry: t17(e25) };
  }, (t25, o26) => {
    t25 && o26 && o26.key !== t25.key && u23(() => v9(e25, t25.context));
  }, U), e25.on("committed", () => {
    queueMicrotask(() => f21(l26()));
  }), C2(o25, { onBeforePaste: () => {
    p17 = true;
  }, onAfterPaste: () => {
    v9(e25, l26()), p17 = false;
  } })]);
}
function v9(t25, { activeTooltipInfo: o25, callbacks: e25 }) {
  if (!o25) return;
  e25.onBeforeUpdate();
  const i23 = t17(t25);
  switch (i23?.type) {
    case "mesh":
      d13(o25, i23.origin, t25, e25), "orientation" in o25 && "scale" in o25 && z3(o25, i23, e25);
      break;
    case "point":
      d13(o25, i23, t25, e25);
  }
}
function d13(t25, o25, e25, i23) {
  const { dx: n30, dy: r26, dz: a36 } = F4(t25, o25);
  0 === n30 && 0 === r26 && 0 === a36 || (i23.onMoveStart(), e25.operations?.move(n30, r26, a36, E8.NEW_STEP), i23.onMove(n30, r26, a36), i23.onMoveStop());
}
function h16(t25, o25) {
  const e25 = t17(o25), i23 = e25?.type;
  if (!t25 || !e25 || "mesh" !== i23 && "point" !== i23) return;
  const n30 = "mesh" === i23, r26 = n30 ? e25.origin : e25;
  t25.setLocationFromPoint(r26), y11(t25, r26, o25), "transform-mesh" === t25.type && n30 && V3(t25, e25), t25.clearInputValues();
}
function y11(t25, o25, e25) {
  t25.elevation.actual = R8(o25), t25.elevation.visible = !!e25.operations?.data.coordinateHelper.hasZ(), t25.elevation.readOnly = false, t25.elevation.showAsZ = true;
}
function k5(t25, i23) {
  if ("transform-point" !== t25?.type) return;
  if (!i23) return t25.orientation.actual = void 0, t25.size.actual = void 0, t25.orientation.visible = false, void (t25.size.visible = false);
  const n30 = i23.mode, { size: r26, orientationClockwise: a36 } = i23.adapter, { visualVariables: s13 } = t25.sketchOptions.tooltips, c26 = s13?.rotation, l26 = null != a36 && (null == n30 || "rotate" === n30), p17 = "geographic";
  t25.orientation.actual = l26 ? o17(a36, "radians", p17) : void 0, t25.orientation.precision = b15(c26?.valueType), t25.orientation.visible = l26;
  const u23 = s13?.size, f21 = null != r26 && (null == n30 || "scale" === n30);
  t25.size.actual = f21 ? a15(r26, u23?.unit ?? "meters") : void 0, t25.size.precision = b15(u23?.valueType), t25.size.visible = f21;
}
function b15(t25) {
  switch (t25) {
    case "integer":
    case "long":
      return 0;
    default:
      return null;
  }
}

// node_modules/@arcgis/core/views/3d/support/geometryUtils/ray.js
function m12(r26, n30, o25 = b5()) {
  return g11(r26, g(n30), o25), A(o25.direction, o25.direction), o25;
}
function g11(e25, n30, t25) {
  return l15(e25, e25.screenToRender(n30, p(c5.get())), t25);
}
function l15(e25, t25, i23) {
  const c26 = p(r12(c5.get(), t25));
  if (c26[2] = 0, !e25.unprojectFromRenderScreen(c26, i23.origin)) return null;
  const s13 = p(r12(c5.get(), t25));
  s13[2] = 1;
  const m16 = e25.unprojectFromRenderScreen(s13, c5.get());
  return null == m16 ? null : (c4(i23.direction, m16, i23.origin), i23);
}

// node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js
var ee2 = class {
  constructor(e25) {
    this.metadata = void 0, this._camera = new it2(), this._elevation = { offset: 0, override: null }, this.collisionType = { type: "point" }, this.collisionPriority = 0, this._renderObjects = new Array(), this.autoScaleRenderObjects = true, this._available = true, this._noDisplayCount = 0, this._radius = 10, this._worldSized = false, this.focusMultiplier = 2, this.touchMultiplier = 2.5, this.worldOriented = false, this._modelTransform = e3(), this._worldFrame = null, this._renderLocation = n3(), this._renderLocationDirty = true, this._location = new _({ x: 0, y: 0, z: 0 }), this._elevationAlignedLocation = new _(), this._elevationAlignedLocationDirty = true, this.interactive = true, this.selectable = false, this.grabbable = true, this.consumesClicks = true, this.cursor = null, this.grabCursor = null, this._grabbing = false, this.dragging = false, this._hovering = false, this._selected = false, this._state = u12.None, this._focused = false, this.events = new o3.EventEmitter(), this._screenLocation = { screenPointArray: f4(), renderScreenPointArray: y2(), pixelSize: 0 }, this._screenLocationDirty = true, this._engineResourcesAddedToStage = false, this._attached = false, this._location.spatialReference = e25.view.spatialReference, Object.assign(this, e25);
    const i23 = this.view.state?.camera;
    i23 && this._camera.copyFrom(i23);
  }
  destroy() {
    this._applyObjectTransform = pe, this._removeResourcesFromStage(), this._engineResources = null, this.view = null, this._camera = null;
  }
  get _stage() {
    return this.view?.stage;
  }
  get elevationInfo() {
    return this._elevationInfo;
  }
  set elevationInfo(e25) {
    this._elevationInfo = e25, this._elevationAlignedLocationDirty = true, this._renderLocationDirty = true, this._updateEngineObject();
  }
  get renderObjects() {
    return this._renderObjects;
  }
  set renderObjects(e25) {
    this._removeResourcesFromStage(), this._engineResources = null, this._renderObjects = e25.slice(), this._updateEngineObject();
  }
  set available(e25) {
    e25 !== this._available && (this._available = e25, this._updateEngineObject());
  }
  get available() {
    return this._available;
  }
  disableDisplay() {
    return this._noDisplayCount++, 1 === this._noDisplayCount && this._updateEngineObject(), e(() => {
      this._noDisplayCount--, 0 === this._noDisplayCount && this._updateEngineObject();
    });
  }
  set radius(e25) {
    e25 !== this._radius && (this._radius = e25, this._updateEngineObject());
  }
  get radius() {
    return this._radius;
  }
  set worldSized(e25) {
    e25 !== this._worldSized && (this._worldSized = e25, this._updateEngineObject());
  }
  get worldSized() {
    return this._worldSized;
  }
  get modelTransform() {
    return this._modelTransform;
  }
  set modelTransform(e25) {
    te2(e25) && (this._screenLocationDirty = true), n4(this._modelTransform, e25), this._updateEngineObject();
  }
  get renderLocation() {
    return this._renderLocationDirty && (this._renderLocationDirty = false, this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation, this._renderLocation), this.worldOriented ? (this._worldFrame || (this._worldFrame = e3()), ie(this.view, this._renderLocation, this._worldFrame)) : this._worldFrame && (this._worldFrame = null)), this._renderLocation;
  }
  set renderLocation(e25) {
    this.view.renderCoordsHelper.fromRenderCoords(e25, this._location), this.elevationAlignedLocation = this._location;
  }
  get location() {
    return this._location;
  }
  set location(e25) {
    x3(e25, this._location), this._notifyLocationChanged();
  }
  _notifyLocationChanged() {
    this._renderLocationDirty = true, this._screenLocationDirty = true, this._elevationAlignedLocationDirty = true, this._updateEngineObject(), this.events.emit("location-update", { location: this._location });
  }
  get elevationAlignedLocation() {
    return this._elevationAlignedLocationDirty ? (this._evaluateElevationAlignment(), this._updateElevationAlignedLocation(), this._elevationAlignedLocation) : this._elevationAlignedLocation;
  }
  set elevationAlignedLocation(e25) {
    x3(e25, this._location), this._evaluateElevationAlignment(), this._location.z -= this._elevation.offset, this._updateElevationAlignedLocation(), this._updateEngineObject(), this.events.emit("location-update", { location: this._location });
  }
  _updateElevationAlignedLocation() {
    const e25 = null != this._elevation.override ? this._elevation.override : this.location.z || 0;
    this._elevationAlignedLocation.x = this.location.x, this._elevationAlignedLocation.y = this.location.y, this._elevationAlignedLocation.z = e25 + this._elevation.offset, this._elevationAlignedLocation.spatialReference = k3(this.location.spatialReference), this._renderLocationDirty = true, this._screenLocationDirty = true, this._elevationAlignedLocationDirty = false;
  }
  grabbableForEvent() {
    return true;
  }
  get grabbing() {
    return this._grabbing;
  }
  set grabbing(e25) {
    e25 !== this._grabbing && (this._grabbing = e25, this._setFocused(this._hovering || this._grabbing), this._updateEngineObject());
  }
  get hovering() {
    return this._hovering;
  }
  set hovering(e25) {
    e25 !== this._hovering && (this._hovering = e25, this._setFocused(this._hovering || this._grabbing), this._updateEngineObject());
  }
  get selected() {
    return this._selected;
  }
  set selected(e25) {
    e25 !== this._selected && (this._selected = e25, this._updateEngineObject(), this.events.emit("select-changed", { action: e25 ? "select" : "deselect" }));
  }
  get state() {
    return this._state;
  }
  set state(e25) {
    e25 !== this._state && (this._state = e25, this._updateEngineObject());
  }
  updateStateEnabled(e25, t25) {
    t25 ? this.state |= e25 : this.state &= ~e25;
  }
  _setFocused(e25) {
    e25 !== this._focused && (this._focused = e25, this.events.emit("focus-changed", { action: true === e25 ? "focus" : "unfocus" }));
  }
  get focused() {
    return this._focused;
  }
  get screenLocation() {
    return this._ensureScreenLocation(), this._screenLocation;
  }
  _ensureScreenLocation() {
    if (!this._screenLocationDirty) return;
    this._screenLocation.pixelSize = this._camera.computeScreenPixelSizeAt(this.renderLocation), this._screenLocationDirty = false;
    let e25;
    if (te2(this._modelTransform)) {
      const t25 = this._calculateModelTransformOffset(me);
      e25 = u5(t25, t25, this.renderLocation);
    } else e25 = this.renderLocation;
    this._camera.projectToRenderScreen(e25, this._screenLocation.renderScreenPointArray), this._camera.renderToScreen(this._screenLocation.renderScreenPointArray, this._screenLocation.screenPointArray);
  }
  get applyObjectTransform() {
    return this._applyObjectTransform;
  }
  set applyObjectTransform(e25) {
    this._applyObjectTransform = e25, this._screenLocationDirty = true, this._updateEngineObject();
  }
  get attached() {
    return this._attached;
  }
  intersectionDistance(t25, i23) {
    if (!this.available) return null;
    const s13 = g(t25, se), o25 = this._getCollisionRadius(i23), r26 = -1 * this.collisionPriority;
    switch (this.collisionType.type) {
      case "point":
        if (b4(this.screenLocation.screenPointArray, s13) < o25 * o25) return this.screenLocation.renderScreenPointArray[2] + r26;
        break;
      case "line": {
        const e25 = this.collisionType.paths, t26 = this._getWorldToScreenObjectScale(), i24 = this._calculateObjectTransform(t26, ce), n30 = o25 * this.screenLocation.pixelSize, a36 = g11(this._camera, s13, re);
        if (null == a36) return null;
        for (const s14 of e25) {
          if (0 === s14.length) continue;
          const e26 = E3(he, s14[0], i24);
          for (let t27 = 1; t27 < s14.length; t27++) {
            const o26 = E3(de, s14[t27], i24), l26 = d5(h5(e26, o26, oe), a36);
            if (null != l26 && l26 < n30 * n30) {
              const t28 = u5(c5.get(), e26, o26);
              g2(t28, t28, 0.5);
              const i25 = l4(c5.get());
              return this._camera.projectToRenderScreen(t28, i25), i25[2] + r26;
            }
            s6(e26, o26);
          }
        }
        break;
      }
      case "disc": {
        const e25 = this.collisionType.direction, t26 = this.collisionType.offset ?? a8, i24 = this._getWorldToScreenObjectScale(), n30 = this._calculateObjectTransform(i24, ce), a36 = o25 * this.screenLocation.pixelSize, c26 = g11(this._camera, s13, re);
        if (null == c26) return null;
        const h23 = n7(ne, n30), d18 = N2(ue2, e25, h23), _10 = E3(ge, t26, n30);
        l7(_10, d18, le);
        const u23 = _e;
        if (q5(le, c26, u23) && v2(u23, _10) < a36 * a36) return this.screenLocation.renderScreenPointArray[2] + r26;
        break;
      }
      case "ribbon": {
        const { paths: e25, direction: t26 } = this.collisionType, i24 = this._getWorldToScreenObjectScale(), n30 = this._calculateObjectTransform(i24, ce), a36 = o25 * this._camera.computeScreenPixelSizeAt(this.renderLocation), h23 = g11(this._camera, s13, re);
        if (null == h23) return null;
        const d18 = n7(ne, n30), _10 = N2(ue2, t26, d18), u23 = this._calculateModelTransformPosition(ge);
        l7(u23, _10, le);
        const g17 = _e;
        if (!q5(le, h23, g17)) break;
        for (const s14 of e25) {
          if (0 === s14.length) continue;
          const e26 = E3(he, s14[0], n30);
          for (let t27 = 1; t27 < s14.length; t27++) {
            const i25 = E3(de, s14[t27], n30), o26 = M3(h5(e26, i25, oe), g17);
            if (null != o26 && o26 < a36 * a36) {
              const t28 = u5(c5.get(), e26, i25);
              g2(t28, t28, 0.5);
              const s15 = l4(c5.get());
              return this._camera.projectToRenderScreen(t28, s15), s15[2] + r26;
            }
            s6(e26, i25);
          }
        }
        break;
      }
      default:
        n(this.collisionType);
    }
    return null;
  }
  attach(e25 = { manipulator3D: {} }) {
    const t25 = this._stage;
    if (!t25) return;
    const i23 = e25.manipulator3D;
    null == i23.engineLayerId ? (this._engineLayer = new l12(t25, { pickable: false, updatePolicy: C3.SYNC }), i23.engineLayerId = this._engineLayer.id) : t25?.getLayer && (this._engineLayer = t25.getLayer(i23.engineLayerId)), i23.engineLayerReferences = (i23.engineLayerReferences || 0) + 1, this._camera.copyFrom(this.view.state.camera), this._attached = true, this._updateEngineObject(), L2(this._location.spatialReference, this.view.spatialReference) || (this.location = new _({ x: 0, y: 0, z: 0, spatialReference: this.view.spatialReference }));
  }
  detach(e25 = { manipulator3D: {} }) {
    const t25 = e25.manipulator3D;
    t25.engineLayerReferences--;
    const i23 = 0 === t25.engineLayerReferences;
    this._removeResourcesFromStage(), i23 && (t25.engineLayerId = null, u2(this._engineLayer)), this._engineResources = null, this._engineLayer = null, this._attached = false;
  }
  onViewChange() {
    this._camera.copyFrom(this.view.state.camera), this._screenLocationDirty = true, this._updateEngineObject();
  }
  onElevationChange(e25) {
    nn(this.location, fe, e25.spatialReference) && q(e25.extent, fe) && this._notifyLocationChanged();
  }
  _evaluateElevationAlignment() {
    if (null == this.elevationInfo) return;
    let e25 = null, t25 = 0;
    const i23 = h4(this.elevationInfo, this.location.spatialReference ?? this.view.elevationProvider.spatialReference);
    switch (this.elevationInfo.mode) {
      case "on-the-ground":
        e25 = a17(this.view.elevationProvider, this.location, "ground") ?? 0;
        break;
      case "relative-to-ground":
        t25 = (a17(this.view.elevationProvider, this.location, "ground") ?? 0) + i23;
        break;
      case "relative-to-scene":
        t25 = (a17(this.view.elevationProvider, this.location, "scene") ?? 0) + i23;
        break;
      case "absolute-height":
        t25 = i23;
    }
    return t25 !== this._elevation.offset || e25 !== this._elevation.override ? (this._elevation.offset = t25, void (this._elevation.override = e25)) : void 0;
  }
  _updateEngineObject() {
    if (!this._attached) return;
    if (!this.available) return void this._removeResourcesFromStage();
    const e25 = this._getWorldToScreenObjectScale(), t25 = ce;
    if (true === this.autoScaleRenderObjects) {
      const i24 = this._getFocusedSize(this._radius, this.focused) * e25;
      this._calculateObjectTransform(i24, t25);
    } else this._calculateObjectTransform(e25, t25);
    const { objectsByState: i23 } = this._ensureEngineResources(), s13 = (this.focused ? t13.Focused : t13.Unfocused) | (this.selected ? t13.Selected : t13.Unselected), o25 = this._noDisplayCount > 0;
    for (const { stateMask: r26, objects: n30 } of i23) {
      if (o25) {
        for (const e27 of n30) e27.visible = false;
        continue;
      }
      const e26 = (r26 & t13.All) !== t13.None, i24 = (r26 & u12.All) !== u12.None, a36 = !e26 || (s13 & r26) === (r26 & t13.All), c26 = !i24 || (this.state & r26) === (r26 & u12.All);
      if (a36 && c26) for (const s14 of n30) s14.visible = true, s14.transformation = t25;
      else for (const t26 of n30) t26.visible = false;
    }
  }
  _ensureEngineResources() {
    if (null == this._engineResources) {
      const e25 = this._engineLayer, t25 = [], i23 = /* @__PURE__ */ new Set();
      this.renderObjects.forEach(({ geometry: { material: e26 } }) => {
        i23.has(e26) || (t25.push(e26), i23.add(e26));
      });
      const s13 = /* @__PURE__ */ new Map();
      this._renderObjects.forEach((e26) => {
        const t26 = new A3({ castShadow: false, geometries: [e26.geometry] }), i24 = s13.get(e26.stateMask) || [];
        i24.push(t26), s13.set(e26.stateMask, i24);
      });
      const o25 = [];
      s13.forEach((e26, t26) => o25.push({ stateMask: t26, objects: e26 })), this._engineResources = { objectsByState: o25, layer: e25, materials: t25 };
    }
    return this._addResourcesToStage(), this._engineResources;
  }
  _addResourcesToStage() {
    const e25 = this._stage;
    if (this._engineResourcesAddedToStage || null == this._engineResources || !e25) return;
    const { objectsByState: t25, layer: i23 } = this._engineResources;
    t25.forEach(({ objects: e26 }) => i23.addMany(e26)), this._engineResourcesAddedToStage = true;
  }
  _removeResourcesFromStage() {
    const e25 = this._stage;
    if (!this._engineResourcesAddedToStage || null == this._engineResources || !e25) return;
    const { objectsByState: t25, layer: i23 } = this._engineResources;
    t25.forEach(({ objects: e26 }) => i23.removeMany(e26)), this._engineResourcesAddedToStage = false;
  }
  _getCollisionRadius(e25) {
    return this._getFocusedSize(this.radius, true) * ("touch" === e25 ? this.touchMultiplier : 1);
  }
  _getFocusedSize(e25, t25) {
    return e25 * (t25 ? this.focusMultiplier : 1);
  }
  _getWorldToScreenObjectScale() {
    return this._worldSized ? 1 : this.screenLocation.pixelSize;
  }
  _calculateModelTransformPosition(e25) {
    const t25 = this._getWorldToScreenObjectScale(), i23 = this._calculateObjectTransform(t25, ae);
    return o6(e25, i23[12], i23[13], i23[14]);
  }
  _calculateModelTransformOffset(e25) {
    const t25 = this._calculateModelTransformPosition(e25);
    return c4(e25, t25, this.renderLocation);
  }
  _calculateObjectTransform(e25, t25) {
    return r7(t25, e25, 0, 0, 0, 0, e25, 0, 0, 0, 0, e25, 0, 0, 0, 0, 1), this._worldFrame && c2(t25, t25, this._worldFrame), c2(t25, t25, this._modelTransform), t25[12] += this.renderLocation[0], t25[13] += this.renderLocation[1], t25[14] += this.renderLocation[2], t25[15] = 1, null != this._applyObjectTransform && this._applyObjectTransform(t25), t25;
  }
  get test() {
  }
};
function te2(e25) {
  return 0 !== e25[12] || 0 !== e25[13] || 0 !== e25[14];
}
function ie(e25, t25, i23) {
  switch (e25.viewingMode) {
    case "local":
      return o5(i23), true;
    case "global": {
      const o25 = s4(e25.renderCoordsHelper.spatialReference);
      return v(t25, 0, he, 0, o25.radius), n8(s(he[0]), s(he[1]), i23), true;
    }
  }
}
var se = f4();
var oe = v4();
var re = b5();
var ne = e4();
var ae = e3();
var ce = e3();
var le = M2();
var he = n3();
var de = n3();
var _e = n3();
var ue2 = n3();
var ge = n3();
var me = n3();
var fe = new _({ x: 0, y: 0, z: 0, spatialReference: null });
var pe = () => {
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/GrabbingState.js
var N6;
!function(N9) {
  N9[N9.NONE = 0] = "NONE", N9[N9.ANY = 1] = "ANY", N9[N9.Z = 2] = "Z", N9[N9.XY = 4] = "XY";
}(N6 || (N6 = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorType.js
var A10;
!function(A15) {
  A15[A15.TRANSLATE_Z = 0] = "TRANSLATE_Z", A15[A15.TRANSLATE_XY = 1] = "TRANSLATE_XY", A15[A15.SCALE = 2] = "SCALE", A15[A15.ROTATE = 3] = "ROTATE", A15[A15.SCALE_ROTATE = 4] = "SCALE_ROTATE";
}(A10 || (A10 = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorState.js
var a25 = class {
  constructor() {
    this.grabbingState = N6.NONE, this.zManipulator = null, this.firstSelected = null, this.numSelected = 0, this.firstGrabbedXY = null;
  }
  update(a36) {
    this.grabbingState = N6.NONE, this.zManipulator = null, this.numSelected = 0, this.firstSelected = null, this.firstGrabbedXY = null, a36.forEachManipulator((a37, s13) => {
      if (s13 === A10.TRANSLATE_Z && (this.zManipulator = a37), a37 instanceof ee2 && (a37.selected && (0 === this.numSelected && (this.firstSelected = a37), this.numSelected++), null == this.firstGrabbedXY && a37.grabbing && s13 === A10.TRANSLATE_XY && (this.firstGrabbedXY = a37)), a37.grabbing) switch (this.grabbingState |= N6.ANY, s13) {
        case A10.TRANSLATE_Z:
          this.grabbingState |= N6.Z;
          break;
        case A10.TRANSLATE_XY:
          this.grabbingState |= N6.XY;
      }
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/lineObjectVisualElementUtils.js
function y12(t25) {
  const { object: n30 } = t25, a36 = S12(t25), l26 = [a36, M8(t25, a36.visualElement)];
  return n30.maskOccludee && l26.push(n30.maskOccludee()), { visualElement: a36.visualElement, remove: () => o(l26) };
}
function S12(e25) {
  const { view: a36, object: l26 } = e25, s13 = t17(l26), r26 = new j8({ view: a36, geometry: D5(s13) ? s13 : null, elevationInfo: l26.elevationInfo, attached: false, isDecoration: true }), c26 = new j7({ getTheme: () => a36.effectiveTheme }), m16 = () => {
    r26.attached = l26.visible;
  }, u23 = t([l3(() => c26.visualElements.lineObjects.outline, (e26) => e26.apply(r26), h), l3(() => c26.visualElements.lineObjects.shadowStyle, (e26) => e26.apply(r26), h), l3(() => l26.visible, m16), l3(() => l26.isDraped, (e26) => {
    r26.isDraped = e26;
  }, h), l26.on("committed", () => {
    const e26 = t17(l26);
    r26.geometry = D5(e26) ? e26 : null;
  }), c(r26)]);
  return m16(), { visualElement: r26, remove: () => u23.remove() };
}
function M8(r26, c26) {
  const { object: m16, view: u23 } = r26, p17 = [], v14 = m16.elevationInfo, j14 = "on-the-ground" === v14.mode || !v14.offset && "absolute-height" !== v14.mode, y14 = new a25(), S20 = new j7({ getTheme: () => u23.effectiveTheme }), M16 = S20.visualElements, L12 = new G3({ view: u23, extensionType: M16.zVerticalLine.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: o12.OccludeAndTransparent, isDecoration: true }), A15 = s(M16.heightPlaneAngleCutoff), x13 = new c18({ view: u23, attached: false, angleCutoff: A15, isDecoration: true }), C11 = r5(1);
  p17.push(l3(() => ({ lineShadowStyle: S20.visualElements.lineObjects.shadowStyle, pointShadowStyle: S20.visualElements.pointObjects.shadowStyle, alpha: C11.value }), ({ lineShadowStyle: e25, pointShadowStyle: t25, alpha: n30 }) => {
    e25.apply(c26, n30), t25.apply(L12, n30);
  }, h));
  const V9 = r5(1);
  p17.push(l3(() => ({ heightPlane: S20.visualElements.heightPlane, alpha: V9.value }), ({ heightPlane: e25, alpha: t25 }) => e25.apply(x13, t25), h));
  const P17 = () => {
    y14.update(r26);
    const e25 = t17(m16);
    if (!m16.visible || j14 && (m16.isDraped || !D5(e25) || !e25.hasZ)) return c26.laserlineEnabled = false, L12.attached = false, void (x13.attached = false);
    c26.laserlineEnabled = true;
    const t25 = y14.grabbingState & N6.XY ? M16.laserlineAlphaMultiplier : 1;
    C11.value = t25;
    const n30 = y14.grabbingState & N6.Z ? M16.laserlineAlphaMultiplier : 1;
    V9.value = n30, T5(L12, y14), O8(r26, c26, x13, y14);
  };
  p17.push(l3(() => S20.visualElements.zVerticalLine, (e25) => e25.apply(L12), h)), p17.push(m16.on("committed", P17), l3(() => m16.visible, P17), c26.events.on("attachment-origin-changed", P17), c(L12), c(x13));
  const U8 = [], X = () => {
    o(U8), U8.length = 0, r26.forEachManipulator((e25) => U8.push(e25.events.on("grab-changed", P17))), r26.forEachManipulator((e25) => U8.push(e25.events.on("select-changed", P17))), P17();
  };
  return X(), p17.push(r26.onManipulatorsChanged(X), u(() => t(U8))), t(p17);
}
function T5(e25, t25) {
  const n30 = 1 === t25.numSelected ? t25.firstSelected : t25.numSelected > 1 && null != t25.firstGrabbedXY ? t25.firstGrabbedXY : null;
  null != n30 ? (e25.setStartEndFromWorldDownAtLocation(n30.renderLocation), e25.attached = true) : e25.attached = false;
}
function O8(e25, t25, n30, a36) {
  if (a36.numSelected > 0) {
    o6(L6, 0, 0, 0);
    let t26 = 0;
    e25.forEachManipulator((e26, n31) => {
      n31 === A10.TRANSLATE_XY && e26.selected && e26 instanceof ee2 && (u5(L6, L6, e26.renderLocation), t26++);
    }), t26 > 0 ? (n30.heightManifoldTarget = g2(L6, L6, 1 / t26), n30.attached = true) : n30.attached = false;
  } else {
    const a37 = t25.attachmentOrigin;
    null != a37 && e25.view.renderCoordsHelper.toRenderCoords(a37, L6) ? (n30.heightManifoldTarget = L6, n30.attached = true) : n30.attached = false;
  }
}
function D5(e25) {
  return null != e25 && ("polygon" === e25.type || "polyline" === e25.type);
}
var L6 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/originGeometryVisualElementUtils.js
function P12(t25) {
  const o25 = [], n30 = S13(t25, o25);
  return I5(t25, o25, n30), { visualElement: n30, remove: () => o(o25) };
}
function I5(e25, o25, s13) {
  const { view: c26, object: u23 } = e25, h23 = new j7({ getTheme: () => c26.effectiveTheme }), E16 = new G3({ view: c26, extensionType: h23.visualElements.zVerticalLine.extensionType, innerWidth: 1, attached: false, writeDepthEnabled: false, renderOccluded: o12.OccludeAndTransparent, isDecoration: true });
  o25.push(l3(() => h23.visualElements.zVerticalLine, (e26) => e26.apply(E16), h));
  const P17 = new c18({ view: c26, intersectsLineInfinite: true, attached: false, isDecoration: true }), I14 = s(h23.visualElements.heightPlaneAngleCutoff), S20 = new c18({ view: c26, attached: false, angleCutoff: I14, isDecoration: true }), A15 = u23.elevationInfo, L12 = o18.fromElevationInfo(A15), M16 = "on-the-ground" === A15.mode || !A15.offset && "absolute-height" !== A15.mode, R14 = new a25(), O13 = r5(1);
  o25.push(l3(() => ({ heightPlane: h23.visualElements.heightPlane, alpha: O13.value }), ({ heightPlane: e26, alpha: t25 }) => e26.apply(S20, t25), h));
  const z13 = r5(1);
  o25.push(l3(() => ({ shadowStyle: h23.visualElements.pointObjects.shadowStyle, alpha: z13.value }), ({ shadowStyle: e26, alpha: t25 }) => e26.apply(P17, t25), h));
  const B4 = () => {
    R14.update(e25);
    let t25 = V8(t17(u23));
    const o26 = M16 && (u23.isDraped || null == t25 || !t25.hasZ);
    let n30 = true;
    if (o26 || null == t25) n30 = false;
    else {
      d4(u23.elevationInfo) && (t25 = t25.clone(), t25.z = 0);
      const e26 = f15(t25, c26.elevationProvider, L12, c26.renderCoordsHelper);
      o6(U4, t25.x, t25.y, e26), n9(U4, t25.spatialReference, U4, c26.renderCoordsHelper.spatialReference), E16.setStartEndFromWorldDownAtLocation(U4), P17.intersectsWorldUpAtLocation = U4;
    }
    const i23 = R14.grabbingState & N6.Z ? h23.visualElements.laserlineAlphaMultiplier : 1;
    O13.value = i23;
    const l26 = q2(C5);
    !o26 && u23.visible && s13.calculateMapBounds(l26) && n9(P(l26, U4), c26.spatialReference, U4, c26.renderCoordsHelper.spatialReference) ? (S20.heightManifoldTarget = U4, S20.attached = true) : S20.attached = false;
    const r26 = R14.grabbingState & N6.XY ? h23.visualElements.laserlineAlphaMultiplier : 1;
    z13.value = r26;
    const j14 = n30 && u23.visible && !o26;
    P17.attached = j14, E16.attached = j14;
  };
  o25.push(l3(() => [u23.visible, u23.isDraped], B4), u23.on("committed", B4)), e25.forEachManipulator((e26) => {
    o25.push(e26.events.on("grab-changed", B4));
  }), o25.push(c(P17)), o25.push(c(E16)), o25.push(c(S20)), B4();
}
function S13(e25, o25) {
  const { view: n30, object: i23 } = e25, l26 = new S9({ view: n30, geometry: V8(t17(i23)), elevationInfo: i23.elevationInfo, isDecoration: true });
  return A11(e25, l26, o25), o25.push(c(l26)), l26;
}
function V8(e25) {
  return null == e25 ? null : "point" === e25.type ? e25 : "mesh" === e25.type ? e25.origin.clone() : null;
}
function A11(e25, t25, o25) {
  const { view: n30, object: r26 } = e25, a36 = () => {
    t25.attached = r26.visible;
  }, s13 = new j7({ getTheme: () => n30.effectiveTheme });
  L7(e25, t25, o25), s13.visualElements.pointObjects.outline.apply(t25), o25.push(l3(() => r26.visible, a36, h));
}
function L7(e25, t25, n30) {
  const { view: i23, object: l26 } = e25;
  let r26 = null;
  const a36 = (e26) => {
    null != r26 && (r26.remove(), r26 = null), l26.isDraped && null != e26 && (r26 = M9(i23, e26, () => {
      t25.geometry = e26;
    }));
  }, s13 = () => {
    const e26 = V8(t17(l26));
    null != e26 && d4(l26.elevationInfo) && (e26.z = 0), a36(e26), t25.geometry = e26;
  };
  n30.push(l26.on("committed", s13), u(() => r26)), s13();
}
function M9(e25, t25, o25) {
  const n30 = e25.elevationProvider.spatialReference;
  i4(t25, U4, n30);
  const i23 = U4[0], l26 = U4[1];
  return e25.elevationProvider.on("elevation-change", (e26) => {
    w3(e26.extent, i23, l26) && o25();
  });
}
var U4 = n3();
var C5 = u3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/visualElementUtils.js
function l16(l26) {
  switch (t17(l26.object)?.type) {
    case "point":
    case "mesh":
      return P12(l26);
    case "polygon":
    case "polyline":
      return y12(l26);
    default:
      return null;
  }
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/config.js
var t19 = 128;
var a26 = 70;
var e19 = 80;
var h17 = 0.02;
var M10 = 54;
var c20 = 100;
var o22 = Math.ceil(a26 / 3 * 2);
var I6 = 160;
var P13 = 0.5;
var i15 = 24;
var l17 = 9;
var n21 = I6 + 30;
var p15 = I6 + 53;
var r22 = 60;
var s10 = 23;
var x9 = 5 * Math.PI / 12;
var b16 = 1 * Math.PI / 3;
var d14 = 10;
var f18 = 0.2;
var g12 = 30;
var j9 = 53;
var k6 = 0.2;
var m13 = 0.3;
var q9 = 200;
var u17 = 3;
var v10 = 1e6;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/Manipulation.js
var t20 = class {
  constructor() {
    this._available = true;
  }
  set location(a36) {
    this._forEachManipulator3D((t25) => t25.location = a36);
  }
  set elevationAlignedLocation(a36) {
    this._forEachManipulator3D((t25) => t25.elevationAlignedLocation = a36);
  }
  set elevationInfo(a36) {
    this._forEachManipulator3D((t25) => t25.elevationInfo = a36);
  }
  get renderLocation() {
    let a36;
    return this._forEachManipulator3D((t25) => {
      a36 || (a36 = t25.renderLocation);
    }), a36;
  }
  set renderLocation(a36) {
    this._forEachManipulator3D((t25) => t25.renderLocation = a36);
  }
  get available() {
    return this._available;
  }
  set available(a36) {
    this._available = a36, this._forEachManipulator3D((t25) => t25.available = a36);
  }
  get hovering() {
    return this.someManipulator((a36) => a36.hovering);
  }
  get grabbing() {
    return this.someManipulator((a36) => a36.grabbing);
  }
  get dragging() {
    return this.someManipulator((a36) => a36.dragging);
  }
  get selected() {
    return this.someManipulator((a36) => a36.selected);
  }
  hasManipulator(a36) {
    return this.someManipulator((t25) => t25 === a36);
  }
  someManipulator(a36) {
    let t25 = false;
    return this.forEachManipulator((o25) => {
      !t25 && a36(o25) && (t25 = true);
    }), t25;
  }
  _forEachManipulator3D(t25) {
    this.forEachManipulator((o25, e25) => {
      o25 instanceof ee2 && t25(o25, e25);
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/InteractiveManipulation.js
var i16 = class extends t20 {
  constructor() {
    super(...arguments), this._interactive = true;
  }
  get interactive() {
    return this._interactive;
  }
  set interactive(t25) {
    this._interactive !== t25 && (this._interactive = t25), this._updateManipulatorInteractivity();
  }
  _updateManipulatorInteractivity() {
    const t25 = !this.grabbing && this._interactive;
    this.forEachManipulator((i23) => {
      i23.interactive = t25 || i23.grabbing;
    });
  }
};

// node_modules/@arcgis/core/views/3d/interactive/RenderObject.js
var e20 = class {
  constructor(e25, s13 = t13.None) {
    this.geometry = e25, this.stateMask = s13;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/dragEventPipeline3D.js
function T6(e25, n30) {
  return P14(e25, () => n30);
}
function C6(e25) {
  return P14(e25, (e26) => e26.plane);
}
function P14(e25, t25) {
  const o25 = n3(), l26 = n3();
  let s13 = false;
  return (c26) => {
    const i23 = t25(c26);
    if ("start" === c26.action) {
      const t26 = g(c26.screenStart, a7(t7.get())), l27 = g11(e25.state.camera, t26, Q2);
      null != l27 && (s13 = q5(i23, l27, o25));
    }
    if (!s13) return null;
    const a36 = g(c26.screenEnd, a7(t7.get())), u23 = g11(e25.state.camera, a36, Q2);
    return null == u23 ? null : q5(i23, u23, l26) ? { ...c26, renderStart: o25, renderEnd: l26, plane: i23, ray: u23 } : null;
  };
}
function D6(n30, r26, t25 = 0, o25 = null, l26 = null) {
  let s13 = null;
  return (c26) => {
    if ("start" === c26.action && (s13 = n30.sceneIntersectionHelper.intersectElevationFromScreen(f4(c26.screenStart.x, c26.screenStart.y), r26, t25, l26), null != s13 && null != o25 && !nn(s13, s13, o25))) return null;
    if (null == s13) return null;
    const i23 = n30.sceneIntersectionHelper.intersectElevationFromScreen(f4(c26.screenEnd.x, c26.screenEnd.y), r26, t25, l26);
    return null != i23 && (null == o25 || nn(i23, i23, o25)) ? { ...c26, mapStart: s13, mapEnd: i23 } : null;
  };
}
function M12(e25, n30, r26, t25 = null, o25 = null) {
  return D6(e25, r26, p4(n30, e25, r26), t25, o25);
}
function N7(e25, n30, r26, t25) {
  const o25 = r26.toMap(e25.screenStart);
  return null != o25 ? M12(n30, o25, r26.elevationInfo, t25) : null;
}
function h18(e25, n30) {
  const r26 = K3, t25 = L8, s13 = M2();
  e25.renderCoordsHelper.worldUpAtPosition(n30, r26);
  const c26 = _3(O2(s13), r26, c4(t25, n30, e25.state.camera.eye));
  return _3(c26, c26, r26), l7(n30, c26, s13);
}
function G4(e25, n30, r26) {
  let t25 = null;
  const o25 = new w7();
  return o25.next(T6(e25, h18(e25, n30))).next(k7(e25, n30)).next(F9(e25, r26)).next((e26) => {
    e26.mapEnd.x = e26.mapStart.x, e26.mapEnd.y = e26.mapStart.y, t25 = e26;
  }), (e26) => (t25 = null, o25.execute(e26), t25);
}
function k7(e25, n30) {
  const r26 = n3(), t25 = r9(n30);
  e25.renderCoordsHelper.worldUpAtPosition(n30, r26);
  const o25 = n3(), m16 = n3(), f21 = (o26) => {
    if (c4(o26, o26, n30), i3(r26, o26, o26), "global" === e25.viewingMode) {
      r9(o26) * Math.sign(P3(r26, o26)) < 1e-3 - t25 && c4(o26, g2(o26, r26, 1e-3), n30);
    }
    return u5(o26, o26, n30), o26;
  };
  return (e26) => (e26.renderStart = f21(s6(o25, e26.renderStart)), e26.renderEnd = f21(s6(m16, e26.renderEnd)), e26);
}
function F9(e25, n30) {
  const r26 = e25.renderCoordsHelper;
  return (e26) => {
    const t25 = r26.fromRenderCoords(e26.renderStart, new _({ spatialReference: n30 })), o25 = r26.fromRenderCoords(e26.renderEnd, new _({ spatialReference: n30 }));
    return null != t25 && null != o25 ? { ...e26, mapStart: t25, mapEnd: o25 } : null;
  };
}
var q10;
!function(e25) {
  e25[e25.GROUND = 0] = "GROUND", e25[e25.OTHER = 1] = "OTHER";
}(q10 || (q10 = {}));
var J2 = n6();
var K3 = n3();
var L8 = n3();
var Q2 = b5();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/moveUtils.js
function n22(n30, a36, r26) {
  const c26 = (t25, e25) => {
    a36({ action: t25, object: n30, dxScreen: e25.screenDeltaX, dyScreen: e25.screenDeltaY });
  };
  return r26((a37, r27, s13) => (r27.next((t25) => ("start" === t25.action && c26("start", t25), t25)).next(f13(n30)).next((t25) => {
    switch (t25.action) {
      case "start":
      case "update":
        (t25.translationX || t25.translationY || t25.translationZ) && c26("update", t25);
        break;
      case "end":
        c26("end", t25);
    }
    return t25;
  }), { steps: r27, cancel: s13 = s13.next(g7(n30)).next((t25) => (c26("end", { screenDeltaX: 0, screenDeltaY: 0 }), t25)) }));
}
function a27(t25) {
  if (null == t25?.axis) return 1;
  const { mapStart: e25, mapEnd: n30, axis: a36 } = t25, r26 = [n30.x - e25.x, n30.y - e25.y];
  return r26[0] * a36[0] + r26[1] * a36[1] > 0 ? 1 : -1;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYAxisManipulation.js
var C7 = class extends t20 {
  constructor(t25) {
    super(), this._handles = new r2(), this._arrowManipulatorInfos = new Array(), this._angle = 0, this._scale = 1, this._radius = a26, this._updateAfterDrag = false, this.events = new o3(), this._tool = t25.tool, this._view = t25.view, this._opaqueMaterial = this._createMaterial(), this._transparentMaterial = this._createMaterial(0.5), null != t25.radius && (this._radius = t25.radius), this._createManipulators(), this.forEachManipulator((t26) => this._tool.manipulators.add(t26));
  }
  set orthogonalAvailable(t25) {
    this._arrowManipulatorInfos.length >= 3 && (this._arrowManipulatorInfos[1].manipulator.available = t25, this._arrowManipulatorInfos[3].manipulator.available = t25);
  }
  destroy() {
    this._handles = u2(this._handles), this.forEachManipulator((t25) => {
      this._tool.manipulators.remove(t25), t25.destroy();
    }), this._tool = null, this._view = null, this._arrowManipulatorInfos.length = 0;
  }
  forEachManipulator(t25) {
    for (const { manipulator: r26 } of this._arrowManipulatorInfos) t25(r26, A10.TRANSLATE_XY);
  }
  createManipulatedObjectDragPipeline(t25, r26, a36) {
    if (!r26.operations) return e();
    const i23 = r26.operations.data.spatialReference, o25 = r26.graphic;
    return n22(r26, a36, (a37) => this.createDragPipeline((r27, e25, i24, o26, s13) => ({ steps: e25, cancel: i24 } = t25(r27, e25, i24, o26, s13), a37(r27, e25, i24)), r26.elevationInfo, i23, o25));
  }
  createDragPipeline(t25, r26, a36, e25) {
    return t(this._arrowManipulatorInfos.map(({ manipulator: i23 }, o25) => p11(i23, (i24, s13, n30, l26, p17) => {
      const u23 = s13.next((t26) => ({ ...t26, manipulatorType: A10.TRANSLATE_XY })).next(M4(this._view, i24.elevationAlignedLocation)).next(M12(this._view, i24.elevationAlignedLocation, r26, a36, e25)).next(m6(i24.location, this.angle + (o25 + 1) * Math.PI * 0.5)).next(j5());
      t25(i24, u23, n30, l26, p17);
    })));
  }
  get angle() {
    return this._angle;
  }
  set angle(t25) {
    this._angle = t25, this.dragging ? this._updateAfterDrag = true : this._updateManipulatorTransform();
  }
  get displayScale() {
    return this._scale;
  }
  set displayScale(t25) {
    this._scale = t25, this._updateManipulatorTransform();
  }
  get radius() {
    return this._radius;
  }
  set radius(t25) {
    this._radius !== t25 && (this._radius = t25, this._updateManipulators());
  }
  _updateManipulators() {
    for (let t25 = 0; t25 < this._arrowManipulatorInfos.length; t25++) this._updateArrowManipulator(this._arrowManipulatorInfos[t25], t25);
    this._updateManipulatorTransform();
  }
  _updateArrowManipulator({ manipulator: t25, transform: r26 }, a36) {
    const e25 = this._radius / a26, i23 = M10 * e25, o25 = i23 * Math.sqrt(3) / 2, s13 = gt(this._opaqueMaterial, o25, i23 / 2, i23 / 2, h17);
    Ot(s13, q3(f6.get(), o6(c5.get(), 0, -o25 / 3, 0))), t25.renderObjects = [new e20(s13, t13.Focused), new e20(s13.instantiate({ material: this._transparentMaterial }), t13.Unfocused)], t25.radius = o25 / 3 * 2 * 1.2;
    const n30 = R(f6.get(), a36 * Math.PI / 2), h23 = q3(f6.get(), o6(c5.get(), 0, c20 * e25, 0));
    c2(r26, n30, h23);
  }
  _createManipulators() {
    for (let t25 = 0; t25 < 4; t25++) {
      const r26 = this._createArrowManipulator(t25);
      this._arrowManipulatorInfos.push(r26);
    }
    this._updateManipulatorTransform();
  }
  _updateManipulatorTransform() {
    const t25 = this.angle, r26 = p2(f6.get(), t25, r6(0, 0, 1));
    if (null == r26) return;
    const a36 = d3(f6.get(), o6(c5.get(), this.displayScale, this.displayScale, this.displayScale)), e25 = c2(f6.get(), a36, r26);
    for (const i23 of this._arrowManipulatorInfos) {
      const t26 = c2(f6.get(), e25, i23.transform);
      i23.manipulator.modelTransform = t26;
    }
  }
  _createArrowManipulator(t25) {
    const r26 = new ee2({ view: this._view, autoScaleRenderObjects: false, worldOriented: true, focusMultiplier: 1, touchMultiplier: 1, collisionType: { type: "disc", direction: r6(0, 0, 1) } }), a36 = { manipulator: r26, transform: e3() };
    return this._updateArrowManipulator(a36, t25), this._handles.add(r26.events.on("drag", (t26) => {
      this._updateAfterDrag && "end" === t26.action && !this.dragging && (this._updateManipulatorTransform(), this._updateAfterDrag = false);
    })), a36;
  }
  _createMaterial(r26 = 1) {
    const a36 = new A4({ cullFace: e6.Back, renderOccluded: o12.Transparent, isDecoration: true });
    return this._handles.add(l3(() => l6.toUnitRGBA(this._view.effectiveTheme.accentColor), (t25) => {
      t25[3] *= r26, a36.setParameters({ color: t25 });
    }, h)), a36;
  }
  get test() {
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/snapping/SnapToScene.js
var e21 = class {
  constructor() {
    this._view = null, this._elevationInfo = null, this._lastDragEvent = null, this._next = null, this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t25) {
    if (this._enabled !== t25 && null != this._lastDragEvent && null != this._next) {
      const n30 = this._lastDragEvent.mapEnd, e25 = this._snap(this._lastDragEvent.screenEnd);
      if (null != e25) {
        const s13 = { action: "update", mapStart: this._lastDragEvent.mapStart, mapEnd: true === t25 ? e25 : n30, screenStart: this._lastDragEvent.screenEnd, screenEnd: this._lastDragEvent.screenEnd };
        this._next.execute(s13);
      }
    }
    this._enabled = t25;
  }
  _snap(n30) {
    const e25 = null != this._view ? this._view.toMap(n30, { exclude: [] }) : null;
    return null != e25 && null != this._view && (e25.z = p4(e25, this._view, this._elevationInfo)), e25;
  }
  createDragEventPipelineStep(t25, e25) {
    this._view = t25, this._elevationInfo = e25, this._lastDragEvent = null;
    const s13 = new w7();
    this._next = s13;
    return [(t26) => {
      if (this._lastDragEvent = "end" !== t26.action ? { ...t26 } : null, this._enabled) {
        const n30 = this._snap(t26.screenEnd);
        return null != n30 ? { action: t26.action, mapStart: t26.mapStart, mapEnd: n30, screenStart: t26.screenStart, screenEnd: t26.screenEnd } : null;
      }
      return { action: t26.action, mapStart: t26.mapStart, mapEnd: t26.mapEnd, screenStart: t26.screenStart, screenEnd: t26.screenEnd };
    }, s13];
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYDiscManipulation.js
var O9 = class extends t20 {
  constructor(t25) {
    super(), this._handles = new r2(), this._snapToScene = new e21(), this._scale = 1, this._radius = a26, this._view = t25.view, this._tool = t25.tool, this._discMaterial = this._createMaterial(), this._discMaterialTransparent = this._createMaterial(0.5), null != t25.snapToScene && (this.snapToScene = t25.snapToScene), null != t25.radius && (this._radius = t25.radius), this._createManipulator(), this.forEachManipulator((t26) => this._tool.manipulators.add(t26));
  }
  destroy() {
    this._handles = u2(this._handles), this.forEachManipulator((t25) => {
      this._tool.manipulators.remove(t25), t25.destroy();
    }), this._tool = null, this._view = null, this._manipulator = null;
  }
  forEachManipulator(t25) {
    t25(this._manipulator, A10.TRANSLATE_XY);
  }
  get displayScale() {
    return this._scale;
  }
  set displayScale(t25) {
    this._scale = t25, this._updateManipulatorTransform();
  }
  get snapToScene() {
    return this._snapToScene.enabled;
  }
  set snapToScene(t25) {
    this._snapToScene.enabled = t25;
  }
  get radius() {
    return this._radius;
  }
  set radius(t25) {
    t25 !== this._radius && (this._radius = t25, this._updateManipulator());
  }
  get discManipulator() {
    return this._manipulator;
  }
  createManipulatedObjectDragPipeline(t25, e25, a36) {
    if (!e25.operations) return e();
    const r26 = e25.graphic, s13 = e25.elevationInfo, o25 = e25.operations.data.spatialReference;
    return n22(e25, a36, (e26) => this.createDragPipeline((i23, a37, r27, s14, o26) => ({ steps: a37, cancel: r27 } = t25(i23, a37, r27, s14, o26), e26(i23, a37, r27)), s13, o25, r26));
  }
  createDragPipeline(t25, e25, i23, a36) {
    const r26 = this._view;
    return p11(this._manipulator, (s13, o25, n30, l26, p17) => {
      const c26 = o25.next(M4(r26, s13.elevationAlignedLocation)).next(M12(r26, s13.elevationAlignedLocation, e25, i23, a36)).next(...this._snapToScene.createDragEventPipelineStep(r26, e25)).next((t26) => ({ ...t26, manipulatorType: A10.TRANSLATE_XY })).next(j5());
      t25(s13, c26, n30, l26, p17);
    });
  }
  _updateManipulatorTransform() {
    const t25 = d3(f6.get(), o6(c5.get(), this.displayScale, this.displayScale, this.displayScale));
    this._manipulator.modelTransform = t25;
  }
  _createManipulator() {
    const t25 = this._view;
    this._manipulator = new ee2({ view: t25, worldSized: false, autoScaleRenderObjects: false, focusMultiplier: 1, touchMultiplier: 1, collisionType: { type: "disc", direction: r6(0, 0, 1) }, worldOriented: true }), this._updateManipulator();
  }
  _updateManipulator() {
    const t25 = ft(this._discMaterial, h17, 1, t19, r6(0, 0, 1), r6(0, 0, 0));
    t25.transformation = d3(e3(), r6(this._radius, this._radius, this._radius)), this._manipulator.renderObjects = [new e20(t25, t13.Focused), new e20(t25.instantiate({ material: this._discMaterialTransparent }), t13.Unfocused)], this._manipulator.radius = e19 * (this._radius / a26);
  }
  _createMaterial(e25 = 1) {
    const i23 = new A4({ cullFace: e6.Back, renderOccluded: o12.Transparent, isDecoration: true });
    return this._handles.add(l3(() => l6.toUnitRGBA(this._view.effectiveTheme.accentColor), (t25) => {
      t25[3] *= e25, i23.setParameters({ color: t25 });
    }, h)), i23;
  }
  get test() {
  }
};

// node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js
function f19(t25, r26 = o12.OccludeAndTransparent, o25 = true) {
  const n30 = N(t25), i23 = !(t25[3] < 1);
  return o25 ? new z8({ color: n30, writeDepth: i23, cullFace: e6.Back, renderOccluded: r26, isDecoration: true }) : new A4({ color: n30, writeDepth: i23, cullFace: e6.Back, renderOccluded: r26, isDecoration: true });
}
function h19(t25, r26 = o12.OccludeAndTransparent) {
  const o25 = N(t25);
  return new A4({ color: o25, writeDepth: true, cullFace: e6.Front, renderOccluded: r26, isDecoration: true });
}
var j10 = Object.freeze({ calloutLength: 40, calloutWidth: 1, discRadius: 27, focusMultiplier: 1.1 });
var b17 = Object.freeze({ autoScaleRenderObjects: false, worldSized: true });
function w11(e25, i23, a36, s13) {
  const u23 = c4(c5.get(), e25, a36), m16 = O10(u23, _3(c5.get(), s13, u23), a36, f6.get());
  h2(m16, m16);
  const p17 = E3(c5.get(), i23, m16);
  return Math.atan2(p17[1], p17[0]);
}
function O10(e25, t25, r26, n30) {
  const l26 = A(c5.get(), e25), a36 = A(c5.get(), t25), s13 = _3(c5.get(), l26, a36);
  return n30[0] = l26[0], n30[1] = l26[1], n30[2] = l26[2], n30[3] = 0, n30[4] = a36[0], n30[5] = a36[1], n30[6] = a36[2], n30[7] = 0, n30[8] = s13[0], n30[9] = s13[1], n30[10] = s13[2], n30[11] = 0, n30[12] = r26[0], n30[13] = r26[1], n30[14] = r26[2], n30[15] = 1, n30;
}
function D7(e25, t25) {
  const r26 = e25.getViewForGraphic(t25);
  return null != r26 && "computeAttachmentOrigin" in r26 ? r26.computeAttachmentOrigin(t25, e25.spatialReference) : null;
}
function F10(e25, t25) {
  const r26 = t25.origin;
  null == r26 ? y13(e25, t17(t25)) : e25.elevationAlignedLocation = r26;
}
function y13(e25, t25) {
  if (null == t25) return;
  const r26 = "mesh" === t25.type ? t25.origin : b8(t25);
  null != r26 && (e25.location = u10(r26));
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveZManipulation.js
var R11 = class extends t20 {
  constructor(t25) {
    super(), this._radius = a26, this.events = new o3(), this._tool = t25.tool, this._view = t25.view;
    const e25 = new j7({ getTheme: () => this._view.effectiveTheme });
    this._settings = e25, null != t25.radius && (this._radius = t25.radius);
    const r26 = this._view.effectiveTheme.accentColor;
    this._materials = { materialUnfocused: f19(C8(r26, 1, 0.25), o12.Occlude), materialFocused: f19(C8(r26, 1, 0), o12.Occlude), materialOccludedUnfocused: f19(C8(r26, 0.7, 0), e25.zManipulator.renderOccluded), materialOccludedFocused: f19(C8(r26, 0.85, 0), e25.zManipulator.renderOccluded) }, this._themeHandle = l3(() => this._view.effectiveTheme.accentColor, (t26) => {
      const e26 = C8(t26, 1, 0.25), i23 = C8(t26, 1, 0), r27 = C8(t26, 0.7, 0), a36 = C8(t26, 0.85, 0), { materialUnfocused: o25, materialFocused: s13, materialOccludedUnfocused: n30, materialOccludedFocused: l26 } = this._materials;
      o25.setParameters({ color: e26 }), s13.setParameters({ color: i23 }), n30.setParameters({ color: r27 }), l26.setParameters({ color: a36 });
    }), this._createManipulator(), this.forEachManipulator((t26) => this._tool.manipulators.add(t26));
  }
  destroy() {
    this._themeHandle = l(this._themeHandle), this._manipulator.applyObjectTransform = L9, this.forEachManipulator((t25) => {
      this._tool.manipulators.remove(t25), t25.destroy();
    });
  }
  forEachManipulator(t25) {
    t25(this._manipulator, A10.TRANSLATE_Z);
  }
  createManipulatedObjectDragPipeline(t25, e25, i23) {
    if (!e25.operations) return e();
    const a36 = e25.operations.data.spatialReference;
    return n22(e25, i23, (e26) => this.createDragPipeline((i24, r26, a37, o25, s13) => ({ steps: r26, cancel: a37 } = t25(i24, r26, a37, o25, s13), e26(i24, r26, a37)), a36));
  }
  createDragPipeline(t25, e25) {
    const i23 = this._view;
    return p11(this._manipulator, (r26, a36, o25, s13, n30) => {
      const l26 = a36.next((t26) => ({ ...t26, manipulatorType: A10.TRANSLATE_Z })).next(G4(i23, r26.renderLocation, e25)).next(j5());
      t25(r26, l26, o25, s13, n30);
    });
  }
  get radius() {
    return this._radius;
  }
  set radius(t25) {
    t25 !== this._radius && (this._radius = t25, this._updateManipulator());
  }
  _updateManipulator() {
    const t25 = this._settings, e25 = this._radius / a26, i23 = t25.zManipulator.height * e25, r26 = t25.zManipulator.coneHeight * e25, a36 = t25.zManipulator.coneWidth * e25, o25 = t25.zManipulator.width * e25, s13 = [r6(0, 0, 0), r6(0, 0, i23)], m16 = [r6(0, 0, 0), r6(0, 0, i23 + r26)], d18 = (() => {
      const t26 = e3();
      return i2(t26, t26, [0, 0, i23]), l5(t26, t26, Math.PI / 2), t26;
    })(), { materialUnfocused: u23, materialFocused: p17, materialOccludedUnfocused: h23, materialOccludedFocused: f21 } = this._materials, j14 = pt(u23, s13, o25 / 2, 16, false), w14 = at(u23, r26, a36 / 2, 16, false);
    w14.transformation = d18, this._manipulator.renderObjects = [new e20(w14, t13.Unfocused), new e20(j14, t13.Unfocused), new e20(w14.instantiate({ material: p17 }), t13.Focused), new e20(j14.instantiate({ material: p17 }), t13.Focused), new e20(w14.instantiate({ material: h23 }), t13.Unfocused), new e20(j14.instantiate({ material: h23 }), t13.Unfocused), new e20(w14.instantiate({ material: f21 }), t13.Focused), new e20(j14.instantiate({ material: f21 }), t13.Focused)], this._manipulator.radius = o25 / 2 + 2, this._manipulator.collisionType = { type: "line", paths: [m16] };
  }
  _createManipulator() {
    const t25 = this._view, e25 = new ee2({ view: t25, autoScaleRenderObjects: false, worldSized: false, selectable: false, cursor: "ns-resize", elevationInfo: this.elevationInfo, worldOriented: true, collisionPriority: 1.6 });
    e25.applyObjectTransform = (e26) => {
      const i23 = t25.state.camera, r26 = D8;
      t25.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation, r26);
      const o25 = W(i23.eye, r26), s13 = i23.computeRenderPixelSizeAtDist(o25), n30 = c4(H6, r26, i23.eye);
      A(n30, n30);
      const l26 = S14;
      t25.renderCoordsHelper.worldUpAtPosition(D8, l26);
      const c26 = Math.abs(P3(n30, l26)), _10 = _3(H6, n30, l26), j14 = _3(H6, _10, l26), w14 = r4(c26, 0.01, 1), v14 = 1 - Math.sqrt(1 - w14 * w14) / w14 / i23.fullWidth, g17 = this._settings, M16 = this._radius / a26, U8 = g17.zManipulator.width * M16;
      g2(j14, A(j14, j14), (1 / v14 - 1) * o25 + s13 * U8), e26[12] -= H6[0], e26[13] -= H6[1], e26[14] -= H6[2];
    }, this._manipulator = e25, this._updateManipulator();
  }
  get test() {
  }
};
function C8(i23, r26, a36) {
  const o25 = I(i23, a36);
  return o25.a *= r26, l6.toUnitRGBA(o25);
}
var D8 = n3();
var H6 = n3();
var S14 = n3();
var L9 = () => {
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveManipulation.js
var u18 = class extends i16 {
  constructor(a36) {
    super(), this._handles = new r2();
    const { tool: t25, view: n30, snapToScene: e25, radius: s13 } = a36;
    this._view = n30, this.xyManipulation = new O9({ tool: t25, view: n30, snapToScene: e25, radius: s13 }), this.xyAxisManipulation = new C7({ tool: t25, view: n30, radius: s13 }), this.zManipulation = new R11({ tool: t25, view: n30, radius: s13 }), this.xyManipulation.available = a36.xyAvailable, this.xyAxisManipulation.available = a36.xyAxisAvailable, this.zManipulation.available = a36.zAvailable, this._autoHideXYAxis(), this.forEachManipulator((i23) => this._handles.add(i23.events.on("grab-changed", () => this._updateManipulatorInteractivity())));
  }
  destroy() {
    this._handles.destroy(), this.xyManipulation.destroy(), this.xyAxisManipulation.destroy(), this.zManipulation.destroy();
  }
  createManipulatedObjectDragPipeline(i23, t25, n30) {
    return t([this.xyManipulation.createManipulatedObjectDragPipeline((a36, t26, n31, e25, s13) => i23(c21.XY, a36, t26, n31, e25, s13), t25, n30), this.xyAxisManipulation.createManipulatedObjectDragPipeline((a36, t26, n31, e25, s13) => i23(c21.XY_AXIS, a36, t26, n31, e25, s13), t25, n30), this.zManipulation.createManipulatedObjectDragPipeline((a36, t26, n31, e25, s13) => i23(c21.Z, a36, t26, n31, e25, s13), t25, n30)]);
  }
  createDragPipeline(i23, t25, n30, e25) {
    return t([this.xyManipulation.createDragPipeline((a36, t26, n31, e26, s13) => i23(c21.XY, a36, t26, n31, e26, s13), t25, n30, e25), this.xyAxisManipulation.createDragPipeline((a36, t26, n31, e26, s13) => i23(c21.XY_AXIS, a36, t26, n31, e26, s13), t25, n30, e25), this.zManipulation.createDragPipeline((a36, t26, n31, e26, s13) => i23(c21.Z, a36, t26, n31, e26, s13), n30)]);
  }
  set snapToScene(i23) {
    this.xyManipulation.snapToScene = i23;
  }
  set angle(i23) {
    this.xyAxisManipulation.angle = i23;
  }
  set radius(i23) {
    this.xyAxisManipulation.radius = i23, this.xyManipulation.radius = i23, this.zManipulation.radius = i23;
  }
  set displayScale(i23) {
    this.xyManipulation.displayScale = i23, this.xyAxisManipulation.displayScale = i23;
  }
  forEachManipulator(i23) {
    this.xyManipulation.forEachManipulator((a36) => i23(a36, A10.TRANSLATE_XY)), this.xyAxisManipulation.forEachManipulator((a36) => i23(a36, A10.TRANSLATE_XY)), this.zManipulation.forEachManipulator((a36) => i23(a36, A10.TRANSLATE_Z));
  }
  get _xyAxisVisible() {
    const i23 = this.xyManipulation.someManipulator((i24) => i24.focused) || this.xyAxisManipulation.someManipulator((i24) => i24.focused);
    return this._view.inputManager && "touch" === this._view.inputManager.latestPointerType || i23;
  }
  _autoHideXYAxis() {
    const i23 = this.xyAxisManipulation, a36 = this.xyManipulation;
    if (has("esri-mobile")) return;
    const n30 = [];
    a36.forEachManipulator((i24) => n30.push(i24)), i23.forEachManipulator((i24) => n30.push(i24));
    const e25 = () => {
      const a37 = [];
      this._xyAxisVisible || i23.forEachManipulator((i24) => a37.push(i24.disableDisplay())), this._handles.remove(h20), this._handles.add(a37, h20);
    };
    for (const t25 of n30) this._handles.add(t25.events.on("focus-changed", e25));
    this._view.inputManager && this._handles.add(f2(() => this._view.inputManager?.latestPointerType, e25)), e25();
  }
  static radiusForSymbol(i23) {
    const a36 = null != i23 && "point-3d" === i23.type && i23.symbolLayers;
    return !!a36 && a36.some((i24) => "icon" === i24.type) ? o22 : a26;
  }
};
var h20 = "disable-xy-axis-display";
var c21;
!function(i23) {
  i23[i23.XY = 0] = "XY", i23[i23.XY_AXIS = 1] = "XY_AXIS", i23[i23.Z = 2] = "Z";
}(c21 || (c21 = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYObjectManipulation.js
var l18 = class extends t20 {
  constructor(t25) {
    super(), this._view = t25.view, this._tool = t25.tool, this._object = t25.object, this._manipulator = this._object.createManipulator?.({ selectable: true, cursor: "move" }), this.forEachManipulator((t26) => this._tool.manipulators.add(t26));
  }
  destroy() {
    this.forEachManipulator((t25) => {
      this._tool.manipulators.remove(t25), t25.destroy();
    }), this._tool = null, this._view = null, this._manipulator = null;
  }
  forEachManipulator(t25) {
    this._manipulator && t25(this._manipulator, A10.TRANSLATE_XY);
  }
  createManipulatedObjectDragPipeline(t25) {
    return n22(this._object, t25, (t26) => this.createDragPipeline(t26));
  }
  createDragPipeline(e25) {
    if (!this._manipulator) return e();
    const o25 = this._view;
    return p11(this._manipulator, (t25, r26, a36, l26, p17) => {
      const h23 = this._object.operations?.data.spatialReference, u23 = r26.next((t26) => h23 ? t26 : null).next(N7(p17, o25, this._object, h23)).next(v5()).next(j5());
      e25(t25, u23, a36, l26, p17);
    });
  }
};

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateXYTooltipInfo.js
var i18 = class extends r15 {
  constructor(o25) {
    super(o25), this.type = "translate-xy", this.distance = h9;
  }
};
r([m()], i18.prototype, "type", void 0), r([m()], i18.prototype, "distance", void 0), i18 = r([a2("esri.views.interactive.tooltip.infos.TranslateXYTooltipInfo")], i18);

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateZTooltipInfo.js
var i19 = class extends r15 {
  constructor(o25) {
    super(o25), this.type = "translate-z", this.distance = h9;
  }
  clear() {
    this.distance = h9;
  }
};
r([m()], i19.prototype, "type", void 0), r([m()], i19.prototype, "distance", void 0), i19 = r([a2("esri.views.interactive.tooltip.infos.TranslateZTooltipInfo")], i19);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/move/MoveTool3D.js
var L10 = class {
  constructor(t25) {
    this.objects = t25, this.type = "move-start";
  }
};
var N8 = class {
  constructor(t25, o25, e25) {
    this.dx = t25, this.dy = o25, this.objects = e25, this.type = "move";
  }
};
var q11 = class {
  constructor(t25) {
    this.objects = t25, this.type = "move-stop";
  }
};
var J3 = Symbol("manipulators");
var K4 = Symbol("tooltips");
var Q3 = class extends n14 {
  constructor(t25) {
    super(t25), this._infos = /* @__PURE__ */ new Map(), this.events = new o3(), this.objects = new V2(), this.enableZ = true, this.sketchOptions = new c12(), this.type = "move-3d", this._latestTooltipInfo = null, this._translateTooltipInfo = null, this._translateXYTooltipInfo = null, this._translateZTooltipInfo = null, this._updatingHandles = new h8(), this._moveManipulation = null;
  }
  initialize() {
    const { view: t25 } = this;
    this.tooltip = R6(() => ({ view: t25, options: this.sketchOptions.tooltips })), this.addHandles([this.objects.on("change", (t26) => {
      t26.removed.forEach((t27) => this.removeHandles(t27)), this._updateObjectInfos(t26), this._setupFastTransformUpdates(t26.added), this._refreshManipulators();
    }), this.objects.on("change", () => this._connectTooltips())]);
    const o25 = this.objects.toArray();
    this._updateObjectInfos({ added: o25, removed: [] }), this._setupFastTransformUpdates(o25), this._refreshManipulators(), this._connectTooltips(), this.finishToolCreation();
  }
  destroy() {
    this.tooltip = u2(this.tooltip), this._moveManipulation = u2(this._moveManipulation), this._set("view", null), this._updatingHandles.destroy();
  }
  onInputEvent(t25) {
    if (!this.destroyed && !H3(t25, this.tooltip)) return super.onInputEvent(t25);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get _shouldShowMovePointTooltip() {
    const { objects: t25 } = this;
    if (1 !== t25.length) return false;
    const o25 = t17(t25.at(0))?.type;
    return "point" === o25 || "mesh" === o25;
  }
  get activeTooltipInfo() {
    return this._shouldShowMovePointTooltip ? this._movePointTooltipInfo : this._latestTooltipInfo;
  }
  reset() {
  }
  _updateObjectInfos({ added: t25, removed: o25 }) {
    for (const e25 of t25) {
      if (r16(e25) !== P5.SUPPORTED) continue;
      const t26 = new $2(e25);
      this._infos.set(e25, t26);
    }
    for (const e25 of o25) this._infos.delete(e25);
  }
  _setupFastTransformUpdates(t25) {
    for (const o25 of t25) {
      const t26 = this._infos.get(o25);
      this.addHandles(a24(t26.object), o25);
    }
  }
  _refreshManipulators() {
    if (this.removeHandles(J3), this._moveManipulation = u2(this._moveManipulation), this.manipulators.removeAll(), 0 === this._infos.size) return;
    const t25 = Array.from(this._infos.values());
    this._createManipulators(t25), this._createVisualElements(t25), this._updateMoveManipulation(t25);
  }
  _createManipulators(t25) {
    for (const o25 of t25) {
      const e25 = o25.object;
      o25.manipulationXY = new l18({ tool: this, view: this.view, object: e25 }), o25.manipulationXY.forEachManipulator((t26) => {
        this.addHandles([t26.events.on("immediate-click", (t27) => {
          this.events.emit("immediate-click", { ...t27, object: e25 }), t27.stopPropagation();
        }), t26.events.on("grab-changed", ({ action: t27 }) => {
          "start" === t27 ? this._showTooltip(c21.XY) : this._hideTooltip();
        })], J3);
      }), this.addHandles(o25.manipulationXY.createDragPipeline((o26, e26, i23, n30) => this._buildDragEventPipeline(t25, c21.XY, o26, e26, i23, n30)), J3);
    }
    this._createMoveManipulation(t25);
  }
  _createMoveManipulation(t25) {
    const o25 = new u18({ tool: this, view: this.view, snapToScene: false, xyAvailable: true, xyAxisAvailable: true, zAvailable: true, radius: 1 === t25.length ? u18.radiusForSymbol(t25[0].object.graphic?.symbol) : a26 });
    this._moveManipulation = o25, o25.elevationInfo = { mode: "absolute-height", offset: 0 }, o25.forEachManipulator((t26) => {
      this.addHandles(t26.events.on("immediate-click", (e26) => {
        const i24 = this.objects.at(0);
        !o25.zManipulation.hasManipulator(t26) && 1 === this.objects.length && i24 && this.events.emit("immediate-click", { ...e26, object: i24 }), e26.stopPropagation();
      }), J3);
    });
    const e25 = (t26) => (o26) => {
      this.addHandles([o26.events.on("focus-changed", ({ action: o27 }) => {
        "focus" === o27 ? this._showTooltip(t26) : this._hideTooltip();
      }), o26.events.on("grab-changed", () => {
        this._latestTooltipInfo && (this._latestTooltipInfo.distance = h9);
      })], J3);
    };
    this._moveManipulation.xyManipulation.forEachManipulator(e25(c21.XY)), this._moveManipulation.xyAxisManipulation.forEachManipulator(e25(c21.XY_AXIS)), this._moveManipulation.zManipulation.forEachManipulator(e25(c21.Z));
    const i23 = () => this._updateMoveManipulation(t25);
    for (const a36 of t25) this.addHandles([a36.object.on("committed", i23), l3(() => a36.object.visible, i23)], J3);
    const n30 = t25[t25.length - 1];
    this.addHandles(n30.object.on("committed", () => this._updateMoveManipulationAngle(n30)), J3);
    const { object: s13 } = n30, { operations: l26 } = s13;
    if (l26) {
      const e26 = s13.graphic;
      this.addHandles(o25.createDragPipeline((o26, e27, i24, n31, s14) => this._buildDragEventPipeline(t25, o26, e27, i24, n31, s14), s13.elevationInfo, l26.data.spatialReference, e26), J3);
    }
    this._updateMoveManipulationAngle(n30);
  }
  _createVisualElements(t25) {
    for (const o25 of t25) {
      const e25 = o25.object, i23 = l16({ view: this.view, object: e25, forEachManipulator: (t26) => {
        o25.manipulationXY?.forEachManipulator(t26), this._moveManipulation?.forEachManipulator(t26);
      }, onManipulatorsChanged: () => e() });
      null != i23 && (o25.geometryRepresentation = i23.visualElement, o25.geometryRepresentation instanceof j8 && this.addHandles([o25.geometryRepresentation.events.on("attachment-origin-changed", () => {
        o25.object.isDraped || this._updateMoveManipulation(t25);
      }), l3(() => o25.object.isDraped, () => this._updateMoveManipulation(t25))], J3), this.addHandles(i23, J3));
    }
  }
  _updateMoveManipulationAngle(t25) {
    this._moveManipulation && (this._moveManipulation.angle = r21(t17(t25.object)));
  }
  _updateMoveManipulation(t25) {
    const o25 = e7(0, 0, 0, this.view.spatialReference);
    let e25 = 0, i23 = false;
    const n30 = this._moveManipulation;
    if (n30) {
      for (const n31 of t25) {
        if (!n31.object.visible) continue;
        this.enableZ && o21(n31.object.operations, n31.object.elevationInfo) && (i23 = true);
        const t26 = n31.geometryRepresentation instanceof j8 && !n31.object.isDraped ? n31.geometryRepresentation.attachmentOrigin : n31.object.origin;
        if (null != t26) {
          const { x: i24, y: n32, z: s13 } = t26;
          o25.x += i24, o25.y += n32, s13 && (o25.z ??= 0, o25.z += s13), e25++;
        }
      }
      e25 > 0 ? (o25.x /= e25, o25.y /= e25, o25.z ??= 0, o25.z /= e25, n30.location = o25, n30.xyManipulation.available = true, n30.xyAxisManipulation.available = true, n30.zManipulation.available = i23) : n30.available = false;
    }
  }
  _buildDragEventPipeline(t25, o25, e25, i23, n30, s13) {
    const a36 = [], l26 = [];
    let r26 = null, p17 = null;
    const c26 = () => {
      for (const t26 of a36) t26.dragging = false;
      a36.length = 0, l26.length = 0, r26 = null, p17 = null, this._moveManipulation && (this._moveManipulation.interactive = true);
    };
    if (1 === t25.length && o25 === c21.XY) {
      const o26 = t25[0].object;
      ({ steps: i23, cancel: n30 } = this._buildSnappingPipelineSteps(o26, o26.elevationInfo, i23, n30, s13));
    }
    return n30 = n30.next((t26) => p17?.(t26)).next(() => (l26.length && this.events.emit("move-stop", new q11(l26)), this.destroyed || c26(), null)), { steps: i23 = i23.next((o26) => {
      if ("start" === o26.action) {
        a36.length = 0, l26.length = 0;
        for (const o27 of t25) o27.dragging || !o27.manipulationXY?.hasManipulator(e25) && o27.manipulationXY?.grabbing || (a36.push(o27), l26.push(o27.object), o27.dragging = true);
        if (0 !== l26.length && (this._moveManipulation && (this._moveManipulation.interactive = false), r26 = S4(l26), p17 = z5(l26), this._emitRecordUndo(), this.events.emit("move-start", new L10(l26)), this.destroyed)) return null;
      }
      return 0 !== l26.length ? o26 : null;
    }).next((t26) => r26?.(t26)).next((t26) => (this._updateMoveTooltip(o25, t26), t26)).next((t26) => {
      switch (t26.action) {
        case "start":
        case "update":
          if (t26.translationX || t26.translationY || t26.translationZ) {
            const o26 = this.view.toScreen(t26.mapStart), e26 = this.view.toScreen(t26.mapEnd);
            if (!o26 || !e26) return null;
            const i24 = e26.x - o26.x, n31 = e26.y - o26.y;
            if (this.events.emit("move", new N8(i24, n31, l26)), this.destroyed) return null;
          }
          break;
        case "end":
          if (this.events.emit("move-stop", new q11(l26)), this.destroyed) return null;
          c26();
      }
      return null;
    }), cancel: n30 };
  }
  _connectTooltips() {
    let t25;
    if (this.removeHandles(K4), this._shouldShowMovePointTooltip) {
      const o25 = this.objects.at(0), { events: e25 } = this;
      this._movePointTooltipInfo ??= new i11({ viewType: this.view.type, sketchOptions: this.sketchOptions });
      const i23 = { onBeforeUpdate: () => this.endDrag(), onMoveStart: () => {
        this._emitRecordUndo(), e25.emit("move-start", new L10([o25]));
      }, onMove: () => e25.emit("move", new N8(0, 0, [o25])), onMoveStop: () => e25.emit("move-stop", new q11([o25])), onRotateStart: () => {
      }, onRotate: () => {
      }, onRotateStop: () => {
      }, onScaleStart: () => {
      }, onScale: () => {
      }, onScaleStop: () => {
      } };
      t25 = m11(this.tooltip, o25, () => ({ sketchOptions: this.sketchOptions, activeTooltipInfo: this._movePointTooltipInfo, callbacks: i23 }));
    } else t25 = l3(() => this.sketchOptions.tooltips.effectiveEnabled ? this._latestTooltipInfo : null, (t26) => {
      this.tooltip.info = t26;
    }, w2);
    this.addHandles(t25, K4);
  }
  _showTooltip(t25) {
    this._shouldShowMovePointTooltip || this._updateMoveTooltip(t25);
  }
  _hideTooltip() {
    this._shouldShowMovePointTooltip || (this.tooltip?.clear(), this._latestTooltipInfo = null);
  }
  _updateMoveTooltip(t25, o25) {
    if (this._shouldShowMovePointTooltip) return;
    const { sketchOptions: e25, autoLengthMeasurementUtils: i23 } = this;
    switch (t25) {
      case c21.XY:
        this._latestTooltipInfo = this._translateTooltipInfo ??= new i12({ sketchOptions: e25 }), tt(this._latestTooltipInfo, o25, (t26, o26) => i23.autoDistanceBetweenPoints2D(W4(t26), W4(o26)));
        break;
      case c21.XY_AXIS:
        this._latestTooltipInfo = this._translateXYTooltipInfo ??= new i18({ sketchOptions: e25 }), tt(this._latestTooltipInfo, o25, (t26, e26) => y6(i23.autoDistanceBetweenPoints2D(W4(t26), W4(e26)), a27(o25)));
        break;
      case c21.Z:
        this._latestTooltipInfo = this._translateZTooltipInfo ??= new i19({ sketchOptions: e25 }), tt(this._latestTooltipInfo, o25, y8);
    }
    this._latestTooltipInfo.sketchOptions = e25;
  }
  _emitRecordUndo() {
    const t25 = this.objects.toArray().map((t26) => t26.createUndoRecord?.()).filter(L);
    t25.length > 0 && this.events.emit("record-undo", { updates: t25 });
  }
  _buildSnappingPipelineSteps(t25, o25, e25, i23, n30) {
    const s13 = t17(t25);
    if (null == s13 || "point" !== s13.type && "mesh" !== s13.type) return { steps: e25, cancel: i23 };
    const a36 = ("point" === s13.type ? s13 : s13.origin).clone(), l26 = new e13({ elevationInfo: o25, pointer: n30, editGeometryOperations: E9.fromGeometry(a36, this.view.state.viewingMode), visualizer: new R10(), excludeFeature: t25.graphic }), r26 = this.snappingManager, { snappingStep: p17, cancelSnapping: c26 } = f14({ snappingContext: l26, snappingManager: r26, updatingHandles: this._updatingHandles });
    return i23 = i23.next(c26), { steps: e25 = e25.next((o26) => {
      a36.z = m2(this.view, a36, t25.elevationInfo, { mode: "absolute-height", offset: 0 });
      return { ...o26, snapOrigin: l26.coordinateHelper.pointToVector(a36) };
    }).next(...p17), cancel: i23 };
  }
};
r([m({ constructOnly: true, nonNullable: true })], Q3.prototype, "view", void 0), r([m({ constructOnly: true })], Q3.prototype, "autoLengthMeasurementUtils", void 0), r([m()], Q3.prototype, "objects", void 0), r([m({ constructOnly: true, nonNullable: true })], Q3.prototype, "enableZ", void 0), r([m({ constructOnly: true, type: c12 })], Q3.prototype, "sketchOptions", void 0), r([m({ constructOnly: true })], Q3.prototype, "snappingManager", void 0), r([m()], Q3.prototype, "type", void 0), r([m()], Q3.prototype, "updating", null), r([m()], Q3.prototype, "_latestTooltipInfo", void 0), r([m()], Q3.prototype, "_shouldShowMovePointTooltip", null), r([m()], Q3.prototype, "activeTooltipInfo", null), Q3 = r([a2("esri.views.3d.interactive.editingTools.move.MoveTool3D")], Q3);
var W4 = w(_);
var $2 = class {
  constructor(t25) {
    this.object = t25, this.geometryRepresentation = null, this.manipulationXY = null, this.dragging = false;
  }
};
function tt(t25, o25, e25) {
  if (null == o25 || "end" === o25.action) return void (t25.distance = h9);
  const { mapStart: i23, mapEnd: n30 } = o25, s13 = e25(i23, n30);
  t25.distance = null != s13 ? s13 : h9;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/edgeOffsetUtils.js
function H7(e25, r26, o25) {
  const t25 = "on-the-ground" === o25.mode ? z4.XY : z4.XYZ;
  return new P4(e25, t25, r26, 0);
}
function w12(e25, r26, o25) {
  const t25 = n3();
  if (!e25.renderCoordsHelper.toRenderCoords(r26, t25)) return null;
  const n30 = T7(e25, r26, O2(o25.plane)), i23 = T7(e25, r26, o25.edgeDirection);
  if (null == n30 || null == i23) return null;
  const c26 = _3(n3(), n30, i23);
  return l7(t25, c26, M2());
}
function T7(e25, r26, o25) {
  const t25 = e7(r26.x + o25[0], r26.y + o25[1], r26.z + o25[2], r26.spatialReference), n30 = n3(), s13 = n3();
  return e25.renderCoordsHelper.toRenderCoords(r26, n30) && e25.renderCoordsHelper.toRenderCoords(t25, s13) ? K(s13, n30, s13) : null;
}
function b18(e25, r26, o25) {
  const t25 = O2(e25), c26 = K(n3(), r26, o25), l26 = _3(n3(), c26, t25), a36 = _3(n3(), c26, l26);
  return n5(c26[0], c26[1], c26[2], 0, l26[0], l26[1], l26[2], 0, a36[0], a36[1], a36[2], 0, 0, 0, 0, 1);
}
function q12(e25, r26, t25) {
  const n30 = t25.projectToRenderScreen(e25, y2()), s13 = t25.projectToRenderScreen(r26, y2());
  return null != n30 && null != s13 ? j(c4(n30, n30, s13)) : 0;
}
function A12(e25, o25, t25, n30) {
  const { elevationInfo: s13, operations: i23 } = t25;
  if (!i23 || !e25) return null;
  const c26 = n30.manipulator.elevationAlignedLocation, l26 = p4(c26, o25, s13), a36 = o25.sceneIntersectionHelper.intersectElevationFromScreen(f4(e25.x, e25.y), s13, l26);
  return a36 && nn(a36, a36, i23.data.spatialReference) ? a36 : null;
}
function E14(r26, o25, n30, { data: { coordinateHelper: s13, spatialReference: i23 } }) {
  const c26 = f12(r26, "meters"), l26 = Z(i23), m16 = Math.sign(c26 * n30.selectedArrow), h23 = N4(i23), R14 = O2(n30.plane), v14 = s13.pointToXYZ(o25), x13 = n3();
  q4(x13, v14, R14, m16 * (I7 / l26));
  const C11 = c26 * n30.selectedArrow / l26;
  if (!h23 || !n9(v14, i23, v14, h23) || !n9(x13, i23, x13, h23)) return C11;
  const U8 = new b9();
  if (q6(U8, v14, x13, h23), j3(x13, v14, U8.azimuth, c26, h23), !n9(x13, h23, x13, i23)) return C11;
  const H10 = x13[0] - o25.x, w14 = x13[1] - o25.y, T9 = Math.sqrt(H10 * H10 + w14 * w14) * m16, [b22, q14] = R14, A15 = Math.sqrt(b22 * b22 + q14 * q14);
  return 0 === A15 ? 0 : T9 / A15;
}
var I7 = 10;

// node_modules/@arcgis/core/views/interactive/tooltip/infos/ReshapeEdgeOffsetTooltipInfo.js
var a28 = class extends r15 {
  constructor(t25) {
    super(t25), this.type = "reshape-edge-offset", this.distance = x5({ lockable: false }), this.area = Q({ visible: false }), this.totalLength = w6({ visible: false });
  }
  get allFields() {
    return [this.distance, this.area, this.totalLength];
  }
};
r([m()], a28.prototype, "type", void 0), r([m()], a28.prototype, "distance", void 0), r([m()], a28.prototype, "area", void 0), r([m()], a28.prototype, "totalLength", void 0), r([m()], a28.prototype, "allFields", null), a28 = r([a2("esri.views.interactive.tooltip.infos.ReshapeEdgeOffsetTooltipInfo")], a28);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/reshapeTooltipUtils3D.js
function O11(t25, e25) {
  const o25 = e25?.type;
  return { edgeOffset: new a28({ sketchOptions: t25, viewType: o25 }), movePoint: new i11({ sketchOptions: t25, viewType: o25 }), selectedVertex: new p13({ sketchOptions: t25, viewType: o25 }), translate: new i12({ sketchOptions: t25, viewType: o25 }), translateXY: new i18({ sketchOptions: t25, viewType: o25 }), translateZ: new i19({ sketchOptions: t25, viewType: o25 }) };
}
function b19(e25, o25, s13) {
  function r26() {
    const t25 = s13(), e26 = t25.sketchOptions.tooltips.effectiveEnabled ? t25.activeTooltipInfo : null;
    return { ...t25, activeTooltipInfo: e26 };
  }
  let c26 = false;
  function p17(t25) {
    c26 || (c26 = true, t25(), c26 = false);
  }
  function m16(t25) {
    p17(() => {
      M13(o25, t25), e25.info = t25.activeTooltipInfo;
    });
  }
  return t([l3(r26, m16, w2), l3(() => {
    const t25 = r26(), { activeTooltipInfo: e26 } = t25;
    if (e26 && "key" in e26) return { context: t25, activeTooltipInfo: e26, key: e26.key, geometry: t17(o25) };
  }, (t25, e26) => {
    t25 && e26 && e26.key !== t25.key && p17(() => D9(o25, t25.context));
  }, U), o25.on("committed", () => m16(r26())), C2(e25, { onBeforePaste: () => {
    c26 = true;
  }, onAfterPaste: () => {
    D9(o25, r26()), c26 = false;
  } })]);
}
function D9(t25, { activeTooltipInfo: e25, selectedVertexManipulatorInfo: o25, callbacks: n30 }) {
  if (!e25) return;
  n30.onBeforeReshape();
  const i23 = t17(t25);
  switch (i23?.type) {
    case "mesh":
      "move-point" === e25.type && d13(e25, i23.origin, t25, n30);
      break;
    case "point":
      "move-point" === e25.type && d13(e25, i23, t25, n30);
      break;
    case "polyline":
    case "polygon":
      "selected-vertex" === e25.type && L11(e25, o25, t25, n30);
  }
}
function L11(t25, e25, o25, n30) {
  if (!e25) return;
  const { dx: i23, dy: a36, dz: s13 } = F4(t25, e25.manipulator.location);
  0 === i23 && 0 === a36 && 0 === s13 || (n30.onReshapeStart(), o25.operations?.moveVertices([e25.handle], i23, a36, s13, E8.NEW_STEP), n30.onReshape(), n30.onReshapeStop());
}
function M13(t25, e25) {
  const { activeTooltipInfo: o25, selectedVertexManipulatorInfo: n30, sketchOptions: i23 } = e25;
  if (o25) switch (o25.sketchOptions = i23, o25?.type) {
    case "move-point":
      h16(o25, t25);
      break;
    case "selected-vertex":
      U5(o25, n30, t25, e25);
  }
}
function U5(t25, e25, o25, { automaticAreaMeasurementUtils: n30, automaticLengthMeasurementUtils: i23 }) {
  if (!t25 || "selected-vertex" !== t25.type) return;
  const a36 = e25?.manipulator.location;
  t25.setLocationFromPoint(a36), y11(t25, a36, o25);
  const s13 = o25.operations?.data.geometry;
  switch (s13?.type) {
    case "polygon":
      t25.geometryType = "polygon", t25.totalLength.visible = false, t25.area.actual = n30.autoArea2D(s13);
      break;
    case "polyline":
      t25.geometryType = "polyline", t25.totalLength.actual = i23.autoLength2D(s13), t25.area.visible = false;
  }
}
var x10 = w(_);
function P15(t25, o25, { sketchOptions: n30, tooltipInfos: i23, automaticLengthMeasurementUtils: a36 }) {
  let s13 = null;
  switch (t25) {
    case c21.XY:
      s13 = i23.translate, A13(s13, o25, (t26, e25) => a36.autoDistanceBetweenPoints2D(x10(t26), x10(e25)));
      break;
    case c21.XY_AXIS:
      s13 = i23.translateXY, A13(s13, o25, (t26, n31) => y6(a36.autoDistanceBetweenPoints2D(x10(t26), x10(n31)), a27(o25)));
      break;
    case c21.Z:
      s13 = i23.translateZ, A13(s13, o25, y8);
  }
  return s13.sketchOptions = n30, s13;
}
function A13(t25, e25, n30) {
  if (null != e25 && "end" !== e25.action) {
    const { mapStart: i23, mapEnd: a36 } = e25, s13 = n30(i23, a36);
    t25.distance = null != s13 ? s13 : h9;
  } else t25.distance = h9;
}
function S15({ operations: t25 }, n30, { sketchOptions: i23, tooltipInfos: a36, automaticAreaMeasurementUtils: s13, automaticLengthMeasurementUtils: r26 }) {
  const l26 = a36.edgeOffset;
  if (l26.distance.committed = null, null != n30 && null != n30.signedDistance && "end" !== n30.action && null != t25) {
    const o25 = t25.data.coordinateHelper, { start: i24, end: a37 } = n30.operation.clampedStartAndEnd(n30.mapEnd), s14 = r26.autoDistance2D(i24, a37, o25.spatialReference), c27 = Math.sign(n30.signedDistance * n30.operation.selectedArrow);
    l26.distance.actual = null != s14 ? y6(s14, c27) : null;
  } else l26.distance.actual = h9;
  const c26 = t25?.data.geometry;
  switch (l26.area.actual = null, l26.area.visible = false, l26.totalLength.actual = null, l26.totalLength.visible = false, c26?.type) {
    case "polygon":
      l26.area.actual = s13.autoArea2D(c26), l26.area.visible = true;
      break;
    case "polyline":
      l26.totalLength.actual = r26.autoLength2D(c26), l26.totalLength.visible = true;
  }
  return l26.sketchOptions = i23, l26;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeOperation.js
var Ie = Symbol();
var Se = class extends b {
  get _operations() {
    return this.object.operations;
  }
  constructor(e25) {
    super(e25), this._selectedIndex = 0, this._manipulatorHandles = new r2(), this._manipulatorInfos = [], this._numGrabbing = 0, this._numDragging = 0, this._reshapeEventState = Ue.NONE, this._pendingEdgeOffsetInfo = null, this._updatingHandles = new h8(), this._recreatingManipulators = false, this._settings = new j7({ getTheme: () => this.view.effectiveTheme }), this.events = new o3(), this.activeTooltipInfo = null, this._vertexLaserLineVisualElement = null, this._tooltipCallbacks = { onBeforeReshape: () => this.tool.endDrag(), onReshapeStart: () => this._updateEventState(Ue.RESHAPING), onReshape: () => this.events.emit("reshape", { type: "reshape", object: this.object }), onReshapeStop: () => this._updateEventState(Ue.NONE, { forceEnd: true }), onMoveStart: () => this._updateEventState(Ue.MOVING), onMove: () => this.events.emit("move", { type: "move", object: this.object, dx: 0, dy: 0 }), onMoveStop: () => this._updateEventState(Ue.NONE, { forceEnd: true }) };
  }
  initialize() {
    const { view: e25 } = this, t25 = this._settings.manipulators, i23 = t25.vertex;
    this.tooltipInfos = O11(this._sketchOptions, e25), this._vertexManipulatorMaterial = f19(F2(i23.color), i23.renderOccluded), this._vertexManipulatorOutlineMaterial = h19(F2(i23.outlineColor), i23.renderOccluded), this._vertexManipulatorHoverOutlineMaterial = h19(F2(i23.hoverOutlineColor), i23.renderOccluded);
    const a36 = t25.edge;
    this._edgeManipulatorMaterial = f19(F2(a36.color), a36.renderOccluded), this._edgeManipulatorOutlineMaterial = h19(F2(a36.outlineColor), a36.renderOccluded);
    const o25 = t25.edgeOffset;
    this._edgeOffsetManipulatorMaterial = f19(F2(o25.color), o25.renderOccluded, false), this._edgeOffsetManipulatorHoverMaterial = f19(F2(o25.hoverColor), o25.renderOccluded, false);
    const s13 = t25.selected;
    this._selectedManipulatorMaterial = f19(F2(s13.color), s13.renderOccluded), this._selectedManipulatorOutlineMaterial = h19(F2(s13.outlineColor), s13.renderOccluded), this._selectedManipulatorHoverOutlineMaterial = h19(F2(s13.hoverOutlineColor), s13.renderOccluded), this.tooltip = R6(() => ({ view: e25, options: this._sketchOptions.tooltips })), this.addHandles([l3(() => {
      const e26 = this._settings.manipulators;
      return { vertexSettings: e26.vertex, edgeSettings: e26.edge, edgeOffsetSettings: e26.edgeOffset, selectedSettings: e26.selected };
    }, ({ vertexSettings: e26, edgeSettings: t26, edgeOffsetSettings: i24, selectedSettings: n30 }) => {
      e26.applyColor(this._vertexManipulatorMaterial), e26.applyOutline(this._vertexManipulatorOutlineMaterial), e26.applyHoverOutline(this._vertexManipulatorHoverOutlineMaterial), t26.applyColor(this._edgeManipulatorMaterial), t26.applyOutline(this._edgeManipulatorOutlineMaterial), i24.applyColor(this._edgeOffsetManipulatorMaterial), i24.applyHover(this._edgeOffsetManipulatorHoverMaterial), n30.applyColor(this._selectedManipulatorMaterial), n30.applyOutline(this._selectedManipulatorOutlineMaterial), n30.applyHoverOutline(this._selectedManipulatorHoverOutlineMaterial);
    }), l3(() => this.object.visible, (e26) => {
      for (const t26 of this._manipulatorInfos) t26.manipulator.available = e26, Te(t26) && (t26.edgeManipulator.available = e26);
    }), l3(() => this._numGrabbing + this._numDragging === 0, (e26) => this._toggleAutoHideManipulators(e26)), l3(() => ({ labels: this._segmentLabels, enabled: this._sketchOptions.labels.enabled, edgeOffsetEnabled: this.enableEdgeOffset }), ({ labels: e26, enabled: t26, edgeOffsetEnabled: i24 }) => {
      null != e26 && (e26.visible = t26, e26.edgeDistance = i24 ? "far" : "default");
    }, h), b19(this.tooltip, this.object, () => this._tooltipsContext), l3(() => this.tooltip.mode, (e26, t26) => {
      "input" === t26 && "input" !== e26 && this._resetTooltip();
    }), a5(() => this._operations, "vertex-update", (e26) => this._updateManipulatorPositions(e26.vertices), { onListenerAdd: () => this._recreateManipulators() }), a5(() => this._operations?.data, "change", (e26) => {
      "undo" !== e26.operation && "redo" !== e26.operation || this._recreateManipulators();
    })]);
  }
  destroy() {
    this._removeManipulators(), this._updatingHandles.destroy(), this._segmentLabels = u2(this._segmentLabels), this.tooltip = u2(this.tooltip);
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get manipulators() {
    return this.tool.manipulators;
  }
  get view() {
    return this.tool.view;
  }
  get automaticAreaMeasurementUtils() {
    return this.tool.automaticAreaMeasurementUtils;
  }
  get automaticLengthMeasurementUtils() {
    return this.tool.automaticLengthMeasurementUtils;
  }
  get object() {
    return this.tool.object;
  }
  get enableZShape() {
    return this.tool.enableZShape;
  }
  get enableDeleteVertices() {
    return this.tool.enableDeleteVertices;
  }
  get enableZVertex() {
    return this.tool.enableZVertex;
  }
  get autoHideManipulators() {
    return this.tool.autoHideManipulators;
  }
  get enableMoveObject() {
    return this.tool.enableMoveObject;
  }
  get enableMidpoints() {
    return this.tool.enableMidpoints;
  }
  get enableEdgeOffset() {
    return this.tool.enableEdgeOffset;
  }
  get _sketchOptions() {
    return this.tool.sketchOptions;
  }
  get _accentColor() {
    return this.view.effectiveTheme.accentColor;
  }
  enterInputModeIfAvailable(e25) {
    return "key-down" === e25.type && e25.key === d7.enterInputMode && ("reshape-edge-offset" === this.activeTooltipInfo?.type ? this._enterInputModeDuringEdgeOffset(e25) : !!H3(e25, this.tooltip) && (this.tool.endDrag(), true));
  }
  removeSelectedVertices() {
    const e25 = this._manipulatorInfos.filter((e26) => e26.manipulator.selected && "vertex" === e26.type);
    return this._removeVertices(e25), e25.length;
  }
  onManipulatorSelectionChanged() {
    this.events.emit("manipulators-changed");
  }
  _removeManipulators() {
    this._manipulatorHandles.removeAll(), this._moveManipulation = u2(this._moveManipulation), this._objectMoveManipulation = u2(this._objectMoveManipulation), this.manipulators.removeAll(), this._manipulatorInfos = [], this._numGrabbing = 0, this._numDragging = 0;
  }
  _createManipulators(e25) {
    if (null == this._operations) return;
    const t25 = this.object.elevationInfo;
    for (const i23 of this._operations.data.components) {
      const n30 = e25?.byComponentIndex.get(i23.index);
      for (const e26 of i23.vertices) {
        const i24 = n30?.has(e26.index);
        this._createVertexOrEdgeManipulator(e26, t25, i24);
      }
      for (const e26 of i23.edges) this._createVertexOrEdgeManipulator(e26, t25);
    }
    this._createObjectMoveManipulation(), this._createMoveManipulation(t25), this._createVisualElements();
  }
  get canRedo() {
    return null != this._operations && this._operations.canRedo;
  }
  get canUndo() {
    return null != this._operations && this._operations.canUndo;
  }
  redo() {
    return this._operations?.redo();
  }
  undo() {
    return this.events.emit("undo"), this._operations?.undo();
  }
  _recreateManipulators() {
    if (!this._recreatingManipulators) {
      if (this._recreatingManipulators = true, this._removeManipulators(), this._resetTooltip(), this._operations && this._segmentLabels?.context?.editGeometryOperations === this._operations || (this._segmentLabels = u2(this._segmentLabels)), this._createManipulators(), !this._segmentLabels && this._operations) {
        const e25 = this._sketchOptions.labels;
        this._segmentLabels = new a20({ context: { view: this.view, editGeometryOperations: this._operations, elevationInfo: this.object.elevationInfo, labelOptions: e25, automaticLengthMeasurementUtils: this.automaticLengthMeasurementUtils }, visible: e25.enabled });
      }
      this._recreatingManipulators = false;
    }
  }
  _perObjectManipulatorDragAction(e25, t25) {
    if ("end" === t25.action) return t25;
    let i23 = 0;
    const n30 = [], a36 = this._manipulatorInfos.some((e26) => "vertex" === e26.type && e26.manipulator.selected), o25 = e25 === Ce.SELECTED_OR_ALL && a36;
    for (const s13 of this._manipulatorInfos) "vertex" === s13.type && (s13.manipulator.grabbing || o25 && !s13.manipulator.selected || n30.push(s13), i23++);
    this._moveVertices(n30, t25);
    if (n30.length === i23) {
      if (this._updateEventState(Ue.MOVING), this.destroyed) return t25;
      this.events.emit("move", { type: "move", dx: t25.screenDeltaX, dy: t25.screenDeltaY, object: this.object });
    } else {
      if (this._updateEventState(Ue.RESHAPING), this.destroyed) return t25;
      this.events.emit("reshape", { type: "reshape", object: this.object });
    }
    return t25;
  }
  _toggleAutoHideManipulators(e25) {
    this.autoHideManipulators && (e25 ? this.removeHandles(Ie) : this.tool.manipulators.forEach(({ manipulator: e26 }) => {
      const t25 = e26.disableDisplay?.();
      t25 && this.addHandles(t25, Ie);
    }));
  }
  _isMultiVertexSelection() {
    return this._manipulatorInfos.reduce((e25, t25) => "vertex" === t25.type && t25.manipulator.selected ? e25 + 1 : e25, 0) > 1;
  }
  _perVertexManipulatorDragAction(e25) {
    if (this._updateEventState(Ue.RESHAPING), this.destroyed) return;
    const { mapDeltaX: t25, mapDeltaY: i23, mapDeltaZ: n30 } = e25;
    if (!t25 && !i23 && !n30) return;
    const a36 = [];
    for (const o25 of this._manipulatorInfos) "vertex" === o25.type && (o25.manipulator.selected && !o25.manipulator.grabbing || o25 === e25.info) && a36.push(o25);
    this._moveVertices(a36, e25, E8.ACCUMULATE_STEPS), this.events.emit("reshape", { type: "reshape", object: this.object });
  }
  _updateEventState(e25, t25 = {}) {
    if (e25 === this._reshapeEventState) return false;
    switch (e25) {
      case Ue.NONE:
        if (!t25.forceEnd && (0 !== this._numGrabbing || 0 !== this._numDragging)) return false;
        switch (this._reshapeEventState) {
          case Ue.MOVING:
            this.events.emit("move", { type: "move-stop", dx: 0, dy: 0, object: this.object });
            break;
          case Ue.RESHAPING:
            this.events.emit("reshape", { type: "reshape-stop", object: this.object });
        }
        break;
      case Ue.MOVING:
        switch (this._reshapeEventState) {
          case Ue.NONE:
            this.events.emit("move", { type: "move-start", dx: 0, dy: 0, object: this.object });
            break;
          case Ue.RESHAPING:
            this.events.emit("reshape", { type: "reshape-stop", object: this.object }), this.destroyed || this.events.emit("move", { type: "move-start", dx: 0, dy: 0, object: this.object });
        }
        break;
      case Ue.RESHAPING:
        switch (this._reshapeEventState) {
          case Ue.NONE:
            this.events.emit("reshape", { type: "reshape-start", object: this.object });
            break;
          case Ue.MOVING:
            this.events.emit("move", { type: "move-stop", dx: 0, dy: 0, object: this.object }), this.destroyed || this.events.emit("reshape", { type: "reshape-start", object: this.object });
        }
    }
    if (this.destroyed) return false;
    const i23 = this._reshapeEventState !== e25;
    return this._reshapeEventState = e25, i23;
  }
  _createObjectMoveManipulation() {
    const { tool: e25, view: t25, object: i23, _operations: n30 } = this;
    if (n30) {
      if (this._objectMoveManipulation = new l18({ tool: e25, view: t25, object: i23 }), this.enableMoveObject) {
        let e26 = null;
        this._manipulatorHandles.add(this._objectMoveManipulation.createDragPipeline((t26, i24, a36) => {
          i24.next((e27) => this._trackNumDragging(e27)).next((t27) => ("start" === t27.action && (e26 = n30.createUndoGroup()), t27)).next((e27) => this._perObjectManipulatorDragAction(Ce.ALL, e27)).next((e27) => (this._updateTranslateObjectTooltip(c21.XY, e27), e27)).next((t27) => {
            "end" === t27.action && (this._resetTooltip(), e26 = l(e26));
          }), a36.next(() => this._onDragCancel(true, () => e26 = l(e26)));
        })), this._objectMoveManipulation.forEachManipulator((e27) => this._manipulatorHandles.add(this._watchAndUpdateGrabState(e27, false)));
      } else this._objectMoveManipulation.forEachManipulator((e26) => {
        e26.grabbable = false, e26.cursor = null;
      });
      this._objectMoveManipulation.forEachManipulator((e26) => this._manipulatorHandles.add(e26.events.on("immediate-click", (e27) => {
        this._manipulatorInfos.some((e28) => e28.manipulator.selected) ? this._clearSelection() : this.events.emit("immediate-click", { ...e27, object: this.object }), e27.stopPropagation();
      })));
    }
  }
  _createMoveManipulation(e25) {
    const { object: t25, tool: i23, view: n30, _operations: a36 } = this;
    if (!a36) return;
    this._moveManipulation = new u18({ tool: i23, view: n30, xyAvailable: true, xyAxisAvailable: true, zAvailable: this.enableZShape && o21(t25.operations, t25.elevationInfo), snapToScene: false, radius: u18.radiusForSymbol(t25.graphic?.symbol) }), this._moveManipulation.forEachManipulator((e26) => this.addHandles([e26.events.on("immediate-click", (t26) => {
      this._moveManipulation.zManipulation.hasManipulator(e26) || this._manipulatorInfos.some((e27) => e27.manipulator.selected) || this.events.emit("immediate-click", { ...t26, object: this.object }), t26.stopPropagation();
    }), this._watchAndUpdateGrabState(e26, false)]));
    const o25 = (e26) => (t26) => {
      this.addHandles([t26.events.on("focus-changed", ({ action: t27 }) => {
        "focus" === t27 ? this._updateTranslateTooltip(e26) : this._resetTooltip();
      })]);
    };
    this._moveManipulation.xyManipulation.forEachManipulator(o25(c21.XY)), this._moveManipulation.xyAxisManipulation.forEachManipulator(o25(c21.XY_AXIS)), this._moveManipulation.zManipulation.forEachManipulator(o25(c21.Z)), this._moveManipulation.elevationInfo = { mode: "absolute-height", offset: 0 };
    const s13 = a36.data.spatialReference;
    this.addHandles([this._moveManipulation.createDragPipeline((n31, o26, s14, r26, l26) => {
      const { snappingStep: p17, cancelSnapping: d18 } = f14({ predicate: (e26) => !!e26.info, snappingManager: i23.snappingManager, snappingContext: new e13({ editGeometryOperations: a36, elevationInfo: e25, pointer: l26, excludeFeature: t25.graphic, visualizer: new R10() }), updatingHandles: this._updatingHandles, useZ: false });
      return r26 = r26.next((e26) => (this._onDragCancel(), e26)).next(d18), { steps: s14 = s14.next((e26) => this._trackNumDragging(e26)).next((e26) => {
        const t26 = this._manipulatorInfos.filter((e27) => "vertex" === e27.type && e27.manipulator.selected);
        return e26.manipulatorType === A10.TRANSLATE_XY && 1 === t26.length ? { ...e26, info: t26[0], snapOrigin: t26[0].handle.pos } : e26;
      }).next(D2(this.view, e25, t25.graphic ?? void 0)).next(...p17).next(v5()).next((e26) => this._perObjectManipulatorDragAction(Ce.SELECTED_OR_ALL, e26)).next((e26) => (this._updateTranslateTooltip(n31, e26), e26)), cancel: r26 };
    }, e25, s13, t25.graphic), l3(() => t25.visible, () => this._updateMoveManipulationPosition(), h), t25.on("committed", () => {
      this._recreatingManipulators || this._updateMoveManipulationPosition();
    }), l3(() => t25.isDraped, (e26) => {
      this._updateMoveManipulationPosition();
      const t26 = "align-move-manipulation";
      e26 ? this.addHandles(this.view.elevationProvider.on("elevation-change", () => this._updateMoveManipulationPosition()), t26) : this.removeHandles(t26);
    }, h)]);
  }
  _createVisualElements() {
    const { object: e25, view: t25 } = this, i23 = l16({ view: t25, object: e25, forEachManipulator: (e26) => {
      if (!this.destroyed && !this._recreatingManipulators) {
        this._objectMoveManipulation.forEachManipulator(e26), this._moveManipulation.forEachManipulator(e26);
        for (const t26 of this._manipulatorInfos) e26(t26.manipulator, A10.TRANSLATE_XY);
      }
    }, onManipulatorsChanged: (e26) => this.events.on("manipulators-changed", e26) });
    null != i23 && (this._outlineVisualElement = i23.visualElement instanceof j8 ? i23.visualElement : null);
    const n30 = this._outlineVisualElement;
    if (null != n30) {
      const t26 = () => {
        e25.isDraped || this._updateMoveManipulationPosition();
      };
      this._manipulatorHandles.add(a5(() => n30.events, "attachment-origin-changed", t26, { onListenerAdd: t26 }));
    }
    this._manipulatorHandles.add(i23);
  }
  _createEdgeOffsetManipulator(e25, t25 = this.object.elevationInfo) {
    const i23 = this.view, n30 = this._operations;
    if (e25.component.vertices.length <= 2 || !n30) return null;
    const a36 = n30.data.spatialReference, o25 = this._settings.manipulators.edgeOffset, r26 = o25.size / 2, l26 = r26 + o25.collisionPadding, p17 = r26 / l26, d18 = p17 / 2, u23 = p17 * Math.sqrt(3) / 2, { height: h23, offset: c26 } = o25, m16 = this._edgeOffsetManipulatorMaterial;
    if (!this._edgeOffsetManipulatorGeometryInside) {
      const e26 = gt(m16, u23, d18, d18, h23, c26);
      this._edgeOffsetManipulatorGeometryInside = e26;
    }
    if (!this._edgeOffsetManipulatorGeometryOutside) {
      const e26 = gt(m16, -u23, d18, d18, h23, -c26);
      this._edgeOffsetManipulatorGeometryOutside = e26;
    }
    const g17 = [new e20(this._edgeOffsetManipulatorGeometryInside.instantiate(), t13.Unfocused), new e20(this._edgeOffsetManipulatorGeometryInside.instantiate({ material: this._edgeOffsetManipulatorHoverMaterial }), t13.Focused), new e20(this._edgeOffsetManipulatorGeometryOutside.instantiate(), t13.Unfocused), new e20(this._edgeOffsetManipulatorGeometryOutside.instantiate({ material: this._edgeOffsetManipulatorHoverMaterial }), t13.Focused)], f21 = new ee2({ view: i23, renderObjects: g17, elevationInfo: "on-the-ground" !== t25.mode || h7(this.object.graphic?.symbol) ? { mode: "absolute-height", offset: 0 } : t25, worldOriented: false, focusMultiplier: 1, radius: l26, available: this.object.visible, collisionType: { type: "disc", direction: r6(0, 0, 1) }, collisionPriority: 1, metadata: { deleting: false }, location: Ae(a36) }), _10 = new ee2({ view: i23, worldSized: true, worldOriented: false, available: this.object.visible, collisionPriority: -10, cursor: this.enableMoveObject ? "move" : "default", metadata: { deleting: false }, location: Ae(a36) }), v14 = { manipulator: f21, handle: e25, locationUpdateHandle: null, type: "edge", selectedIndex: 0, edgeManipulator: _10, visibilityHandle: null };
    this._autoHideEdgeOffsetManipulator(v14, o25.minSquaredEdgeLength);
    const M16 = () => this._updateEdgeOffsetManipulator(v14);
    M16(), v14.locationUpdateHandle = t([e25.leftVertex, e25.rightVertex].map((e26) => {
      const t26 = this._getManipulatorInfoFromHandle(e26);
      return t26?.manipulator.events.on("location-update", M16);
    }));
    const b22 = (e26) => {
      this._manipulatorInfos.some((e27) => e27.manipulator.selected) ? this._clearSelection() : this.events.emit("immediate-click", { ...e26, object: this.object }), e26.stopPropagation();
    };
    return this._manipulatorHandles.add([v14.locationUpdateHandle, this._watchAndUpdateGrabState(f21, true), this._watchAndUpdateGrabState(_10, true), p11(f21, this._createEdgeOffsetPipeline(v14, t25, n30)), p11(_10, this._createEdgePipeline(v14, t25, n30)), _10.events.on("immediate-click", b22), f21.events.on("immediate-click", b22), f21.events.on("focus-changed", () => this._resetTooltip()), f21.events.on("grab-changed", ({ screenPoint: e26, action: t26 }) => {
      v14.grabMapPoint = "start" === t26 ? A12(e26, this.view, this.object, v14) : null;
    })], f21), this._manipulatorInfos.push(v14), this.manipulators.addMany([f21, _10]), this.events.emit("manipulators-changed"), v14;
  }
  _autoHideEdgeOffsetManipulator(e25, t25) {
    const i23 = e25.manipulator, n30 = e25.edgeManipulator, a36 = () => {
      e25.visibilityHandle = l(e25.visibilityHandle);
      const a37 = this._getManipulatorInfoFromHandle(e25.handle.leftVertex), o25 = this._getManipulatorInfoFromHandle(e25.handle.rightVertex), l26 = null != a37 && null != o25 && q12(a37.manipulator.renderLocation, o25.manipulator.renderLocation, this.view.state.camera) < t25;
      (!i23.focused && !n30.focused || l26) && (i23.grabbable = !l26, n30.grabbable = !l26, e25.visibilityHandle = t([i23.disableDisplay(), e(() => {
        i23.grabbable = true, n30.grabbable = this.enableMoveObject;
      })]));
    };
    this._manipulatorHandles.add([i23.events.on("focus-changed", a36), n30.events.on("focus-changed", a36), e(() => {
      l(e25.visibilityHandle), n30.metadata.deleting = true, this.manipulators.remove(n30);
    })], i23), a36();
  }
  _updateEdgeOffsetManipulator(e25) {
    if (!this._operations) return;
    this._updateManipulatorPosition(e25);
    const { coordinateHelper: t25 } = this._operations.data, i23 = w12(this.view, e25.manipulator.elevationAlignedLocation, H7(t25, e25.handle, e25.manipulator.elevationInfo)), n30 = this._getManipulatorInfoFromHandle(e25.handle.leftVertex), a36 = this._getManipulatorInfoFromHandle(e25.handle.rightVertex);
    if (null == n30 || null == a36) return;
    const o25 = n30.manipulator.renderLocation, s13 = a36.manipulator.renderLocation, r26 = null != i23 ? b18(i23, o25, s13) : r10;
    e25.manipulator.modelTransform = r26, e25.edgeManipulator.elevationAlignedLocation = e25.manipulator.elevationAlignedLocation, e25.edgeManipulator.modelTransform = r26;
    const l26 = r9(c4(De, o25, s13)) / 2;
    e25.edgeManipulator.collisionType = { type: "line", paths: [[[-l26, 0, 0], [l26, 0, 0]]] };
  }
  _createEdgePipeline(e25, t25, i23) {
    return (n30, a36, o25, s13) => {
      if ("touch" === s13) {
        this._createEdgeOffsetPipeline(e25, t25, i23)(n30, a36, o25);
      } else if (this.enableMoveObject) {
        const e26 = this.object.graphic, s14 = i23.data.spatialReference, { elevationAlignedLocation: r26 } = n30;
        a36.next((e27) => this._trackNumDragging(e27)).next(M4(this.view, r26)).next(M12(this.view, r26, t25, s14, e26)).next(j5()).next(v5()).next((e27) => this._perObjectManipulatorDragAction(Ce.ALL, e27)).next((e27) => (this._updateTranslateObjectTooltip(c21.XY, e27), e27)).next((e27) => {
          "end" === e27.action && this._resetTooltip();
        }), o25.next(() => this._onDragCancel(!n30.metadata.deleting));
      }
    };
  }
  _createEdgeOffsetPipeline(e25, t25, i23) {
    return (n30, a36, o25) => {
      const s13 = this._pendingEdgeOffsetInfo;
      if (s13?.manipulatorInfo === e25 && "drag" !== s13.mode) return void o25.execute({ action: "cancel" });
      this._clearSelection();
      const { initializeStep: r26, cleanup: l26 } = this._initializeEdgeOffset(e25, t25, i23, o25), p17 = this._applyEdgeOffsetStep(e25);
      a36.next((e26) => this._trackNumDragging(e26)).next(M4(this.view, n30.elevationAlignedLocation)).next(r26).next(C6(this.view)).next(F9(this.view, i23.data.spatialReference)).next(v5()).next(He()).next((e26) => this._pendingEdgeOffsetInfo ? e26 : p17(e26)).next((e26) => {
        "end" !== e26.action || this._pendingEdgeOffsetInfo || l26();
      }), o25.next(() => {
        this._exitEdgeOffsetInputMode(), n30.metadata.deleting || (l26(), this._onDragCancel());
      });
    };
  }
  _initializeEdgeOffset(e25, t25, i23, n30) {
    const { view: a36, object: o25 } = this, r26 = H7(i23.data.coordinateHelper, e25.handle, t25), l26 = i23.createUndoGroup(), p17 = w12(a36, e25.manipulator.elevationAlignedLocation, r26);
    let u23;
    this._splitEdgesBeforeEdgeOffset(e25, r26), this._selectEdgeOffsetArrow(e25, r26);
    const h23 = () => {
      this._cleanEdgeOffsetCollapsedEdges(e25, i23), u23 = l(u23);
    }, c26 = this.events.on("undo", h23);
    return u23 = t([this._initializeEdgeOffsetVisualElement(e25, o25, t25, i23), l26, c26, this._connectEdgeOffsetTooltip(e25, r26, i23, () => {
      n30.execute({ action: "cancel" });
    })]), { initializeStep: (e26) => null == r26 || null == p17 ? (h23(), null) : { ...e26, operation: r26, plane: p17 }, cleanup: h23 };
  }
  _initializeEdgeOffsetVisualElement(e25, t25, i23, a36) {
    const o25 = () => new y({ paths: [[e25.handle.leftVertex.pos, e25.handle.rightVertex.pos]], spatialReference: a36.data.spatialReference }), r26 = new j8({ view: this.view, isDraped: t25.isDraped, geometry: o25(), elevationInfo: i23, width: this._settings.visualElements.lineObjects.outline.width, attached: false, isDecoration: true }), p17 = t([l3(() => ({ color: this._accentColor, draped: t25.isDraped }), ({ color: e26, draped: t26 }) => {
      r26.color = F2(e26), r26.isDraped = t26;
    }, w2), t25.on("committed", () => {
      r26.geometry = o25();
    }), c(r26)]);
    return r26.attached = true, p17;
  }
  _applyEdgeOffsetStep(e25) {
    return (t25) => (this.destroyed || null == t25.operation || !this._operations || (this._updateEventState(Ue.RESHAPING), null == t25.signedDistance ? this._resetTooltip() : ((t25.mapDeltaX || t25.mapDeltaY || t25.mapDeltaZ) && (this._offsetEdge(e25, t25.operation, t25.signedDistance), this.events.emit("reshape", { type: "reshape", object: this.object })), this._updateEdgeOffsetTooltip(t25))), t25);
  }
  _cleanEdgeOffsetCollapsedEdges(e25, t25) {
    const i23 = e25.handle.leftVertex.leftEdge?.leftVertex, n30 = e25.handle.leftVertex, a36 = e25.handle.rightVertex.rightEdge?.rightVertex, o25 = e25.handle.rightVertex, s13 = t25.data.coordinateHelper, r26 = this.view.pixelSizeAt(s13.vectorToDehydratedPoint(n30.pos), s13.spatialReference), l26 = [];
    if (i23 && s13.distance(i23.pos, n30.pos) < Le) {
      const e26 = this._getManipulatorInfoFromHandle(n30);
      null != e26 && l26.push(e26);
    }
    if (s13.distance(n30.pos, o25.pos) < r26 || a36 && s13.distance(a36.pos, o25.pos) < Le) {
      const e26 = this._getManipulatorInfoFromHandle(o25);
      null != e26 && l26.push(e26);
    }
    l26.length && this._removeVertices(l26);
  }
  _enterInputModeDuringEdgeOffset(e25) {
    const t25 = this._findActiveEdgeOffsetManipulatorInfo();
    return !!t25 && (!!H3(e25, this.tooltip) && (t25.manipulator.dragging ? (this._pendingEdgeOffsetInfo = { manipulatorInfo: t25, mode: "drag" }, true) : (this._clearSelection(), this._pendingEdgeOffsetInfo = { manipulatorInfo: t25, mode: "hover" }, this._connectEdgeOffsetTooltipOnHover(t25), true)));
  }
  _exitEdgeOffsetInputMode() {
    this.tooltip && (this._pendingEdgeOffsetInfo = null, this._resetTooltip(), this.tooltip.exitInputMode());
  }
  _findActiveEdgeOffsetManipulatorInfo() {
    return this._manipulatorInfos.filter(Te).find(({ manipulator: e25 }) => e25.hovering || e25.grabbing || e25.dragging);
  }
  _connectEdgeOffsetTooltipOnHover(e25) {
    const { _operations: t25, object: i23 } = this;
    if (!t25) return;
    const { elevationInfo: n30 } = i23, a36 = H7(t25.data.coordinateHelper, e25.handle, n30);
    this._selectEdgeOffsetArrow(e25, a36), this.addHandles([this._initializeEdgeOffsetVisualElement(e25, i23, n30, t25), this._connectEdgeOffsetTooltip(e25, a36, t25, () => {
      this.removeHandles(a36), this._exitEdgeOffsetInputMode();
    })], a36);
  }
  _splitEdgesBeforeEdgeOffset(e25, t25) {
    if (t25.requiresSplitEdgeLeft) {
      const t26 = this._getManipulatorInfoFromHandle(e25.handle.leftVertex.leftEdge);
      null != t26 && this._splitEdgeManipulator(t26, 1);
    }
    if (t25.requiresSplitEdgeRight) {
      const t26 = this._getManipulatorInfoFromHandle(e25.handle.rightVertex.rightEdge);
      null != t26 && this._splitEdgeManipulator(t26, 0);
    }
  }
  _selectEdgeOffsetArrow(e25, t25) {
    const i23 = e25.grabMapPoint ?? A12(this.view.inputManager?.latestPointerLocation, this.view, this.object, e25);
    i23 && t25.selectArrowFromStartPoint(i23);
  }
  _connectEdgeOffsetTooltip(e25, t25, i23, n30) {
    const a36 = () => this.tooltipInfos.edgeOffset.distance.actual, o25 = (a37) => {
      n30(), queueMicrotask(() => {
        this.view.focus();
        const n31 = i23.createUndoGroup();
        this._tooltipCallbacks.onReshapeStart?.(), this._splitEdgesBeforeEdgeOffset(e25, t25), this._offsetEdge(e25, t25, E14(a37, e25.manipulator.location, t25, i23)), this._tooltipCallbacks.onReshape?.(), this._tooltipCallbacks.onReshapeStop?.(), this._cleanEdgeOffsetCollapsedEdges(e25, i23), n31.remove();
      });
    }, r26 = () => {
      const e26 = a36();
      null != e26 ? o25(e26) : n30();
    };
    return t([f2(() => this.tooltip && !this.tooltip.focused, () => r26(), U), this.tooltip.on("discard", n30), this.tooltip.on("commit", (e26) => {
      "commit-and-exit" === e26.type && r26();
    })]);
  }
  _createVertexOrEdgeManipulator(e25, t25 = this.object.elevationInfo, i23 = false) {
    const n30 = this.view, a36 = this._operations, o25 = this._settings;
    if (!a36) return null;
    const r26 = a36.data.type, l26 = a36.data.spatialReference;
    if ("edge" === e25.type) {
      if (this.enableEdgeOffset) return this._createEdgeOffsetManipulator(e25, t25);
      if (!this.enableMidpoints) return null;
    }
    if (null == this._vertexManipulatorGeometry || null == this._vertexManipulatorOutlineGeometry) {
      const { size: e26, outlineSize: t26 } = we(o25.manipulators.vertex);
      this._vertexManipulatorGeometry = ot(this._vertexManipulatorMaterial, e26, 16, 16), this._vertexManipulatorOutlineGeometry = ot(this._vertexManipulatorOutlineMaterial, t26, 16, 16);
    }
    if (null == this._edgeManipulatorGeometry || null == this._edgeManipulatorOutlineGeometry) {
      const { size: e26, outlineSize: t26 } = we(o25.manipulators.edge);
      this._edgeManipulatorGeometry = ot(this._edgeManipulatorMaterial, e26, 16, 16), this._edgeManipulatorOutlineGeometry = ot(this._edgeManipulatorOutlineMaterial, t26, 16, 16);
    }
    const p17 = "point" === r26 || "mesh" === r26 ? [] : [new e20(this._vertexManipulatorGeometry.instantiate(), Pe.Vertex | t13.Unselected), new e20(this._vertexManipulatorOutlineGeometry.instantiate(), Pe.Vertex | t13.Unfocused | t13.Unselected), new e20(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._vertexManipulatorHoverOutlineMaterial }), Pe.Vertex | t13.Focused | t13.Unselected), new e20(this._vertexManipulatorGeometry.instantiate({ material: this._selectedManipulatorMaterial }), t13.Selected), new e20(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._selectedManipulatorOutlineMaterial }), t13.Selected | t13.Unfocused), new e20(this._vertexManipulatorOutlineGeometry.instantiate({ material: this._selectedManipulatorHoverOutlineMaterial }), t13.Selected | t13.Focused)];
    this.enableMidpoints && p17.push(new e20(this._edgeManipulatorGeometry.instantiate({ material: this._vertexManipulatorMaterial }), Pe.Edge | t13.Focused | t13.Unselected), new e20(this._edgeManipulatorOutlineGeometry.instantiate({ material: this._vertexManipulatorHoverOutlineMaterial }), Pe.Edge | t13.Focused | t13.Unselected), new e20(this._edgeManipulatorGeometry.instantiate(), Pe.Edge | t13.Unfocused | t13.Unselected), new e20(this._edgeManipulatorOutlineGeometry.instantiate(), Pe.Edge | t13.Unfocused | t13.Unselected));
    const u23 = new ee2({ view: n30, renderObjects: p17, elevationInfo: t25, focusMultiplier: 1, touchMultiplier: 1, available: this.object.visible, metadata: { deleting: false }, location: Ae(l26) });
    u23.selected = i23, this._setTypeSpecificManipulatorSettings(u23, e25, t25);
    const h23 = "edge" === e25.type ? { manipulator: u23, handle: e25, locationUpdateHandle: null, type: "edge", selectedIndex: 0 } : { manipulator: u23, handle: e25, type: "vertex", selectedIndex: 0 };
    if (this._manipulatorInfos.push(h23), this.manipulators.add(u23), this._updateManipulatorPosition(h23), "edge" === h23.type) {
      const e26 = [];
      for (const t26 of [h23.handle.leftVertex, h23.handle.rightVertex]) {
        const i24 = this._getManipulatorInfoFromHandle(t26);
        null != i24 && e26.push(i24.manipulator.events.on("location-update", () => this._updateManipulatorPosition(h23)));
      }
      h23.locationUpdateHandle = t(e26), this._manipulatorHandles.add(h23.locationUpdateHandle, u23);
    }
    this._manipulatorHandles.add(this._watchAndUpdateGrabState(u23, true), u23);
    const c26 = p11(u23, (e26, i24, o26, s13) => {
      let r27 = null;
      const { snappingStep: p18, cancelSnapping: u24 } = f14({ predicate: () => !this._isMultiVertexSelection(), snappingManager: this.tool.snappingManager, snappingContext: new e13({ editGeometryOperations: a36, elevationInfo: t25, pointer: s13, excludeFeature: this.object.graphic, visualizer: new R10() }), updatingHandles: this._updatingHandles, useZ: false });
      o26 = o26.next((t26) => (this._onDragCancel(!e26.metadata.deleting, () => r27 = l(r27)), t26)).next(u24);
      const { elevationAlignedLocation: c27 } = e26, m16 = this.object.graphic ?? void 0;
      i24.next((e27) => this._trackNumDragging(e27)).next((e27) => {
        if ("start" === e27.action && a36 && (r27 = a36.createUndoGroup()), "edge" === h23.type) {
          const t26 = this._splitEdgeManipulator(h23);
          return { ...e27, info: t26, snapOrigin: t26.handle.pos };
        }
        return { ...e27, info: h23, snapOrigin: h23.handle.pos };
      }).next(M4(n30, c27)).next(M12(n30, c27, t25, l26, m16)).next(D2(n30, t25, m16)).next(...p18).next(v5()).next((e27) => {
        this._perVertexManipulatorDragAction(e27), "end" === e27.action && (r27 = l(r27)), this._resetTooltip();
      });
    });
    return this._manipulatorHandles.add([c26, u23.events.on("immediate-click", (e26) => this._manipulatorClickCallback(e26, h23)), u23.events.on("select-changed", () => {
      h23.selectedIndex = ++this._selectedIndex, this._updateMoveManipulationPosition(), this._resetTooltip();
    }), u23.events.on("focus-changed", () => {
      this._resetTooltip();
    })], u23), this.events.emit("manipulators-changed"), h23;
  }
  _trackNumDragging(e25) {
    switch (e25.action) {
      case "start":
        this._numDragging++;
        break;
      case "end":
        this._numDragging--;
    }
    return e25;
  }
  _onDragCancel(e25 = true, t25) {
    switch (this._numDragging--, e25 && this.undo(), this.tool.snappingManager?.doneSnapping(), this._resetTooltip(), this._reshapeEventState) {
      case Ue.NONE:
        break;
      case Ue.MOVING:
        this.events.emit("move", { type: "move", dx: 0, dy: 0, object: this.object });
        break;
      case Ue.RESHAPING:
        this.events.emit("reshape", { type: "reshape", object: this.object });
    }
    t25?.(), this.destroyed || this._updateEventState(Ue.NONE);
  }
  _setTypeSpecificManipulatorSettings(e25, t25, i23) {
    const n30 = this._settings;
    switch (t25.type) {
      case "vertex": {
        e25.state = Pe.Vertex, e25.selectable = true, e25.cursor = "move", e25.collisionPriority = 2;
        const { size: t26, collisionPadding: a36 } = n30.manipulators.vertex;
        e25.radius = t26 / 2 + a36, e25.elevationInfo = i23;
        const o25 = this._operations?.data.type;
        e25.interactive = null != o25 && "point" !== o25 && "mesh" !== o25;
        break;
      }
      case "edge": {
        e25.state = Pe.Edge, e25.selectable = false, e25.cursor = "copy", e25.collisionPriority = -1;
        const { size: t26, collisionPadding: a36 } = n30.manipulators.edge;
        e25.radius = t26 / 2 + a36, e25.elevationInfo = "on-the-ground" !== i23.mode || h7(this.object.graphic?.symbol) ? { mode: "absolute-height", offset: 0 } : i23;
        break;
      }
    }
  }
  _watchAndUpdateGrabState(e25, t25) {
    return e25.events.on("grab-changed", (i23) => {
      this._onGrabStateChanged(e25, t25, i23.action, i23.pointerType);
    });
  }
  _onGrabStateChanged(e25, t25, i23, n30 = "mouse") {
    if (!this._recreatingManipulators) {
      if ("start" === i23) t25 && this._updateSelection(e25), this._numGrabbing++;
      else if (this._numGrabbing--, this._updateEventState(Ue.NONE), this.destroyed) return;
      this._moveManipulation.interactive = !this._numGrabbing, ("touch" !== n30 || this.enableEdgeOffset) && (this._manipulatorInfos.forEach((e26) => {
        const { manipulator: t26 } = e26, i24 = this._operations?.data.type;
        t26.interactive = t26.grabbing || !this._numGrabbing && null != i24 && "point" !== i24 && "mesh" !== i24, Te(e26) && (e26.edgeManipulator.interactive = e26.edgeManipulator.grabbing || !this._numGrabbing);
      }), this._objectMoveManipulation.forEachManipulator((e26) => {
        e26.interactive = e26.grabbing || !this._numGrabbing;
      }));
    }
  }
  _clearSelection() {
    for (const e25 of this._manipulatorInfos) e25.manipulator.grabbing || (e25.manipulator.selected = false);
    this._pendingEdgeOffsetInfo = null;
  }
  _updateSelection(e25) {
    e25.grabbing && !e25.selected && e25.selectable && (this._clearSelection(), e25.selected = true, this.events.emit("manipulators-changed"));
  }
  _removeManipulator(e25) {
    null != e25 && (e25.manipulator.metadata.deleting = true, this.manipulators.remove(e25.manipulator), this._manipulatorHandles.remove(e25.manipulator), S(this._manipulatorInfos, e25), this.events.emit("manipulators-changed"), this._resetTooltip());
  }
  _getManipulatorInfoFromHandle(e25) {
    if (e25) {
      for (const t25 of this._manipulatorInfos) if (e25 === t25.handle) return t25;
    }
    return null;
  }
  _updateManipulatorPositions(e25) {
    for (const t25 of e25) this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(t25));
  }
  _updateManipulatorPosition(e25) {
    const t25 = this._operations;
    if (null != e25 && t25) {
      if ("vertex" === e25.type) e25.manipulator.location = t25.data.coordinateHelper.vectorToDehydratedPoint(e25.handle.pos, Ge), e25.manipulator.grabbing && null != this._vertexLaserLineVisualElement && (this._vertexLaserLineVisualElement.visualElement.intersectsWorldUpAtLocation = e25.manipulator.renderLocation);
      else if ("edge" === e25.type) {
        const i23 = this._getManipulatorInfoFromHandle(e25.handle.leftVertex), n30 = this._getManipulatorInfoFromHandle(e25.handle.rightVertex);
        if (null == i23 || null == n30) return;
        const a36 = i23.manipulator, o25 = n30.manipulator;
        if ("on-the-ground" === e25.manipulator.elevationInfo?.mode) {
          const i24 = a36.location, n31 = o25.location, s13 = 0.5, r26 = i24.x + s13 * (n31.x - i24.x), l26 = i24.y + s13 * (n31.y - i24.y), p17 = i24.hasZ && n31.hasZ ? 0 : void 0;
          e25.manipulator.location = e7(r26, l26, p17, t25.data.spatialReference);
        } else I2(De, a36.renderLocation, o25.renderLocation, 0.5), e25.manipulator.renderLocation = De;
      }
    }
  }
  _splitEdgeManipulator(e25, t25 = 0.5) {
    const i23 = this._operations, n30 = i23.splitEdge(e25.handle, t25).createdVertex;
    e25.locationUpdateHandle = l(e25.locationUpdateHandle);
    const a36 = this.object.elevationInfo;
    let o25;
    this.enableEdgeOffset ? (this._removeManipulator(e25), o25 = this._createVertexOrEdgeManipulator(n30)) : (o25 = e25, o25.handle = n30, o25.type = "vertex", this._setTypeSpecificManipulatorSettings(e25.manipulator, e25.handle, a36)), n30.leftEdge && this._createVertexOrEdgeManipulator(n30.leftEdge), n30.rightEdge && this._createVertexOrEdgeManipulator(n30.rightEdge), this._updateManipulatorPosition(o25), this.enableEdgeOffset || this._resetTooltip(), this._updateSelection(e25.manipulator);
    const s13 = this._updateEventState(Ue.RESHAPING), r26 = i23.data.coordinateHelper.vectorToArray(o25.handle.pos), l26 = i23.data.components.indexOf(n30.component);
    return this.events.emit("vertex-add", { type: "vertex-add", object: this.object, vertices: [{ coordinates: r26, componentIndex: l26, vertexIndex: n30.index }], added: r26 }), s13 && this._updateEventState(Ue.NONE), o25;
  }
  _updateMoveManipulationPosition() {
    const e25 = o6(De, 0, 0, 0);
    let t25 = 0, i23 = false, n30 = null, a36 = null;
    for (const r26 of this._manipulatorInfos) "vertex" === r26.type && (r26.manipulator.selected ? (t25++, u5(e25, e25, r26.manipulator.renderLocation), null == n30 || r26.selectedIndex > n30.selectedIndex ? (a36 = n30, n30 = r26) : (null == a36 || r26.selectedIndex > a36.selectedIndex) && (a36 = r26)) : i23 = true);
    const o25 = this.object, s13 = this._operations?.data.geometry;
    if (0 === t25) {
      const e26 = o25.visible && this.enableMoveObject;
      this._moveManipulation.xyManipulation.available = e26, this._moveManipulation.xyAxisManipulation.available = e26, this._moveManipulation.xyAxisManipulation.orthogonalAvailable = e26, this._moveManipulation.zManipulation.available = e26 && this.enableZShape && o21(this._operations, o25.elevationInfo), this._moveManipulation.angle = r21(s13), this._moveManipulation.radius = u18.radiusForSymbol(o25.graphic?.symbol);
    } else {
      const e26 = o25.visible;
      this._moveManipulation.xyManipulation.available = e26, this._moveManipulation.xyAxisManipulation.available = e26, this._moveManipulation.zManipulation.available = e26 && this.enableZVertex && o21(this._operations, this.object.elevationInfo), this._moveManipulation.xyAxisManipulation.orthogonalAvailable = e26 && 1 !== t25;
      let i24 = 0;
      if (null != n30) {
        const e27 = n30.handle.pos, t26 = null != a36 ? a36.handle.pos : n30.handle.leftEdge?.leftVertex ? n30.handle.leftEdge.leftVertex.pos : null, o26 = null == a36 && n30.handle.rightEdge?.rightVertex ? n30.handle.rightEdge.rightVertex.pos : null;
        t26 && o26 ? this._moveManipulation.xyAxisManipulation.available = false : t26 ? i24 = Ve(t26, e27) : o26 && (i24 = Ve(e27, o26));
      }
      this._moveManipulation.angle = i24, this._moveManipulation.radius = o22;
    }
    0 !== t25 && i23 ? (g2(e25, e25, 1 / t25), Ge.spatialReference = this._operations.data.spatialReference, Ge.hasZ = true, this.view.renderCoordsHelper.fromRenderCoords(e25, Ge), this._moveManipulation.elevationAlignedLocation = Ge) : null == this._outlineVisualElement || this.object.isDraped || null == this._outlineVisualElement.attachmentOrigin ? F10(this._moveManipulation, this.object) : this._moveManipulation.elevationAlignedLocation = this._outlineVisualElement.attachmentOrigin;
  }
  _removeVertices(e25) {
    const t25 = new Array(), i23 = this._operations;
    if (i23) {
      for (const n30 of e25) {
        const e26 = n30.handle.component;
        if ("vertex" === n30.type && i23.canRemoveVertex(e26)) {
          t25.push(n30.handle), this._removeManipulator(n30), this._removeManipulator(this._getManipulatorInfoFromHandle(n30.handle.leftEdge)), this._removeManipulator(this._getManipulatorInfoFromHandle(n30.handle.rightEdge));
          const a36 = i23.removeVertices([n30.handle]), o25 = a36.removedVertices?.[0].createdEdge;
          o25 ? this._createVertexOrEdgeManipulator(o25) : this.enableEdgeOffset && e26.vertices.length <= 2 && this._removeManipulator(this._getManipulatorInfoFromHandle(e26.edges[0]));
        }
      }
      if (t25.length > 0) {
        const e26 = t25.map((e27) => {
          const t26 = i23.data.components.indexOf(e27.component);
          return { coordinates: i23.data.coordinateHelper.vectorToArray(e27.pos), componentIndex: t26, vertexIndex: e27.index };
        }), n30 = this._updateEventState(Ue.RESHAPING);
        if (this.destroyed) return;
        if (this.events.emit("vertex-remove", { type: "vertex-remove", object: this.object, removed: e26.map((e27) => e27.coordinates), vertices: e26 }), this.destroyed) return;
        if (n30 && (this._updateEventState(Ue.NONE), this.destroyed)) return;
        this._updateMoveManipulationPosition();
      }
    }
  }
  _moveVertices(e25, t25, i23 = "start" === t25.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS) {
    const n30 = this._operations;
    if (n30) {
      e25.length > 0 && n30.moveVertices(e25.map((e26) => e26.handle), t25.mapDeltaX, t25.mapDeltaY, t25.mapDeltaZ, i23);
      for (const t26 of e25) this._updateManipulatorPosition(t26);
    }
  }
  _offsetEdge(e25, t25, i23) {
    if (!this._operations) return;
    const n30 = t25.clone();
    n30.distance = i23, this._operations.updateVertices([e25.handle.leftVertex, e25.handle.rightVertex], n30), this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e25.handle.leftVertex)), this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e25.handle.rightVertex));
  }
  _manipulatorClickCallback(e25, t25) {
    e25.shiftKey || this._clearSelection(), "vertex" === t25.type && (t25.manipulator.selected = !t25.manipulator.selected, this.enableDeleteVertices && e25.button === t12.Right && this._removeVertices([t25])), "edge" === t25.type && e25.button === t12.Left && this._splitEdgeManipulator(t25), e25.stopPropagation();
  }
  _updateTranslateTooltip(e25, t25) {
    null != this._defaultTooltipInfo ? this._resetTooltip() : this._updateTranslateObjectTooltip(e25, t25);
  }
  _updateTranslateObjectTooltip(e25, t25) {
    this._pendingEdgeOffsetInfo || (this.activeTooltipInfo = P15(e25, t25, this._tooltipsContext));
  }
  _updateEdgeOffsetTooltip(e25) {
    this._pendingEdgeOffsetInfo || (this.activeTooltipInfo = S15(this.object, e25, this._tooltipsContext));
  }
  _resetTooltip() {
    const e25 = this.activeTooltipInfo;
    if (this._pendingEdgeOffsetInfo && "reshape-edge-offset" === e25?.type) return;
    let t25 = null;
    t25 = this._pendingEdgeOffsetInfo || null != this._findActiveEdgeOffsetManipulatorInfo() ? S15(this.object, null, this._tooltipsContext) : this._defaultTooltipInfo, t25 !== e25 && (null != e25 && null != t25 && "input" === this.tooltip.mode || (this.activeTooltipInfo = t25));
  }
  get _defaultTooltipInfo() {
    const e25 = this._operations?.data.type;
    switch (e25) {
      case "polyline":
      case "polygon":
        return this._selectedVertexManipulatorInfo ? this.tooltipInfos.selectedVertex : null;
      case "point":
      case "mesh":
        return this.tooltipInfos.movePoint;
      default:
        return null;
    }
  }
  get _selectedVertexManipulatorInfo() {
    const e25 = this._manipulatorInfos.filter((e26) => "vertex" === e26.type && e26.manipulator.selected);
    return 1 === e25.length ? e25[0] : null;
  }
  get _tooltipsContext() {
    const { tooltipInfos: e25, activeTooltipInfo: t25, automaticAreaMeasurementUtils: i23, automaticLengthMeasurementUtils: n30 } = this;
    return { sketchOptions: this._sketchOptions, tooltipInfos: e25, activeTooltipInfo: t25, selectedVertexManipulatorInfo: this._selectedVertexManipulatorInfo, callbacks: this._tooltipCallbacks, automaticAreaMeasurementUtils: i23, automaticLengthMeasurementUtils: n30 };
  }
  get test() {
  }
};
function He() {
  return (e25) => {
    const { operation: t25, mapEnd: i23 } = e25;
    return null == t25 || null == i23 ? e25 : { ...e25, signedDistance: t25.signedDistanceToPoint(i23) };
  };
}
function we(e25) {
  const t25 = e25.size / 2, i23 = t25 + e25.collisionPadding;
  return { size: t25 / i23, outlineSize: (t25 + e25.outlineSize) / i23 };
}
function Ve(e25, t25) {
  return Math.atan2(t25[1] - e25[1], t25[0] - e25[0]) + Math.PI / 2;
}
function Ae(e25) {
  return new _({ x: 0, y: 0, z: 0, spatialReference: e25 });
}
function Te(e25) {
  return "edge" === e25.type && "edgeManipulator" in e25;
}
r([m()], Se.prototype, "_numGrabbing", void 0), r([m()], Se.prototype, "_numDragging", void 0), r([m()], Se.prototype, "_pendingEdgeOffsetInfo", void 0), r([m()], Se.prototype, "_operations", null), r([m()], Se.prototype, "_segmentLabels", void 0), r([m({ constructOnly: true })], Se.prototype, "tool", void 0), r([m()], Se.prototype, "tooltip", void 0), r([m()], Se.prototype, "activeTooltipInfo", void 0), r([m({ readOnly: true })], Se.prototype, "updating", null), r([m()], Se.prototype, "manipulators", null), r([m()], Se.prototype, "view", null), r([m()], Se.prototype, "automaticAreaMeasurementUtils", null), r([m()], Se.prototype, "automaticLengthMeasurementUtils", null), r([m()], Se.prototype, "object", null), r([m()], Se.prototype, "enableZShape", null), r([m()], Se.prototype, "enableDeleteVertices", null), r([m()], Se.prototype, "enableZVertex", null), r([m()], Se.prototype, "autoHideManipulators", null), r([m()], Se.prototype, "enableMoveObject", null), r([m()], Se.prototype, "enableMidpoints", null), r([m()], Se.prototype, "enableEdgeOffset", null), r([m()], Se.prototype, "_sketchOptions", null), r([m()], Se.prototype, "_accentColor", null), r([m()], Se.prototype, "_tooltipsContext", null), Se = r([a2("esri.views.3d.interactive.editingTools.reshape.ReshapeOperation")], Se);
var Ge = e7(0, 0, void 0, f3.WGS84);
var De = n3();
var Le = 1e-6;
var Pe;
var Ue;
var Ce;
!function(e25) {
  e25.Vertex = u12.Custom1, e25.Edge = u12.Custom2;
}(Pe || (Pe = {})), function(e25) {
  e25[e25.NONE = 0] = "NONE", e25[e25.MOVING = 1] = "MOVING", e25[e25.RESHAPING = 2] = "RESHAPING";
}(Ue || (Ue = {})), function(e25) {
  e25[e25.ALL = 0] = "ALL", e25[e25.SELECTED_OR_ALL = 1] = "SELECTED_OR_ALL";
}(Ce || (Ce = {}));

// node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeTool3D.js
var h21 = class extends n14 {
  constructor(e25) {
    super(e25), this._reshapeOperation = null, this.events = new o3(), this.enableZShape = true, this.enableZVertex = true, this.enableMoveObject = true, this.enableDeleteVertices = true, this.autoHideManipulators = false, this.enableMidpoints = true, this.enableEdgeOffset = false, this.type = "reshape-3d", this.sketchOptions = new c12(), this.snappingManager = null, this.automaticManipulatorSelection = false;
  }
  initialize() {
    const e25 = this._reshapeOperation = new Se({ tool: this });
    this.addHandles([e25.events.on("reshape", (e26) => this.events.emit("reshape", e26)), e25.events.on("move", (e26) => this.events.emit("move", e26)), e25.events.on("vertex-add", (e26) => this.events.emit("vertex-add", e26)), e25.events.on("vertex-remove", (e26) => this.events.emit("vertex-remove", e26)), e25.events.on("immediate-click", (e26) => this.events.emit("immediate-click", { ...e26, object: this.object })), this.view.on("pointer-down", ["Shift"], (e26) => e26.stopPropagation())]), this.finishToolCreation();
  }
  destroy() {
    this._reshapeOperation = u2(this._reshapeOperation);
  }
  get updating() {
    return ((this.object.updating ?? false) || this._reshapeOperation?.updating || this.snappingManager?.updating) ?? false;
  }
  get activeTooltipInfo() {
    return this._reshapeOperation?.activeTooltipInfo ?? null;
  }
  get tooltip() {
    return this._reshapeOperation?.tooltip ?? null;
  }
  onManipulatorSelectionChanged() {
    this._reshapeOperation?.onManipulatorSelectionChanged();
  }
  get canUndo() {
    return this._reshapeOperation?.canUndo ?? false;
  }
  undo() {
    this.snappingManager?.doneSnapping(), this._reshapeOperation?.undo();
  }
  get canRedo() {
    return this._reshapeOperation?.canRedo ?? false;
  }
  redo() {
    this.snappingManager?.doneSnapping(), this._reshapeOperation?.redo();
  }
  onInputEvent(e25) {
    const t25 = this._reshapeOperation;
    if (t25 && !t25.enterInputModeIfAvailable(e25) && this.enableDeleteVertices && "key-down" === e25.type && c11.delete.includes(e25.key)) {
      t25.removeSelectedVertices() > 0 && e25.stopPropagation();
    }
  }
  reset() {
  }
};
r([m()], h21.prototype, "_reshapeOperation", void 0), r([m({ constructOnly: true })], h21.prototype, "view", void 0), r([m({ constructOnly: true })], h21.prototype, "automaticAreaMeasurementUtils", void 0), r([m({ constructOnly: true })], h21.prototype, "automaticLengthMeasurementUtils", void 0), r([m({ constructOnly: true })], h21.prototype, "object", void 0), r([m()], h21.prototype, "enableZShape", void 0), r([m()], h21.prototype, "enableZVertex", void 0), r([m()], h21.prototype, "enableMoveObject", void 0), r([m()], h21.prototype, "enableDeleteVertices", void 0), r([m()], h21.prototype, "autoHideManipulators", void 0), r([m()], h21.prototype, "enableMidpoints", void 0), r([m()], h21.prototype, "enableEdgeOffset", void 0), r([m()], h21.prototype, "type", void 0), r([m({ type: c12 })], h21.prototype, "sketchOptions", void 0), r([m()], h21.prototype, "snappingManager", void 0), r([m()], h21.prototype, "updating", null), r([m()], h21.prototype, "activeTooltipInfo", null), r([m()], h21.prototype, "tooltip", null), r([m()], h21.prototype, "automaticManipulatorSelection", void 0), h21 = r([a2("esri.views.3d.interactive.editingTools.reshape.ReshapeTool3D")], h21);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateMeshAdapter.js
var g14 = class extends b {
  constructor(t25) {
    super(t25), this._interactionState = null;
  }
  initialize() {
    this.addHandles([f2(() => {
      const t25 = this._interactionState;
      return t25 && t25.angle !== t25.previousAngle ? { interactionState: t25, angle: t25.state.angle } : null;
    }, ({ interactionState: t25 }) => {
      this._updateMeshRotation(t25);
    }, U), f2(() => {
      const t25 = this._interactionState;
      return t25 && t25.scale !== t25.previousScale ? { interactionState: t25, scale: t25.state.scale } : null;
    }, ({ interactionState: t25 }) => {
      this._updateMeshSize(t25);
    }, U)]);
  }
  get geometry() {
    const t25 = t17(this.object);
    return "mesh" === t25?.type ? t25 : null;
  }
  get initialAngle() {
    return this._interactionState?.initialAngle ?? 0;
  }
  get angle() {
    const t25 = this.geometry?.transform;
    if (null == t25) return this._interactionState?.angle ?? 0;
    const e25 = w4(t25.rotation)[2];
    return Math.abs(e25) > 0.999999 ? s(y4(t25.rotation)) * Math.sign(e25) : 0;
  }
  get angleClockwise() {
    return -this.angle;
  }
  get relativeAngle() {
    return this.angle - this.initialAngle;
  }
  get relativeAngleClockwise() {
    return -this.relativeAngle;
  }
  get scale() {
    return this._interactionState?.scale ?? 1;
  }
  startInteraction() {
    const t25 = new u19({ angle: this.angle });
    this._interactionState = t25;
    const e25 = () => {
      this._interactionState = null;
    };
    return { state: t25, done: e25, cancel: () => {
      t25.cancel(), e25();
    } };
  }
  createUndoRecord() {
    return this.object.createUndoRecord();
  }
  _updateMeshRotation(t25) {
    const { geometry: e25 } = this;
    if (null == e25) return;
    const { angle: o25, previousAngle: n30 } = t25;
    t25.previousAngle = o25;
    const r26 = M(o25 - n30);
    e25.rotate(0, 0, r26);
  }
  _updateMeshSize(t25) {
    const { geometry: e25 } = this;
    if (null == e25) return;
    const { scale: o25, previousScale: i23 } = t25;
    t25.previousScale = o25;
    const n30 = o25 / i23;
    e25.scale(n30);
  }
};
r([m({ constructOnly: true })], g14.prototype, "object", void 0), r([m()], g14.prototype, "geometry", null), r([m({ constructOnly: true })], g14.prototype, "viewingMode", void 0), r([m()], g14.prototype, "initialAngle", null), r([m()], g14.prototype, "angle", null), r([m()], g14.prototype, "angleClockwise", null), r([m()], g14.prototype, "relativeAngle", null), r([m()], g14.prototype, "relativeAngleClockwise", null), r([m()], g14.prototype, "scale", null), r([m()], g14.prototype, "_interactionState", void 0), g14 = r([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter")], g14);
var u19 = class extends b {
  get state() {
    const { angle: t25, scale: e25 } = this;
    return { angle: t25, scale: e25 };
  }
  constructor(t25) {
    super(t25), this.angle = 0, this.initialAngle = 0, this.previousAngle = 0, this.previousScale = 1, this.scale = 1, this.initialAngle = t25.angle, this.previousAngle = t25.angle;
  }
  cancel() {
    this.angle = this.initialAngle, this.scale = 1;
  }
};
r([m()], u19.prototype, "angle", void 0), r([m()], u19.prototype, "initialAngle", void 0), r([m()], u19.prototype, "previousAngle", void 0), r([m()], u19.prototype, "previousScale", void 0), r([m()], u19.prototype, "scale", void 0), r([m()], u19.prototype, "state", null), u19 = r([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState")], u19);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateObjectSymbol3DAdapter.js
var a29 = class extends b {
  constructor(t25) {
    super(t25), this.sizeAxis = null, this._interactionState = null;
  }
  initialize() {
    this.addHandles(f2(() => null != this._interactionState ? this._interactionState.state : null, (t25) => {
      this._updateSymbol(t25);
    }, U));
  }
  get initialAngle() {
    return this._interactionState?.initialAngle ?? 0;
  }
  get angle() {
    return null != this._interactionState ? this._interactionState.angle : null != this._orientationReferenceSymbolLayer ? c22(this._orientationReferenceSymbolLayer.heading ?? 0) : 0;
  }
  get angleClockwise() {
    return -this.angle;
  }
  get orientation() {
    return this.angle;
  }
  get orientationClockwise() {
    return this.angleClockwise;
  }
  get relativeAngle() {
    return this.angle - this.initialAngle;
  }
  get relativeAngleClockwise() {
    return -this.relativeAngle;
  }
  get scale() {
    return this._interactionState?.scale ?? 1;
  }
  get size() {
    const t25 = this._sizeReferenceSymbolLayer;
    if (null == t25) return null;
    const e25 = this.findLayerView(), i23 = this._graphicSymbol;
    if (null == e25 || null == i23 || "point-3d" !== i23.type) return null;
    const l26 = e25.getSymbolLayerSize(i23, t25);
    if ("size" in l26 && null != l26.size) return l26.size;
    const n30 = this.sizeAxis;
    return !("width" in l26) || null == l26.width || null != n30 && "width" !== n30 && "all" !== n30 && "width-and-depth" !== n30 ? !("depth" in l26) || null == t25.depth || null != n30 && "depth" !== n30 && "all" !== n30 && "width-and-depth" !== n30 ? !("height" in l26) || null == t25.height || null != n30 && "height" !== n30 && "all" !== n30 ? null : l26.height : l26.depth : l26.width;
  }
  get _sizeReferenceSymbolLayer() {
    const t25 = this._graphicSymbol;
    return null == t25 || 0 === t25.symbolLayers.length ? null : t25.symbolLayers.find((t26) => "object" === t26.type);
  }
  get _orientationReferenceSymbolLayer() {
    const t25 = this._graphicSymbol;
    return null == t25 || 0 === t25.symbolLayers.length ? null : t25.symbolLayers.find((t26) => "object" === t26.type && null != t26.heading);
  }
  get _graphicSymbol() {
    return null != this.graphic?.symbol && "point-3d" === this.graphic.symbol.type ? this.graphic.symbol : null;
  }
  set _graphicSymbol(t25) {
    this.graphic.symbol = t25;
  }
  startInteraction() {
    const t25 = this._graphicSymbol, e25 = this.findLayerView();
    if (null != this._interactionState || null == t25 || null == e25) return h22;
    const i23 = t25.symbolLayers.map((i24) => "object" === i24.type ? e25.getSymbolLayerSize(t25, i24) : null).toArray(), l26 = t25.clone(), n30 = this.angle, o25 = new p16({ originalSymbol: l26, angle: n30, initialSizes: i23 });
    this._interactionState = o25;
    const r26 = () => {
      this._interactionState = null;
    };
    return { state: o25, done: r26, cancel: () => {
      this._graphicSymbol = l26, r26();
    } };
  }
  createUndoRecord() {
    let t25 = this.graphic.symbol, e25 = null;
    return { undo: (i23) => {
      e25 = i23.symbol, i23.symbol = t25;
    }, redo: (i23) => {
      t25 = i23.symbol, i23.symbol = e25;
    } };
  }
  _updateSymbol({ scale: t25, angle: e25, originalSymbol: l26, initialSizes: n30 }) {
    const o25 = this._graphicSymbol;
    if (null == o25 || "point-3d" !== o25.type) return;
    const r26 = o25.clone(), s13 = -M(e25 - this.initialAngle);
    let a36 = false;
    this._forEachObjectSymbolLayerPair(l26, r26, (e26, i23, l27) => {
      const o26 = (e26.heading ?? 0) + s13;
      i23.heading !== o26 && (i23.heading = o26, a36 = true);
      const r27 = n30[l27];
      if (null != r27 && "width" in r27) {
        r27.width = this.sizeFilter(r27.width), r27.height = this.sizeFilter(r27.height), r27.depth = this.sizeFilter(r27.depth);
        const e27 = r27.width * t25;
        i23.width !== e27 && (i23.width = e27, a36 = true);
        const l28 = r27.depth * t25;
        i23.depth !== l28 && (i23.depth = l28, a36 = true);
        const n31 = r27.height * t25;
        i23.height !== n31 && (i23.height = n31, a36 = true);
      }
    }), a36 && (this._graphicSymbol = r26);
  }
  _forEachObjectSymbolLayerPair(t25, e25, i23) {
    t25.symbolLayers.forEach((t26, l26) => {
      const n30 = e25.symbolLayers.at(l26);
      "object" === t26.type && "object" === n30.type && i23(t26, n30, l26);
    });
  }
};
function c22(t25) {
  return -s(t25);
}
r([m()], a29.prototype, "initialAngle", null), r([m()], a29.prototype, "angle", null), r([m()], a29.prototype, "angleClockwise", null), r([m()], a29.prototype, "orientation", null), r([m()], a29.prototype, "orientationClockwise", null), r([m()], a29.prototype, "relativeAngle", null), r([m()], a29.prototype, "relativeAngleClockwise", null), r([m()], a29.prototype, "scale", null), r([m()], a29.prototype, "size", null), r([m()], a29.prototype, "sizeAxis", void 0), r([m({ constructOnly: true })], a29.prototype, "graphic", void 0), r([m()], a29.prototype, "_interactionState", void 0), r([m({ constructOnly: true })], a29.prototype, "findLayerView", void 0), r([m({ constructOnly: true })], a29.prototype, "sizeFilter", void 0), r([m()], a29.prototype, "_sizeReferenceSymbolLayer", null), r([m()], a29.prototype, "_orientationReferenceSymbolLayer", null), r([m()], a29.prototype, "_graphicSymbol", null), a29 = r([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter")], a29);
var h22 = { state: { angle: 0, scale: 0 }, done: () => {
}, cancel: () => {
} };
var p16 = class extends b {
  get state() {
    const { originalSymbol: t25, angle: e25, initialAngle: i23, scale: l26, initialSizes: n30 } = this;
    return { originalSymbol: t25, angle: e25, initialAngle: i23, scale: l26, initialSizes: n30 };
  }
  constructor(t25) {
    super(t25), this.angle = 0, this.initialAngle = 0, this.scale = 1, this.initialAngle = t25.angle;
  }
};
r([m()], p16.prototype, "originalSymbol", void 0), r([m()], p16.prototype, "angle", void 0), r([m()], p16.prototype, "initialAngle", void 0), r([m()], p16.prototype, "initialSizes", void 0), r([m()], p16.prototype, "scale", void 0), r([m()], p16.prototype, "state", null), p16 = r([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter.InteractionState")], p16);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateTransform.js
var mt;
!function(t25) {
  t25.ScaleIn = u12.Custom2, t25.ScaleOut = u12.Custom3, t25.RotateLeft = u12.Custom4, t25.RotateRight = u12.Custom5, t25.Unlocked = u12.Custom7, t25.DelayedFocused = u12.Custom8, t25.TouchInput = u12.Custom12;
}(mt || (mt = {}));
var gt2 = class extends b {
  get angle() {
    return this.adapter.angle;
  }
  get scale() {
    return this.adapter.scale;
  }
  set location(t25) {
    this._ringManipulator.location = t25;
  }
  set elevationAlignedLocation(t25) {
    this._ringManipulator.elevationAlignedLocation = t25;
  }
  get grabbing() {
    return this._ringManipulator.grabbing;
  }
  set interactive(t25) {
    this._ringManipulator.interactive = t25;
  }
  get updating() {
    return !!this._activeAnimation;
  }
  constructor(t25) {
    super(t25), this.mode = null, this._scaleRotateDragData = null, this._activeAnimation = null, this._ringIndicatorDelayMs = q9, this.events = new o3(), this.getFocused = () => this._ringManipulator.focused, this.getScale = () => "scale" === this._scaleRotateDragData?.mode ? this.adapter.scale : 1;
  }
  initialize() {
    this._createManipulator(), this._updateDragState(), this._updateManipulatorTransform(), this.addHandles([l3(() => {
      const { adapter: t25 } = this;
      return [t25.angle, t25.scale];
    }, () => this._updateManipulatorTransform())]);
  }
  destroy() {
    this._activeAnimation?.frameTask.remove(), this._activeAnimation = null, this.tool.manipulators.remove(this._ringManipulator), this._ringManipulator = null;
  }
  startAnimation(t25) {
    this.cancelActiveAnimation(), t25.start();
    const e25 = F({ update: ({ deltaTime: e26 }) => {
      t25.update(e26) && this.cancelActiveAnimation();
    } });
    this._activeAnimation = { ...t25, frameTask: e25 };
  }
  cancelActiveAnimation() {
    this._activeAnimation?.frameTask.remove(), this._activeAnimation = u2(this._activeAnimation);
  }
  forEachManipulator(t25) {
    t25(this._ringManipulator, A10.SCALE_ROTATE);
  }
  _createManipulator() {
    const t25 = this._createRingManipulator();
    this._ringManipulator = t25, this.tool.manipulators.add(t25);
    const e25 = this.tool.object, a36 = p11(t25, (t26, a37, i23) => {
      this._scaleRotateDragData = null;
      const n30 = this.adapter.startInteraction(), l26 = { mode: "none", origin: t4(t26.renderLocation), initialAngle: this.adapter.angle, angle: 0, angleDir: 0, scaleDir: 0 };
      this._scaleRotateDragData = l26, this._updateDragState();
      const c26 = c5.get();
      this.tool.view.renderCoordsHelper.worldUpAtPosition(t26.renderLocation, c26), a37.next(T6(this.tool.view, l7(t26.renderLocation, c26, M2()))).next((t27) => {
        const a38 = O2(t27.plane), i24 = w11(t27.renderStart, t27.renderEnd, l26.origin, a38), c27 = s2.shortestSignedDiff(l26.angle, i24);
        l26.angleDir = r4(l26.angleDir + c27, -0.3, m13), l26.angle = i24;
        const d18 = ft2(l26, t27), h23 = d18 - this.adapter.scale;
        if (l26.scaleDir = r4(l26.scaleDir + h23, -0.2, k6), this._onScaleChanged(), "none" === l26.mode) {
          const a39 = this.mode || _t(t27, t27.plane, l26.origin, this.tool.view.state.camera);
          if (null != a39) {
            switch (a39) {
              case "rotate":
                this.tool.events.emit("rotate-start", { object: e25, angle: 0 }), this.tool.events.emit("record-undo", { updates: [this.adapter.createUndoRecord()] });
                break;
              case "scale":
                this.tool.events.emit("scale-start", { object: e25, xScale: 1, yScale: 1 }), this.tool.events.emit("record-undo", { updates: [this.adapter.createUndoRecord()] });
            }
            l26.mode = a39;
          }
        }
        switch (l26.mode) {
          case "rotate":
            n30.state.angle = l26.initialAngle + i24;
            break;
          case "scale":
            n30.state.scale = d18, this._onScaleChanged();
        }
        switch (this._updateDragState(), this._updateManipulatorTransform(), t27.action) {
          case "start":
          case "update":
            switch (l26.mode) {
              case "rotate":
                this.tool.events.emit("rotate", { object: e25, angle: M(l26.angle) });
                break;
              case "scale":
                this.tool.events.emit("scale", { object: e25, xScale: d18, yScale: d18 });
            }
            break;
          case "end":
            switch (l26.mode) {
              case "rotate":
                this.tool.events.emit("rotate-stop", { object: e25, angle: M(l26.angle) });
                break;
              case "scale":
                this.tool.events.emit("scale-stop", { object: e25, xScale: d18, yScale: d18 });
            }
        }
        return "end" === t27.action && (this.startAnimation(vt(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState(), n30.done()), t27;
      }), i23.next(() => {
        if (n30.cancel(), null != this._scaleRotateDragData) {
          switch (this._scaleRotateDragData.mode) {
            case "none":
              break;
            case "rotate":
              this.tool.events.emit("rotate-stop", { object: e25, angle: 0 });
              break;
            case "scale":
              this.tool.events.emit("scale-stop", { object: e25, xScale: 1, yScale: 1 });
          }
          this.startAnimation(vt(this, () => this._onScaleChanged())), this._scaleRotateDragData = null, this._updateDragState();
        }
      });
    });
    this.addHandles([a36, t25.events.on("focus-changed", (t26) => {
      "focus" === t26.action ? this.startAnimation(Mt(this, () => this._updateDelayedFocusedState(), { delayMs: this._ringIndicatorDelayMs })) : this._updateDelayedFocusedState();
    }), t25.events.on("immediate-click", (t26) => {
      t26.stopPropagation();
    }), l3(() => this.tool.object.visible, (t26) => this._ringManipulator.available = t26, h)]);
  }
  _onScaleChanged() {
    this.events.emit("scale-changed"), this._updateManipulatorTransform();
  }
  _updateDelayedFocusedState() {
    this._ringManipulator.updateStateEnabled(mt.DelayedFocused, this.getFocused());
  }
  _updateDragState() {
    if (this._ringManipulator.updateStateEnabled(mt.Unlocked, !(null != this._scaleRotateDragData && "none" !== this._scaleRotateDragData?.mode)), null != this._scaleRotateDragData) switch (this._scaleRotateDragData.mode) {
      case "rotate":
        this._ringManipulator.updateStateEnabled(mt.ScaleIn | mt.ScaleOut, false), this._ringManipulator.updateStateEnabled(mt.RotateLeft, this._scaleRotateDragData.angleDir < 0), this._ringManipulator.updateStateEnabled(mt.RotateRight, this._scaleRotateDragData.angleDir >= 0);
        break;
      case "scale":
        this._ringManipulator.updateStateEnabled(mt.RotateLeft | mt.RotateRight, false), this._ringManipulator.updateStateEnabled(mt.ScaleIn, this._scaleRotateDragData.scaleDir < 0), this._ringManipulator.updateStateEnabled(mt.ScaleOut, this._scaleRotateDragData.scaleDir >= 0);
    }
    else this._ringManipulator.updateStateEnabled(mt.ScaleIn | mt.ScaleOut | mt.RotateLeft | mt.RotateRight, false);
  }
  _updateManipulatorTransform() {
    const t25 = p2(f6.get(), this.adapter.angle, r6(0, 0, 1));
    if (null == t25) return;
    const e25 = this.getScale(), a36 = d3(f6.get(), o6(c5.get(), e25, e25, e25));
    this._ringManipulator.modelTransform = c2(f6.get(), a36, t25);
  }
  _createRingManipulator() {
    const t25 = (t26, e26, a37) => {
      const o26 = [], i24 = Math.ceil(t19 * (e26 - t26) / (2 * Math.PI));
      for (let r27 = 0; r27 < i24 + 1; r27++) {
        const s14 = t26 + r27 * (e26 - t26) / i24;
        o26.push(r6(a37 * Math.cos(s14), a37 * Math.sin(s14), 0));
      }
      return o26;
    }, e25 = (e26) => t25(0, 2 * Math.PI, e26), a36 = (t26) => [[-t26 / 2, 0], [t26 / 2, 0], [t26 / 2, P13 / 2], [-t26 / 2, P13 / 2]], o25 = this._createMaterial(1), i23 = (t26, e26, i24 = o25) => it(i24, a36(e26), t26, [], [], false), r26 = e25(I6), s13 = i23(r26, i15), n30 = { left: new Array(), right: new Array() }, l26 = [];
    for (let w14 = 0; w14 < 2; w14++) {
      const e26 = w14 * Math.PI - Math.PI / 4, a37 = Math.PI / 2 - x9, r27 = e26 + a37, s14 = e26 + Math.PI / 2 - a37, c27 = t25(r27, s14, n21), d19 = i23(c27, l17);
      l26.push(c27), l26.push(t25(r27, s14, p15 - i15 / 2)), n30.left.push(d19), n30.right.push(d19.instantiate());
      for (let t26 = 0; t26 < 2; t26++) {
        const e27 = 0 === t26, a38 = e3();
        if (e27) {
          f5(a38, a38, [1, -1, 1]), b3(a38, a38, -r27, [0, 0, 1]);
          const t27 = Math.round(f18 * (c27.length - 1));
          a38[12] = c27[t27][0], a38[13] = c27[t27][1], a38[14] = c27[t27][2];
        } else {
          b3(a38, a38, s14, [0, 0, 1]);
          const t27 = Math.round((1 - f18) * (c27.length - 1));
          a38[12] = c27[t27][0], a38[13] = c27[t27][1], a38[14] = c27[t27][2];
        }
        const i24 = gt(o25, r22, 0, s10, P13);
        Ot(i24, a38), (e27 ? n30.left : n30.right).push(i24);
      }
    }
    const c26 = [];
    for (let _10 = 0; _10 < 2; _10++) {
      const e26 = _10 * Math.PI - Math.PI / 4, a37 = Math.PI / 2 - b16, o26 = e26 + a37, r27 = e26 + Math.PI / 2 - a37, s14 = t25(o26, r27, p15);
      c26.push(i23(s14, l17));
    }
    const d18 = this._createMaterial(0.66), h23 = this._createMaterial(0.5), u23 = this._createMaterial(0.33), p17 = e25(I6 + g12), m16 = e25(I6 + j9), g17 = i23(p17, l17, d18), f21 = i23(m16, l17, u23), v14 = e25(I6 - g12), M16 = e25(I6 - j9), b22 = i23(v14, l17, d18), j14 = i23(M16, l17, u23);
    let y14 = [new e20(s13, mt.DelayedFocused), new e20(s13.instantiate({ material: h23 }), t13.None)];
    this.mode && "scale" !== this.mode || (y14 = y14.concat([...c26.map((t26) => new e20(t26, mt.DelayedFocused | mt.Unlocked)), new e20(g17, mt.DelayedFocused | mt.ScaleIn), new e20(f21, mt.DelayedFocused | mt.ScaleIn), new e20(b22, mt.DelayedFocused | mt.ScaleOut), new e20(j14, mt.DelayedFocused | mt.ScaleOut)])), this.mode && "rotate" !== this.mode || (y14 = y14.concat([...n30.right.map((t26) => new e20(t26.instantiate(), mt.DelayedFocused | mt.Unlocked)), ...n30.left.map((t26) => new e20(t26, mt.DelayedFocused | mt.RotateLeft)), ...n30.right.map((t26) => new e20(t26, mt.DelayedFocused | mt.RotateRight))]));
    const R14 = [r26, ...l26];
    return new ee2({ view: this.tool.view, renderObjects: y14, autoScaleRenderObjects: false, worldOriented: true, radius: i15, focusMultiplier: 1, touchMultiplier: 1.5, elevationInfo: this.tool.object.elevationInfo, collisionType: { type: "ribbon", paths: R14, direction: r6(0, 0, 1) } });
  }
  _createMaterial(t25) {
    const e25 = new A4({ cullFace: e6.Back, renderOccluded: o12.Transparent, isDecoration: true });
    return this.addHandles(l3(() => S2(this.tool.view.effectiveTheme.accentColor, t25), (t26) => e25.setParameters({ color: t26 }), h)), e25;
  }
  get test() {
  }
};
function ft2(t25, e25) {
  const a36 = c4(c5.get(), e25.renderStart, t25.origin), o25 = c4(c5.get(), e25.renderEnd, t25.origin), i23 = r9(a36), r26 = r9(o25);
  return 0 === i23 ? 0 : r26 / i23;
}
function _t(t25, e25, a36, o25) {
  const { renderStart: i23, renderEnd: r26 } = t25, s13 = Dt(i23, o25, c5.get()), n30 = Dt(r26, o25, c5.get());
  if (v2(s13, n30) < d14 * d14) return null;
  const l26 = c4(c5.get(), i23, a36), c26 = _3(c5.get(), l26, O2(e25)), d18 = i23, h23 = u5(c5.get(), d18, c26), u23 = Dt(a36, o25, c5.get()), p17 = s13, m16 = Dt(h23, o25, c5.get()), g17 = c4(c5.get(), m16, p17), f21 = c4(c5.get(), s13, u23), _10 = k(p17, g17), D11 = k(u23, f21);
  return w5(_10, n30) < w5(D11, n30) ? "rotate" : "scale";
}
function Dt(t25, e25, a36) {
  return e25.projectToScreen(t25, bt), o6(a36, bt[0], bt[1], 0);
}
var St;
function vt(t25, e25) {
  let a36 = null, o25 = 1;
  const i23 = () => o25;
  return { start: () => {
    o25 = t25.getScale(), a36 = t25.getScale, t25.getScale = i23, e25();
  }, update: (t26) => (o25 += ((o25 + 1) / 2 - o25) * Math.min(t26 * u17, 1), e25(), Math.abs(o25 - 1) < 0.01 ? St.STOP : St.CONTINUE), destroy: () => {
    a36 && (t25.getScale = a36), e25();
  } };
}
function Mt(t25, e25, a36) {
  let o25 = 0, i23 = null;
  const r26 = () => false;
  return { start: () => {
    i23 = t25.getFocused, t25.getFocused = r26, o25 = 0, e25();
  }, update: (t26) => (o25 += t26, !i23?.() || o25 >= a36.delayMs ? St.STOP : St.CONTINUE), destroy: () => {
    i23 && (t25.getFocused = i23), e25();
  } };
}
r([m({ constructOnly: true })], gt2.prototype, "tool", void 0), r([m({ constructOnly: true })], gt2.prototype, "adapter", void 0), r([m({ constructOnly: true })], gt2.prototype, "sketchOptions", void 0), r([m()], gt2.prototype, "mode", void 0), r([m()], gt2.prototype, "_activeAnimation", void 0), r([m()], gt2.prototype, "updating", null), gt2 = r([a2("esri.views.3d.interactive.editingTools.transform.ScaleRotateTransform")], gt2), function(t25) {
  t25[t25.CONTINUE = 0] = "CONTINUE", t25[t25.STOP = 1] = "STOP";
}(St || (St = {}));
var bt = f4();

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformMeshTooltipInfo.js
var l19 = class extends h10(r15) {
  constructor(t25) {
    super(t25), this.type = "transform-mesh", this.orientation = k4(), this.scale = R7(), this.allFields.forEach((t26) => {
      t26.lockable = false, t26.setActual(null);
    });
  }
  get key() {
    return { longitude: this.longitude.actual, latitude: this.latitude.actual, x: this.x.actual, y: this.y.actual, elevation: this.elevation.actual, geographic: this.geographic, orientation: this.orientation.actual, scale: this.scale.actual };
  }
  get allFields() {
    return [this.longitude, this.latitude, this.x, this.y, this.elevation, this.orientation, this.scale];
  }
};
r([m()], l19.prototype, "key", null), r([m()], l19.prototype, "allFields", null), l19 = r([a2("esri.views.interactive.tooltip.infos.TransformMeshTooltipInfo")], l19);

// node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformPointTooltipInfo.js
var a30 = class extends h10(r15) {
  constructor(o25) {
    super(o25), this.type = "transform-point", this.orientation = k4({ readOnly: true }), this.size = j4({ readOnly: true }), this.allFields.forEach((o26) => {
      o26.lockable = false, o26.setActual(null);
    });
  }
  get allFields() {
    return [this.longitude, this.latitude, this.x, this.y, this.elevation, this.orientation, this.size];
  }
};
r([m()], a30.prototype, "allFields", null), a30 = r([a2("esri.views.interactive.tooltip.infos.TransformPointTooltipInfo")], a30);

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/TransformTool3D.js
var z10 = class extends n14 {
  constructor(t25) {
    super(t25), this.events = new o3(), this.enableZ = true, this.enableRotation = true, this.enableScaling = true, this.sketchOptions = new c12(), this.type = "transform-3d", this._updatingHandles = new h8(), this._scaleRotate = null;
  }
  initialize() {
    const { events: t25, object: o25, view: a36 } = this;
    this.tooltip = R6(() => ({ view: a36, options: this.sketchOptions.tooltips })), this._moveManipulation = new u18({ tool: this, view: a36, snapToScene: this.snapToScene, xyAvailable: true, xyAxisAvailable: true, zAvailable: this.enableZ && o21(o25.operations, o25.elevationInfo), radius: u18.radiusForSymbol(o25.graphic?.symbol) }), this._moveManipulation.forEachManipulator((e25) => this.addHandles(e25.events.on("immediate-click", (e26) => {
      t25.emit("immediate-click", { ...e26, object: this.object }), e26.stopPropagation();
    })));
    const s13 = o25.elevationInfo;
    if (this._moveManipulation.elevationInfo = s13, this.addHandles(a24(o25)), this._moveManipulation.createManipulatedObjectDragPipeline((t26, e25, i23, n30, r27) => {
      if (t26 === c21.XY) {
        const { snappingStep: t27, cancelSnapping: e26 } = f14({ snappingContext: new e13({ elevationInfo: s13, pointer: r27, editGeometryOperations: E9.fromGeometry(new _({ spatialReference: o25.operations?.data.spatialReference }), a36.state.viewingMode), visualizer: new R10(), excludeFeature: o25.graphic }), snappingManager: this.snappingManager, updatingHandles: this._updatingHandles, useZ: false });
        n30 = n30.next(e26), i23 = i23.next(G(this.view, s13)).next(...t27);
      }
      return { steps: i23, cancel: n30 };
    }, o25, (e25) => {
      const { action: o26, object: i23, dxScreen: a37, dyScreen: n30 } = e25, s14 = { object: i23, dxScreen: a37, dyScreen: n30 };
      switch (o26) {
        case "start":
          this._emitRecordUndo(), t25.emit("translate-start", s14);
          break;
        case "update":
          t25.emit("translate", s14);
          break;
        case "end":
          t25.emit("translate-stop", s14);
      }
    }), this._moveManipulation.angle = null != this._scaleRotate ? this._scaleRotate.angle : 0, this._scaleRotateAdapter = this._createScaleRotateAdapter(), this.addHandles(l3(() => this._scaleRotateAdapter.angle, () => this._updateMoveAngle())), this.enableScaling || this.enableRotation) {
      const t26 = this.enableScaling && this.enableRotation ? null : this.enableScaling ? "scale" : "rotate";
      this._scaleRotate = new gt2({ tool: this, mode: t26, adapter: this._scaleRotateAdapter, sketchOptions: this.sketchOptions }), this.addHandles(this._scaleRotate.events.on("scale-changed", () => this._onScaleChanged()));
    }
    this.addHandles([l16({ view: this.view, object: o25, forEachManipulator: (t26) => this._forEachManipulator(t26), onManipulatorsChanged: () => e() }), o25.on("committed", () => this._onGeometryChanged()), this._hideManipulatorsForObjectState(), l3(() => a36.scale, () => this._updateMoveAngle())].filter(L)), this._onGeometryChanged(), this._updateMoveAngle(), this._forEachManipulator((t26) => {
      t26 instanceof ee2 && this.addHandles(t26.events.on("grab-changed", () => this._updateManipulatorsInteractive()));
    });
    const r26 = a36?.type, { sketchOptions: l26 } = this;
    this._meshTooltipInfo = new l19({ viewType: r26, sketchOptions: l26 }), this._pointTooltipInfo = new a30({ viewType: r26, sketchOptions: l26 });
    const c26 = { object: o25, dxScreen: 0, dyScreen: 0 }, m16 = { onBeforeUpdate: () => this.endDrag(), onMoveStart: () => {
      this._emitRecordUndo(), t25.emit("translate-start", { ...c26 });
    }, onMove: () => t25.emit("translate", { ...c26 }), onMoveStop: () => t25.emit("translate-stop", { ...c26 }), onRotateStart: (e25) => {
      this._emitRecordUndo(), t25.emit("rotate-start", { object: o25, angle: e25 });
    }, onRotate: (e25) => t25.emit("rotate", { object: o25, angle: e25 }), onRotateStop: (e25) => t25.emit("rotate-stop", { object: o25, angle: e25 }), onScaleStart: (e25, i23) => {
      this._emitRecordUndo(), t25.emit("scale-start", { object: o25, xScale: e25, yScale: i23 });
    }, onScale: (e25, i23) => t25.emit("scale", { object: o25, xScale: e25, yScale: i23 }), onScaleStop: (e25, i23) => t25.emit("scale-stop", { object: o25, xScale: e25, yScale: i23 }) };
    this.addHandles(m11(this.tooltip, this.object, () => ({ sketchOptions: this.sketchOptions, activeTooltipInfo: this.activeTooltipInfo, callbacks: m16, scaleRotateTransform: this._scaleRotate }))), this.finishToolCreation();
  }
  destroy() {
    this.tooltip.destroy(), this._moveManipulation.destroy(), this._scaleRotate = u2(this._scaleRotate), this._scaleRotateAdapter = u2(this._scaleRotateAdapter), this._updatingHandles.destroy(), this._set("view", null), this._set("object", null);
  }
  onInputEvent(t25) {
    if (!this.destroyed && !H3(t25, this.tooltip)) return super.onInputEvent(t25);
  }
  _updateManipulatorsInteractive() {
    null != this._scaleRotate && (this._scaleRotate.interactive = !this._moveManipulation.grabbing, this._moveManipulation.interactive = !this._scaleRotate.grabbing);
  }
  _createScaleRotateAdapter() {
    const t25 = t17(this.object);
    return "mesh" === t25?.type ? new g14({ object: this.object, viewingMode: this.view.state.viewingMode }) : new a29({ graphic: this.object.graphic, sizeFilter: (t26) => this._enforceNonZeroSize(t26), findLayerView: () => this.view.allLayerViews.find((t26) => t26.layer === this.object.graphic?.layer), sizeAxis: this.sketchOptions?.tooltips?.visualVariables?.size?.axis ?? null });
  }
  _forEachManipulator(t25) {
    this._moveManipulation?.forEachManipulator(t25), this._scaleRotate?.forEachManipulator(t25);
  }
  _hideManipulatorsForObjectState() {
    return l3(() => this.object.visible, (t25) => {
      this._forEachManipulator((e25) => e25.available = t25), this._moveManipulation.zManipulation.available = t25 && this.enableZ && o21(this.object.operations, this.object.elevationInfo);
    });
  }
  _emitRecordUndo() {
    this.events.emit("record-undo", { updates: [this.object.createUndoRecord()] });
  }
  set snapToScene(t25) {
    this._moveManipulation && (this._moveManipulation.snapToScene = t25), this._set("snapToScene", t25);
  }
  get updating() {
    return this._updatingHandles.updating || !!this._scaleRotate?.updating;
  }
  get activeTooltipInfo() {
    return "mesh" === t17(this.object)?.type ? this._meshTooltipInfo : this._pointTooltipInfo;
  }
  set location(t25) {
    this._moveManipulation.location = t25, this._scaleRotate && (this._scaleRotate.location = t25);
  }
  set elevationAlignedLocation(t25) {
    this._moveManipulation.elevationAlignedLocation = t25, this._scaleRotate && (this._scaleRotate.elevationAlignedLocation = t25);
  }
  reset() {
  }
  onHide() {
    this._scaleRotate?.cancelActiveAnimation();
  }
  _onScaleChanged() {
    null != this._scaleRotate && (this._moveManipulation.displayScale = this._scaleRotate.getScale());
  }
  _updateMoveAngle() {
    const { view: t25 } = this, e25 = t25.state.viewingMode === l9.Local || t25.scale < v10;
    this._moveManipulation.angle = e25 ? this._scaleRotateAdapter.angle : 0;
  }
  _onGeometryChanged() {
    F10(this, this.object);
  }
  _enforceNonZeroSize(t25) {
    return t25 || this.view.state.camera.computeRenderPixelSizeAt(this._moveManipulation.renderLocation);
  }
  get test() {
  }
};
r([m({ constructOnly: true, nonNullable: true })], z10.prototype, "view", void 0), r([m({ constructOnly: true, nonNullable: true })], z10.prototype, "object", void 0), r([m({ constructOnly: true, nonNullable: true })], z10.prototype, "enableZ", void 0), r([m()], z10.prototype, "enableRotation", void 0), r([m()], z10.prototype, "enableScaling", void 0), r([m({ constructOnly: true, type: c12 })], z10.prototype, "sketchOptions", void 0), r([m({ value: false })], z10.prototype, "snapToScene", null), r([m({ constructOnly: true })], z10.prototype, "snappingManager", void 0), r([m({ readOnly: true })], z10.prototype, "type", void 0), r([m({ readOnly: true })], z10.prototype, "updating", null), r([m()], z10.prototype, "activeTooltipInfo", null), z10 = r([a2("esri.views.3d.interactive.editingTools.transform.TransformTool3D")], z10);

// node_modules/@arcgis/core/analysis/SlicePlane.js
var m14 = class extends a3.ClonableMixin(l2) {
  constructor(e25) {
    super(e25), this.type = "plane", this.position = null, this.heading = 0, this.tilt = 0, this.width = 10, this.height = 10;
  }
  equals(e25) {
    return this.heading === e25.heading && this.tilt === e25.tilt && this.width === e25.width && this.height === e25.height && o2(this.position, e25.position);
  }
};
r([m({ type: ["plane"], readOnly: true, json: { read: false, write: { isRequired: true } } })], m14.prototype, "type", void 0), r([m({ type: _, json: { write: { isRequired: true } } })], m14.prototype, "position", void 0), r([m({ type: Number, nonNullable: true, range: { min: 0, max: 360 }, json: { write: { isRequired: true } } }), s3((e25) => a4.normalize(a(e25), 0, true))], m14.prototype, "heading", void 0), r([m({ type: Number, nonNullable: true, range: { min: 0, max: 360 }, json: { write: { isRequired: true } } }), s3((e25) => a4.normalize(a(e25), 0, true))], m14.prototype, "tilt", void 0), r([m({ type: Number, nonNullable: true, range: { min: 0 }, json: { write: { isRequired: true } } })], m14.prototype, "width", void 0), r([m({ type: Number, nonNullable: true, range: { min: 0 }, json: { write: { isRequired: true } } })], m14.prototype, "height", void 0), m14 = r([a2("esri.analysis.SlicePlane")], m14);

// node_modules/@arcgis/core/views/3d/analysis/Slice/settings.js
var t21 = r8(0, 0, 0, 0.04);

// node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolConfig.js
var t22 = has("mac") ? "Meta" : "Control";
var s11 = 2;
var a31 = 1.15;
var c23 = 1.15;
var e22 = Math.cos(s(45));
var i20 = Math.cos(s(5));
var l20 = 3;
var n23 = 11;
var x11 = 22.5;
var C9 = 40;
var S16 = 48;
var U6 = 2.25;
var b20 = 4;
var d15 = 1;
var g15 = 0.3;
var k8 = 6;
var q13 = 4;

// node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js
var f20 = e3();

// node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolUtils.js
function ci(i23, t25) {
  return O10(i23.basis1, i23.basis2, i23.origin, t25);
}
function li(i23, t25, e25, n30) {
  const o25 = t25.worldUpAtPosition(i23.origin, c5.get()), s13 = c5.get();
  switch (e25) {
    case _i.HEADING:
      s6(s13, o25);
      break;
    case _i.TILT:
      s6(s13, i23.basis1);
  }
  return l7(i23.origin, s13, n30);
}
function gi(i23, t25, e25, n30) {
  const o25 = r9(n30.basis1), c26 = r9(n30.basis2), l26 = hi(n30), p17 = Ii(n30), f21 = o6(c5.get(), 0, 0, 0);
  u5(f21, g2(c5.get(), n30.basis1, t25.direction[0]), g2(c5.get(), n30.basis2, t25.direction[1])), u5(f21, n30.origin, f21);
  let b22 = 0, T9 = 1;
  if (Ei(t25)) 1 === t25.direction[0] && -1 === t25.direction[1] ? b22 = Ni : 1 === t25.direction[0] && 1 === t25.direction[1] ? b22 = Math.PI : -1 === t25.direction[0] && 1 === t25.direction[1] && (b22 = 3 * Math.PI / 2), T9 = p17;
  else {
    const i24 = 0 !== t25.direction[0] ? 1 : 2;
    b22 = 1 === i24 ? Ni : 0, T9 = (1 === i24 ? c26 : o25) - l26;
  }
  const h23 = R(f6.get(), b22);
  f5(h23, h23, o6(c5.get(), T9, T9, T9)), c2(h23, e25, h23), h23[12] = 0, h23[13] = 0, h23[14] = 0, i23.modelTransform = h23, i23.renderLocation = f21;
}
var fi;
function hi(i23) {
  const t25 = r9(i23.basis1), e25 = r9(i23.basis2);
  return g15 * Math.min(t25, e25);
}
function Ii(i23) {
  return hi(i23);
}
function Ei(i23) {
  return 0 !== i23.direction[0] && 0 !== i23.direction[1];
}
!function(i23) {
  i23[i23.POSITIVE_X = 0] = "POSITIVE_X", i23[i23.POSITIVE_Y = 1] = "POSITIVE_Y", i23[i23.NEGATIVE_X = 2] = "NEGATIVE_X", i23[i23.NEGATIVE_Y = 3] = "NEGATIVE_Y";
}(fi || (fi = {}));
var Ci = u12.Custom1;
var _i;
var Mi;
!function(i23) {
  i23[i23.HEADING = 1] = "HEADING", i23[i23.TILT = 2] = "TILT";
}(_i || (_i = {})), function(i23) {
  i23[i23.HORIZONTAL_OR_VERTICAL = 0] = "HORIZONTAL_OR_VERTICAL", i23[i23.HORIZONTAL = 1] = "HORIZONTAL", i23[i23.VERTICAL = 2] = "VERTICAL", i23[i23.TILTED = 3] = "TILTED";
}(Mi || (Mi = {}));
var Si = u12.Custom2;
var yi = b5();
var Ni = Math.PI / 2;
var Ui = u12.Custom1;
var Hi = u12.Custom2;

// node_modules/@arcgis/core/views/3d/analysis/Slice/ShiftManipulator.js
var H8;
!function(e25) {
  e25[e25.CENTER_ON_CALLOUT = 0] = "CENTER_ON_CALLOUT", e25[e25.CENTER_ON_ARROW = 1] = "CENTER_ON_ARROW";
}(H8 || (H8 = {}));
var I9 = class extends ee2 {
  constructor(a36, n30) {
    const i23 = new q7({ width: 1, renderOccluded: o12.OccludeAndTransparent, isDecoration: true }), s13 = new A4({ cullFace: e6.Back, renderOccluded: o12.Opaque, isDecoration: true }), c26 = new A4({ cullFace: e6.Back, renderOccluded: o12.Opaque, isDecoration: true }), l26 = new A4({ cullFace: e6.Back, renderOccluded: o12.Opaque, isDecoration: true }), m16 = new A4({ writeDepth: false, cullFace: e6.Front, renderOccluded: o12.Transparent, isDecoration: true });
    super({ view: a36, ...S17({ offsetMode: n30, tubeMaterial: s13, tipMaterial: c26, capMaterial: l26, outlineMaterial: m16, calloutMaterial: i23 }) }), this._themeHandle = l3(() => a36.effectiveTheme.accentColor, (r26) => {
      const o25 = E2(r26), a37 = l6.toUnitRGBA(r26), n31 = l6.toUnitRGBA(o25), p17 = l6.toUnitRGBA(l6.blendColors(o25, r26, 0.4)), u23 = l6.toUnitRGBA(l6.blendColors(o25, r26, 0.14));
      i23.setParameters({ color: a37 }), s13.setParameters({ color: u23 }), c26.setParameters({ color: n31 }), l26.setParameters({ color: p17 }), m16.setParameters({ color: a37 });
    }, h);
  }
  destroy() {
    this._themeHandle.remove(), super.destroy();
  }
};
function S17({ offsetMode: e25, tubeMaterial: t25, tipMaterial: r26, capMaterial: o25, outlineMaterial: a36, calloutMaterial: n30 }) {
  const i23 = e25 === H8.CENTER_ON_CALLOUT ? C9 : 0, s13 = [r6(i23, 0, -24), r6(i23, 0, S16 / 2)], c26 = J5(s13), l26 = W5({ vertices: s13, padding: 0, materials: { tube: t25, tip: r26, cap: o25 } }), m16 = W5({ vertices: s13, padding: U6, materials: { tube: a36, tip: a36, cap: a36 } }), p17 = wt(n30, [[i23, 0, 0], [i23 - C9, 0, 0]]), u23 = wt(n30, [[i23, 0, 0], [i23 - C9, 0, 0]]);
  return { renderObjects: [...l26.normal.map((e26) => new e20(e26, t13.Unfocused | Ci)), ...m16.normal.map((e26) => new e20(e26, t13.Unfocused | Ci)), new e20(p17, t13.Unfocused | Ci | Si), ...l26.focused.map((e26) => new e20(e26, t13.Focused | Ci)), ...m16.focused.map((e26) => new e20(e26, t13.Focused | Ci)), new e20(u23, t13.Focused | Ci | Si)], autoScaleRenderObjects: false, collisionType: { type: "line", paths: [c26] }, collisionPriority: 1, radius: n23, state: Ci };
}
function W5({ vertices: e25, padding: t25, materials: r26 }) {
  const o25 = (o26) => {
    const M16 = e25.slice(), C11 = c4(c5.get(), M16[0], M16[1]);
    A(C11, C11);
    const T9 = c4(c5.get(), M16[M16.length - 1], M16[M16.length - 2]);
    if (A(T9, T9), t25 > 0) {
      const e26 = g2(n3(), T9, -t25);
      M16[M16.length - 1] = u5(e26, e26, M16[M16.length - 1]);
      const r27 = g2(n3(), C11, -t25);
      M16[0] = u5(r27, r27, M16[0]);
    }
    const E16 = o26 ? c23 : 1, N9 = x11 * E16, F11 = n23 * E16, y14 = o5(f6.get());
    if (t25 > 0) {
      const e26 = N9 / 4, r27 = o6(c5.get(), 0, e26, 0), o27 = 1 + t25 / e26;
      i2(y14, y14, r27), f5(y14, y14, o6(c5.get(), o27, o27, o27)), i2(y14, y14, g2(r27, r27, -1 / o27));
    }
    const B4 = o5(e3()), D11 = r6(0, 1, 0), P17 = _2(e3(), R3(o7.get(), D11, T9));
    P17[12] = M16[M16.length - 1][0], P17[13] = M16[M16.length - 1][1], P17[14] = M16[M16.length - 1][2], c2(P17, P17, y14);
    const x13 = r26.tube, k10 = z12(l20 * (o26 ? a31 : 1) + t25, M16, x13);
    k10.transformation = B4;
    const G5 = [k10], q14 = r26.tip, H10 = at(q14, N9, F11, 24, false, false, true);
    H10.transformation = P17, G5.push(H10);
    const I14 = r26.cap, S20 = at(I14, N9, F11, 24, false, true, false);
    S20.transformation = P17, G5.push(S20);
    const W6 = _2(e3(), R3(o7.get(), D11, C11));
    return W6[12] = M16[0][0], W6[13] = M16[0][1], W6[14] = M16[0][2], c2(W6, W6, y14), G5.push(H10.instantiate({ transformation: W6 })), G5.push(S20.instantiate({ transformation: W6 })), G5;
  };
  return { normal: o25(false), focused: o25(true) };
}
function z12(e25, t25, r26) {
  const o25 = [], a36 = 12;
  for (let n30 = 0; n30 < a36; n30++) {
    const t26 = n30 / a36 * 2 * Math.PI;
    o25.push([Math.cos(t26) * e25, Math.sin(t26) * e25]);
  }
  return it(r26, o25, t25, [], [], false);
}
function J5(e25, t25) {
  const r26 = c4(n3(), e25[e25.length - 1], e25[e25.length - 2]);
  A(r26, r26), g2(r26, r26, x11), u5(r26, r26, e25[e25.length - 1]);
  {
    const t26 = c4(n3(), e25[0], e25[1]);
    return A(t26, t26), g2(t26, t26, x11), u5(t26, t26, e25[0]), [t26, ...e25, r26];
  }
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentMove.js
var j12 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  constructor(t25, e25, o25) {
    this._tool = t25, this._bounds = e25, this._automaticLengthMeasurementUtils = o25, this._moveXYTooltipInfo = null, this._moveZTooltipInfo = null;
    const i23 = this._tool, n30 = i23.view;
    this.moveXYObjectManipulation = new l18({ view: n30, tool: i23, object: this._object }), i23.addHandles(this._createMoveXYObjectDragPipeline()), this.moveZManipulator = new I9(n30, H8.CENTER_ON_CALLOUT), this.moveZManipulator.state |= Si, i23.manipulators.add(this.moveZManipulator), i23.addHandles(this._createMoveZDragPipeline()), i23.addHandles(i23.events.on("translate-stop", () => {
      this._moveXYTooltipInfo = null, this._moveZTooltipInfo = null;
    }));
  }
  destroy() {
    this.moveXYObjectManipulation.destroy(), this._tool.manipulators.remove(this.moveZManipulator), this.moveZManipulator.destroy();
  }
  forEachManipulator(t25) {
    this.moveXYObjectManipulation.forEachManipulator(t25), t25(this.moveZManipulator, A10.TRANSLATE_Z);
  }
  updateManipulators(t25, e25) {
    const n30 = this.moveZManipulator, r26 = x(f6.get(), t25, Math.PI);
    r26[12] = 0, r26[13] = 0, r26[14] = 0, n30.modelTransform = r26, n30.renderLocation = c4(c5.get(), e25.origin, e25.basis1);
  }
  getUpdatedTooltipInfo() {
    return this.moveXYObjectManipulation.grabbing || this.moveXYObjectManipulation.dragging ? this._computeMoveXYTooltipInfo() : this.moveZManipulator.focused ? this._computeMoveZTooltipInfo() : null;
  }
  _computeMoveXYTooltipInfo() {
    const t25 = this._tool, o25 = this._moveXYTooltipInfo ??= new i12({ sketchOptions: t25.sketchOptions });
    if (this.moveXYObjectManipulation.dragging) {
      const e25 = this._bounds, i23 = e25.mapBoundsStart.origin, n30 = e25.mapBounds.origin, { renderSpatialReference: a36 } = t25.view;
      if (!a36) return null;
      const s13 = this._automaticLengthMeasurementUtils.autoDistance2D(i23, n30, a36);
      if (null == s13) return null;
      o25.distance = s13;
    } else o25.distance = h9;
    return o25;
  }
  _computeMoveZTooltipInfo() {
    const t25 = this._tool, o25 = this._moveZTooltipInfo ??= new i19({ sketchOptions: t25.sketchOptions });
    if (this.moveZManipulator.dragging) {
      const e25 = this._bounds, i23 = e25.mapBoundsStart.origin, n30 = e25.mapBounds.origin, { renderSpatialReference: a36 } = t25.view;
      if (!a36) return null;
      const s13 = g6(i23, n30, a36);
      if (null == s13) return null;
      o25.distance = s13;
    } else o25.distance = h9;
    return o25;
  }
  _createMoveXYObjectDragPipeline() {
    return this.moveXYObjectManipulation.createDragPipeline((t25, e25, o25) => this._buildMoveDragPipeline(e25, o25));
  }
  _createMoveZDragPipeline() {
    if (!this._operations) return e();
    const e25 = this._operations.data.spatialReference;
    return p11(this.moveZManipulator, (t25, o25, i23) => {
      const a36 = t4(t25.renderLocation), s13 = o25.next(G4(this._tool.view, a36, e25)).next(j5());
      this._buildMoveDragPipeline(s13, i23);
    });
  }
  _buildMoveDragPipeline(t25, e25) {
    const { _tool: o25, _object: i23 } = this;
    t25.next((t26) => ("start" === t26.action && (o25.inputState = { type: "move" }, this._bounds.backupMapBounds(), o25.events.emit("translate-start", { object: i23, dxScreen: t26.screenDeltaX, dyScreen: t26.screenDeltaY })), t26)).next(v5()).next(this._updateGeometry()).next((t26) => {
      const e26 = { object: i23, dxScreen: t26.screenDeltaX, dyScreen: t26.screenDeltaY };
      switch (t26.action) {
        case "start":
        case "update":
          (t26.mapEnd.x - t26.mapStart.x || t26.mapEnd.y - t26.mapStart.y || (t26.mapEnd.z ?? 0) - (t26.mapStart.z ?? 0)) && o25.events.emit("translate", e26);
          break;
        case "end":
          o25.inputState = null, o25.events.emit("translate-stop", e26);
      }
      return t26;
    }), e25.next(() => {
      null != o25.inputState && o25.events.emit("translate-stop", { object: i23, dxScreen: 0, dyScreen: 0 }), o25.cancelDrag();
    });
  }
  _updateGeometry() {
    const t25 = this._tool;
    return (e25) => {
      if (null == t25.inputState || "move" !== t25.inputState.type) return e25;
      const o25 = "start" === e25.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS;
      if (this._operations) {
        const t26 = this._operations.move(e25.mapDeltaX, e25.mapDeltaY, e25.mapDeltaZ, o25);
        this._bounds.updateMapBoundsFromOperation(t26);
      }
      return e25;
    };
  }
};

// node_modules/@arcgis/core/views/3d/analysis/images/generateTextures.js
var t23 = "theme-style";
function e24(t25, e25) {
  return a32(r24(n26(o23(t25), e25)), e25.size);
}
function n26(e25, { accentColor: n30, contrastColor: o25 }) {
  const r26 = n30.toHex(), a36 = n30.a, s13 = o25.toHex(), i23 = o25.a, c26 = e25.getElementsByTagNameNS("http://www.w3.org/2000/svg", "style").namedItem(t23);
  return c26 && (c26.innerHTML = `
      .contrast-fill { fill: ${s13}; fill-opacity: ${i23}; }
      .contrast-stroke { stroke: ${s13}; stroke-opacity: ${i23};  }
      .accent-fill { fill: ${r26}; fill-opacity: ${a36}; }
      .accent-stroke { stroke: ${r26}; stroke-opacity:  ${a36}; }`), e25;
}
function o23(t25) {
  const e25 = t25.split(",")[1], n30 = atob(e25);
  return new DOMParser().parseFromString(n30, "image/svg+xml");
}
function r24(t25) {
  const e25 = new XMLSerializer().serializeToString(t25);
  return `data:image/svg+xml;base64,${btoa(e25)}`;
}
function a32(t25, e25) {
  const n30 = new Image(e25, e25);
  return n30.src = t25, n30;
}

// node_modules/@arcgis/core/views/3d/analysis/images/heading-rotate-svg.js
var I10 = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==";

// node_modules/@arcgis/core/views/3d/analysis/images/Factory.js
var a33 = 64;
function l23(r26, l26) {
  const { accentColor: n30, contrastColor: c26, preMultiplyAlpha: i23 } = l26;
  return r26.fromData(`heading-rotate:[accent:${n30},contrast:${c26},size:${a33}]`, () => new L3(e24(I10, { accentColor: n30, contrastColor: c26, size: a33 }), { mipmap: true, reloadable: true, preMultiplyAlpha: i23 }));
}

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/ITexture.js
function t24(t25) {
  return !!t25.update;
}

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js
var j13 = class extends g4 {
  constructor(e25, r26) {
    super(e25, r26, new t9(b11, () => import("./ImageMaterial.glsl-OWSAUEEQ.js")), I12);
  }
  _getPipelineState(t25, r26) {
    const { oitPass: m16, output: d18, hasOccludees: j14, cullFace: I14 } = t25, S20 = m16 === o11.NONE;
    return B({ blending: u7(d18) ? S20 ? o13 : i8(m16) : null, culling: f9(I14), depthTest: { func: E4(m16) }, depthWrite: N3(t25), drawBuffers: F3(m16, d18), colorWrite: g3, stencilWrite: j14 ? e10 : null, stencilTest: j14 ? r26 ? o14 : f11 : null, polygonOffset: m3(t25) });
  }
  initializePipeline(e25) {
    return this._occludeePipeline = this._getPipelineState(e25, true), this._getPipelineState(e25, false);
  }
  getPipeline(e25) {
    return e25 ? this._occludeePipeline : super.getPipeline();
  }
};
var I12 = /* @__PURE__ */ new Map([[e8.POSITION, 0], [e8.UV0, 2], [e8.PERSPECTIVEDIVIDE, 3]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechniqueConfiguration.js
var a34 = class extends a13 {
  constructor(e25) {
    super(), this.draped = e25, this.cullFace = e6.None, this.enableOffset = true, this.writeDepth = true, this.hasOccludees = false, this.terrainDepthTest = false, this.cullAboveTerrain = false, this.perspectiveInterpolation = true, this.textureCoordinateType = o10.None, this.emissionSource = f8.None, this.discardInvisibleFragments = true, this.occlusionPass = false, this.objectAndLayerIdColorInstanced = false, this.snowCover = false;
  }
};
r([i7({ count: e6.COUNT })], a34.prototype, "cullFace", void 0), r([i7()], a34.prototype, "enableOffset", void 0), r([i7()], a34.prototype, "writeDepth", void 0), r([i7()], a34.prototype, "hasOccludees", void 0), r([i7()], a34.prototype, "terrainDepthTest", void 0), r([i7()], a34.prototype, "cullAboveTerrain", void 0), r([i7()], a34.prototype, "perspectiveInterpolation", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js
var _9 = class extends r19 {
  constructor(e25) {
    super(e25, x12), this.vertexAttributeLocations = I12, this.supportsEdges = true, this.produces = /* @__PURE__ */ new Map([[A2.OPAQUE_MATERIAL, (e26) => i5(e26)], [A2.TRANSPARENT_MATERIAL, (e26) => h3(e26) && this.parameters.writeDepth], [A2.TRANSPARENT_MATERIAL_WITHOUT_DEPTH, (e26) => h3(e26) && !this.parameters.writeDepth], [A2.DRAPED_MATERIAL, (e26) => h3(e26) || i5(e26)]]), this._configuration = new a34(e25.draped);
  }
  dispose() {
    this.setParameters({ texture: void 0 });
  }
  getConfiguration(e25, t25) {
    return super.getConfiguration(e25, t25, this._configuration), this._configuration.cullFace = this.parameters.cullFace, this._configuration.hasSlicePlane = this.parameters.hasSlicePlane, this._configuration.writeDepth = this.parameters.writeDepth, this._configuration.hasOccludees = t25.hasOccludees, this._configuration.oitPass = t25.oitPass, this._configuration.enableOffset = t25.camera.relativeElevation < O4, this._configuration.terrainDepthTest = t25.terrainDepthTest, this._configuration.cullAboveTerrain = t25.cullAboveTerrain, this._configuration.perspectiveInterpolation = this.parameters.perspectiveInterpolation, this._configuration;
  }
  get visible() {
    return true;
  }
  createGLMaterial(e25) {
    return new b21(e25);
  }
  createBufferWriter() {
    let e25 = c15;
    return this.parameters.perspectiveInterpolation && (e25 = e25.clone().f32(e8.PERSPECTIVEDIVIDE)), new E15(e25);
  }
};
var b21 = class extends e9 {
  constructor(e25) {
    super({ ...e25, ...e25.material.parameters }), this.parameters = e25;
    const t25 = this._material.parameters.texture;
    t24(t25) && e25.textures.updater.add(t25);
  }
  dispose() {
    this.parameters.textures.updater.remove(this._material.parameters.texture);
  }
  beginSlot(e25) {
    return this.getTechnique(j13, e25);
  }
};
var E15 = class extends f10 {
  write(t25, r26, i23, s13, a36, o25) {
    for (const n30 of this.vertexBufferLayout.fields.keys()) {
      const s14 = i23.get(n30);
      if (s14) if (n30 === e8.PERSPECTIVEDIVIDE) {
        s7(1 === s14.size);
        const t26 = a36.getField(n30, f7);
        t26 && b7(s14, t26, o25);
      } else z2(n30, s14, t25, r26, a36, o25);
    }
    return null;
  }
};
var x12 = class extends d6 {
  constructor(e25, t25) {
    super(), this.texture = e25, this.draped = t25, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = e6.None, this.opacity = 1, this.perspectiveInterpolation = false;
  }
  get glTexture() {
    return this.texture.glTexture;
  }
};

// node_modules/@arcgis/core/views/3d/analysis/Slice/RotateManipulator.js
var w13 = class extends ee2 {
  constructor(i23, n30) {
    const a36 = P2(i23.effectiveTheme.accentColor, 0.5), c26 = E2(i23.effectiveTheme.accentColor), m16 = n30(a36, c26), u23 = new _9({ draped: false, texture: m16.texture, writeDepth: false, renderOccluded: o12.Opaque, isDecoration: true }), d18 = j10.calloutWidth, p17 = new q7({ width: d18, renderOccluded: o12.OccludeAndTransparent, isDecoration: true });
    super({ view: i23, ...g16({ imageMaterial: u23, calloutMaterial: p17 }) }), this._material = u23, this._textureHandle = m16, this._themeHandle = l3(() => i23.effectiveTheme.accentColor, (i24) => {
      const o25 = P2(i24, 0.5), s13 = E2(i24), a37 = this._textureHandle;
      this._textureHandle = n30(o25, s13), u23.setParameters({ texture: this._textureHandle.texture }), a37?.release(), p17.setParameters({ color: l6.toUnitRGBA(i24) });
    }, h);
  }
  destroy() {
    this._textureHandle = t2(this._textureHandle), this._themeHandle.remove(), this._material.dispose(), super.destroy();
  }
};
function g16({ imageMaterial: e25, calloutMaterial: t25 }) {
  const { focusMultiplier: r26, calloutLength: i23, discRadius: o25 } = j10, s13 = o25 * r26, a36 = (e26, t26) => {
    const r27 = [0, 1, 2, 2, 3, 0];
    return new p6(t26, [[e8.POSITION, new t8([i23 - e26, -e26, 0, i23 + e26, -e26, 0, i23 + e26, e26, 0, i23 - e26, e26, 0], r27, 3, true)], [e8.UV0, new t8([0, 0, 1, 0, 1, 1, 0, 1], r27, 2, true)]]);
  }, f21 = wt(t25, [[0, 0, 0], [i23 - o25, 0, 0]]), b22 = wt(t25, [[0, 0, 0], [i23 - s13, 0, 0]]), h23 = Ci;
  return { autoScaleRenderObjects: false, collisionPriority: 1, collisionType: { type: "disc", direction: [0, 0, 1], offset: [i23, 0, 0] }, focusMultiplier: r26, radius: o25, renderObjects: [new e20(a36(o25, e25), t13.Unfocused | h23), new e20(f21, t13.Unfocused | h23), new e20(a36(s13, e25), t13.Focused | h23), new e20(b22, t13.Focused | h23)], state: h23 };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentRotate.js
var M14 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  constructor(t25, e25, o25) {
    this._tool = t25, this._bounds = e25, this._snapRotation = o25, this._rotateTooltipInfo = null, this._startAngle = 0, this._endAngle = 0;
    const r26 = this._tool, a36 = r26.view, n30 = !a36.stage?.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result;
    this.rotateManipulator = new w13(a36, (t26, e26) => l23(a36.stage.textures, { accentColor: t26, contrastColor: e26, preMultiplyAlpha: n30 })), r26.addHandles([this.rotateManipulator.events.on("grab-changed", (t26) => this._onGrabChanged(t26)), this._createRotateDragPipeline(this.rotateManipulator)]), r26.manipulators.add(this.rotateManipulator), r26.addHandles([r26.events.on("rotate-start", (t26) => this._startAngle = t26.angle), r26.events.on("rotate", (t26) => this._endAngle = t26.angle), r26.events.on("rotate-stop", () => {
      this._startAngle = 0, this._endAngle = 0;
    })]);
  }
  destroy() {
    this._tool.manipulators.remove(this.rotateManipulator), this.rotateManipulator.destroy();
  }
  forEachManipulator(t25) {
    t25(this.rotateManipulator, A10.ROTATE);
  }
  updateManipulators(t25, r26) {
    const a36 = this._bounds.mapBounds.plane[2] < 0 ? Math.PI : 0, n30 = l5(f6.get(), t25, a36);
    n30[12] = 0, n30[13] = 0, n30[14] = 0, this.rotateManipulator.modelTransform = n30, this.rotateManipulator.renderLocation = u5(c5.get(), r26.origin, r26.basis1);
  }
  getUpdatedTooltipInfo() {
    return this.rotateManipulator.focused ? this._computeRotateTooltipInfo() : null;
  }
  _computeRotateTooltipInfo() {
    const t25 = this._rotateTooltipInfo ??= new s9({ sketchOptions: this._tool.sketchOptions });
    return t25.angle = this._startAngle - this._endAngle, t25;
  }
  _onGrabChanged({ action: t25, screenPoint: e25 }) {
    const o25 = this._tool, r26 = this._bounds;
    if ("start" !== t25 || !e25) return;
    const a36 = li(r26.displayBounds, o25.view.renderCoordsHelper, _i.HEADING, M2()), n30 = m12(o25.view.state.camera, e25);
    q5(a36, n30, c5.get()) && (r26.backupMapBounds(), o25.inputState = { type: "rotate", rotatePlane: a36 });
  }
  _createRotateDragPipeline(e25) {
    const { _tool: o25, _object: r26 } = this;
    return p11(e25, (e26, a36, n30) => {
      const s13 = o25.inputState;
      null != s13 && (a36.next((t25) => ("start" === t25.action && o25.events.emit("rotate-start", { object: r26, angle: 0 }), t25)).next(T6(o25.view, s13.rotatePlane)).next(this._renderPlaneToAngle()).next(...this._snapRotation()).next(this._updateGeometry()).next((e27) => {
        const a37 = { object: r26, angle: M(e27.rotateAngle) };
        switch (e27.action) {
          case "start":
          case "update":
            o25.events.emit("rotate", a37);
            break;
          case "end":
            o25.inputState = null, o25.events.emit("rotate-stop", a37);
        }
        return e27;
      }), n30.next(() => {
        null != o25.inputState && o25.events.emit("rotate-stop", { object: r26, angle: 0 }), o25.cancelDrag();
      }));
    });
  }
  _renderPlaneToAngle() {
    return (t25) => {
      const e25 = w11(t25.renderStart, t25.renderEnd, this._bounds.displayBounds.origin, O2(t25.plane));
      return { ...t25, rotateAngle: e25 };
    };
  }
  _updateGeometry() {
    const t25 = this._bounds;
    return (e25) => {
      const o25 = s6(n3(), t25.mapBoundsStart.origin), s13 = "start" === e25.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS;
      if (this._operations) {
        const r26 = this._operations.rotate(o25, e25.rotateAngle, s13, e12.REPLACE);
        Z2(t25.mapBoundsStart, t25.mapBounds), t25.updateMapBoundsFromOperation(r26);
      }
      return e25;
    };
  }
};

// node_modules/@arcgis/core/views/3d/analysis/Slice/ResizeManipulator.js
var v12 = class extends ee2 {
  constructor(o25, a36) {
    const l26 = Ei(a36), m16 = l26 ? b20 : d15, f21 = m16 * s11, d18 = d15, u23 = { renderOccluded: o12.OccludeAndTransparent, isDecoration: true }, j14 = new q7({ ...u23, width: m16 }), h23 = new q7({ ...u23, width: f21 }), v14 = new q7({ ...u23, width: d18 });
    super({ view: o25, ...b17, ...M15({ isCorner: l26, unfocusedMaterial: j14, focusedMaterial: h23, outlineMaterial: v14 }) }), this._themeHandle = l3(() => o25.effectiveTheme.accentColor, (r26) => {
      const t25 = l6.toUnitRGBA(r26);
      j14.setParameters({ color: t25 }), h23.setParameters({ color: t25 }), v14.setParameters({ color: t25 });
    }, h);
  }
  destroy() {
    this._themeHandle.remove(), super.destroy();
  }
};
function M15({ isCorner: e25, unfocusedMaterial: r26, focusedMaterial: t25, outlineMaterial: i23 }) {
  const s13 = e25 ? [r6(1, 0, 0), r6(0, 0, 0), r6(0, 1, 0)] : [r6(1, 0, 0), r6(-1, 0, 0)];
  return { renderObjects: [new e20(wt(r26, s13), t13.Unfocused | Ui), new e20(wt(t25, s13), t13.Focused | Ui), new e20(wt(i23, s13), Hi)], collisionType: { type: "line", paths: [s13] }, radius: e25 ? k8 : q13, state: Ui };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/extentUtils.js
var C10 = class {
  constructor(t25, i23) {
    this._tool = t25, this.mapBounds = W2(), this.mapBoundsStart = W2(), this.displayBounds = W2(), t25.addHandles(a5(() => t25.object, "modified-externally", () => this._resetMapBounds(), { onListenerAdd: () => this._resetMapBounds() })), this._onDisplayBoundsChanged = i23;
  }
  get displayBoundsMargin() {
    const { view: s13, object: t25 } = this._tool, i23 = t17(t25), o25 = s13.pointsOfInterest?.centerOnSurfaceFrequent.location ?? i23?.extent?.center;
    return o25 ? D10 * s13.pixelSizeAt(o25) : 0;
  }
  backupMapBounds() {
    Z2(this.mapBounds, this.mapBoundsStart);
  }
  updateDisplayBounds() {
    this._calculateDisplayBounds(), this._onDisplayBoundsChanged?.();
  }
  updateMapBoundsFromOperation(s13) {
    d8(s13, this.mapBounds), this.updateDisplayBounds();
  }
  updateMapBoundsFromOperationInverse(s13) {
    T2(s13, this.mapBounds), this.updateDisplayBounds();
  }
  _resetMapBounds() {
    this._calculateMapBounds(), this.updateDisplayBounds();
  }
  _calculateMapBounds() {
    const { view: s13, attachmentOrigin: i23, object: o25 } = this._tool, a36 = o25.operations?.data;
    if (!a36) return;
    const e25 = a36.geometry;
    this.spatialReference = e25.spatialReference;
    const n30 = n20(e25);
    l8(n30, n30, -1);
    const r26 = i23 ? s13.pixelSizeAt(i23, e25.spatialReference) : 0, p17 = O12 * r26, d18 = a36.coordinateHelper.hasZ() && "on-the-ground" !== o25.elevationInfo.mode;
    S6(n30, a36, p17, this.mapBounds, d18);
  }
  _calculateDisplayBounds() {
    const { view: s13, attachmentOrigin: t25 } = this._tool, i23 = t25?.z ?? f15(this.mapBounds.origin, s13.elevationProvider, o18.fromElevationInfo(this._tool.object.elevationInfo), s13.renderCoordsHelper);
    U7(this.mapBounds, i23 ?? 0, s13.renderCoordsHelper, this.spatialReference, this.displayBoundsMargin, this.displayBounds);
  }
};
var D10 = 10;
var O12 = 80;
function U7(s13, t25, c26, l26, m16 = 0, B4) {
  B4 || (B4 = W2());
  const M16 = c5.get();
  u5(M16, s13.origin, s13.basis1), u5(M16, M16, s13.basis2), c26.toRenderCoords(M16, l26, M16);
  const y14 = c5.get();
  u5(y14, s13.origin, s13.basis1), c4(y14, y14, s13.basis2), c26.toRenderCoords(y14, l26, y14);
  const j14 = c5.get();
  c4(j14, s13.origin, s13.basis1), c4(j14, j14, s13.basis2), c26.toRenderCoords(j14, l26, j14);
  const v14 = c5.get();
  c4(v14, s13.origin, s13.basis1), u5(v14, v14, s13.basis2), c26.toRenderCoords(v14, l26, v14), u5(B4.origin, M16, y14), u5(B4.origin, B4.origin, j14), u5(B4.origin, B4.origin, v14), g2(B4.origin, B4.origin, 0.25), c4(M16, M16, B4.origin), c4(y14, y14, B4.origin), c4(j14, j14, B4.origin), c4(v14, v14, B4.origin);
  const _10 = I2(c5.get(), M16, y14, 0.5), R14 = I2(c5.get(), j14, v14, 0.5);
  g2(R14, R14, -1), I2(B4.basis1, _10, R14, 0.5);
  const x13 = I2(c5.get(), M16, v14, 0.5), C11 = I2(c5.get(), y14, j14, 0.5);
  g2(C11, C11, -1), I2(B4.basis2, x13, C11, 0.5);
  const D11 = _3(c5.get(), B4.basis1, B4.basis2);
  _3(B4.basis2, D11, B4.basis1), A(B4.basis1, B4.basis1);
  const O13 = Math.max(Math.abs(P3(B4.basis1, M16)), Math.abs(P3(B4.basis1, y14)), Math.abs(P3(B4.basis1, j14)), Math.abs(P3(B4.basis1, v14)));
  A(B4.basis2, B4.basis2);
  const U8 = Math.max(Math.abs(P3(B4.basis2, M16)), Math.abs(P3(B4.basis2, y14)), Math.abs(P3(B4.basis2, j14)), Math.abs(P3(B4.basis2, v14)));
  g2(B4.basis1, B4.basis1, O13 + m16), g2(B4.basis2, B4.basis2, U8 + m16);
  const S20 = s6(c5.get(), s13.origin);
  return S20[2] = t25, c26.toRenderCoords(S20, l26, S20), l7(S20, D11, B4.plane), H2(B4.plane, B4.origin, B4.origin), K2(B4), B4;
}
function S18(s13, t25, i23, a36) {
  return c4(H9, c4(H9, s13.origin, s13.basis1), s13.basis2), q4(A14, H9, s13.basis1, 2), q4(k9, A14, s13.basis2, 2), q4(I13, H9, s13.basis2, 2), H9[2] = A14[2] = k9[2] = I13[2] = t25, e16({ topLeft: I13, topRight: k9, bottomRight: A14, bottomLeft: H9, spatialReference: i23, automaticLengthMeasurementUtils: a36 });
}
var I13 = n3();
var k9 = n3();
var A14 = n3();
var H9 = n3();

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentScale.js
var v13 = class {
  get _object() {
    return this._tool.object;
  }
  get _operations() {
    return this._object.operations;
  }
  get zMax() {
    if (!this._zMaxDirty || !this._operations) return this._zMax;
    const t25 = this._operations.data;
    if (t25.geometry.hasZ) {
      const e25 = t25.coordinateHelper;
      this._zMax = Number.NEGATIVE_INFINITY;
      for (const s13 of t25.components) for (const t26 of s13.vertices) {
        const s14 = e25.getZ(t26.pos) ?? 0;
        this._zMax = Math.max(s14, this._zMax);
      }
    } else this._zMax = 0;
    return this._zMaxDirty = false, this._zMax;
  }
  constructor(t25, e25, s13) {
    this._tool = t25, this._bounds = e25, this._preserveAspectRatioStep = s13, this._resizeHandles = [{ direction: [1, 0] }, { direction: [1, 1] }, { direction: [0, 1] }, { direction: [-1, 1] }, { direction: [-1, 0] }, { direction: [-1, -1] }, { direction: [0, -1] }, { direction: [1, -1] }], this._displayBoundsStart = W2(), this._displayBoundsMarginStart = 0, this._zMax = 0, this._zMaxDirty = true;
    const i23 = this._tool, a36 = i23.view;
    this.resizeManipulators = this._resizeHandles.map((t26) => {
      const e26 = new v12(a36, t26);
      return i23.addHandles([e26.events.on("grab-changed", (t27) => this._onGrabChanged(t27)), this._createResizeDragPipeline(e26, t26)]), e26;
    }), i23.manipulators.addMany(this.resizeManipulators), this._operations && i23.addHandles(this._operations.data.on("change", () => {
      "resize" !== i23.inputState?.type && (this._zMaxDirty = true);
    }));
  }
  destroy() {
    this.forEachManipulator((t25) => {
      this._tool.manipulators.remove(t25), t25.destroy();
    });
  }
  forEachManipulator(t25) {
    this.resizeManipulators.forEach((e25) => t25(e25, A10.SCALE));
  }
  updateManipulators(t25, e25) {
    this.resizeManipulators.forEach((s13, i23) => {
      gi(s13, this._resizeHandles[i23], t25, e25);
    });
  }
  getUpdatedTooltipInfo() {
    if (!this.resizeManipulators.some((t26) => t26.focused)) return null;
    const t25 = this._tooltipInfo ??= new i13({ sketchOptions: this._tool.sketchOptions }), e25 = S18(this._bounds.mapBounds, this.zMax, this._bounds.spatialReference, this._tool.automaticLengthMeasurementUtils);
    return e25 && (t25.xSize = e25.xSize, t25.ySize = e25.ySize), this.resizeManipulators.some((t26) => t26.dragging) || (t25.xScale = 1, t25.yScale = 1), t25;
  }
  _onGrabChanged({ action: t25, screenPoint: e25 }) {
    const s13 = this._tool, i23 = this._bounds;
    if ("start" !== t25 || !e25) return;
    const a36 = m12(s13.view.state.camera, e25);
    q5(i23.displayBounds.plane, a36, c5.get()) && (i23.backupMapBounds(), Z2(i23.displayBounds, this._displayBoundsStart), this._displayBoundsMarginStart = i23.displayBoundsMargin, s13.inputState = { type: "resize" });
  }
  _createResizeDragPipeline(t25, e25) {
    const { _tool: s13, _object: i23 } = this;
    return p11(t25, (t26, a36, o25) => {
      null != s13.inputState && (a36.next((t27) => ("start" === t27.action && s13.events.emit("scale-start", { object: i23, xScale: 1, yScale: 1 }), { ...t27, handle: e25 })).next(T6(s13.view, this._displayBoundsStart.plane)).next(this._renderPlaneToFactors()).next(...this._preserveAspectRatioStep()).next(this._updateGeometry()).next((t27) => {
        const e26 = this._tooltipInfo;
        e26 && (e26.xScale = t27.factor1, e26.yScale = t27.factor2);
        const a37 = { object: i23, xScale: t27.factor1, yScale: t27.factor2 };
        switch (t27.action) {
          case "start":
          case "update":
            s13.events.emit("scale", a37);
            break;
          case "end":
            s13.inputState = null, s13.events.emit("scale-stop", a37);
        }
        return t27;
      }), o25.next(() => {
        null != s13.inputState && s13.events.emit("scale-stop", { object: i23, xScale: 1, yScale: 1 }), s13.cancelDrag();
      }));
    });
  }
  _renderPlaneToFactors() {
    const t25 = this._bounds;
    return (e25) => {
      const s13 = this._displayBoundsStart, c26 = e25.handle.direction, p17 = t25.displayBoundsMargin, l26 = this._displayBoundsMarginStart, d18 = s6(c5.get(), s13.origin);
      q4(d18, d18, s13.basis1, -c26[0]), q4(d18, d18, s13.basis2, -c26[1]);
      const h23 = c4(c5.get(), e25.renderEnd, d18), m16 = c4(c5.get(), e25.renderStart, d18), S20 = Ei(e25.handle), y14 = Ii(s13), g17 = Ii(t25.displayBounds) / y14, M16 = (t26, e26) => {
        if (0 === t26) return 1;
        let s14 = r9(e26), i23 = 0.5 * t26 * P3(e26, h23) / s14;
        const a36 = i23 < 0 ? -1 : 1;
        if (S20) {
          i23 += (s14 - 0.5 * t26 * P3(e26, m16) / s14) * a36 * g17;
        }
        const o25 = s14 < 1.5 * l26 ? 1 : B3;
        return s14 = Math.max(s14 - l26, B3), a36 > 0 && (i23 -= p17), a36 * Math.max(a36 * (i23 / s14), o25);
      };
      return { ...e25, factor1: M16(c26[0], s13.basis1), factor2: M16(c26[1], s13.basis2) };
    };
  }
  _updateGeometry() {
    const o25 = this._bounds;
    return (r26) => {
      const n30 = s6(n3(), o25.mapBoundsStart.origin);
      q4(n30, n30, o25.mapBoundsStart.basis1, -r26.handle.direction[0]), q4(n30, n30, o25.mapBoundsStart.basis2, -r26.handle.direction[1]);
      const p17 = o8(n6(), o25.mapBoundsStart.basis1[0], o25.mapBoundsStart.basis1[1]);
      v3(p17, p17);
      const d18 = "start" === r26.action ? E8.NEW_STEP : E8.ACCUMULATE_STEPS;
      if (this._operations) {
        const t25 = this._operations.scale(n30, p17, r26.factor1, r26.factor2, d18, e12.REPLACE);
        Z2(o25.mapBoundsStart, o25.mapBounds), o25.updateMapBoundsFromOperation(t25);
      }
      return r26;
    };
  }
};
var B3 = 1e-6;

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/PreserveAspectRatio.js
var a35 = class {
  constructor() {
    this._lastDragEvent = null, this._next = null, this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t25) {
    if (this._enabled !== t25 && null != this._lastDragEvent && null != this._next) {
      const e25 = { ...this._lastDragEvent, action: "update" };
      t25 && n27(e25), this._next.execute(e25);
    }
    this._enabled = t25;
  }
  createDragEventPipelineStep() {
    this._lastDragEvent = null;
    const t25 = new w7();
    return this._next = t25, [(t26) => (this._lastDragEvent = "end" !== t26.action ? { ...t26 } : null, this._enabled && n27(t26), t26), t25];
  }
  get test() {
  }
};
function n27(e25) {
  const a36 = Ei(e25.handle) ? Math.max(Math.abs(e25.factor1), Math.abs(e25.factor2)) : 0 === e25.handle.direction[0] ? Math.abs(e25.factor2) : Math.abs(e25.factor1);
  e25.factor1 = e25.factor1 < 0 ? -a36 : a36, e25.factor2 = e25.factor2 < 0 ? -a36 : a36;
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/SnapRotation.js
var n28 = class {
  constructor() {
    this._lastDragEvent = null, this._next = null, this.incrementRadians = s(5), this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(t25) {
    if (this._enabled !== t25 && null != this._lastDragEvent && null != this._next) {
      const e25 = { ...this._lastDragEvent, action: "update" };
      t25 && this._adjustRotation(e25), this._next.execute(e25);
    }
    this._enabled = t25;
  }
  createDragEventPipelineStep() {
    this._lastDragEvent = null;
    const t25 = new w7();
    return this._next = t25, [(t26) => (this._lastDragEvent = "end" !== t26.action ? { ...t26 } : null, this._enabled && this._adjustRotation(t26), t26), t25];
  }
  _adjustRotation(t25) {
    t25.rotateAngle = Math.round(t25.rotateAngle / this.incrementRadians) * this.incrementRadians;
  }
};

// node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ExtentTransformTool.js
var S19 = class extends n14 {
  get updating() {
    return !!this.object.updating;
  }
  constructor(t25) {
    super(t25), this.events = new o3(), this.enableZ = true, this.enableScaling = true, this.enableRotation = true, this.sketchOptions = new c12(), this._preserveAspectRatio = new a35(), this._snapRotation = new n28(), this.grabbing = false, this.inputState = null, this._attachmentOrigin = null, this.type = "transform-3d", this._outlineVisualElement = null;
  }
  initialize() {
    const { view: t25, object: e25 } = this, s13 = this._bounds = new C10(this, () => this._updateManipulators());
    this._extentMove = new j12(this, s13, this.automaticLengthMeasurementUtils), this._extentScale = new v13(this, s13, () => this._preserveAspectRatio.createDragEventPipelineStep()), this._extentRotate = new M14(this, s13, () => this._snapRotation.createDragEventPipelineStep()), this.addHandles([l3(() => this.enableZ, () => this._updateManipulatorAvailability(this._extentMove.moveZManipulator, A10.TRANSLATE_Z)), l3(() => this.enableScaling, () => this._extentScale.forEachManipulator((t26) => this._updateManipulatorAvailability(t26, A10.SCALE))), l3(() => this.enableRotation, () => this._updateManipulatorAvailability(this._extentRotate.rotateManipulator, A10.ROTATE))]), this._updateManipulators(), this._updateAllManipulatorAvailability();
    const n30 = l16({ view: t25, object: e25, forEachManipulator: (t26) => this._forEachManipulator(t26), onManipulatorsChanged: () => e() });
    if (null != n30) {
      const { visualElement: t26 } = n30;
      t26 instanceof j8 && (this._outlineVisualElement = t26, this.addHandles(t26.events.on("attachment-origin-changed", () => this._bounds.updateDisplayBounds()))), this.addHandles(n30);
    }
    this.addHandles([e25.on("committed", () => this._onGeometryChanged()), l3(() => this.object.visible, () => this._updateAllManipulatorAvailability()), l3(() => this.object.isDraped, () => this._graphicDrapedChanged(), h), l3(() => t25.pointsOfInterest?.centerOnSurfaceFrequent.location, () => s13.updateDisplayBounds())]);
    const r26 = (t26) => {
      this.addHandles(t26.events.on("grab-changed", () => {
        this.grabbing = t26.grabbing, this._updateAllManipulatorAvailability();
      }));
    };
    this._forEachManipulator(r26);
    const l26 = (t26, i23) => {
      this.addHandles(t26.events.on("immediate-click", (t27) => {
        i23 === A10.TRANSLATE_XY && this.events.emit("immediate-click", { ...t27, object: e25 }), t27.stopPropagation();
      }));
    };
    this._forEachManipulator(l26), this._initializeTooltip(), this.finishToolCreation();
  }
  destroy() {
    this._extentMove.destroy(), this._extentScale.destroy(), this._extentRotate.destroy(), this.tooltip.destroy(), this._set("view", null), this._set("object", null);
  }
  _initializeTooltip() {
    const { view: t25 } = this;
    this.tooltip = R6(() => ({ view: t25, options: this.sketchOptions.tooltips }));
    const e25 = () => {
      this.tooltip.info = this._getUpdatedTooltipInfo();
    };
    this.addHandles([l3(() => this.sketchOptions.tooltips.effectiveEnabled, e25), l3(() => this.preserveAspectRatio, e25)]), this._forEachManipulator((t26) => {
      this.addHandles([t26.events.on(["focus-changed", "grab-changed"], e25), t26.events.on("drag", (t27) => {
        "cancel" === t27.action ? this.tooltip.clear() : e25();
      })]);
    });
  }
  _getUpdatedTooltipInfo() {
    return this.sketchOptions.tooltips.effectiveEnabled ? this._extentMove.getUpdatedTooltipInfo() ?? this._extentScale.getUpdatedTooltipInfo() ?? this._extentRotate.getUpdatedTooltipInfo() : null;
  }
  _onGeometryChanged() {
    this._bounds.updateDisplayBounds();
  }
  _graphicDrapedChanged() {
    this.removeHandles(T8), this._bounds.updateDisplayBounds(), this.object.isDraped && this.addHandles(this.view.elevationProvider.on("elevation-change", (t25) => {
      null != this._attachmentOrigin && w3(t25.extent, this._attachmentOrigin.x, this._attachmentOrigin.y) && this._bounds.updateDisplayBounds();
    }), T8);
  }
  _updateManipulators() {
    if (!this.visible) return;
    const t25 = this._bounds.displayBounds, e25 = ci(t25, f6.get());
    this._extentMove.updateManipulators(e25, t25), this._extentScale.updateManipulators(e25, t25), this._extentRotate.updateManipulators(e25, t25);
  }
  _updateAllManipulatorAvailability() {
    this._forEachManipulator((t25, e25) => this._updateManipulatorAvailability(t25, e25));
  }
  _updateManipulatorAvailability(t25, e25) {
    const i23 = this.grabbing && !t25.grabbing;
    if (t25.interactive = !i23, t25 instanceof ee2) {
      const o25 = this.object.visible, a36 = this.enableZ && o21(this.object.operations, this.object.elevationInfo);
      switch (e25) {
        case A10.ROTATE:
          t25.available = o25 && this.enableRotation;
          break;
        case A10.SCALE:
          t25.available = o25 && (this.enableScaling || this.enableRotation || a36), t25.interactive = !i23 && this.enableScaling, t25.state = this.enableScaling ? Ui : Hi;
          break;
        case A10.TRANSLATE_Z:
          t25.available = o25 && a36;
          break;
        default:
          t25.available = o25;
      }
    }
  }
  _forEachManipulator(t25) {
    this._extentMove.forEachManipulator(t25), this._extentScale.forEachManipulator(t25), this._extentRotate.forEachManipulator(t25);
  }
  get preserveAspectRatio() {
    return this._preserveAspectRatio.enabled;
  }
  set preserveAspectRatio(t25) {
    this._preserveAspectRatio.enabled = t25, this._set("preserveAspectRatio", t25);
  }
  get snapRotation() {
    return this._snapRotation.enabled;
  }
  set snapRotation(t25) {
    this._snapRotation.enabled = t25, this._set("snapRotation", t25);
  }
  get attachmentOrigin() {
    const t25 = this.object.isDraped ? null : this._outlineVisualElement?.attachmentOrigin;
    return this._attachmentOrigin = t25 ?? this.object.origin ?? t17(this.object)?.extent?.center, this._attachmentOrigin;
  }
  reset() {
  }
  cancelDrag() {
    if (this.canUndo) {
      const t25 = this.object.operations?.undo();
      t25 && this._bounds.updateMapBoundsFromOperationInverse(t25);
    }
    this.inputState = null;
  }
  get canUndo() {
    return !!this.object.operations?.canUndo;
  }
  undo() {
    if (null != this.inputState) this.view.activeTool = null;
    else if (this.canUndo) {
      const t25 = this.object.operations?.undo();
      t25 && this._bounds.updateMapBoundsFromOperationInverse(t25);
    }
  }
  get canRedo() {
    return !!this.object.operations?.canRedo;
  }
  redo() {
    if (this.canRedo) {
      const t25 = this.object.operations?.redo();
      t25 && this._bounds.updateMapBoundsFromOperation(t25);
    }
  }
  get test() {
  }
};
r([m()], S19.prototype, "updating", null), r([m({ constructOnly: true, nonNullable: true })], S19.prototype, "view", void 0), r([m({ constructOnly: true })], S19.prototype, "automaticLengthMeasurementUtils", void 0), r([m({ constructOnly: true, nonNullable: true })], S19.prototype, "object", void 0), r([m()], S19.prototype, "enableZ", void 0), r([m()], S19.prototype, "enableScaling", void 0), r([m()], S19.prototype, "enableRotation", void 0), r([m({ constructOnly: true, type: c12 })], S19.prototype, "sketchOptions", void 0), r([m()], S19.prototype, "preserveAspectRatio", null), r([m()], S19.prototype, "snapRotation", null), r([m()], S19.prototype, "grabbing", void 0), r([m()], S19.prototype, "inputState", void 0), r([m({ readOnly: true })], S19.prototype, "type", void 0), r([m()], S19.prototype, "tooltip", void 0), S19 = r([a2("esri.views.3d.interactive.editingTools.transform.ExtentTransformTool")], S19);
var T8 = "draped-elevation-changes";

// node_modules/@arcgis/core/views/3d/interactive/editingTools/undoRecords.js
function r25(e25) {
  return null != e25 && "mesh" === e25.type ? o24(e25) : n29(e25);
}
function o24(e25) {
  return t6(e25.vertexSpace) ? i22(e25, e25.transform, e25.vertexSpace) : l24(e25);
}
function n29(e25) {
  let t25 = e25, r26 = null;
  return { undo(e26) {
    r26 = e26.geometry, e26.geometry = t25;
  }, redo(e26) {
    t25 = e26.geometry, e26.geometry = r26;
  } };
}
function i22(t25, r26, o25) {
  let n30 = r26?.clone(), i23 = t4(o25.origin), l26 = null, u23 = null;
  return { undo: () => {
    l26 = t25.transform?.clone(), u23 = t4(o25.origin), t25.transform = n30, t25.vertexSpace.origin = i23;
  }, redo: () => {
    n30 = t25.transform?.clone(), i23 = t4(o25.origin), t25.transform = l26, t25.vertexSpace.origin = u23;
  } };
}
function l24(e25) {
  let t25, r26 = e25.vertexAttributes.clonePositional();
  return { undo: () => {
    t25 = e25.vertexAttributes.clonePositional(), e25.vertexAttributes = r26;
  }, redo: () => {
    r26 = e25.vertexAttributes.clonePositional(), e25.vertexAttributes = t25;
  } };
}

// node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatedObject3DGraphic.js
var l25 = Symbol();
var u22 = class extends o3.EventedAccessor {
  get operations() {
    return this._operations;
  }
  get updating() {
    return this._updatingHandles.updating;
  }
  get elevationInfo() {
    return a11(this.graphic);
  }
  get visible() {
    return this._graphicState.displaying;
  }
  get isDraped() {
    return this._graphicState.isDraped;
  }
  get origin() {
    return D7(this.view, this.graphic);
  }
  constructor(t25) {
    super(t25), this._updatingHandles = new h8();
  }
  destroy() {
    this._operations = u2(this._operations), this._updatingHandles.destroy();
  }
  initialize() {
    this._graphicState = new e15({ graphic: this.graphic }), this._graphicState.on("changed", () => this.emit("committed")), this.addHandles(this.view.trackGraphicState(this._graphicState)), this.addHandles(this._updatingHandles.add(() => this.graphic.geometry, (t25) => {
      const e25 = this._operations?.data.geometry;
      if (t25 !== e25) {
        if (!t25 || "multipoint" === t25?.type || "extent" === t25?.type) return u2(this._operations), this.removeHandles(l25), void (this._operations = null);
        if (this._operations?.trySetGeometry(t25)) this.emit("modified-externally");
        else {
          u2(this._operations), this.removeHandles(l25);
          const e26 = E9.fromGeometry(t25, this.view.state.viewingMode);
          this._operations = e26, this.addHandles(e26.data.on("change", () => this.graphic.geometry = e26.data.geometry), l25);
        }
      }
    }, w2));
  }
  createManipulator(t25) {
    return new S5({ view: this.view, graphic: this.graphic, ...t25 });
  }
  maskOccludee() {
    return this.view.maskOccludee(this.graphic);
  }
  endInteraction() {
    const t25 = this.graphic.geometry;
    "mesh" === t25?.type && this.graphic.notifyMeshTransformChanged({ action: a18.UpdateFastLocalOrigin });
  }
  toMap(t25) {
    return this.view.toMap(t25, { include: [this.graphic] });
  }
  createUndoRecord() {
    const { graphic: { geometry: t25 } } = this;
    return r25(t25);
  }
};
r([m({ constructOnly: true })], u22.prototype, "view", void 0), r([m({ constructOnly: true })], u22.prototype, "graphic", void 0), r([m()], u22.prototype, "_operations", void 0), r([m()], u22.prototype, "operations", null), r([m()], u22.prototype, "updating", null), u22 = r([a2("esri.views.3d.interactive.editingTools.ManipulatedObject3DGraphic")], u22);
export {
  z9 as DrawGraphicTool3D,
  S19 as ExtentTransformTool,
  u22 as ManipulatedObject3DGraphic,
  Q3 as MoveTool3D,
  h21 as ReshapeTool3D,
  z10 as TransformTool3D
};
//# sourceMappingURL=editingTools-X4XGKBIC.js.map
