{"version":3,"file":"elevation.umd.min.js","sources":["../../src/utils.ts","../../src/findElevationAtManyPoints.ts","../../src/findElevationAtPoint.ts"],"sourcesContent":["export const baseUrl =\n  \"https://elevation-api.arcgis.com/arcgis/rest/services/elevation-service/v1\";\n","import {\n  request,\n  appendCustomParams,\n  IRequestOptions\n} from \"@esri/arcgis-rest-request\";\n\nimport { operations } from \"./openapi-types.js\";\nimport { baseUrl } from \"./utils.js\";\n\n// determine the list of allowed params we want to allow as options\n// this should match the array given to appendCustomParams below\ntype queryParams = Pick<\n  operations[\"ElevationAtManyPointsPost\"][\"requestBody\"][\"content\"][\"application/json\"],\n  \"coordinates\" | \"relativeTo\"\n>;\n\n// get the correct type of the response format\ntype successResponse =\n  operations[\"ElevationAtManyPointsPost\"][\"responses\"][\"200\"][\"content\"][\"application/json\"];\n\n/**\n * The response format for {@linkcode findElevationAtPoint};\n */\nexport interface IFindElevationAtManyPointsResponse extends successResponse {}\n\n/**\n * Options for {@linkcode findElevationAtPoint}.\n */\nexport interface IFindElevationAtManyPointsOptions\n  extends Omit<IRequestOptions, \"httpMethod\" | \"f\">,\n    queryParams {}\n\n/**\n * This method returns elevations in meters at given longitudes and latitudes\n * within the WGS84 coordinate system. The order of the points returned by this\n * request will be the same as the order of the points passed in the coordinates\n * parameter.\n *\n * If the distance between the furthest West and furthest East coordinate or\n * the furthest North and furthest South coordinate exceeds 50km, the service\n * will return a 400 HTTP response as the distance between these points is too\n * large.\n *\n * By default the elevation is measured with respect to the Earth's mean sea level.\n * It takes into account the local variations in gravity and provides a consistent\n * vertical reference.\n *\n * If the relativeTo query parameter is set to `ellipsoid`, the elevation will be\n * measured with respect to the ellipsoid. This is a mathematical model that\n * approximates the shape of the Earth. It does not consider local variations\n * in gravity and is commonly used in GPS positioning.\n *\n * ```\n * import { findElevationAtManyPoints } from \"@esri/arcgis-rest-elevation\";\n * import { ApiKeyManager } from \"@esri/arcgis-rest-request\";\n *\n * const results = await findElevationAtManyPoints({\n *   coordinates: [[31.134167, 29.979167], [31.130833, 29.976111], [31.128333, 29.9725]],\n *   authentication: ApiKeyManager.fromKey(\"YOUR_ACCESS_TOKEN\");\n * });\n *\n * console.log(results)\n * ```\n */\nexport function findElevationAtManyPoints(\n  requestOptions: IFindElevationAtManyPointsOptions\n): Promise<IFindElevationAtManyPointsResponse> {\n  const options: any = appendCustomParams<IFindElevationAtManyPointsOptions>(\n    requestOptions,\n    [\"relativeTo\"],\n    {\n      ...requestOptions\n    }\n  );\n\n  options.params.coordinates = JSON.stringify(requestOptions.coordinates);\n\n  return (\n    request(`${baseUrl}/elevation/at-many-points`, {\n      ...options\n    }) as Promise<successResponse>\n  ).then((response) => {\n    const r: IFindElevationAtManyPointsResponse = {\n      ...response\n    };\n\n    return r;\n  });\n}\n","import {\n  request,\n  appendCustomParams,\n  IRequestOptions\n} from \"@esri/arcgis-rest-request\";\n\nimport { operations } from \"./openapi-types.js\";\nimport { baseUrl } from \"./utils.js\";\n\n// determine the list of allowed params we want to allow as options\n// this should match the array given to appendCustomParams below\ntype queryParams = Pick<\n  operations[\"ElevationAtPointGet\"][\"parameters\"][\"query\"],\n  \"lon\" | \"lat\" | \"relativeTo\"\n>;\n\n// get the correct type of the response format\ntype successResponse =\n  operations[\"ElevationAtPointGet\"][\"responses\"][\"200\"][\"content\"][\"application/json\"];\n\n/**\n * The response format for {@linkcode findElevationAtPoint};\n */\nexport interface IFindElevationAtPointResponse extends successResponse {}\n\n/**\n * Options for {@linkcode findElevationAtPoint}.\n */\nexport interface IFindElevationAtPointOptions\n  extends Omit<IRequestOptions, \"httpMethod\" | \"f\">,\n    queryParams {}\n\n/**\n * This method returns the elevation in meters at a given longitude and latitude\n * within the WGS84 coordinate system. By default the elevation is measured with\n * respect to the Earth's mean sea level. It takes into account the local\n * variations in gravity and provides a consistent vertical reference.\n *\n * If the relativeTo query parameter is set to `ellipsoid`, the elevation will be\n * measured with respect to the ellipsoid. This is a mathematical model that\n * approximates the shape of the Earth. It does not consider local variations\n * in gravity and is commonly used in GPS positioning.\n *\n * ```\n * import { findElevationAtPoint } from \"@esri/arcgis-rest-elevation\";\n * import { ApiKeyManager } from \"@esri/arcgis-rest-request\";\n *\n * const results = await findElevationAtPoint({\n *   lon: -179.99,\n *   lat: -85.05,\n *   authentication: ApiKeyManager.fromKey(\"YOUR_ACCESS_TOKEN\");\n * });\n *\n * console.log(results)\n * ```\n */\nexport function findElevationAtPoint(\n  requestOptions: IFindElevationAtPointOptions\n): Promise<IFindElevationAtPointResponse> {\n  const options = appendCustomParams<IFindElevationAtPointOptions>(\n    requestOptions,\n    [\"lon\", \"lat\", \"relativeTo\"],\n    {\n      ...requestOptions\n    }\n  );\n\n  return (\n    request(`${baseUrl}/elevation/at-point`, {\n      ...options,\n      httpMethod: \"GET\"\n    }) as Promise<successResponse>\n  ).then((response) => {\n    const r: IFindElevationAtPointResponse = {\n      ...response\n    };\n\n    return r;\n  });\n}\n"],"names":["baseUrl","requestOptions","options","appendCustomParams","params","coordinates","JSON","stringify","request","then","response","httpMethod"],"mappings":";;;;;gVAAO,MAAMA,EACX,kHCgEAC,GAEA,MAAMC,EAAeC,qBACnBF,EACA,CAAC,+BAEIA,IAMP,OAFAC,EAAQE,OAAOC,YAAcC,KAAKC,UAAUN,EAAeI,aAGzDG,UAAQ,GAAGR,8CACNE,IAELO,MAAMC,oBAEDA,IAKT,kCC/BET,GAEA,MAAMC,EAAUC,qBACdF,EACA,CAAC,MAAO,MAAO,+BAEVA,IAIP,OACEO,UAAQ,GAAGR,sDACNE,IACHS,WAAY,SAEdF,MAAMC,oBAEDA,IAKT"}